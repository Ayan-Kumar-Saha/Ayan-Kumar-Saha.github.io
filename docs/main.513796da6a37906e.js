var B9=Object.defineProperty,j9=Object.defineProperties,V9=Object.getOwnPropertyDescriptors,FI=Object.getOwnPropertySymbols,H9=Object.prototype.hasOwnProperty,$9=Object.prototype.propertyIsEnumerable,LI=(so,Di,kn)=>Di in so?B9(so,Di,{enumerable:!0,configurable:!0,writable:!0,value:kn}):so[Di]=kn,At=(so,Di)=>{for(var kn in Di||(Di={}))H9.call(Di,kn)&&LI(so,kn,Di[kn]);if(FI)for(var kn of FI(Di))$9.call(Di,kn)&&LI(so,kn,Di[kn]);return so},Cs=(so,Di)=>j9(so,V9(Di));(self.webpackChunkdesignerTest=self.webpackChunkdesignerTest||[]).push([[179],{167:function(so){so.exports=function(){"use strict";var Di="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},kn={exports:{}};kn.exports="function"==typeof Object.create?function(r,s){s&&(r.super_=s,r.prototype=Object.create(s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:function(r,s){if(s){r.super_=s;var c=function(){};c.prototype=s.prototype,r.prototype=new c,r.prototype.constructor=r}};var r,s,Oe=kn.exports,Wd=(r=function(r){var s=r.exports=function(c,l){if(l||(l=16),void 0===c&&(c=128),c<=0)return"0";for(var d=Math.log(Math.pow(2,c))/Math.log(l),h=2;d===1/0;h*=2)d=Math.log(Math.pow(2,c/h))/Math.log(l)*h;var f=d-Math.floor(d),g="";for(h=0;h<Math.floor(d);h++)g=Math.floor(Math.random()*l).toString(l)+g;if(f){var v=Math.pow(l,f);g=Math.floor(Math.random()*v).toString(l)+g}var b=parseInt(g,l);return b!==1/0&&b>=Math.pow(2,c)?s(c,l):g};s.rack=function(c,l,d){var h=function(g){var v=0;do{if(v++>10){if(!d)throw new Error("too many ID collisions, use more bits");c+=d}var b=s(c,l)}while(Object.hasOwnProperty.call(f,b));return f[b]=g,b},f=h.hats={};return h.get=function(g){return h.hats[g]},h.set=function(g,v){return h.hats[g]=v,h},h.bits=c||128,h.base=l||16,h}},r(s={exports:{}}),s.exports);function lr(r){if(!(this instanceof lr))return new lr(r);this._seed=(r=r||[128,36,1]).length?Wd.rack(r[0],r[1],r[2]):r}function Ar(r){return Array.prototype.concat.apply([],r)}lr.prototype.next=function(r){return this._seed(r||!0)},lr.prototype.nextPrefixed=function(r,s){var c;do{c=r+this.next(!0)}while(this.assigned(c));return this.claim(c,s),c},lr.prototype.claim=function(r,s){this._seed.set(r,s||!0)},lr.prototype.assigned=function(r){return this._seed.get(r)||!1},lr.prototype.unclaim=function(r){delete this._seed.hats[r]},lr.prototype.clear=function(){var r,s=this._seed.hats;for(r in s)this.unclaim(r)};var vn=Object.prototype.toString,El=Object.prototype.hasOwnProperty;function Ss(r){return void 0===r}function Ai(r){return void 0!==r}function Ds(r){return null==r}function bt(r){return"[object Array]"===vn.call(r)}function Xn(r){return"[object Object]"===vn.call(r)}function Re(r){return"[object Number]"===vn.call(r)}function di(r){var s=vn.call(r);return"[object Function]"===s||"[object AsyncFunction]"===s||"[object GeneratorFunction]"===s||"[object AsyncGeneratorFunction]"===s||"[object Proxy]"===s}function Lr(r){return"[object String]"===vn.call(r)}function Jo(r,s){return El.call(r,s)}function tn(r,s){var c;return s=Kd(s),ne(r,function(l,d){if(s(l,d))return c=l,!1}),c}function gt(r,s){var c=[];return ne(r,function(l,d){s(l,d)&&c.push(l)}),c}function ne(r,s){var c;if(!Ss(r)){var l=bt(r)?yt:Yd;for(var d in r)if(Jo(r,d)&&!1===s(c=r[d],l(d)))return c}}function Xe(r,s,c){return ne(r,function(l,d){c=s(c,l,d)}),c}function ur(r,s){return!!Xe(r,function(c,l,d){return c&&s(l,d)},!0)}function jt(r,s){return!!tn(r,s)}function Qn(r,s){var c=[];return ne(r,function(l,d){c.push(s(l,d))}),c}function Ys(r){return r&&Object.keys(r)||[]}function Xs(r){return Ys(r).length}function gc(r){return Qn(r,function(s){return s})}function pn(r,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s=qd(s),ne(r,function(l){var d=s(l)||"_",h=c[d];h||(h=c[d]=[]),h.push(l)}),c}function zp(r){r=qd(r);for(var s={},c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];return ne(l,function(f){return pn(f,r,s)}),Qn(s,function(f,g){return f[0]})}var Gd=zp;function Be(r,s){s=qd(s);var c=[];return ne(r,function(l,d){for(var h=s(l,d),f={d:h,v:l},g=0;g<c.length;g++)if(h<c[g].d)return void c.splice(g,0,f);c.push(f)}),Qn(c,function(l){return l.v})}function Br(r){return function(s){return ur(r,function(c,l){return s[l]===c})}}function qd(r){return di(r)?r:function(s){return s[r]}}function Kd(r){return di(r)?r:function(s){return s===r}}function Yd(r){return r}function yt(r){return Number(r)}function es(r,s){var c,l,d,h;function f(){var v=Date.now(),b=h+s-v;if(b>0)return g(b);r.apply(d,l),c=h=l=d=void 0}function g(v){c=setTimeout(f,v)}return function(){h=Date.now();for(var v=arguments.length,b=new Array(v),w=0;w<v;w++)b[w]=arguments[w];l=b,d=this,c||g(s)}}function Ti(r,s){return r.bind(s)}function Ln(){return(Ln=Object.assign||function(r){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(r[l]=c[l])}return r}).apply(this,arguments)}function oe(r){for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];return Ln.apply(void 0,[r].concat(c))}function Pt(r,s){var c={},l=Object(r);return ne(s,function(d){d in l&&(c[d]=r[d])}),c}function Zt(r,s){var c={};return ne(Object(r),function(l,d){-1===s.indexOf(d)&&(c[d]=l)}),c}function jr(r,s,c){return 2==arguments.length?r.getAttribute(s):null===c?r.removeAttribute(s):(r.setAttribute(s,c),r)}var Xd=[].indexOf,yc=function(r,s){if(Xd)return r.indexOf(s);for(var c=0;c<r.length;++c)if(r[c]===s)return c;return-1},Eg=/\s+/,X_=Object.prototype.toString;function Yi(r){return new ts(r)}function ts(r){if(!r||!r.nodeType)throw new Error("A DOM element reference is required");this.el=r,this.list=r.classList}function Mu(r){for(;r.childNodes.length;)r.removeChild(r.childNodes[0]);return r}ts.prototype.add=function(r){if(this.list)return this.list.add(r),this;var s=this.array();return~yc(s,r)||s.push(r),this.el.className=s.join(" "),this},ts.prototype.remove=function(r){if("[object RegExp]"==X_.call(r))return this.removeMatching(r);if(this.list)return this.list.remove(r),this;var s=this.array(),c=yc(s,r);return~c&&s.splice(c,1),this.el.className=s.join(" "),this},ts.prototype.removeMatching=function(r){for(var s=this.array(),c=0;c<s.length;c++)r.test(s[c])&&this.remove(s[c]);return this},ts.prototype.toggle=function(r,s){return this.list?(void 0!==s?s!==this.list.toggle(r,s)&&this.list.toggle(r):this.list.toggle(r),this):(void 0!==s?s?this.add(r):this.remove(r):this.has(r)?this.remove(r):this.add(r),this)},ts.prototype.array=function(){var r=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Eg);return""===r[0]&&r.shift(),r},ts.prototype.has=ts.prototype.contains=function(r){return this.list?this.list.contains(r):!!~yc(this.array(),r)};var Ma="undefined"!=typeof Element?Element.prototype:{},Up=Ma.matches||Ma.matchesSelector||Ma.webkitMatchesSelector||Ma.mozMatchesSelector||Ma.msMatchesSelector||Ma.oMatchesSelector,wl=function(r,s){if(!r||1!==r.nodeType)return!1;if(Up)return Up.call(r,s);for(var c=r.parentNode.querySelectorAll(s),l=0;l<c.length;l++)if(c[l]==r)return!0;return!1};function ko(r,s,c){for(var l=c?r:r.parentNode;l&&l.nodeType!==document.DOCUMENT_NODE&&l.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(wl(l,s))return l;l=l.parentNode}return wl(l,s)?l:null}var Xi,vc=window.addEventListener?"addEventListener":"attachEvent",wg=window.removeEventListener?"removeEventListener":"detachEvent",Qd="addEventListener"!==vc?"on":"",Ze={bind:function(r,s,c,l){return r[vc](Qd+s,c,l||!1),c},unbind:function(r,s,c,l){return r[wg](Qd+s,c,l||!1),c}},_c=["focus","blur"],vt_bind=function(r,s,c,l,d){return-1!==_c.indexOf(c)&&(d=!0),Ze.bind(r,c,function(h){h.delegateTarget=ko(h.target||h.srcElement,s,!0),h.delegateTarget&&l.call(r,h)},d)},vt_unbind=function(r,s,c,l){return-1!==_c.indexOf(s)&&(l=!0),Ze.unbind(r,s,c,l)},ke=function(r,s){if("string"!=typeof r)throw new TypeError("String expected");s||(s=document);var c=/<([\w:]+)/.exec(r);if(!c)return s.createTextNode(r);r=r.replace(/^\s+|\s+$/g,"");var l=c[1];if("body"==l)return(d=s.createElement("html")).innerHTML=r,d.removeChild(d.lastChild);var d,h=Mi[l]||Mi._default,f=h[0],g=h[1],v=h[2];for((d=s.createElement("div")).innerHTML=g+r+v;f--;)d=d.lastChild;if(d.firstChild==d.lastChild)return d.removeChild(d.firstChild);for(var b=s.createDocumentFragment();d.firstChild;)b.appendChild(d.removeChild(d.firstChild));return b},bc=!1;"undefined"!=typeof document&&((Xi=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',bc=!Xi.getElementsByTagName("link").length,Xi=void 0);var Mi={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:bc?[1,"X<div>","</div>"]:[0,"",""]};function Un(r,s){return(s=s||document).querySelector(r)}function Wp(r,s){return(s=s||document).querySelectorAll(r)}function As(r){r.parentNode&&r.parentNode.removeChild(r)}function xl(r,s){return s.appendChild(function(c,l){if(c.ownerDocument!==l.ownerDocument)try{return l.ownerDocument.importNode(c,!0)}catch(d){}return c}(r,s))}function ut(r,s){return xl(s,r),r}Mi.td=Mi.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Mi.option=Mi.optgroup=[1,'<select multiple="multiple">',"</select>"],Mi.thead=Mi.tbody=Mi.colgroup=Mi.caption=Mi.tfoot=[1,"<table>","</table>"],Mi.polyline=Mi.ellipse=Mi.polygon=Mi.circle=Mi.text=Mi.line=Mi.path=Mi.rect=Mi.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Ru={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Qs(r,s,c){var l=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=Ru[l];d?(2===d&&"number"==typeof c&&(c=String(c)+"px"),r.style[l]=c):r.setAttributeNS(null,s,c)}function Ne(r,s,c){if("string"==typeof s){if(void 0===c)return l=r,Ru[d=s]?l.style[d]:l.getAttributeNS(null,d);Qs(r,s,c)}else!function(l,d){var h,f,g=Object.keys(d);for(h=0;f=g[h];h++)Qs(l,f,d[f])}(r,s);var l,d;return r}function ku(r,s){if(r.indexOf)return r.indexOf(s);for(var c=0;c<r.length;++c)if(r[c]===s)return c;return-1}var Zd=/\s+/,Gp=Object.prototype.toString;function Cl(r){return void 0!==r}function $t(r){return new yi(r)}function yi(r){if(!r||!r.nodeType)throw new Error("A DOM element reference is required");this.el=r,this.list=r.classList}function ri(r){var s=r.parentNode;return s&&s.removeChild(r),r}function Sl(r){for(var s;s=r.firstChild;)ri(s);return r}function Pu(r){return r.cloneNode(!0)}yi.prototype.add=function(r){if(this.list)return this.list.add(r),this;var s=this.array();return~ku(s,r)||s.push(r),Cl(this.el.className.baseVal)?this.el.className.baseVal=s.join(" "):this.el.className=s.join(" "),this},yi.prototype.remove=function(r){if("[object RegExp]"===Gp.call(r))return this.removeMatching(r);if(this.list)return this.list.remove(r),this;var s=this.array(),c=ku(s,r);return~c&&s.splice(c,1),this.el.className.baseVal=s.join(" "),this},yi.prototype.removeMatching=function(r){for(var s=this.array(),c=0;c<s.length;c++)r.test(s[c])&&this.remove(s[c]);return this},yi.prototype.toggle=function(r,s){return this.list?(Cl(s)?s!==this.list.toggle(r,s)&&this.list.toggle(r):this.list.toggle(r),this):(Cl(s)?s?this.add(r):this.remove(r):this.has(r)?this.remove(r):this.add(r),this)},yi.prototype.array=function(){var r=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Zd);return""===r[0]&&r.shift(),r},yi.prototype.has=yi.prototype.contains=function(r){return this.list?this.list.contains(r):!!~ku(this.array(),r)};var Ts="http://www.w3.org/2000/svg",Iu='<svg xmlns="'+Ts+'"';function hi(r){var s=!1;"<svg"===r.substring(0,4)?-1===r.indexOf(Ts)&&(r=Iu+r.substring(4)):(r=Iu+">"+r+"</svg>",s=!0);var h,f,c=(h=r,(f=new DOMParser).async=!1,f.parseFromString(h,"text/xml"));if(!s)return c;for(var l=document.createDocumentFragment(),d=c.firstChild;d.firstChild;)l.appendChild(d.firstChild);return l}function st(r,s){var c;return"<"===r.charAt(0)?(c=hi(r).firstChild,c=document.importNode(c,!0)):c=document.createElementNS(Ts,r),s&&Ne(c,s),c}var Vr=st("svg");function Jd(r,s){var c,l,d=Object.keys(s);for(c=0;l=d[c];c++)r[l]=s[l];return r}function qn(r){return r?Vr.createSVGTransformFromMatrix(r):Vr.createSVGTransform()}var Ec=/([&<>]{1})/g,Qi=/([\n\r"]{1})/g,Q_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Zs(r,s){return r.replace(s,function(c,l){return Q_[l]||l})}function Ms(r,s){var c,l,d,h,f;switch(r.nodeType){case 3:s.push(Zs(r.textContent,Ec));break;case 1:if(s.push("<",r.tagName),r.hasAttributes())for(c=0,l=(d=r.attributes).length;c<l;++c)h=d.item(c),s.push(" ",h.name,'="',Zs(h.value,Qi),'"');if(r.hasChildNodes()){for(s.push(">"),c=0,l=(f=r.childNodes).length;c<l;++c)Ms(f.item(c),s);s.push("</",r.tagName,">")}else s.push("/>");break;case 8:s.push("\x3c!--",Zs(r.nodeValue,Ec),"--\x3e");break;case 4:s.push("<![CDATA[",r.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+r.nodeType)}return s}function th(r,s){if(void 0!==s){try{!function(r,s){var c=hi(s);if(Sl(r),s){"#document-fragment"===c.nodeName||(c=c.documentElement);for(var d=Array.prototype.slice.call(c.childNodes),h=0;h<d.length;h++)xl(d[h],r)}}(r,s)}catch(c){throw new Error("error parsing SVG: "+c.message)}return r}return function(c){for(var l=c.firstChild,d=[];l;)Ms(l,d),l=l.nextSibling;return d.join("")}(r)}function Dl(r,s){return s instanceof SVGMatrix?r.createSVGTransformFromMatrix(s):s}function Al(r,s){var c=r.transform.baseVal;return s&&(Array.isArray(s)||(s=[s]),function(l,d){var h,f;for(l.clear(),h=0;f=d[h];h++)l.appendItem(Dl(l,f))}(c,s)),c.consolidate()}var qp=/^class /;function Ra(r){return"[object Array]"===Object.prototype.toString.call(r)}function Ou(r,s){return Object.prototype.hasOwnProperty.call(r,s)}function Nu(){var r=Array.prototype.slice.call(arguments);1===r.length&&Ra(r[0])&&(r=r[0]);var s=r.pop();return s.$inject=r,s}var xg=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Cg=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,nh=/\/\*([^*]*)\*\//m;function Fu(r){if("function"!=typeof r)throw new Error('Cannot annotate "'+r+'". Expected a function!');var s=r.toString().match(qp.test(r.toString())?xg:Cg);return s&&s[1]&&s[1].split(",").map(function(c){return(s=c.match(nh))?s[1].trim():c.trim()})||[]}function Sg(){var r=[];this.factory=function(s,c){return r.push([s,"factory",c]),this},this.value=function(s,c){return r.push([s,"value",c]),this},this.type=function(s,c){return r.push([s,"type",c]),this},this.forEach=function(s){r.forEach(s)}}function Ri(r,s){s=s||{get:function(T,R){if(c.push(T),!1===R)return null;throw f('No provider for "'+T+'"!')}};var c=[],l=this._providers=Object.create(s._providers||null),d=this._instances=Object.create(null),h=d.injector=this,f=function(T){var R=c.join(" -> ");return c.length=0,new Error(R?T+" (Resolving: "+R+")":T)},g=function(T,R){if(!l[T]&&-1!==T.indexOf(".")){for(var F=T.split("."),$=g(F.shift());F.length;)$=$[F.shift()];return $}if(Ou(d,T))return d[T];if(Ou(l,T)){if(-1!==c.indexOf(T))throw c.push(T),f("Cannot resolve circular dependency!");return c.push(T),d[T]=l[T][0](l[T][1]),c.pop(),d[T]}return s.get(T,R)},v=function(T,R){if(void 0===R&&(R={}),"function"!=typeof T){if(!Ra(T))throw new Error('Cannot invoke "'+T+'". Expected a function!');T=Nu(T.slice())}return{fn:T,dependencies:(T.$inject||Fu(T)).map(function(F){return Ou(R,F)?R[F]:g(F)})}},b=function(T){var R=v(T);return new(Function.prototype.bind.apply(R.fn,[null].concat(R.dependencies)))},w=function(T,R,F){var $=v(T,F);return $.fn.apply(R,$.dependencies)},C=function(T){return Nu(function(R){return T.get(R)})},M={factory:w,type:b,value:function(T){return T}};r.forEach(function(T){function R(z,j){return"value"!==z&&Ra(j)&&(j=Nu(j.slice())),j}if(T instanceof Sg)T.forEach(function(z){var K=z[1];l[z[0]]=[M[K],R(K,z[2]),K]});else if("object"==typeof T)if(T.__exports__){var F=Object.keys(T).reduce(function(z,j){return"__"!==j.substring(0,2)&&(z[j]=T[j]),z},Object.create(null)),$=new Ri((T.__modules__||[]).concat([F]),h),B=Nu(function(z){return $.get(z)});T.__exports__.forEach(function(z){l[z]=[B,z,"private",$]})}else Object.keys(T).forEach(function(z){if("private"!==T[z][2]){var j=T[z][0];l[z]=[M[j],R(j,T[z][1]),j]}else l[z]=T[z]})}),this.get=g,this.invoke=w,this.instantiate=b,this.createChild=function(T,R){if(R&&R.length){var F,$,B,z,j=Object.create(null),K=Object.create(null),ce=[],J=[],be=[];for(var pe in l)F=l[pe],-1!==R.indexOf(pe)&&("private"===F[2]?-1===($=ce.indexOf(F[3]))?(B=F[3].createChild([],R),z=C(B),ce.push(F[3]),J.push(B),be.push(z),j[pe]=[z,pe,"private",B]):j[pe]=[be[$],pe,"private",J[$]]:j[pe]=[F[2],F[1]],K[pe]=!0),"factory"!==F[2]&&"type"!==F[2]||!F[1].$scope||R.forEach(function(Ee){-1!==F[1].$scope.indexOf(Ee)&&(j[pe]=[F[2],F[1]],K[Ee]=!0)});R.forEach(function(Ee){if(!K[Ee])throw new Error('No provider for "'+Ee+'". Cannot use provider from the parent!')}),T.unshift(j)}return new Ri(T,h)}}function Po(r,s){var c=this;r.on(["render.shape","render.connection"],s=s||1e3,function(l,d){var h=l.type,f=d.element,g=d.gfx;if(c.canRender(f))return"render.shape"===h?c.drawShape(g,f):c.drawConnection(g,f)}),r.on(["render.getShapePath","render.getConnectionPath"],s,function(l,d){if(c.canRender(d))return"render.getShapePath"===l.type?c.getShapePath(d):c.getConnectionPath(d)})}function dr(r){return r.join(",").replace(/,?([A-z]),?/g,"$1")}function vi(r){for(var s,c="",l=0;s=r[l];l++)c+=s.x+","+s.y+" ";return c}function Js(r,s){var c=st("polyline");return Ne(c,{points:vi(r)}),s&&Ne(c,s),c}function _n(r){return gt(r,function(s){return!tn(r,function(c){return c!==s&&Tl(s,c)})})}function Tl(r,s){if(s){if(r===s)return s;if(r.parent)return Tl(r.parent,s)}}function Ct(r,s,c){var l=!c||-1===r.indexOf(s);return l&&r.push(s),l}function Rs(r,s,c){c=c||0,bt(r)||(r=[r]),ne(r,function(l,d){var h=s(l,d,c);bt(h)&&h.length&&Rs(h,s,c+1)})}function wc(r,s){return l=!s,-1,h=[],f=[],Rs(r,function(g,v,b){Ct(h,g,l);var w=g.children;if(w&&Ct(f,w,l))return w}),h;var l,h,f}function pi(r,s){var c,l,d,h;return s=!!s,bt(r)||(r=[r]),ne(r,function(f){var g=f;f.waypoints&&!s&&(g=pi(f.waypoints,!0));var v=g.x,b=g.y,w=g.height||0,C=g.width||0;(v<c||void 0===c)&&(c=v),(b<l||void 0===l)&&(l=b),(v+C>d||void 0===d)&&(d=v+C),(b+w>h||void 0===h)&&(h=b+w)}),{x:c,y:l,height:h-l,width:d-c}}function dt(r){return"waypoints"in r?"connection":"x"in r?"shape":"root"}function ih(r){return!(!r||!r.isFrame)}function Lu(r,s){return oe({},r||{},s||{})}function Zi(r,s){Po.call(this,r,1),this.CONNECTION_STYLE=s.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=s.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=s.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Po.prototype.canRender=function(){},Po.prototype.drawShape=function(){},Po.prototype.drawConnection=function(){},Po.prototype.getShapePath=function(){},Po.prototype.getConnectionPath=function(){},Oe(Zi,Po),Zi.prototype.canRender=function(){return!0},Zi.prototype.drawShape=function(r,s){var c=st("rect");return Ne(c,{x:0,y:0,width:s.width||0,height:s.height||0}),ih(s)?Ne(c,this.FRAME_STYLE):Ne(c,this.SHAPE_STYLE),ut(r,c),c},Zi.prototype.drawConnection=function(r,s){var c=Js(s.waypoints,this.CONNECTION_STYLE);return ut(r,c),c},Zi.prototype.getShapePath=function(r){var l=r.width;return dr([["M",r.x,r.y],["l",l,0],["l",0,r.height],["l",-l,0],["z"]])},Zi.prototype.getConnectionPath=function(r){var s,c,l=r.waypoints,d=[];for(s=0;c=l[s];s++)d.push([0===s?"M":"L",(c=c.original||c).x,c.y]);return dr(d)},Zi.$inject=["eventBus","styles"];var Dg={__init__:["defaultRenderer"],defaultRenderer:["type",Zi],styles:["type",function(){var r={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},s=this;this.cls=function(c,l,d){return oe(this.style(l,d),{class:c})},this.style=function(c,l){bt(c)||l||(l=c,c=[]);var d=Xe(c,function(h,f){return oe(h,r[f]||{})},{});return l?oe(d,l):d},this.computeStyle=function(c,l,d){return bt(l)||(d=l,l=[]),s.style(l||[],oe({},d,c||{}))}}]};function Kn(r,s){if(!r||!s)return-1;var c=r.indexOf(s);return-1!==c&&r.splice(c,1),c}function Je(r,s,c){if(r&&s){"number"!=typeof c&&(c=-1);var l=r.indexOf(s);if(-1!==l){if(l===c||-1===c)return;r.splice(l,1)}-1!==c?r.splice(c,0,s):r.push(s)}}function Bi(r,s){return r&&s?r.indexOf(s):-1}function ea(r,s){return r&&s?Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)):-1}function Kp(r,s,c,l){if(void 0===l&&(l=5),!r||!s||!c)return!1;var d=(s.x-r.x)*(c.y-r.y)-(s.y-r.y)*(c.x-r.x),h=ea(r,s);return Math.abs(d/h)<=l}function ao(r,s){var c,l,h,f;return l=c=bt(r)?r:[r,s],f=(h=bt(l)?l:[l,undefined]).slice().shift(),ur(h,function(g){return Math.abs(f.y-g.y)<=2})?"h":!!function(l,d){var h,f=(h=bt(l)?l:[l,void 0]).slice().shift();return ur(h,function(g){return Math.abs(f.x-g.x)<=2})}(c)&&"v"}function xc(r,s,c){return r.x>s.x-(c=c||0)&&r.y>s.y-c&&r.x<s.x+s.width+c&&r.y<s.y+s.height+c}function hr(r,s){return{x:Math.round(r.x+(s.x-r.x)/2),y:Math.round(r.y+(s.y-r.y)/2)}}var Ag=/,?([a-z]),?/gi,rh=parseFloat,fi=Math,pr=fi.PI,ns=fi.min,ks=fi.max,ji=fi.pow,ta=fi.abs,Ml=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,Tg=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,Bu=Array.isArray||function(r){return r instanceof Array};function Yp(r,s){return Object.prototype.hasOwnProperty.call(r,s)}function ki(r){if("function"==typeof r||Object(r)!==r)return r;var s=new r.constructor;for(var c in r)Yp(r,c)&&(s[c]=ki(r[c]));return s}function Pn(r,s){for(var c=0,l=r.length;c<l;c++)if(r[c]===s)return r.push(r.splice(c,1)[0])}function na(r){var s=na.ps=na.ps||{};return s[r]?s[r].sleep=100:s[r]={sleep:100},setTimeout(function(){for(var c in s)Yp(s,c)&&c!=r&&(s[c].sleep--,!s[c].sleep&&delete s[c])}),s[r]}function Xp(r,s,c,l){return 1===arguments.length&&(s=r.y,c=r.width,l=r.height,r=r.x),{x:r,y:s,width:c,height:l,x2:r+c,y2:s+l}}function Mg(){return this.join(",").replace(Ag,"$1")}function Qe(r){var s=ki(r);return s.toString=Mg,s}function Rg(r,s,c,l,d,h,f,g,v){var b=1-v,w=ji(b,3),C=ji(b,2),M=v*v*v,T=w*s+3*C*v*l+3*b*v*v*h+M*g;return{x:Cc(w*r+3*C*v*c+3*b*v*v*d+M*f),y:Cc(T)}}function wn(r){var s=Dc.apply(null,r);return Xp(s.x0,s.y0,s.x1-s.x0,s.y1-s.y0)}function Vi(r,s,c){return s>=r.x&&s<=r.x+r.width&&c>=r.y&&c<=r.y+r.height}function is(r,s,c,l,d){return r*(r*(-3*s+9*c-9*l+3*d)+6*s-12*c+6*l)-3*s+3*c}function Qp(r,s,c,l,d,h,f,g,v){null==v&&(v=1);for(var b=(v=v>1?1:v<0?0:v)/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],C=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],M=0,T=0;T<12;T++){var R=b*w[T]+b,F=is(R,r,c,d,f),$=is(R,s,l,h,g);M+=C[T]*fi.sqrt(F*F+$*$)}return b*M}function ju(r,s,c,l,d,h,f,g){if(!(ks(r,c)<ns(d,f)||ns(r,c)>ks(d,f)||ks(s,l)<ns(h,g)||ns(s,l)>ks(h,g))){var v=(r*l-s*c)*(h-g)-(s-l)*(d*g-h*f),b=(r-c)*(h-g)-(s-l)*(d-f);if(b){var w=Cc(((r*l-s*c)*(d-f)-(r-c)*(d*g-h*f))/b),C=Cc(v/b),M=+w.toFixed(2),T=+C.toFixed(2);if(!(M<+ns(r,c).toFixed(2)||M>+ks(r,c).toFixed(2)||M<+ns(d,f).toFixed(2)||M>+ks(d,f).toFixed(2)||T<+ns(s,l).toFixed(2)||T>+ks(s,l).toFixed(2)||T<+ns(h,g).toFixed(2)||T>+ks(h,g).toFixed(2)))return{x:w,y:C}}}}function Cc(r){return Math.round(1e11*r)/1e11}function Rl(r,s,c){if(pe=wn(r),Ee=wn(s),pe=Xp(pe),!(Vi(Ee=Xp(Ee),pe.x,pe.y)||Vi(Ee,pe.x2,pe.y)||Vi(Ee,pe.x,pe.y2)||Vi(Ee,pe.x2,pe.y2)||Vi(pe,Ee.x,Ee.y)||Vi(pe,Ee.x2,Ee.y)||Vi(pe,Ee.x,Ee.y2)||Vi(pe,Ee.x2,Ee.y2)||(pe.x<Ee.x2&&pe.x>Ee.x||Ee.x<pe.x2&&Ee.x>pe.x)&&(pe.y<Ee.y2&&pe.y>Ee.y||Ee.y<pe.y2&&Ee.y>pe.y)))return c?0:[];for(var pe,Ee,l=Qp.apply(0,r),d=Qp.apply(0,s),h=kl(r)?1:~~(l/5)||1,f=kl(s)?1:~~(d/5)||1,g=[],v=[],b={},w=c?0:[],C=0;C<h+1;C++){var M=Rg.apply(0,r.concat(C/h));g.push({x:M.x,y:M.y,t:C/h})}for(C=0;C<f+1;C++)M=Rg.apply(0,s.concat(C/f)),v.push({x:M.x,y:M.y,t:C/f});for(C=0;C<h;C++)for(var T=0;T<f;T++){var R,F=g[C],$=g[C+1],B=v[T],z=v[T+1],j=ta($.x-F.x)<.01?"y":"x",K=ta(z.x-B.x)<.01?"y":"x",ce=ju(F.x,F.y,$.x,$.y,B.x,B.y,z.x,z.y);if(ce){if(b[R=ce.x.toFixed(9)+"#"+ce.y.toFixed(9)])continue;b[R]=!0;var J=F.t+ta((ce[j]-F[j])/($[j]-F[j]))*($.t-F.t),be=B.t+ta((ce[K]-B[K])/(z[K]-B[K]))*(z.t-B.t);J>=0&&J<=1&&be>=0&&be<=1&&(c?w++:w.push({x:ce.x,y:ce.y,t1:J,t2:be}))}}return w}function kl(r){return r[0]===r[2]&&r[1]===r[3]&&r[4]===r[6]&&r[5]===r[7]}function Vu(r,s,c,l){return[r,s,c,l,c,l]}function Le(r,s,c,l,d,h){var f=1/3,g=2/3;return[f*r+g*c,f*s+g*l,f*d+g*c,f*h+g*l,d,h]}function Pl(r,s,c,l,d,h,f,g,v,b){var w,C,M=120*pr/180,T=pr/180*(+d||0),R=[],F=(C=function(jn,Si,rn){return{x:jn*fi.cos(rn)-Si*fi.sin(rn),y:jn*fi.sin(rn)+Si*fi.cos(rn)}},function jn(){var Si=Array.prototype.slice.call(arguments,0),rn=Si.join("\u2400"),Ui=jn.cache=jn.cache||{},Er=jn.count=jn.count||[];return Yp(Ui,rn)?(Pn(Er,rn),Ui[rn]):(Er.length>=1e3&&delete Ui[Er.shift()],Er.push(rn),Ui[rn]=C.apply(0,Si),Ui[rn])});if(b)pe=b[0],Ee=b[1],J=b[2],be=b[3];else{r=(w=F(r,s,-T)).x,s=w.y;var $=(r-(g=(w=F(g,v,-T)).x))/2,B=(s-(v=w.y))/2,z=$*$/(c*c)+B*B/(l*l);z>1&&(c*=z=fi.sqrt(z),l*=z);var j=c*c,K=l*l,ce=(h==f?-1:1)*fi.sqrt(ta((j*K-j*B*B-K*$*$)/(j*B*B+K*$*$))),J=ce*c*B/l+(r+g)/2,be=ce*-l*$/c+(s+v)/2,pe=fi.asin(((s-be)/l).toFixed(9)),Ee=fi.asin(((v-be)/l).toFixed(9));(pe=r<J?pr-pe:pe)<0&&(pe=2*pr+pe),(Ee=g<J?pr-Ee:Ee)<0&&(Ee=2*pr+Ee),f&&pe>Ee&&(pe-=2*pr),!f&&Ee>pe&&(Ee-=2*pr)}var it=Ee-pe;if(ta(it)>M){var Ce=Ee,Me=g,ht=v;R=Pl(g=J+c*fi.cos(Ee=pe+M*(f&&Ee>pe?1:-1)),v=be+l*fi.sin(Ee),c,l,d,0,f,Me,ht,[Ee,Ce,J,be])}it=Ee-pe;var X=fi.cos(pe),I=fi.sin(pe),se=fi.cos(Ee),fe=fi.sin(Ee),Ie=fi.tan(it/4),rt=4/3*c*Ie,at=4/3*l*Ie,Et=[r,s],wt=[r+rt*I,s-at*X],ft=[g+rt*fe,v-at*se],Jt=[g,v];if(wt[0]=2*Et[0]-wt[0],wt[1]=2*Et[1]-wt[1],b)return[wt,ft,Jt].concat(R);for(var br=[],zi=0,Nn=(R=[wt,ft,Jt].concat(R).join().split(",")).length;zi<Nn;zi++)br[zi]=zi%2?F(R[zi-1],R[zi],T).y:F(R[zi],R[zi+1],T).x;return br}function Dc(r,s,c,l,d,h,f,g){for(var v,b,w,C,M,T,R,F,$=[],B=[[],[]],z=0;z<2;++z)if(0==z?(b=6*r-12*c+6*d,v=-3*r+9*c-9*d+3*f,w=3*c-3*r):(b=6*s-12*l+6*h,v=-3*s+9*l-9*h+3*g,w=3*l-3*s),ta(v)<1e-12){if(ta(b)<1e-12)continue;0<(C=-w/b)&&C<1&&$.push(C)}else F=fi.sqrt(R=b*b-4*w*v),R<0||(0<(M=(-b+F)/(2*v))&&M<1&&$.push(M),0<(T=(-b-F)/(2*v))&&T<1&&$.push(T));for(var j,K=$.length,ce=K;K--;)j=1-(C=$[K]),B[0][K]=j*j*j*r+3*j*j*C*c+3*j*C*C*d+C*C*C*f,B[1][K]=j*j*j*s+3*j*j*C*l+3*j*C*C*h+C*C*C*g;return B[0][ce]=r,B[1][ce]=s,B[0][ce+1]=f,B[1][ce+1]=g,B[0].length=B[1].length=ce+2,{x0:ns.apply(0,B[0]),y0:ns.apply(0,B[1]),x1:ks.apply(0,B[0]),y1:ks.apply(0,B[1])}}function mi(r){var s=na(r);if(s.curve)return Qe(s.curve);for(var c=function(r){var s=na(r);if(s.abs)return Qe(s.abs);if(Bu(r)&&Bu(r&&r[0])||(r=function(B){if(!B)return null;var z=na(B);if(z.arr)return ki(z.arr);var j={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},K=[];return Bu(B)&&Bu(B[0])&&(K=ki(B)),K.length||String(B).replace(Ml,function(ce,J,be){var pe=[],Ee=J.toLowerCase();for(be.replace(Tg,function(it,Ce){Ce&&pe.push(+Ce)}),"m"==Ee&&pe.length>2&&(K.push([J].concat(pe.splice(0,2))),Ee="l",J="m"==J?"l":"L");pe.length>=j[Ee]&&(K.push([J].concat(pe.splice(0,j[Ee]))),j[Ee]););}),K.toString=na.toString,z.arr=ki(K),K}(r)),!r||!r.length)return[["M",0,0]];var c,l=[],d=0,h=0,f=0,g=0,v=0;"M"==r[0][0]&&(f=d=+r[0][1],g=h=+r[0][2],v++,l[0]=["M",d,h]);for(var b,w,C=v,M=r.length;C<M;C++){if(l.push(b=[]),(c=(w=r[C])[0])!=c.toUpperCase())switch(b[0]=c.toUpperCase(),b[0]){case"A":b[1]=w[1],b[2]=w[2],b[3]=w[3],b[4]=w[4],b[5]=w[5],b[6]=+w[6]+d,b[7]=+w[7]+h;break;case"V":b[1]=+w[1]+h;break;case"H":b[1]=+w[1]+d;break;case"M":f=+w[1]+d,g=+w[2]+h;default:for(var T=1,R=w.length;T<R;T++)b[T]=+w[T]+(T%2?d:h)}else for(var F=0,$=w.length;F<$;F++)b[F]=w[F];switch(c=c.toUpperCase(),b[0]){case"Z":d=+f,h=+g;break;case"H":d=b[1];break;case"V":h=b[1];break;case"M":f=b[b.length-2],g=b[b.length-1];default:d=b[b.length-2],h=b[b.length-1]}}return l.toString=Mg,s.abs=Qe(l),l}(r),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d=function(T,R,F){var $,B;if(!T)return["C",R.x,R.y,R.x,R.y,R.x,R.y];switch(!(T[0]in{T:1,Q:1})&&(R.qx=R.qy=null),T[0]){case"M":R.X=T[1],R.Y=T[2];break;case"A":T=["C"].concat(Pl.apply(0,[R.x,R.y].concat(T.slice(1))));break;case"S":"C"==F||"S"==F?($=2*R.x-R.bx,B=2*R.y-R.by):($=R.x,B=R.y),T=["C",$,B].concat(T.slice(1));break;case"T":"Q"==F||"T"==F?(R.qx=2*R.x-R.qx,R.qy=2*R.y-R.qy):(R.qx=R.x,R.qy=R.y),T=["C"].concat(Le(R.x,R.y,R.qx,R.qy,T[1],T[2]));break;case"Q":R.qx=T[1],R.qy=T[2],T=["C"].concat(Le(R.x,R.y,T[1],T[2],T[3],T[4]));break;case"L":T=["C"].concat(Vu(R.x,R.y,T[1],T[2]));break;case"H":T=["C"].concat(Vu(R.x,R.y,T[1],R.y));break;case"V":T=["C"].concat(Vu(R.x,R.y,R.x,T[1]));break;case"Z":T=["C"].concat(Vu(R.x,R.y,R.X,R.Y))}return T},h=function(T,R){if(T[R].length>7){T[R].shift();for(var F=T[R];F.length;)f[R]="A",T.splice(R++,0,["C"].concat(F.splice(0,6)));T.splice(R,1),w=c.length}},f=[],g="",v="",b=0,w=c.length;b<w;b++){c[b]&&(g=c[b][0]),"C"!=g&&(f[b]=g,b&&(v=f[b-1])),c[b]=d(c[b],l,v),"A"!=f[b]&&"C"==g&&(f[b]="C"),h(c,b);var C=c[b],M=C.length;l.x=C[M-2],l.y=C[M-1],l.bx=rh(C[M-4])||l.x,l.by=rh(C[M-3])||l.y}return s.curve=Qe(c),c}var Il=function(r,s,c){r=mi(r),s=mi(s);for(var l,d,h,f,g,v,b,w,C,M,T=c?0:[],R=0,F=r.length;R<F;R++){var $=r[R];if("M"==$[0])l=g=$[1],d=v=$[2];else{"C"==$[0]?(C=[l,d].concat($.slice(1)),l=C[6],d=C[7]):(C=[l,d,l,d,g,v,g,v],l=g,d=v);for(var B=0,z=s.length;B<z;B++){var j=s[B];if("M"==j[0])h=b=j[1],f=w=j[2];else{"C"==j[0]?(M=[h,f].concat(j.slice(1)),h=M[6],f=M[7]):(M=[h,f,h,f,b,w,b,w],h=b,f=w);var K=Rl(C,M,c);if(c)T+=K;else{for(var ce=0,J=K.length;ce<J;ce++)K[ce].segment1=R,K[ce].segment2=B,K[ce].bez1=C,K[ce].bez2=M;T=T.concat(K)}}}}}return T};function Hu(r){return{x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)}}function Tr(r){return{x:Math.round(r.x),y:Math.round(r.y)}}function et(r){return{top:r.y,right:r.x+(r.width||0),bottom:r.y+(r.height||0),left:r.x}}function Ps(r){return{x:r.left,y:r.top,width:r.right-r.left,height:r.bottom-r.top}}function zt(r){return Tr({x:r.x+(r.width||0)/2,y:r.y+(r.height||0)/2})}function nn(r,s,c){Xn(c=c||0)||(c={x:c,y:c});var l=et(r),d=et(s),v=l.bottom+c.y<=d.top?"top":l.top-c.y>=d.bottom?"bottom":null,b=l.right+c.x<=d.left?"left":l.left-c.x>=d.right?"right":null;return b&&v?v+"-"+b:b||v||"intersect"}function $u(r,s,c){var l=Il(r,s);return 1===l.length||2===l.length&&ea(l[0],l[1])<1?Tr(l[0]):l.length>1?Tr((l=Be(l,function(d){var h=Math.floor(100*d.t2)||1;return h=((h=100-h)<10?"0":"")+h,d.segment2+"#"+h}))[c?0:l.length-1]):null}function Ol(r,s){return Math.round(r*s)/s}function oh(r){return Re(r)?r+"px":r}function Zp(r,s,c){var l=st("g");return $t(l).add(s),r.insertBefore(l,r.childNodes[void 0!==c?c:r.childNodes.length-1]||null),l}var sn="base",Nl="djs-element-hidden",Fl={shape:["x","y","width","height"],connection:["waypoints"]};function St(r,s,c,l){this._eventBus=s,this._elementRegistry=l,this._graphicsFactory=c,this._init(r||{})}function bn(r,s){r.setAttribute("transform","matrix("+s.a+","+s.b+","+s.c+","+s.d+","+s.e+","+s.f+")")}St.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],St.prototype._init=function(r){var h,f,g,s=this._eventBus,c=this._container=(f=(h=oe({},{width:"100%",height:"100%"},h=r)).container||document.body,(g=document.createElement("div")).setAttribute("class","djs-container"),oe(g.style,{position:"relative",overflow:"hidden",width:oh(h.width),height:oh(h.height)}),f.appendChild(g),g),l=this._svg=st("svg");Ne(l,{width:"100%",height:"100%"}),ut(c,l);var d=this._viewport=Zp(l,"viewport");this._layers={},this._planes={},!1!==r.deferUpdate&&(this._viewboxChanged=es(Ti(this._viewboxChanged,this),300)),s.on("diagram.init",function(){s.fire("canvas.init",{svg:l,viewport:d})},this),s.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),s.on("diagram.destroy",500,this._destroy,this),s.on("diagram.clear",500,this._clear,this)},St.prototype._destroy=function(r){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var s=this._container.parentNode;s&&s.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},St.prototype._clear=function(){var r=this;this._elementRegistry.getAll().forEach(function(s){var c=dt(s);"root"===c?r.setRootElementForPlane(null,r.findPlane(s),!0):r._removeElement(s,c)}),this._activePlane=null,this._planes={},delete this._cachedViewbox},St.prototype.getDefaultLayer=function(){return this.getLayer(sn)},St.prototype.getLayer=function(r,s){if(!r)throw new Error("must specify a name");var c=this._layers[r];if(c||(c=this._layers[r]=this._createLayer(r,s)),void 0!==s&&c.index!==s)throw new Error("layer <"+r+"> already created at index <"+s+">");return c.group},St.prototype._createLayer=function(r,s){s||(s=0);var c=Xe(this._layers,function(l,d){return s>=d.index&&l++,l},0);return{group:Zp(this._viewport,"layer-"+r,c),index:s}},St.prototype.getPlane=function(r){if(!r)throw new Error("must specify a name");return this._planes[r]},St.prototype.createPlane=function(r,s){if(!r)throw new Error("must specify a name");if(this._planes[r])throw new Error("plane "+r+" already exists");s||(s={id:"__implicitroot"+r,children:[],isImplicit:!0});var c=this.getLayer(r);$t(c).add(Nl);var l=this._planes[r]={layer:c,name:r,rootElement:null};return this.setRootElementForPlane(s,l),l},St.prototype.setActivePlane=function(r){if(!r)throw new Error("must specify a plane");return"string"==typeof r&&(r=this.getPlane(r)),this._activePlane&&$t(this._activePlane.layer).add(Nl),this._activePlane=r,$t(r.layer).remove(Nl),r.rootElement&&this._elementRegistry.updateGraphics(r.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:r}),r},St.prototype.getActiveLayer=function(){return this.getActivePlane().layer},St.prototype.getActivePlane=function(){var r=this._activePlane;return r||(r=this.createPlane(sn),this.setActivePlane(sn)),r},St.prototype.findPlane=function(r){"string"==typeof r&&(r=this._elementRegistry.get(r));var s=function(c){for(;c.parent;)c=c.parent;return c}(r);return tn(this._planes,function(c){return c.rootElement===s})},St.prototype.getContainer=function(){return this._container},St.prototype._updateMarker=function(r,s,c){var l;r.id||(r=this._elementRegistry.get(r)),(l=this._elementRegistry._elements[r.id])&&(ne([l.gfx,l.secondaryGfx],function(d){d&&(c?$t(d).add(s):$t(d).remove(s))}),this._eventBus.fire("element.marker.update",{element:r,gfx:l.gfx,marker:s,add:!!c}))},St.prototype.addMarker=function(r,s){this._updateMarker(r,s,!0)},St.prototype.removeMarker=function(r,s){this._updateMarker(r,s,!1)},St.prototype.hasMarker=function(r,s){return r.id||(r=this._elementRegistry.get(r)),$t(this.getGraphics(r)).has(s)},St.prototype.toggleMarker=function(r,s){this.hasMarker(r,s)?this.removeMarker(r,s):this.addMarker(r,s)},St.prototype.getRootElement=function(){return this.getActivePlane().rootElement},St.prototype.setRootElement=function(r,s){var c=this._activePlane;if(c)return this.setRootElementForPlane(r,c,s);var l=this.createPlane(sn,r);return this.setActivePlane(l),l.rootElement},St.prototype.setRootElementForPlane=function(r,s,c){"string"==typeof s&&(s=this.getPlane(s)),r&&this._ensureValid("root",r);var l=s.rootElement,d=this._elementRegistry,h=this._eventBus;if(l){if(!c)throw new Error("rootElement already set, need to specify override");h.fire("root.remove",{element:l}),h.fire("root.removed",{element:l}),d.remove(l)}if(r){var f=s.layer;h.fire("root.add",{element:r}),d.add(r,f),h.fire("root.added",{element:r,gfx:f}),s===this._activePlane&&this._elementRegistry.updateGraphics(r,this._svg,!0)}return s.rootElement=r,r},St.prototype._ensureValid=function(r,s){if(!s.id)throw new Error("element must have an id");if(this._elementRegistry.get(s.id))throw new Error("element with id "+s.id+" already exists");var c=Fl[r];if(!ur(c,function(l){return void 0!==s[l]}))throw new Error("must supply { "+c.join(", ")+" } with "+r)},St.prototype._setParent=function(r,s,c){Je(s.children,r,c),r.parent=s},St.prototype._addElement=function(r,s,c,l){c=c||this.getRootElement();var d=this._eventBus,h=this._graphicsFactory;this._ensureValid(r,s),d.fire(r+".add",{element:s,parent:c}),this._setParent(s,c,l);var f=h.create(r,s,l);return this._elementRegistry.add(s,f),h.update(r,s,f),d.fire(r+".added",{element:s,gfx:f}),s},St.prototype.addShape=function(r,s,c){return this._addElement("shape",r,s,c)},St.prototype.addConnection=function(r,s,c){return this._addElement("connection",r,s,c)},St.prototype._removeElement=function(r,s){var c=this._elementRegistry,l=this._graphicsFactory,d=this._eventBus;if(r=c.get(r.id||r))return d.fire(s+".remove",{element:r}),l.remove(r),Kn(r.parent&&r.parent.children,r),r.parent=null,d.fire(s+".removed",{element:r}),c.remove(r),r},St.prototype.removeShape=function(r){return this._removeElement(r,"shape")},St.prototype.removeConnection=function(r){return this._removeElement(r,"connection")},St.prototype.getGraphics=function(r,s){return this._elementRegistry.getGraphics(r,s)},St.prototype._changeViewbox=function(r){this._eventBus.fire("canvas.viewbox.changing"),r.apply(this),this._cachedViewbox=null,this._viewboxChanged()},St.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},St.prototype.viewbox=function(r){if(void 0===r&&this._cachedViewbox)return this._cachedViewbox;var s,c,l,d,h,f,g=this._viewport,v=this.getSize();return r?(this._changeViewbox(function(){d=Math.min(v.width/r.width,v.height/r.height);var b=this._svg.createSVGMatrix().scale(d).translate(-r.x,-r.y);Al(g,b)}),r):(s=this.getDefaultLayer().getBBox(),c=(l=Al(g))?l.matrix:function(b,w,C,M,T,R){var F=Vr.createSVGMatrix();switch(arguments.length){case 0:return F;case 1:return Jd(F,b);case 6:return Jd(F,{a:b,b:w,c:C,d:M,e:T,f:R})}}(),d=Ol(c.a,1e3),h=Ol(-c.e||0,1e3),f=Ol(-c.f||0,1e3),r=this._cachedViewbox={x:h?h/d:0,y:f?f/d:0,width:v.width/d,height:v.height/d,scale:d,inner:{width:s.width,height:s.height,x:s.x,y:s.y},outer:v})},St.prototype.scroll=function(r){var s=this._viewport,c=s.getCTM();return r&&this._changeViewbox(function(){r=oe({dx:0,dy:0},r||{}),c=this._svg.createSVGMatrix().translate(r.dx,r.dy).multiply(c),bn(s,c)}),{x:c.e,y:c.f}},St.prototype.scrollToElement=function(r,s){var c=100,l=this.findPlane(r);l!==this._activePlane&&this.setActivePlane(l),s||(s={}),"number"==typeof s&&(c=s),s={top:s.top||c,right:s.right||c,bottom:s.bottom||c,left:s.left||c};var d,h,f=pi(r),g=et(f),v=this.viewbox(),b=this.zoom();v.y+=s.top/b,v.x+=s.left/b,v.width-=(s.right+s.left)/b,v.height-=(s.bottom+s.top)/b;var w=et(v);if(f.width<v.width&&f.height<v.height){var C=Math.max(0,g.right-w.right),M=Math.min(0,g.left-w.left),T=Math.max(0,g.bottom-w.bottom),R=Math.min(0,g.top-w.top);d=C||M,h=T||R}else d=f.x-v.x,h=f.y-v.y;this.scroll({dx:-d*b,dy:-h*b})},St.prototype.zoom=function(r,s){return r?"fit-viewport"===r?this._fitViewport(s):(this._changeViewbox(function(){"object"!=typeof s&&(c=this.viewbox().outer,s={x:c.width/2,y:c.height/2}),l=this._setZoom(r,s)}),Ol(l.a,1e3)):this.viewbox(r).scale;var c,l},St.prototype._fitViewport=function(r){var s,c,l=this.viewbox(),d=l.outer,h=l.inner;return h.x>=0&&h.y>=0&&h.x+h.width<=d.width&&h.y+h.height<=d.height&&!r?c={x:0,y:0,width:Math.max(h.width+h.x,d.width),height:Math.max(h.height+h.y,d.height)}:(s=Math.min(1,d.width/h.width,d.height/h.height),c={x:h.x+(r?h.width/2-d.width/s/2:0),y:h.y+(r?h.height/2-d.height/s/2:0),width:d.width/s,height:d.height/s}),this.viewbox(c),this.viewbox(!1).scale},St.prototype._setZoom=function(r,s){var c,l,d,h,f=this._svg,g=this._viewport,v=f.createSVGMatrix(),b=f.createSVGPoint(),w=(l=g.getCTM()).a;return s?(c=oe(b,s).matrixTransform(l.inverse()),d=v.translate(c.x,c.y).scale(1/w*r).translate(-c.x,-c.y),h=l.multiply(d)):h=v.scale(r),bn(this._viewport,h),h},St.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},St.prototype.getAbsoluteBBox=function(r){var s,c=this.viewbox();return{x:(s=r.waypoints?this.getGraphics(r).getBBox():r).x*c.scale-c.x*c.scale,y:s.y*c.scale-c.y*c.scale,width:s.width*c.scale,height:s.height*c.scale}},St.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var rs="data-element-id";function Mr(r){this._elements={},this._eventBus=r}Mr.$inject=["eventBus"],Mr.prototype.add=function(r,s,c){var l=r.id;this._validateId(l),Ne(s,rs,l),c&&Ne(c,rs,l),this._elements[l]={element:r,gfx:s,secondaryGfx:c}},Mr.prototype.remove=function(r){var s=this._elements,c=r.id||r,l=c&&s[c];l&&(Ne(l.gfx,rs,""),l.secondaryGfx&&Ne(l.secondaryGfx,rs,""),delete s[c])},Mr.prototype.updateId=function(r,s){this._validateId(s),"string"==typeof r&&(r=this.get(r)),this._eventBus.fire("element.updateId",{element:r,newId:s});var c=this.getGraphics(r),l=this.getGraphics(r,!0);this.remove(r),r.id=s,this.add(r,c,l)},Mr.prototype.updateGraphics=function(r,s,c){var l=r.id||r,d=this._elements[l];return c?d.secondaryGfx=s:d.gfx=s,Ne(s,rs,l),s},Mr.prototype.get=function(r){var s;s="string"==typeof r?r:r&&Ne(r,rs);var c=this._elements[s];return c&&c.element},Mr.prototype.filter=function(r){var s=[];return this.forEach(function(c,l){r(c,l)&&s.push(c)}),s},Mr.prototype.find=function(r){for(var s=this._elements,c=Object.keys(s),l=0;l<c.length;l++){var d=s[c[l]],h=d.element;if(r(h,d.gfx))return h}},Mr.prototype.getAll=function(){return this.filter(function(r){return r})},Mr.prototype.forEach=function(r){var s=this._elements;Object.keys(s).forEach(function(c){var l=s[c];return r(l.element,l.gfx)})},Mr.prototype.getGraphics=function(r,s){var l=this._elements[r.id||r];return l&&(s?l.secondaryGfx:l.gfx)},Mr.prototype._validateId=function(r){if(!r)throw new Error("element must have an id");if(this._elements[r])throw new Error("element with id "+r+" already added")};var os={exports:{}},Ll={extend:function(r,s,c,l){var d=c.inverse;return Object.defineProperty(r,"remove",{value:function(h){var f=this.indexOf(h);return-1!==f&&(this.splice(f,1),s.unset(h,d,l)),h}}),Object.defineProperty(r,"contains",{value:function(h){return-1!==this.indexOf(h)}}),Object.defineProperty(r,"add",{value:function(h,f){var g=this.indexOf(h);if(void 0===f){if(-1!==g)return;f=this.length}-1!==g&&this.splice(g,1),this.splice(f,0,h),-1===g&&s.set(h,d,l)}}),Object.defineProperty(r,"__refs_collection",{value:!0}),r},isExtended:function(r){return!0===r.__refs_collection}},Zn=Ll;function ss(r,s,c){var l=Zn.extend(c[s.name]||[],r,s,c);Object.defineProperty(c,s.name,{enumerable:s.enumerable,value:l}),l.length&&l.forEach(function(d){r.set(d,s.inverse,c)})}function _i(r,s){if(!(this instanceof _i))return new _i(r,s);r.inverse=s,s.inverse=r,this.props={},this.props[r.name]=r,this.props[s.name]=s}_i.prototype.bind=function(r,s){if("string"==typeof s){if(!this.props[s])throw new Error("no property <"+s+"> in ref");s=this.props[s]}var c,l,d,h,f;s.collection?ss(this,s,r):(c=this,h=(l=s).inverse,f=(d=r)[l.name],Object.defineProperty(d,l.name,{configurable:l.configurable,enumerable:l.enumerable,get:function(){return f},set:function(g){if(g!==f){var v=f;f=null,v&&c.unset(v,h,d),c.set(f=g,h,d)}}}))},_i.prototype.ensureRefsCollection=function(r,s){var c=r[s.name];return Zn.isExtended(c)||ss(this,s,r),c},_i.prototype.ensureBound=function(r,s){var l;l=s,Object.prototype.hasOwnProperty.call(r,l.name||l)||this.bind(r,s)},_i.prototype.unset=function(r,s,c){r&&(this.ensureBound(r,s),s.collection?this.ensureRefsCollection(r,s).remove(c):r[s.name]=void 0)},_i.prototype.set=function(r,s,c){r&&(this.ensureBound(r,s),s.collection?this.ensureRefsCollection(r,s).add(c):r[s.name]=c)},os.exports=_i,os.exports.Collection=Ll;var Ac=os.exports,sh=new Ac({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ia=new Ac({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Bl=new Ac({name:"attachers",collection:!0},{name:"host"}),Sn=new Ac({name:"outgoing",collection:!0},{name:"source"}),Jp=new Ac({name:"incoming",collection:!0},{name:"target"});function ka(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(r){var s=this.label,c=this.labels;!r&&s?c.remove(s):c.add(r,0)}}),sh.bind(this,"parent"),ia.bind(this,"labels"),Sn.bind(this,"outgoing"),Jp.bind(this,"incoming")}function Gt(){ka.call(this),sh.bind(this,"children"),Bl.bind(this,"host"),Bl.bind(this,"attachers")}function Ji(){Gt.call(this)}function bi(){Gt.call(this),ia.bind(this,"labelTarget")}function Jn(){ka.call(this),Sn.bind(this,"source"),Jp.bind(this,"target")}Oe(Gt,ka),Oe(Ji,Gt),Oe(bi,Gt),Oe(Jn,ka);var Hi={connection:Jn,shape:Gt,label:bi,root:Ji};function In(){this._uid=12}In.prototype.createRoot=function(r){return this.create("root",r)},In.prototype.createLabel=function(r){return this.create("label",r)},In.prototype.createShape=function(r){return this.create("shape",r)},In.prototype.createConnection=function(r){return this.create("connection",r)},In.prototype.create=function(r,s){return(s=oe({},s||{})).id||(s.id=r+"_"+this._uid++),function(c,l){var d=Hi[c];if(!d)throw new Error("unknown type: <"+c+">");return oe(new d,l)}(r,s)};var co=Array.prototype.slice;function je(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function Vt(){}function Xt(r){return r.childNodes[0]}function Rr(r,s,c,l,d){var h=qn();h.setTranslate(s,c);var f=qn();f.setRotate(l||0,0,0);var g=qn();g.setScale(d||1,d||1),Al(r,[h,f,g])}function Ei(r,s,c){var l=qn();l.setTranslate(s,c),Al(r,l)}function Pi(r,s){var c=qn();c.setRotate(s,0,0),Al(r,c)}function ei(r,s){this._eventBus=r,this._elementRegistry=s}function oi(r,s,c){var l=c||s.firstChild;r!==l&&s.insertBefore(r,l)}je.prototype.on=function(r,s,c,l){if(r=bt(r)?r:[r],di(s)&&(l=c,c=s,s=1e3),!Re(s))throw new Error("priority must be a number");var d=c;l&&((d=Ti(c,l)).__fn=c.__fn||c);var h=this;r.forEach(function(f){h._addListener(f,{priority:s,callback:d,next:null})})},je.prototype.once=function(r,s,c,l){var d=this;if(di(s)&&(l=c,c=s,s=1e3),!Re(s))throw new Error("priority must be a number");function h(){h.__isTomb=!0;var f=c.apply(l,arguments);return d.off(r,h),f}h.__fn=c,this.on(r,s,h)},je.prototype.off=function(r,s){r=bt(r)?r:[r];var c=this;r.forEach(function(l){c._removeListener(l,s)})},je.prototype.createEvent=function(r){var s=new Vt;return s.init(r),s},je.prototype.fire=function(r,s){var c,l,d,h;if(h=co.call(arguments),"object"==typeof r&&(r=(s=r).type),!r)throw new Error("no event type specified");if(l=this._listeners[r]){c=s instanceof Vt?s:this.createEvent(s),h[0]=c;var f=c.type;r!==f&&(c.type=r);try{d=this._invokeListeners(c,h,l)}finally{r!==f&&(c.type=f)}return void 0===d&&c.defaultPrevented&&(d=!1),d}},je.prototype.handleError=function(r){return!1===this.fire("error",{error:r})},je.prototype._destroy=function(){this._listeners={}},je.prototype._invokeListeners=function(r,s,c){for(var l;c&&!r.cancelBubble;)l=this._invokeListener(r,s,c),c=c.next;return l},je.prototype._invokeListener=function(r,s,c){var l,d;if(c.callback.__isTomb)return l;try{void 0!==(l=(d=c.callback).apply(null,s))&&(r.returnValue=l,r.stopPropagation()),!1===l&&r.preventDefault()}catch(d){if(!this.handleError(d))throw console.error("unhandled error in event listener",d),d}return l},je.prototype._addListener=function(r,s){var c,l=this._getListeners(r);if(l){for(;l;){if(l.priority<s.priority)return s.next=l,void(c?c.next=s:this._setListeners(r,s));c=l,l=l.next}c.next=s}else this._setListeners(r,s)},je.prototype._getListeners=function(r){return this._listeners[r]},je.prototype._setListeners=function(r,s){this._listeners[r]=s},je.prototype._removeListener=function(r,s){var c,l,d,h=this._getListeners(r);if(s)for(;h;)c=h.next,(d=h.callback)!==s&&d.__fn!==s||(l?l.next=c:this._setListeners(r,c)),l=h,h=c;else this._setListeners(r,null)},Vt.prototype.stopPropagation=function(){this.cancelBubble=!0},Vt.prototype.preventDefault=function(){this.defaultPrevented=!0},Vt.prototype.init=function(r){oe(this,r||{})},ei.$inject=["eventBus","elementRegistry"],ei.prototype._getChildrenContainer=function(r){var s,c=this._elementRegistry.getGraphics(r);return r.parent?(s=c.parentNode.childNodes[1])||($t(s=st("g")).add("djs-children"),ut(c.parentNode,s)):s=c,s},ei.prototype._clear=function(r){var s=Xt(r);return Mu(s),s},ei.prototype._createContainer=function(r,s,c,l){var d=st("g");$t(d).add("djs-group"),void 0!==c?oi(d,s,s.childNodes[c]):ut(s,d);var h=st("g");$t(h).add("djs-element"),$t(h).add("djs-"+r),l&&$t(h).add("djs-frame"),ut(d,h);var f=st("g");return $t(f).add("djs-visual"),ut(h,f),h},ei.prototype.create=function(r,s,c){var l=this._getChildrenContainer(s.parent);return this._createContainer(r,l,c,ih(s))},ei.prototype.updateContainments=function(r){var s=this,c=this._elementRegistry;ne(Xe(r,function(l,d){return d.parent&&(l[d.parent.id]=d.parent),l},{}),function(l){var d=l.children;if(d){var h=s._getChildrenContainer(l);ne(d.slice().reverse(),function(f){oi(c.getGraphics(f).parentNode,h)})}})},ei.prototype.drawShape=function(r,s){return this._eventBus.fire("render.shape",{gfx:r,element:s})},ei.prototype.getShapePath=function(r){return this._eventBus.fire("render.getShapePath",r)},ei.prototype.drawConnection=function(r,s){return this._eventBus.fire("render.connection",{gfx:r,element:s})},ei.prototype.getConnectionPath=function(r){return this._eventBus.fire("render.getConnectionPath",r)},ei.prototype.update=function(r,s,c){if(s.parent){var l=this._clear(c);if("shape"===r)this.drawShape(l,s),Ei(c,s.x,s.y);else{if("connection"!==r)throw new Error("unknown type: "+r);this.drawConnection(l,s)}Ne(c,"display",s.hidden?"none":"block")}},ei.prototype.remove=function(r){ri(this._elementRegistry.getGraphics(r).parentNode)};var Io={__depends__:[Dg],__init__:["canvas"],canvas:["type",St],elementRegistry:["type",Mr],elementFactory:["type",In],eventBus:["type",je],graphicsFactory:["type",ei]};function Tt(r,s){var c;this.injector=s=s||function(r){var s=[],c=[];function l(h){return s.indexOf(h)>=0}r.forEach(function h(f){l(f)||((f.__depends__||[]).forEach(h),l(f)||(s.push(f),(f.__init__||[]).forEach(function(g){c.push(g)})))});var d=new Ri(s);return c.forEach(function(h){try{d["string"==typeof h?"get":"invoke"](h)}catch(f){throw console.error("Failed to instantiate component"),console.error(f.stack),f}}),d}([{config:["value",c=(c=r)||{}]},Io].concat(c.modules||[])),this.get=s.get,this.invoke=s.invoke,this.get("eventBus").fire("diagram.init")}function Oo(){}function ra(r,s){this.model=r,this.properties=s}Tt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Tt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Oo.prototype.get=function(r){return this.$model.properties.get(this,r)},Oo.prototype.set=function(r,s){this.$model.properties.set(this,r,s)},ra.prototype.createType=function(r){var s=this.model,c=this.properties,l=Object.create(Oo.prototype);ne(r.properties,function(f){f.isMany||void 0===f.default||(l[f.name]=f.default)}),c.defineModel(l,s),c.defineDescriptor(l,r);var d=r.ns.name;function h(f){c.define(this,"$type",{value:d,enumerable:!0}),c.define(this,"$attrs",{value:{}}),c.define(this,"$parent",{writable:!0}),ne(f,Ti(function(g,v){this.set(v,g)},this))}return h.prototype=l,h.hasType=l.$instanceOf=this.model.hasType,c.defineModel(h,s),c.defineDescriptor(h,r),h};var Tc={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ia={String:function(r){return r},Boolean:function(r){return"true"===r},Integer:function(r){return parseInt(r,10)},Real:function(r){return parseFloat(r)}};function $i(r,s){var c=Ia[r];return c?c(s):s}function oa(r){return!!Tc[r]}function Oa(r){return!!Ia[r]}function Bn(r,s){var c,l,d=r.split(/:/);if(1===d.length)c=r,l=s;else{if(2!==d.length)throw new Error("expected <prefix:localName> or <localName>, got "+r);c=d[1],l=d[0]}return{name:r=(l?l+":":"")+c,prefix:l,localName:c}}function Qt(r){this.ns=r,this.name=r.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function sa(r,s){this.packageMap={},this.typeMap={},this.packages=[],this.properties=s,ne(r,Ti(this.registerPackage,this))}function jl(r,s,c){var l=s[c];if(l in r)throw new Error("package with "+c+" <"+l+"> already defined")}function as(r){this.model=r}function Vl(r,s,c){Object.defineProperty(r,s.name,{enumerable:!s.isReference,writable:!0,value:c,configurable:!0})}function er(r){this.properties=new as(this),this.factory=new ra(this,this.properties),this.registry=new sa(r,this.properties),this.typeCache={}}Qt.prototype.build=function(){return Pt(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Qt.prototype.addProperty=function(r,s,c){"boolean"==typeof s&&(c=s,s=void 0),this.addNamedProperty(r,!1!==c);var l=this.properties;void 0!==s?l.splice(s,0,r):l.push(r)},Qt.prototype.replaceProperty=function(r,s,c){var l=r.ns,d=this.properties,h=this.propertiesByName,f=r.name!==s.name;if(r.isId){if(!s.isId)throw new Error("property <"+s.ns.name+"> must be id property to refine <"+r.ns.name+">");this.setIdProperty(s,!1)}if(r.isBody){if(!s.isBody)throw new Error("property <"+s.ns.name+"> must be body property to refine <"+r.ns.name+">");this.setBodyProperty(s,!1)}var g=d.indexOf(r);if(-1===g)throw new Error("property <"+l.name+"> not found in property list");d.splice(g,1),this.addProperty(s,c?void 0:g,f),h[l.name]=h[l.localName]=s},Qt.prototype.redefineProperty=function(r,s,c){var l=r.ns.prefix,d=s.split("#"),h=Bn(d[0],l),f=Bn(d[1],h.prefix).name,g=this.propertiesByName[f];if(!g)throw new Error("refined property <"+f+"> not found");this.replaceProperty(g,r,c),delete r.redefines},Qt.prototype.addNamedProperty=function(r,s){var c=r.ns,l=this.propertiesByName;s&&(this.assertNotDefined(r,c.name),this.assertNotDefined(r,c.localName)),l[c.name]=l[c.localName]=r},Qt.prototype.removeNamedProperty=function(r){var s=r.ns,c=this.propertiesByName;delete c[s.name],delete c[s.localName]},Qt.prototype.setBodyProperty=function(r,s){if(s&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+r.ns.name+">)");this.bodyProperty=r},Qt.prototype.setIdProperty=function(r,s){if(s&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+r.ns.name+">)");this.idProperty=r},Qt.prototype.assertNotDefined=function(r,s){var c=r.name,l=this.propertiesByName[c];if(l)throw new Error("property <"+c+"> already defined; override of <"+l.definedBy.ns.name+"#"+l.ns.name+"> by <"+r.definedBy.ns.name+"#"+r.ns.name+"> not allowed without redefines")},Qt.prototype.hasProperty=function(r){return this.propertiesByName[r]},Qt.prototype.addTrait=function(r,s){var c=this.allTypesByName,l=this.allTypes,d=r.name;d in c||(ne(r.properties,Ti(function(h){h=oe({},h,{name:h.ns.localName,inherited:s}),Object.defineProperty(h,"definedBy",{value:r});var f=h.replaces,g=h.redefines;f||g?this.redefineProperty(h,f||g,f):(h.isBody&&this.setBodyProperty(h),h.isId&&this.setIdProperty(h),this.addProperty(h))},this)),l.push(r),c[d]=r)},sa.prototype.getPackage=function(r){return this.packageMap[r]},sa.prototype.getPackages=function(){return this.packages},sa.prototype.registerPackage=function(r){r=oe({},r);var s=this.packageMap;jl(s,r,"prefix"),jl(s,r,"uri"),ne(r.types,Ti(function(c){this.registerType(c,r)},this)),s[r.uri]=s[r.prefix]=r,this.packages.push(r)},sa.prototype.registerType=function(r,s){var c=Bn((r=oe({},r,{superClass:(r.superClass||[]).slice(),extends:(r.extends||[]).slice(),properties:(r.properties||[]).slice(),meta:oe(r.meta||{})})).name,s.prefix),l=c.name,d={};ne(r.properties,Ti(function(h){var f=Bn(h.name,c.prefix),g=f.name;oa(h.type)||(h.type=Bn(h.type,f.prefix).name),oe(h,{ns:f,name:g}),d[g]=h},this)),oe(r,{ns:c,name:l,propertiesByName:d}),ne(r.extends,Ti(function(h){var f=this.typeMap[h];f.traits=f.traits||[],f.traits.push(l)},this)),this.definePackage(r,s),this.typeMap[l]=r},sa.prototype.mapTypes=function(r,s,c){var l=oa(r.name)?{name:r.name}:this.typeMap[r.name],d=this;function h(g){return f(g,!0)}function f(g,v){var b=Bn(g,oa(g)?"":r.prefix);d.mapTypes(b,s,v)}if(!l)throw new Error("unknown type <"+r.name+">");ne(l.superClass,c?h:f),s(l,!c),ne(l.traits,h)},sa.prototype.getEffectiveDescriptor=function(r){var s=Bn(r),c=new Qt(s);this.mapTypes(s,function(d,h){c.addTrait(d,h)});var l=c.build();return this.definePackage(l,l.allTypes[l.allTypes.length-1].$pkg),l},sa.prototype.definePackage=function(r,s){this.properties.define(r,"$pkg",{value:s})},as.prototype.set=function(r,s,c){var l=this.model.getPropertyDescriptor(r,s),d=l&&l.name;void 0===c?l?delete r[d]:delete r.$attrs[s]:l?d in r?r[d]=c:Vl(r,l,c):r.$attrs[s]=c},as.prototype.get=function(r,s){var c=this.model.getPropertyDescriptor(r,s);if(!c)return r.$attrs[s];var l=c.name;return!r[l]&&c.isMany&&Vl(r,c,[]),r[l]},as.prototype.define=function(r,s,c){Object.defineProperty(r,s,c)},as.prototype.defineDescriptor=function(r,s){this.define(r,"$descriptor",{value:s})},as.prototype.defineModel=function(r,s){this.define(r,"$model",{value:s})},er.prototype.create=function(r,s){var c=this.getType(r);if(!c)throw new Error("unknown type <"+r+">");return new c(s)},er.prototype.getType=function(r){var s=this.typeCache,c=Lr(r)?r:r.ns.name,l=s[c];return l||(r=this.registry.getEffectiveDescriptor(c),l=s[c]=this.factory.createType(r)),l},er.prototype.createAny=function(r,s,c){var l=Bn(r),d={$type:r,$instanceOf:function(f){return f===this.$type}};return this.properties.defineDescriptor(d,{name:r,isGeneric:!0,ns:{prefix:l.prefix,localName:l.localName,uri:s}}),this.properties.defineModel(d,this),this.properties.define(d,"$parent",{enumerable:!1,writable:!0}),this.properties.define(d,"$instanceOf",{enumerable:!1,writable:!0}),ne(c,function(f,g){Xn(f)&&void 0!==f.value?d[f.name]=f.value:d[g]=f}),d},er.prototype.getPackage=function(r){return this.registry.getPackage(r)},er.prototype.getPackages=function(){return this.registry.getPackages()},er.prototype.getElementDescriptor=function(r){return r.$descriptor},er.prototype.hasType=function(r,s){return void 0===s&&(s=r,r=this),s in r.$model.getElementDescriptor(r).allTypesByName},er.prototype.getPropertyDescriptor=function(r,s){return this.getElementDescriptor(r).propertiesByName[s]},er.prototype.getTypeDescriptor=function(r){return this.registry.typeMap[r]};var No=String.fromCharCode,kr=Object.prototype.hasOwnProperty,fr=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Is={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function go(r,s,c,l){return l?kr.call(Is,l)?Is[l]:"&"+l+";":No(s||parseInt(c,16))}function si(r){return r.length>3&&-1!==r.indexOf("&")?r.replace(fr,go):r}Object.keys(Is).forEach(function(r){Is[r.toUpperCase()]=Is[r]});var aa="xsi:type",Na="non-whitespace outside of root node";function yo(r){return new Error(r)}function On(r){return"missing namespace for prefix <"+r+">"}function Mc(r){return{get:r,enumerable:!0}}function Hl(r){var s,c={};for(s in r)c[s]=r[s];return c}function $l(r){return r+"$uri"}function ef(){return{line:0,column:0}}function kg(r){throw r}function Pg(r){if(!this)return new Pg(r);var s,c,l,d,h,f,g,v,b,w=r&&r.proxy,C=kg,M=ef,T=!1,R=!1,F=null,$=!1;function B(j){j instanceof Error||(j=yo(j)),F=j,C(j,M)}function z(j){h&&(j instanceof Error||(j=yo(j)),h(j,M))}this.on=function(j,K){if("function"!=typeof K)throw yo("required args <name, cb>");switch(j){case"openTag":c=K;break;case"text":s=K;break;case"closeTag":l=K;break;case"error":C=K;break;case"warn":h=K;break;case"cdata":d=K;break;case"attention":v=K;break;case"question":g=K;break;case"comment":f=K;break;default:throw yo("unsupported event: "+j)}return this},this.ns=function(j){if(void 0===j&&(j={}),"object"!=typeof j)throw yo("required args <nsMap={}>");var K,ce={};for(K in j)ce[K]=j[K];return ce["http://www.w3.org/2001/XMLSchema-instance"]="xsi",R=!0,b=ce,this},this.parse=function(j){if("string"!=typeof j)throw yo("required args <xml=string>");return F=null,function(K){var ce,J,be,pe,Ee,it,Ce,Me,ht,X,I,se=R?[]:null,fe=R?function(jn){var Si,rn,Ui={};for(Si in jn)Ui[rn=jn[Si]]=rn,Ui[$l(rn)]=Si;return Ui}(b):null,Ie=[],rt=0,at=!1,Et=!1,wt=0,ft=0,Jt="",br=0;function zi(){if(null!==I)return I;var jn,Si,rn,Ui,Er,Vn,eo,on,qo,Ot,Rn,ll=R&&fe.xmlns,rc=R&&T?[]:null,Wi=br,to=Jt,Gi=to.length,wr={},Pm={};e:for(;Wi<Gi;Wi++)if(qo=!1,!(32===(Ot=to.charCodeAt(Wi))||Ot<14&&Ot>8)){for((Ot<65||Ot>122||Ot>90&&Ot<97)&&95!==Ot&&58!==Ot&&(z("illegal first char attribute name"),qo=!0),Rn=Wi+1;Rn<Gi;Rn++)if(!((Ot=to.charCodeAt(Rn))>96&&Ot<123||Ot>64&&Ot<91||Ot>47&&Ot<59||46===Ot||45===Ot||95===Ot)){if(32===Ot||Ot<14&&Ot>8){z("missing attribute value"),Wi=Rn;continue e}if(61===Ot)break;z("illegal attribute name char"),qo=!0}if("xmlns:xmlns"===(on=to.substring(Wi,Rn))&&(z("illegal declaration of xmlns"),qo=!0),34===(Ot=to.charCodeAt(Rn+1)))-1===(Rn=to.indexOf('"',Wi=Rn+2))&&-1!==(Rn=to.indexOf("'",Wi))&&(z("attribute value quote missmatch"),qo=!0);else if(39===Ot)-1===(Rn=to.indexOf("'",Wi=Rn+2))&&-1!==(Rn=to.indexOf('"',Wi))&&(z("attribute value quote missmatch"),qo=!0);else for(z("missing attribute value quotes"),qo=!0,Rn+=1;Rn<Gi&&!(32===(Ot=to.charCodeAt(Rn+1))||Ot<14&&Ot>8);Rn++);for(-1===Rn&&(z("missing closing quotes"),Rn=Gi,qo=!0),qo||(Vn=to.substring(Wi,Rn)),Wi=Rn;Rn+1<Gi&&!(32===(Ot=to.charCodeAt(Rn+1))||Ot<14&&Ot>8);Rn++)Wi===Rn&&(z("illegal character after attribute end"),qo=!0);if(Wi=Rn+1,!qo)if(on in Pm)z("attribute <"+on+"> already defined");else if(Pm[on]=!0,R)if(T){if(null!==(Er="xmlns"===on?"xmlns":120===on.charCodeAt(0)&&"xmlns:"===on.substr(0,6)?on.substr(6):null)){if(jn=si(Vn),Si=$l(Er),!(eo=b[jn])){if("xmlns"===Er||Si in fe&&fe[Si]!==jn)do{eo="ns"+rt++}while(void 0!==fe[eo]);else eo=Er;b[jn]=eo}fe[Er]!==eo&&(Ui||(fe=Hl(fe),Ui=!0),fe[Er]=eo,"xmlns"===Er&&(fe[$l(eo)]=jn,ll=eo),fe[Si]=jn),wr[on]=Vn;continue}rc.push(on,Vn)}else-1!==(Ot=on.indexOf(":"))?(rn=fe[on.substring(0,Ot)])?((on=ll===rn?on.substr(Ot+1):rn+on.substr(Ot))===aa&&(-1!==(Ot=Vn.indexOf(":"))?(rn=Vn.substring(0,Ot),Vn=(rn=fe[rn]||rn)+Vn.substring(Ot)):Vn=ll+":"+Vn),wr[on]=Vn):z(On(on.substring(0,Ot))):wr[on]=Vn;else wr[on]=Vn}if(T)for(Wi=0,Gi=rc.length;Wi<Gi;Wi++){if(on=rc[Wi++],Vn=rc[Wi],-1!==(Ot=on.indexOf(":"))){if(!(rn=fe[on.substring(0,Ot)])){z(On(on.substring(0,Ot)));continue}(on=ll===rn?on.substr(Ot+1):rn+on.substr(Ot))===aa&&(-1!==(Ot=Vn.indexOf(":"))?(rn=Vn.substring(0,Ot),Vn=(rn=fe[rn]||rn)+Vn.substring(Ot)):Vn=ll+":"+Vn)}wr[on]=Vn}return I=wr}for(M=function(){for(var jn,Si,rn=/(\r\n|\r|\n)/g,Ui=0,Er=0,Vn=0,eo=ft;wt>=Vn&&(jn=rn.exec(K))&&!((eo=jn[0].length+jn.index)>wt);)Ui+=1,Vn=eo;return-1==wt?(Er=eo,Si=K.substring(ft)):0===ft?Si=K.substring(ft,wt):(Er=wt-Vn,Si=-1==ft?K.substring(wt):K.substring(wt,ft+1)),{data:Si,line:Ui,column:Er}},w&&(X=Object.create({},{name:Mc(function(){return Me}),originalName:Mc(function(){return ht}),attrs:Mc(zi),ns:Mc(function(){return fe})}));-1!==ft;){if(-1===(wt=60===K.charCodeAt(ft)?ft:K.indexOf("<",ft)))return Ie.length?B("unexpected end of file"):0===ft?B("missing start tag"):void(ft<K.length&&K.substring(ft).trim()&&z(Na));if(ft!==wt)if(Ie.length){if(s&&(s(K.substring(ft,wt),si,M),$))return}else if(K.substring(ft,wt).trim()&&(z(Na),$))return;if(33===(Ee=K.charCodeAt(wt+1))){if(91===(pe=K.charCodeAt(wt+2))&&"CDATA["===K.substr(wt+3,6)){if(-1===(ft=K.indexOf("]]>",wt)))return B("unclosed cdata");if(d&&(d(K.substring(wt+9,ft),M),$))return;ft+=3;continue}if(45===pe&&45===K.charCodeAt(wt+3)){if(-1===(ft=K.indexOf("--\x3e",wt)))return B("unclosed comment");if(f&&(f(K.substring(wt+4,ft),si,M),$))return;ft+=3;continue}}if(63!==Ee){for(J=wt+1;;J++){if(it=K.charCodeAt(J),isNaN(it))return ft=-1,B("unclosed tag");if(34===it)J=-1!==(pe=K.indexOf('"',J+1))?pe:J;else if(39===it)J=-1!==(pe=K.indexOf("'",J+1))?pe:J;else if(62===it){ft=J;break}}if(33!==Ee){if(I={},47===Ee){if(at=!1,Et=!0,!Ie.length)return B("missing open tag");if(J=Me=Ie.pop(),K.substring(wt+2,pe=wt+2+J.length)!==J)return B("closing tag mismatch");for(;pe<ft;pe++)if(!(32===(Ee=K.charCodeAt(pe))||Ee>8&&Ee<14))return B("close tag")}else{if(47===K.charCodeAt(ft-1)?(J=Me=K.substring(wt+1,ft-1),at=!0,Et=!0):(J=Me=K.substring(wt+1,ft),at=!0,Et=!1),!(Ee>96&&Ee<123||Ee>64&&Ee<91||95===Ee||58===Ee))return B("illegal first char nodeName");for(pe=1,be=J.length;pe<be;pe++)if(!((Ee=J.charCodeAt(pe))>96&&Ee<123||Ee>64&&Ee<91||Ee>47&&Ee<59||45===Ee||95===Ee||46==Ee)){if(32===Ee||Ee<14&&Ee>8){Me=J.substring(0,pe),I=null;break}return B("invalid nodeName")}Et||Ie.push(Me)}if(R){if(ce=fe,at&&(Et||se.push(ce),null===I&&(T=-1!==J.indexOf("xmlns",pe))&&(br=pe,Jt=J,zi(),T=!1)),ht=Me,-1!==(Ee=Me.indexOf(":"))){if(!(Ce=fe[Me.substring(0,Ee)]))return B("missing namespace on <"+ht+">");Me=Me.substr(Ee+1)}else Ce=fe.xmlns;Ce&&(Me=Ce+":"+Me)}if(at&&(br=pe,Jt=J,c&&(w?c(X,si,Et,M):c(Me,zi,si,Et,M),$)))return;if(Et){if(l&&(l(w?X:Me,si,at,M),$))return;R&&(fe=at?ce:se.pop())}ft+=1}else{if(v&&(v(K.substring(wt,ft+1),si,M),$))return;ft+=1}}else{if(-1===(ft=K.indexOf("?>",wt)))return B("unclosed question");if(g&&(g(K.substring(wt,ft+2),M),$))return;ft+=2}}}(j),M=ef,$=!1,F},this.stop=function(){$=!0}}function Ig(r){return r.xml&&"lowerCase"===r.xml.tagAlias}var Og={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},zu="xsi:type";function Ng(r){return r.xml&&r.xml.serialize}function Fg(r){return Ng(r)===zu}function tf(r,s){return Ig(s)?r.prefix+":"+((c=r.localName).charAt(0).toUpperCase()+c.slice(1)):r.name;var c}function Os(r){return new Error(r)}function $r(r){return r.$descriptor}function nf(r){oe(this,r),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(s){this.references.push(s)},this.addElement=function(s){if(!s)throw Os("expected element");var c,l=this.elementsById,d=$r(s).idProperty;if(d&&(c=s.get(d.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(c))throw new Error("illegal ID <"+c+">");if(l[c])throw Os("duplicate ID <"+c+">");l[c]=s}},this.addWarning=function(s){this.warnings.push(s)}}function Dn(){}function zl(){}function Ul(){}function Rc(r,s){this.property=r,this.context=s}function Wl(r,s){this.element=s,this.propertyDesc=r}function kc(){}function Pr(r,s,c){this.model=r,this.type=r.getType(s),this.context=c}function rf(r,s,c){Pr.call(this,r,s,c)}function vo(r,s,c){this.model=r,this.context=c}function tr(r){r instanceof er&&(r={model:r}),oe(this,{lax:!1},r)}Dn.prototype.handleEnd=function(){},Dn.prototype.handleText=function(){},Dn.prototype.handleNode=function(){},(zl.prototype=Object.create(Dn.prototype)).handleNode=function(){return this},(Ul.prototype=Object.create(Dn.prototype)).handleText=function(r){this.body=(this.body||"")+r},(Rc.prototype=Object.create(Ul.prototype)).handleNode=function(r){if(this.element)throw Os("expected no sub nodes");return this.element=this.createReference(r),this},Rc.prototype.handleEnd=function(){this.element.id=this.body},Rc.prototype.createReference=function(r){return{property:this.property.ns.name,id:""}},(Wl.prototype=Object.create(Ul.prototype)).handleEnd=function(){var r=this.body||"",s=this.element,c=this.propertyDesc;r=$i(c.type,r),c.isMany?s.get(c.name).push(r):s.set(c.name,r)},(kc.prototype=Object.create(Ul.prototype)).handleNode=function(r){var s=this,c=this.element;return c?s=this.handleChild(r):(c=this.element=this.createElement(r),this.context.addElement(c)),s},(Pr.prototype=Object.create(kc.prototype)).addReference=function(r){this.context.addReference(r)},Pr.prototype.handleText=function(r){if(!$r(this.element).bodyProperty)throw Os("unexpected body text <"+r+">");Ul.prototype.handleText.call(this,r)},Pr.prototype.handleEnd=function(){var r=this.body,s=this.element,c=$r(s).bodyProperty;c&&void 0!==r&&(r=$i(c.type,r),s.set(c.name,r))},Pr.prototype.createElement=function(r){var s,c=r.attributes,l=this.type,d=$r(l),h=this.context,f=new l({}),g=this.model;return ne(c,function(v,b){var w=d.propertiesByName[b];w&&w.isReference?w.isMany?ne(v.split(" "),function(C){h.addReference({element:f,property:w.ns.name,id:C})}):h.addReference({element:f,property:w.ns.name,id:v}):(w?v=$i(w.type,v):"xmlns"!==b&&(s=Bn(b,d.ns.prefix),g.getPackage(s.prefix)&&h.addWarning({message:"unknown attribute <"+b+">",element:f,property:b,value:v})),f.set(b,v))}),f},Pr.prototype.getPropertyForNode=function(r){var s,c,C,T,R,F,$,B,M,l=Bn(r.name),h=this.model,f=$r(this.type),v=f.propertiesByName[l.name];if(v&&!v.isAttr)return Fg(v)&&(s=r.attributes[zu])?(C=h,T=M=Bn(s),R=C.getPackage(M.prefix),F=T.name,$=T.localName,s=(B=R.xml&&R.xml.typePrefix)&&0===$.indexOf(B)?T.prefix+":"+$.slice(B.length):F,oe({},v,{effectiveType:$r(c=h.getType(s)).name})):v;var b=h.getPackage(l.prefix);if(b){if(s=tf(l,b),c=h.getType(s),v=tn(f.properties,function(w){return!w.isVirtual&&!w.isReference&&!w.isAttribute&&c.hasType(w.type)}))return oe({},v,{effectiveType:$r(c).name})}else if(v=tn(f.properties,function(w){return!w.isReference&&!w.isAttribute&&"Element"===w.type}))return v;throw Os("unrecognized element <"+l.name+">")},Pr.prototype.toString=function(){return"ElementDescriptor["+$r(this.type).name+"]"},Pr.prototype.valueHandler=function(r,s){return new Wl(r,s)},Pr.prototype.referenceHandler=function(r){return new Rc(r,this.context)},Pr.prototype.handler=function(r){return"Element"===r?new vo(this.model,r,this.context):new Pr(this.model,r,this.context)},Pr.prototype.handleChild=function(r){var s,c,l,d;if(s=this.getPropertyForNode(r),l=this.element,Oa(c=s.effectiveType||s.type))return this.valueHandler(s,l);var h=(d=s.isReference?this.referenceHandler(s).handleNode(r):this.handler(c).handleNode(r)).element;return void 0!==h&&(s.isMany?l.get(s.name).push(h):l.set(s.name,h),s.isReference?(oe(h,{element:l}),this.context.addReference(h)):h.$parent=l),d},(rf.prototype=Object.create(Pr.prototype)).createElement=function(r){var s=r.name,c=Bn(s),d=this.type,h=this.model.getPackage(c.prefix),f=h&&tf(c,h)||s;if(!d.hasType(f))throw Os("unexpected element <"+r.originalName+">");return Pr.prototype.createElement.call(this,r)},(vo.prototype=Object.create(kc.prototype)).createElement=function(r){var s=r.name,c=Bn(s).prefix;return this.model.createAny(s,r.ns[c+"$uri"],r.attributes)},vo.prototype.handleChild=function(r){var s=new vo(this.model,"Element",this.context).handleNode(r),c=this.element,l=s.element;return void 0!==l&&((c.$children=c.$children||[]).push(l),l.$parent=c),s},vo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},tr.prototype.fromXML=function(r,s,c){var l=s.rootHandler;s instanceof Pr?(l=s,s={}):"string"==typeof s?(l=this.handler(s),s={}):"string"==typeof l&&(l=this.handler(l));var $,d=this.model,h=this.lax,f=new nf(oe({},s,{rootHandler:l})),g=new Pg({proxy:!0}),v=($=[],Object.defineProperty($,"peek",{value:function(){return this[this.length-1]}}),$);function b($,B,z){var j=B(),K=j.line,ce=j.column,J=j.data;"<"===J.charAt(0)&&-1!==J.indexOf(" ")&&(J=J.slice(0,J.indexOf(" "))+">");var be="unparsable content "+(J?J+" ":"")+"detected\n\tline: "+K+"\n\tcolumn: "+ce+"\n\tnested error: "+$.message;if(z)return f.addWarning({message:be,error:$}),!0;throw Os(be)}function w($,B){return b($,B,!0)}l.context=f,v.push(l);var C=/^<\?xml /i,M=/ encoding="([^"]+)"/i,T=/^utf-8$/i;function R($,B){try{v.peek().handleText($)}catch(z){w(z,B)}}var F=d.getPackages().reduce(function($,B){return $[B.uri]=B.prefix,$},{"http://www.w3.org/XML/1998/namespace":"xml"});return g.ns(F).on("openTag",function($,B,z,j){var K=$.attrs||{},ce=Object.keys(K).reduce(function(J,be){var pe=B(K[be]);return J[be]=pe,J},{});!function(J,be){var pe=v.peek();try{v.push(pe.handleNode(J))}catch(Ee){b(Ee,be,h)&&v.push(new zl)}}({name:$.name,originalName:$.originalName,attributes:ce,ns:$.ns},j)}).on("question",function($){if(C.test($)){var B=M.exec($),z=B&&B[1];z&&!T.test(z)&&f.addWarning({message:"unsupported document encoding <"+z+">, falling back to UTF-8"})}}).on("closeTag",function(){v.pop().handleEnd()}).on("cdata",R).on("text",function($,B,z){var j,K;K=z,(j=B($)).trim()&&R(j,K)}).on("error",b).on("warn",w),new Promise(function($,B){var z;try{g.parse(r),function(){var be,pe,Ee=f.elementsById,it=f.references;for(be=0;pe=it[be];be++){var Ce=pe.element,Me=Ee[pe.id],ht=$r(Ce).propertiesByName[pe.property];if(Me||f.addWarning({message:"unresolved reference <"+pe.id+">",element:pe.element,property:pe.property,value:pe.id}),ht.isMany){var X=Ce.get(ht.name),I=X.indexOf(pe);-1===I&&(I=X.length),Me?X[I]=Me:X.splice(I,1)}else Ce.set(ht.name,Me)}}()}catch(be){z=be}var j=l.element;z||j||(z=Os("failed to parse document as <"+l.type.$descriptor.name+">"));var K=f.warnings,ce=f.references,J=f.elementsById;return z?(z.warnings=K,B(z)):$({rootElement:j,elementsById:J,references:ce,warnings:K})})},tr.prototype.handler=function(r){return new rf(this.model,r)};var cs=/<|>|'|"|&|\n\r|\n/g,ah=/<|>|&/g;function Gl(r){var s={},c={},l={},d=[],h=[];this.byUri=function(f){return c[f]||r&&r.byUri(f)},this.add=function(f,g){c[f.uri]=f,g?d.push(f):h.push(f),this.mapPrefix(f.prefix,f.uri)},this.uriByPrefix=function(f){return s[f||"xmlns"]},this.mapPrefix=function(f,g){s[f||"xmlns"]=g},this.getNSKey=function(f){return void 0!==f.prefix?f.uri+"|"+f.prefix:f.uri},this.logUsed=function(f){var g=f.uri,v=this.getNSKey(f);l[v]=this.byUri(g),r&&r.logUsed(f)},this.getUsed=function(f){var g=this;return[].concat(d,h).filter(function(v){var b=g.getNSKey(v);return l[b]})}}function of(r,s){return Ig(s)?(c=r).charAt(0).toLowerCase()+c.slice(1):r;var c}function Pc(r,s){r.super_=s,r.prototype=Object.create(s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}function Fa(r){return Lr(r)?r:(r.prefix?r.prefix+":":"")+r.localName}var sf={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ch={"<":"lt",">":"gt","&":"amp"};function ti(r,s,c){return(r=Lr(r)?r:""+r).replace(s,function(l){return"&"+c[l]+";"})}function nr(r){this.tagName=r}function ca(){}function ql(r){this.tagName=r}function En(r,s){this.body=[],this.attrs=[],this.parent=r,this.propertyDescriptor=s}function m(r,s){En.call(this,r,s)}function _(){this.value="",this.write=function(r){this.value+=r}}function x(r,s){var c=[""];this.append=function(l){return r.write(l),this},this.appendNewLine=function(){return s&&r.write("\n"),this},this.appendIndent=function(){return s&&r.write(c.join("  ")),this},this.indent=function(){return c.push(""),this},this.unindent=function(){return c.pop(),this}}function S(r){return r=oe({format:!1,preamble:!0},r||{}),{toXML:function(s,c){var l=c||new _,d=new x(l,r.format);if(r.preamble&&d.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new En).build(s).serializeTo(d),!c)return l.value}}}function P(r,s){er.call(this,r,s)}nr.prototype.build=function(r){return this.element=r,this},nr.prototype.serializeTo=function(r){r.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},ca.prototype.serializeValue=ca.prototype.serializeTo=function(r){r.append(this.escape?ti(this.value,ah,ch):this.value)},ca.prototype.build=function(r,s){return this.value=s,"String"===r.type&&-1!==s.search(ah)&&(this.escape=!0),this},Pc(ql,ca),ql.prototype.serializeTo=function(r){r.appendIndent().append("<"+this.tagName+">"),this.serializeValue(r),r.append("</"+this.tagName+">").appendNewLine()},En.prototype.build=function(r){this.element=r;var s,c,f,l=r.$descriptor,d=this.propertyDescriptor,h=l.isGeneric;return s=h?this.parseGeneric(r):this.parseNsAttributes(r),this.ns=d?this.nsPropertyTagName(d):this.nsTagName(l),this.tagName=this.addTagName(this.ns),h||(c=gt((f=r).$descriptor.properties,function(g){var v=g.name;if(g.isVirtual||!Jo(f,v))return!1;var b=f[v];return b!==g.default&&null!==b&&(!g.isMany||b.length)}),this.parseAttributes(gt(c,function(f){return f.isAttr})),this.parseContainments(function(f){return gt(f,function(g){return!g.isAttr})}(c))),this.parseGenericAttributes(r,s),this},En.prototype.nsTagName=function(r){return function(s,c){return oe(c.isGeneric?{localName:c.ns.localName}:{localName:of(c.ns.localName,c.$pkg)},s)}(this.logNamespaceUsed(r.ns),r)},En.prototype.nsPropertyTagName=function(r){return function(s,c){return oe({localName:c.ns.localName},s)}(this.logNamespaceUsed(r.ns),r)},En.prototype.isLocalNs=function(r){return r.uri===this.ns.uri},En.prototype.nsAttributeName=function(r){var s;if(s=Lr(r)?Bn(r):r.ns,r.inherited)return{localName:s.localName};var c=this.logNamespaceUsed(s);return this.getNamespaces().logUsed(c),this.isLocalNs(c)?{localName:s.localName}:oe({localName:s.localName},c)},En.prototype.parseGeneric=function(r){var s=this,c=this.body,l=[];return ne(r,function(d,h){"$body"===h?c.push((new ca).build({type:"String"},d)):"$children"===h?ne(d,function(f){c.push(new En(s).build(f))}):0!==h.indexOf("$")&&s.parseNsAttribute(r,h,d)&&l.push({name:h,value:d})}),l},En.prototype.parseNsAttribute=function(r,s,c){var l,d=r.$model,h=Bn(s);if("xmlns"===h.prefix&&(l={prefix:h.localName,uri:c}),h.prefix||"xmlns"!==h.localName||(l={uri:c}),!l)return{name:s,value:c};if(d&&d.getPackage(c))this.logNamespace(l,!0,!0);else{var f=this.logNamespaceUsed(l,!0);this.getNamespaces().logUsed(f)}},En.prototype.parseNsAttributes=function(r,s){var c=this,d=[];return ne(r.$attrs,function(h,f){var g=c.parseNsAttribute(r,f,h);g&&d.push(g)}),d},En.prototype.parseGenericAttributes=function(r,s){var c=this;ne(s,function(l){if(l.name!==zu)try{c.addAttribute(c.nsAttributeName(l.name),l.value)}catch(d){console.warn("missing namespace information for ",l.name,"=",l.value,"on",r,d)}})},En.prototype.parseContainments=function(r){var s=this,c=this.body,l=this.element;ne(r,function(d){var h=l.get(d.name),f=d.isReference;if(d.isMany||(h=[h]),d.isBody)c.push((new ca).build(d,h[0]));else if(Oa(d.type))ne(h,function(b){c.push(new ql(s.addTagName(s.nsPropertyTagName(d))).build(d,b))});else if(f)ne(h,function(b){c.push(new nr(s.addTagName(s.nsPropertyTagName(d))).build(b))});else{var g=Fg(d),v="property"===Ng(d);ne(h,function(b){var w;w=g?new m(s,d):v?new En(s,d):new En(s),c.push(w.build(b))})}})},En.prototype.getNamespaces=function(r){var s,c=this.namespaces,l=this.parent;return c||(s=l&&l.getNamespaces(),r||!s?this.namespaces=c=new Gl(s):c=s),c},En.prototype.logNamespace=function(r,s,c){var l=this.getNamespaces(c),d=r.uri,h=r.prefix;return l.byUri(d)&&!c||l.add(r,s),l.mapPrefix(h,d),r},En.prototype.logNamespaceUsed=function(r,s){var c,l,d,h=this.element.$model,f=this.getNamespaces(s),g=r.prefix,v=r.uri;if(!g&&!v)return{localName:r.localName};if(d=Og[g]||h&&(h.getPackage(g)||{}).uri,!(v=v||d||f.uriByPrefix(g)))throw new Error("no namespace uri given for prefix <"+g+">");if(!(r=f.byUri(v))){for(c=g,l=1;f.uriByPrefix(c);)c=g+"_"+l++;r=this.logNamespace({prefix:c,uri:v},d===v)}return g&&f.mapPrefix(g,v),r},En.prototype.parseAttributes=function(r){var s=this,c=this.element;ne(r,function(l){var d=c.get(l.name);if(l.isReference)if(l.isMany){var h=[];ne(d,function(f){h.push(f.id)}),d=h.join(" ")}else d=d.id;s.addAttribute(s.nsAttributeName(l),d)})},En.prototype.addTagName=function(r){var s=this.logNamespaceUsed(r);return this.getNamespaces().logUsed(s),Fa(r)},En.prototype.addAttribute=function(r,s){var c=this.attrs;Lr(s)&&(s=ti(s,cs,sf)),c.push({name:r,value:s})},En.prototype.serializeAttributes=function(r){var l,s=this.attrs,c=this.namespaces;c&&(s=(l=c,l.getUsed().filter(function(d){return"xml"!==d.prefix}).map(function(d){return{name:"xmlns"+(d.prefix?":"+d.prefix:""),value:d.uri}})).concat(s)),ne(s,function(l){r.append(" ").append(Fa(l.name)).append('="').append(l.value).append('"')})},En.prototype.serializeTo=function(r){var s=this.body[0],c=s&&s.constructor!==ca;r.appendIndent().append("<"+this.tagName),this.serializeAttributes(r),r.append(s?">":" />"),s&&(c&&r.appendNewLine().indent(),ne(this.body,function(l){l.serializeTo(r)}),c&&r.unindent().appendIndent(),r.append("</"+this.tagName+">")),r.appendNewLine()},Pc(m,En),m.prototype.parseNsAttributes=function(r){var s=En.prototype.parseNsAttributes.call(this,r),c=r.$descriptor;if(c.name===this.propertyDescriptor.type)return s;var l=this.typeNs=this.nsTagName(c);this.getNamespaces().logUsed(this.typeNs);var d=r.$model.getPackage(l.uri),h=d.xml&&d.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(zu),(l.prefix?l.prefix+":":"")+h+c.ns.localName),s},m.prototype.isLocalNs=function(r){return r.uri===(this.typeNs||this.ns).uri},(P.prototype=Object.create(er.prototype)).fromXML=function(r,s,c){Lr(s)||(c=s,s="bpmn:Definitions");var l=new tr(oe({model:this,lax:!0},c)),d=l.handler(s);return l.fromXML(r,d)},P.prototype.toXML=function(r,s){var c=new S(s);return new Promise(function(l,d){try{return l({xml:c.toXML(r)})}catch(h){return d(h)}})};var O={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function H(r,s){return new P(oe({},O,r),s)}function Y(r){return r?"<"+r.$type+(r.id?' id="'+r.id:"")+'" />':"<null>"}var Q=new Ac({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function he(r,s){return r.$instanceOf(s)}function Te(r,s){var c={},l=[];function d(Ce,Me){return function(ht){Ce(ht,Me)}}function h(Ce){c[Ce.id]=Ce}function f(Ce,Me){try{var ht=Ce.di&&function(X,I){if(X.gfx)throw new Error(s("already rendered {element}",{element:Y(X)}));return r.element(X,I)}(Ce,Me);return h(Ce),ht}catch(X){g(X.message,{element:Ce,error:X}),console.error(s("failed to import {element}",{element:Y(Ce)})),console.error(X)}}function g(Ce,Me){r.error(Ce,Me)}function v(Ce){var Me=Ce.bpmnElement;Me?Me.di?g(s("multiple DI elements defined for {element}",{element:Y(Me)}),{element:Me}):(Q.bind(Me,"di"),Me.di=Ce):g(s("no bpmnElement referenced in {element}",{element:Y(Ce)}),{element:Ce})}function w(Ce){v(Ce)}function C(){for(;l.length;)l.shift()()}function M(Ce,Me){Ee(Ce,Me),j(Ce.ioSpecification,Me),z(Ce.artifacts,Me),h(Ce)}function T(Ce,Me){f(Ce,Me)}function R(Ce,Me){f(Ce,Me)}function F(Ce,Me){f(Ce,Me)}function $(Ce,Me){f(Ce,Me)}function B(Ce,Me){f(Ce,Me)}function z(Ce,Me){ne(Ce,function(ht){he(ht,"bpmn:Association")?l.push(function(){B(ht,Me)}):B(ht,Me)})}function j(Ce,Me){Ce&&(ne(Ce.dataInputs,d(F,Me)),ne(Ce.dataOutputs,d($,Me)))}function K(Ce,Me){Ee(Ce,Me),z(Ce.artifacts,Me)}function ce(Ce,Me){var ht=f(Ce,Me);he(Ce,"bpmn:SubProcess")&&K(Ce,ht||Me),he(Ce,"bpmn:Activity")&&j(Ce.ioSpecification,Me),l.push(function(){ne(Ce.dataInputAssociations,d(R,Me)),ne(Ce.dataOutputAssociations,d(R,Me))})}function be(Ce,Me){l.push(function(){var X,ht=f(Ce,Me);Ce.childLaneSet&&pe(Ce.childLaneSet,ht||Me),ne((X=Ce).flowNodeRef,function(I){var se=I.get("lanes");se&&se.push(X)})})}function pe(Ce,Me){ne(Ce.lanes,d(be,Me))}function Ee(Ce,Me){var X;X=Me,ne(Ce.flowElements,function(I){he(I,"bpmn:SequenceFlow")?l.push(function(){f(I,X)}):he(I,"bpmn:BoundaryEvent")?l.unshift(function(){ce(I,X)}):he(I,"bpmn:FlowNode")?ce(I,X):he(I,"bpmn:DataObject")||(he(I,"bpmn:DataStoreReference")||he(I,"bpmn:DataObjectReference")?function(Ce,Me){f(Ce,Me)}(I,X):g(s("unrecognized flowElement {element} in context {context}",{element:Y(I),context:X?Y(X.businessObject):"null"}),{element:I,context:X}))}),Ce.laneSets&&function(ht,X){ne(ht,d(pe,X))}(Ce.laneSets,Me)}function it(Ce,Me){var ht=f(Ce,Me),X=Ce.processRef;X&&M(X,ht||Me)}return{handleDeferred:C,handleDefinitions:function(Ce,Me){var ht=Ce.diagrams;if(Me&&-1===ht.indexOf(Me))throw new Error(s("diagram not part of bpmn:Definitions"));if(!Me&&ht&&ht.length&&(Me=ht[0]),!Me)throw new Error(s("no diagram to display"));!function(Ce){var Me;v(Me=Ce.plane),ne(Me.planeElement,w)}(Me);var X=Me.plane;if(!X)throw new Error(s("no plane for {element}",{element:Y(Me)}));var I=X.bpmnElement;if(!I){if(!(I=tn(Ce.rootElements,function(rt){return he(rt,"bpmn:Process")||he(rt,"bpmn:Collaboration")})))throw new Error(s("no process or collaboration to display"));g(s("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Y(X),rootElement:Y(I)})),X.bpmnElement=I,v(X)}var se,fe=r.root(I,X);if(he(I,"bpmn:Process"))M(I,fe);else{if(!he(I,"bpmn:Collaboration"))throw new Error(s("unsupported bpmnElement for {plane}: {rootElement}",{plane:Y(X),rootElement:Y(I)}));ne((se=I).participants,d(it)),z(se.artifacts),l.push(function(){ne(se.messageFlows,d(T,undefined))}),function(Ie,rt){gt(Ie,function(at){return!c[at.id]&&he(at,"bpmn:Process")&&at.laneSets}).forEach(d(M,rt))}(Ce.rootElements,fe)}C()},handleSubProcess:K,registerDi:v}}function ot(r){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var s=arguments.length;if(!(s>=1&&di(arguments[s-1])))return r.apply(this,arguments);var c=arguments[s-1];console.warn(new Error("Passing callbacks to "+r.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var l=Array.prototype.slice.call(arguments,0,-1);r.apply(this,l).then(function(d){var h=Object.keys(d)[0];return c(null,d[h])},function(d){return c(d,d.warnings)})}}var Ae='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function $e(r){return r.join(";")}var Ye,De=$e(["color: #404040"]),we='<div class="bjs-powered-by-lightbox" style="'+$e(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+$e(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+$e(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+De+'">'+Ae+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function ye(r){var s,c;r=oe({},Pe,r),this._moddle=this._createModdle(r),this._container=this._createContainer(r),s=this._container,c=ke('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+De+'">'+Ae+"</a>"),s.appendChild(c),Ze.bind(c,"click",function(l){Ye||(Ye=ke(we),vt_bind(Ye,".backdrop","click",function(d){document.body.removeChild(Ye)})),document.body.appendChild(Ye),l.preventDefault()}),this._init(this._container,this._moddle,r)}function ge(r,s){return r.warnings=s,r}Oe(ye,Tt),ye.prototype.importXML=ot(function(r,s){var c=this;return new Promise(function(l,d){r=c._emit("import.parse.start",{xml:r})||r,c._moddle.fromXML(r,"bpmn:Definitions").then(function(h){var f,g,v=h.rootElement,w=h.warnings;v=c._emit("import.parse.complete",(f={error:null,definitions:v,elementsById:h.elementsById,references:h.references,warnings:w},g=c.get("eventBus").createEvent(f),Object.defineProperty(g,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:f.warnings,references:f.references,elementsById:f.elementsById}}}),g))||v,c.importDefinitions(v,s).then(function(M){var T=[].concat(w,M.warnings||[]);return c._emit("import.done",{error:null,warnings:T}),l({warnings:T})}).catch(function(M){var T=[].concat(w,M.warnings||[]);return c._emit("import.done",{error:M,warnings:T}),d(ge(M,T))})}).catch(function(h){return c._emit("import.parse.complete",{error:h}),(g=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec((f=h).message))&&(f.message="unparsable content <"+g[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+g[2]),c._emit("import.done",{error:h=f,warnings:h.warnings}),d(h);var f,g})})}),ye.prototype.importDefinitions=ot(function(r,s){var c=this;return new Promise(function(l,d){c._setDefinitions(r),c.open(s).then(function(h){return l({warnings:h.warnings})}).catch(function(h){return d(h)})})}),ye.prototype.open=ot(function(r){var s=this._definitions,c=r,l=this;return new Promise(function(d,h){if(!s){var f=new Error("no XML imported");return h(ge(f,[]))}if("string"==typeof r&&!(c=(b=r)&&tn((v=s).diagrams,function(w){return w.id===b})||null)){var g=new Error("BPMNDiagram <"+r+"> not found");return h(ge(g,[]))}var v,b;try{l.clear()}catch(v){return h(ge(v,[]))}(function(r,s,c){var l,d,h,f=[];return new Promise(function(g,v){try{return l=r.get("bpmnImporter"),d=r.get("eventBus"),h=r.get("translate"),d.fire("import.render.start",{definitions:s}),b=s,w=c,new Te({root:function(C){return l.add(C)},element:function(C,M){return l.add(C,M)},error:function(C,M){f.push({message:C,context:M})}},h).handleDefinitions(b,w),d.fire("import.render.complete",{error:void 0,warnings:f}),g({warnings:f})}catch(b){return b.warnings=f,v(b)}var b,w})})(l,s,c).then(function(v){return d({warnings:v.warnings})}).catch(function(v){return h(v)})})}),ye.prototype.saveXML=ot(function(r){r=r||{};var s=this,c=this._definitions;return new Promise(function(l){if(!c)return l({error:new Error("no definitions loaded")});c=s._emit("saveXML.start",{definitions:c})||c,s._moddle.toXML(c,r).then(function(d){var h=d.xml;return h=s._emit("saveXML.serialized",{xml:h})||h,l({xml:h})})}).catch(function(l){return{error:l}}).then(function(l){s._emit("saveXML.done",l);var d=l.error;return d?Promise.reject(d):l})}),ye.prototype.saveSVG=ot(function(r){var s=this;return new Promise(function(c,l){var d,h;s._emit("saveSVG.start");try{var f=s.get("canvas"),g=f.getDefaultLayer(),v=Un("defs",f._svg),b=th(g),w=v?"<defs>"+th(v)+"</defs>":"",C=g.getBBox();d='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+C.width+'" height="'+C.height+'" viewBox="'+C.x+" "+C.y+" "+C.width+" "+C.height+'" version="1.1">'+w+b+"</svg>"}catch(M){h=M}return s._emit("saveSVG.done",{error:h,svg:d}),h?l(h):c({svg:d})})}),ye.prototype._setDefinitions=function(r){this._definitions=r},ye.prototype.getModules=function(){return this._modules},ye.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(r){var s=r.businessObject;s&&s.di&&delete s.di}),Tt.prototype.clear.call(this))},ye.prototype.destroy=function(){Tt.prototype.destroy.call(this),As(this._container)},ye.prototype.on=function(r,s,c,l){return this.get("eventBus").on(r,s,c,l)},ye.prototype.off=function(r,s){this.get("eventBus").off(r,s)},ye.prototype.attachTo=function(r){if(!r)throw new Error("parentNode required");this.detach(),r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),"string"==typeof r&&(r=Un(r)),r.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},ye.prototype.getDefinitions=function(){return this._definitions},ye.prototype.detach=function(){var r=this._container,s=r.parentNode;s&&(this._emit("detach",{}),s.removeChild(r))},ye.prototype._init=function(r,s,c){var l=c.modules||this.getModules(),h=[].concat([{bpmnjs:["value",this],moddle:["value",s]}],l,c.additionalModules||[]),f=oe(Zt(c,["additionalModules"]),{canvas:oe({},c.canvas,{container:r}),modules:h});Tt.call(this,f),c&&c.container&&this.attachTo(c.container)},ye.prototype._emit=function(r,s){return this.get("eventBus").fire(r,s)},ye.prototype._createContainer=function(r){var s=ke('<div class="bjs-container"></div>');return oe(s.style,{width:Ue(r.width),height:Ue(r.height),position:r.position}),s},ye.prototype._createModdle=function(r){return new H(oe({},this._moddleExtensions,r.moddleExtensions))},ye.prototype._modules=[];var Pe={width:"100%",height:"100%",position:"relative"};function Ue(r){return r+(Re(r)?"px":"")}function Fe(r){ye.call(this,r),this.on("import.parse.complete",function(s){s.error||this._collectIds(s.definitions,s.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}function V(r,s){var c=Se(r);return c&&"function"==typeof c.$instanceOf&&c.$instanceOf(s)}function Se(r){return r&&r.businessObject||r}function qe(r){return!V(r,"bpmn:CallActivity")&&(V(r,"bpmn:SubProcess")?Se(r).di&&!!Se(r).di.isExpanded:!V(r,"bpmn:Participant")||!!Se(r).processRef)}function Wn(r){return r&&!!Se(r).triggeredByEvent}function ze(r,s){var c=Se(r),l=!1;return c.eventDefinitions&&ne(c.eventDefinitions,function(d){V(d,s)&&(l=!0)}),l}function Ve(r){return V(r,"bpmn:FlowElement")||V(r,"bpmn:Participant")||V(r,"bpmn:Lane")||V(r,"bpmn:SequenceFlow")||V(r,"bpmn:MessageFlow")||V(r,"bpmn:DataInput")||V(r,"bpmn:DataOutput")?"name":V(r,"bpmn:TextAnnotation")?"text":V(r,"bpmn:Group")?"categoryValueRef":void 0}function ve(r){var d,s=r.businessObject,c=Ve(s);if(c)return"categoryValueRef"===c?(d=s.categoryValueRef)&&d.value||"":s[c]||""}function q(r,s,c){return jt(r.eventDefinitions,function(l){return l.$type===s&&(d=r,ur(c,function(f,g){return d[g]==f}));var d})}function N(r){return r.businessObject.di}function re(r){return r.businessObject}function le(r,s){var c=N(r);return c.get("color:background-color")||c.get("bioc:fill")||s||"white"}function de(r,s){var c=N(r);return c.get("color:border-color")||c.get("bioc:stroke")||s||"black"}function tt(r,s,c){var l=N(r).get("label");return l&&l.get("color:color")||s||de(r,c)}Oe(Fe,ye),Fe.prototype._createModdle=function(r){var s=ye.prototype._createModdle.call(this,r);return s.ids=new lr([32,36,1]),s},Fe.prototype._collectIds=function(r,s){var c,l=r.$model.ids;for(c in l.clear(),s)l.claim(c,s[c])};var mt=new lr,It=.95;function Bt(r,s,c,l,d,h,f){Po.call(this,s,f);var g=r&&r.defaultFillColor,v=r&&r.defaultStrokeColor,b=r&&r.defaultLabelColor,w=mt.next(),C={},M=c.computeStyle;function T(X,I){var se=oe({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},I.attrs),fe=I.ref||{x:0,y:0},Ie=I.scale||1;"none"===se.strokeDasharray&&(se.strokeDasharray=[1e4,1]);var rt=st("marker");Ne(I.element,se),ut(rt,I.element),Ne(rt,{id:X,viewBox:"0 0 20 20",refX:fe.x,refY:fe.y,markerWidth:20*Ie,markerHeight:20*Ie,orient:"auto"});var at=Un("defs",d._svg);at||(at=st("defs"),ut(d._svg,at)),ut(at,rt),C[X]=rt}function R(X){return X.replace(/[^0-9a-zA-z]+/g,"_")}function F(X,I,se){var fe=X+"-"+R(I)+"-"+R(se)+"-"+w;return C[fe]||function(Ie,rt,at,Et){if("sequenceflow-end"===rt){var wt=st("path");Ne(wt,{d:"M 1 5 L 11 10 L 1 15 Z"}),T(Ie,{element:wt,ref:{x:11,y:10},scale:.5,attrs:{fill:Et,stroke:Et}})}if("messageflow-start"===rt){var ft=st("circle");Ne(ft,{cx:6,cy:6,r:3.5}),T(Ie,{element:ft,attrs:{fill:at,stroke:Et},ref:{x:6,y:6}})}if("messageflow-end"===rt){var Jt=st("path");Ne(Jt,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),T(Ie,{element:Jt,attrs:{fill:at,stroke:Et,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===rt){var br=st("path");Ne(br,{d:"M 11 5 L 1 10 L 11 15"}),T(Ie,{element:br,attrs:{fill:"none",stroke:Et,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===rt){var zi=st("path");Ne(zi,{d:"M 1 5 L 11 10 L 1 15"}),T(Ie,{element:zi,attrs:{fill:"none",stroke:Et,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===rt){var Nn=st("path");Ne(Nn,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),T(Ie,{element:Nn,attrs:{fill:at,stroke:Et},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===rt){var jn=st("path");Ne(jn,{d:"M 6 4 L 10 16"}),T(Ie,{element:jn,attrs:{stroke:Et},ref:{x:0,y:10},scale:.5})}}(fe,X,I,se),"url(#"+fe+")"}function $(X,I,se,fe,Ie){Xn(fe)&&(Ie=fe,fe=0),fe=fe||0,"none"===(Ie=M(Ie,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete Ie.fillOpacity;var rt=I/2,at=se/2,Et=st("circle");return Ne(Et,{cx:rt,cy:at,r:Math.round((I+se)/4-fe)}),Ne(Et,Ie),ut(X,Et),Et}function B(X,I,se,fe,Ie,rt){Xn(Ie)&&(rt=Ie,Ie=0),Ie=Ie||0,rt=M(rt,{stroke:"black",strokeWidth:2,fill:"white"});var at=st("rect");return Ne(at,{x:Ie,y:Ie,width:I-2*Ie,height:se-2*Ie,rx:fe,ry:fe}),Ne(at,rt),ut(X,at),at}function z(X,I,se){var fe=Js(I,se=M(se,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return ut(X,fe),fe}function j(X,I,se){se=M(se,["no-fill"],{strokeWidth:2,stroke:"black"});var fe=st("path");return Ne(fe,{d:I}),Ne(fe,se),ut(X,fe),fe}function K(X,I,se,fe){return j(I,se,oe({"data-marker":X},fe))}function ce(X){return function(I,se){return Me[X](I,se)}}function J(X){return Me[X]}function be(X,I){var Ie,se=re(X),fe="bpmn:IntermediateThrowEvent"===(Ie=se).$type||"bpmn:EndEvent"===Ie.$type;return se.eventDefinitions&&se.eventDefinitions.length>1?se.parallelMultiple?J("bpmn:ParallelMultipleEventDefinition")(I,X,fe):J("bpmn:MultipleEventDefinition")(I,X,fe):q(se,"bpmn:MessageEventDefinition")?J("bpmn:MessageEventDefinition")(I,X,fe):q(se,"bpmn:TimerEventDefinition")?J("bpmn:TimerEventDefinition")(I,X,fe):q(se,"bpmn:ConditionalEventDefinition")?J("bpmn:ConditionalEventDefinition")(I,X):q(se,"bpmn:SignalEventDefinition")?J("bpmn:SignalEventDefinition")(I,X,fe):q(se,"bpmn:EscalationEventDefinition")?J("bpmn:EscalationEventDefinition")(I,X,fe):q(se,"bpmn:LinkEventDefinition")?J("bpmn:LinkEventDefinition")(I,X,fe):q(se,"bpmn:ErrorEventDefinition")?J("bpmn:ErrorEventDefinition")(I,X,fe):q(se,"bpmn:CancelEventDefinition")?J("bpmn:CancelEventDefinition")(I,X,fe):q(se,"bpmn:CompensateEventDefinition")?J("bpmn:CompensateEventDefinition")(I,X,fe):q(se,"bpmn:TerminateEventDefinition")?J("bpmn:TerminateEventDefinition")(I,X,fe):null}function pe(X,I,se){se=oe({size:{width:100}},se);var fe=h.createText(I||"",se);return $t(fe).add("djs-label"),ut(X,fe),fe}function Ee(X,I,se){return pe(X,re(I).name,{box:I,align:se,padding:5,style:{fill:tt(I,b,v)}})}function it(X,I,se){Rr(pe(X,I,{box:{height:30,width:se.height},align:"center-middle",style:{fill:tt(se,b,v)}}),0,1*se.height,270)}function Ce(X){for(var I=X.waypoints,se="m  "+I[0].x+","+I[0].y,fe=1;fe<I.length;fe++)se+="L"+I[fe].x+","+I[fe].y+" ";return se}var Me=this.handlers={"bpmn:Event":function(X,I,se){return"fillOpacity"in se||(se.fillOpacity=It),$(X,I.width,I.height,se)},"bpmn:StartEvent":function(X,I){var se={fill:le(I,g),stroke:de(I,v)};re(I).isInterrupting||(se={strokeDasharray:"6",strokeLinecap:"round",fill:le(I,g),stroke:de(I,v)});var fe=J("bpmn:Event")(X,I,se);return be(I,X),fe},"bpmn:MessageEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:I.width,containerHeight:I.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:se?de(I,v):le(I,g),stroke:se?le(I,g):de(I,v)})},"bpmn:TimerEventDefinition":function(X,I){var se=$(X,I.width,I.height,.2*I.height,{strokeWidth:2,fill:le(I,g),stroke:de(I,v)});j(X,l.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:I.width,containerHeight:I.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:de(I,v)});for(var fe=0;fe<12;fe++)j(X,l.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:I.width,containerHeight:I.height,position:{mx:.5,my:.5}}),{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*fe+","+I.height/2+","+I.width/2+")",stroke:de(I,v)});return se},"bpmn:EscalationEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)})},"bpmn:ConditionalEventDefinition":function(X,I){return j(X,l.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:de(I,v)})},"bpmn:LinkEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)})},"bpmn:ErrorEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:I.width,containerHeight:I.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)})},"bpmn:CancelEventDefinition":function(X,I,se){var fe=j(X,l.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)});return Pi(fe,45),fe},"bpmn:CompensateEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)})},"bpmn:SignalEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:I.width,containerHeight:I.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:se?de(I,v):"none",stroke:de(I,v)})},"bpmn:MultipleEventDefinition":function(X,I,se){return j(X,l.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:I.width,containerHeight:I.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:se?de(I,v):"none"})},"bpmn:ParallelMultipleEventDefinition":function(X,I){return j(X,l.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:I.width,containerHeight:I.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:de(I,v),stroke:de(I,v)})},"bpmn:EndEvent":function(X,I){var se=J("bpmn:Event")(X,I,{strokeWidth:4,fill:le(I,g),stroke:de(I,v)});return be(I,X),se},"bpmn:TerminateEventDefinition":function(X,I){return $(X,I.width,I.height,8,{strokeWidth:4,fill:de(I,v),stroke:de(I,v)})},"bpmn:IntermediateEvent":function(X,I){var se=J("bpmn:Event")(X,I,{strokeWidth:1,fill:le(I,g),stroke:de(I,v)});return $(X,I.width,I.height,3,{strokeWidth:1,fill:le(I,"none"),stroke:de(I,v)}),be(I,X),se},"bpmn:IntermediateCatchEvent":ce("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":ce("bpmn:IntermediateEvent"),"bpmn:Activity":function(X,I,se){return"fillOpacity"in(se=se||{})||(se.fillOpacity=It),B(X,I.width,I.height,10,se)},"bpmn:Task":function(X,I){var se={fill:le(I,g),stroke:de(I,v)},fe=J("bpmn:Activity")(X,I,se);return Ee(X,I,"center-middle"),ht(X,I),fe},"bpmn:ServiceTask":function(X,I){var se=J("bpmn:Task")(X,I);return j(X,l.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:le(I,g),stroke:de(I,v)}),j(X,l.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:le(I,g)}),j(X,l.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:le(I,g),stroke:de(I,v)}),se},"bpmn:UserTask":function(X,I){var se=J("bpmn:Task")(X,I);return j(X,l.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:le(I,g),stroke:de(I,v)}),j(X,l.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:le(I,g),stroke:de(I,v)}),j(X,l.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:de(I,v),stroke:de(I,v)}),se},"bpmn:ManualTask":function(X,I){var se=J("bpmn:Task")(X,I);return j(X,l.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:le(I,g),stroke:de(I,v)}),se},"bpmn:SendTask":function(X,I){var se=J("bpmn:Task")(X,I);return j(X,l.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:de(I,v),stroke:le(I,g)}),se},"bpmn:ReceiveTask":function(X,I){var se,fe=re(I),Ie=J("bpmn:Task")(X,I);return fe.instantiate?($(X,28,28,4.4,{strokeWidth:1}),se=l.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):se=l.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),j(X,se,{strokeWidth:1,fill:le(I,g),stroke:de(I,v)}),Ie},"bpmn:ScriptTask":function(X,I){var se=J("bpmn:Task")(X,I);return j(X,l.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:de(I,v)}),se},"bpmn:BusinessRuleTask":function(X,I){var se=J("bpmn:Task")(X,I);return Ne(j(X,l.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:le(I,"#aaaaaa"),stroke:de(I,v)}),Ne(j(X,l.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:de(I,v)}),se},"bpmn:SubProcess":function(X,I,se){se=oe({fill:le(I,g),stroke:de(I,v)},se);var fe=J("bpmn:Activity")(X,I,se),Ie=qe(I);return Wn(I)&&Ne(fe,{strokeDasharray:"1,2"}),Ee(X,I,Ie?"center-top":"center-middle"),Ie?ht(X,I):ht(X,I,["SubProcessMarker"]),fe},"bpmn:AdHocSubProcess":function(X,I){return J("bpmn:SubProcess")(X,I)},"bpmn:Transaction":function(X,I){var se=J("bpmn:SubProcess")(X,I),fe=c.style(["no-fill","no-events"],{stroke:de(I,v)});return B(X,I.width,I.height,8,3,fe),se},"bpmn:CallActivity":function(X,I){return J("bpmn:SubProcess")(X,I,{strokeWidth:5})},"bpmn:Participant":function(X,I){var se={fillOpacity:It,fill:le(I,g),stroke:de(I,v)},fe=J("bpmn:Lane")(X,I,se);return qe(I)?(z(X,[{x:30,y:0},{x:30,y:I.height}],{stroke:de(I,v)}),it(X,re(I).name,I)):pe(X,re(I).name,{box:I,align:"center-middle",style:{fill:tt(I,b,v)}}),!!re(I).participantMultiplicity&&J("ParticipantMultiplicityMarker")(X,I),fe},"bpmn:Lane":function(X,I,se){var fe=B(X,I.width,I.height,0,oe({fill:le(I,g),fillOpacity:.35,stroke:de(I,v)},se)),Ie=re(I);return"bpmn:Lane"===Ie.$type&&it(X,Ie.name,I),fe},"bpmn:InclusiveGateway":function(X,I){var se=J("bpmn:Gateway")(X,I);return $(X,I.width,I.height,.24*I.height,{strokeWidth:2.5,fill:le(I,g),stroke:de(I,v)}),se},"bpmn:ExclusiveGateway":function(X,I){var se=J("bpmn:Gateway")(X,I),fe=l.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:I.width,containerHeight:I.height,position:{mx:.32,my:.3}});return N(I).isMarkerVisible&&j(X,fe,{strokeWidth:1,fill:de(I,v),stroke:de(I,v)}),se},"bpmn:ComplexGateway":function(X,I){var se=J("bpmn:Gateway")(X,I);return j(X,l.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:I.width,containerHeight:I.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:de(I,v),stroke:de(I,v)}),se},"bpmn:ParallelGateway":function(X,I){var se=J("bpmn:Gateway")(X,I);return j(X,l.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:I.width,containerHeight:I.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:de(I,v),stroke:de(I,v)}),se},"bpmn:EventBasedGateway":function(X,I){var se=re(I),fe=J("bpmn:Gateway")(X,I);$(X,I.width,I.height,.2*I.height,{strokeWidth:1,fill:"none",stroke:de(I,v)});var Ie=se.eventGatewayType,rt=!!se.instantiate;"Parallel"===Ie?Ne(j(X,l.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:I.width,containerHeight:I.height,position:{mx:.474,my:.296}})),{strokeWidth:1,fill:"none"}):"Exclusive"===Ie&&(rt||Ne($(X,I.width,I.height,.26*I.height),{strokeWidth:1,fill:"none",stroke:de(I,v)}),j(X,l.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:I.width,containerHeight:I.height,position:{mx:.36,my:.44}}),{strokeWidth:2,fill:le(I,"none"),stroke:de(I,v)}));return fe},"bpmn:Gateway":function(X,I){var se={fill:le(I,g),fillOpacity:It,stroke:de(I,v)};return function(fe,Ie,rt,at){var Et=Ie/2,wt=rt/2,ft=[{x:Et,y:0},{x:Ie,y:wt},{x:Et,y:rt},{x:0,y:wt}].map(function(br){return br.x+","+br.y}).join(" ");at=M(at,{stroke:"black",strokeWidth:2,fill:"white"});var Jt=st("polygon");return Ne(Jt,{points:ft}),Ne(Jt,at),ut(fe,Jt),Jt}(X,I.width,I.height,se)},"bpmn:SequenceFlow":function(X,I){var se,fe=Ce(I),Ie=le(I,g),rt=de(I,v),at=j(X,fe,{strokeLinejoin:"round",markerEnd:F("sequenceflow-end",Ie,rt),stroke:de(I,v)}),Et=re(I);return I.source&&(se=I.source.businessObject,Et.conditionExpression&&se.$instanceOf("bpmn:Activity")&&Ne(at,{markerStart:F("conditional-flow-marker",Ie,rt)}),se.default&&(se.$instanceOf("bpmn:Gateway")||se.$instanceOf("bpmn:Activity"))&&se.default===Et&&Ne(at,{markerStart:F("conditional-default-flow-marker",Ie,rt)})),at},"bpmn:Association":function(X,I,se){var fe=re(I),Ie=le(I,g),rt=de(I,v);return se=oe({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:de(I,v)},se||{}),"One"!==fe.associationDirection&&"Both"!==fe.associationDirection||(se.markerEnd=F("association-end",Ie,rt)),"Both"===fe.associationDirection&&(se.markerStart=F("association-start",Ie,rt)),z(X,I.waypoints,se)},"bpmn:DataInputAssociation":function(X,I){var se=le(I,g),fe=de(I,v);return J("bpmn:Association")(X,I,{markerEnd:F("association-end",se,fe)})},"bpmn:DataOutputAssociation":function(X,I){var se=le(I,g),fe=de(I,v);return J("bpmn:Association")(X,I,{markerEnd:F("association-end",se,fe)})},"bpmn:MessageFlow":function(X,I){var se=re(I),fe=N(I),Ie=le(I,g),rt=de(I,v),at=j(X,Ce(I),{markerEnd:F("messageflow-end",Ie,rt),markerStart:F("messageflow-start",Ie,rt),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:de(I,v)});if(se.messageRef){var Et=at.getPointAtLength(at.getTotalLength()/2),wt=l.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Et.x,y:Et.y}}),ft={strokeWidth:1};"initiating"===fe.messageVisibleKind?(ft.fill="white",ft.stroke="black"):(ft.fill="#888",ft.stroke="white");var Jt=j(X,wt,ft),br=pe(X,se.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:de(I,b)}}),zi=Jt.getBBox(),Nn=br.getBBox();Rr(br,Et.x-Nn.width/2,Et.y+zi.height/2+10,0)}return at},"bpmn:DataObject":function(X,I){var fe,Ie,se=j(X,l.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:.474,my:.296}}),{fill:le(I,g),fillOpacity:It,stroke:de(I,v)});return Ie=(fe=re(I)).dataObjectRef,(fe.isCollection||Ie&&Ie.isCollection)&&function(fe,Ie){j(fe,l.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:Ie.width,containerHeight:Ie.height,position:{mx:.33,my:(Ie.height-18)/Ie.height}}),{strokeWidth:2})}(X,I),se},"bpmn:DataObjectReference":ce("bpmn:DataObject"),"bpmn:DataInput":function(X,I){var se=l.getRawPath("DATA_ARROW"),fe=J("bpmn:DataObject")(X,I);return j(X,se,{strokeWidth:1}),fe},"bpmn:DataOutput":function(X,I){var se=l.getRawPath("DATA_ARROW"),fe=J("bpmn:DataObject")(X,I);return j(X,se,{strokeWidth:1,fill:"black"}),fe},"bpmn:DataStoreReference":function(X,I){return j(X,l.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:le(I,g),fillOpacity:It,stroke:de(I,v)})},"bpmn:BoundaryEvent":function(X,I){var se=re(I).cancelActivity,fe={strokeWidth:1,fill:le(I,g),stroke:de(I,v)};se||(fe.strokeDasharray="6",fe.strokeLinecap="round");var Ie=oe({},fe,{fillOpacity:1}),rt=oe({},fe,{fill:"none"}),at=J("bpmn:Event")(X,I,Ie);return $(X,I.width,I.height,3,rt),be(I,X),at},"bpmn:Group":function(X,I){return B(X,I.width,I.height,10,{stroke:de(I,v),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(X,I){return Ie={width:90,height:30,x:(fe=I).width/2+fe.x,y:fe.height/2+fe.y},pe(X,ve(fe),{box:Ie,fitBox:!0,style:oe({},h.getExternalStyle(),{fill:tt(fe,b,v)})});var fe,Ie},"bpmn:TextAnnotation":function(X,I){var se=B(X,I.width,I.height,0,0,{fill:"none",stroke:"none"});return j(X,l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:0,my:0}}),{stroke:de(I,v)}),pe(X,re(I).text||"",{box:I,align:"left-top",padding:5,style:{fill:tt(I,b,v)}}),se},ParticipantMultiplicityMarker:function(X,I){K("participant-multiplicity",X,l.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:I.width/2/I.width,my:(I.height-15)/I.height}}),{strokeWidth:2,fill:le(I,g),stroke:de(I,v)})},SubProcessMarker:function(X,I){Ei(B(X,14,14,0,{strokeWidth:1,fill:le(I,g),stroke:de(I,v)}),I.width/2-7.5,I.height-20),K("sub-process",X,l.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2-7.5)/I.width,my:(I.height-20)/I.height}}),{fill:le(I,g),stroke:de(I,v)})},ParallelMarker:function(X,I,se){K("parallel",X,l.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2+se.parallel)/I.width,my:(I.height-20)/I.height}}),{fill:le(I,g),stroke:de(I,v)})},SequentialMarker:function(X,I,se){K("sequential",X,l.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2+se.seq)/I.width,my:(I.height-19)/I.height}}),{fill:le(I,g),stroke:de(I,v)})},CompensationMarker:function(X,I,se){K("compensation",X,l.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2+se.compensation)/I.width,my:(I.height-13)/I.height}}),{strokeWidth:1,fill:le(I,g),stroke:de(I,v)})},LoopMarker:function(X,I,se){K("loop",X,l.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2+se.loop)/I.width,my:(I.height-7)/I.height}}),{strokeWidth:1,fill:le(I,g),stroke:de(I,v),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(X,I,se){K("adhoc",X,l.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:I.width,containerHeight:I.height,position:{mx:(I.width/2+se.adhoc)/I.width,my:(I.height-15)/I.height}}),{strokeWidth:1,fill:de(I,v),stroke:de(I,v)})}};function ht(X,I,se){var fe,Ie=re(I),rt=se&&-1!==se.indexOf("SubProcessMarker");fe=rt?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},ne(se,function(wt){J(wt)(X,I,fe)}),Ie.isForCompensation&&J("CompensationMarker")(X,I,fe),"bpmn:AdHocSubProcess"===Ie.$type&&J("AdhocMarker")(X,I,fe);var at=Ie.loopCharacteristics,Et=at&&at.isSequential;at&&(void 0===Et&&J("LoopMarker")(X,I,fe),!1===Et&&J("ParallelMarker")(X,I,fe),!0===Et&&J("SequentialMarker")(X,I,fe))}this._drawPath=j}Oe(Bt,Po),Bt.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Bt.prototype.canRender=function(r){return V(r,"bpmn:BaseElement")},Bt.prototype.drawShape=function(r,s){return(0,this.handlers[s.type])(r,s)},Bt.prototype.drawConnection=function(r,s){return(0,this.handlers[s.type])(r,s)},Bt.prototype.getShapePath=function(r){return V(r,"bpmn:Event")?dr([["M",(s=r).x+s.width/2,s.y+s.height/2],["m",0,-(d=s.width/2)],["a",d,d,0,1,1,0,2*d],["a",d,d,0,1,1,0,-2*d],["z"]]):V(r,"bpmn:Activity")?dr([["M",(h=r).x+(f=10),h.y],["l",(b=h.width)-20,0],["a",f,f,0,0,1,f,f],["l",0,(w=h.height)-20],["a",f,f,0,0,1,-f,f],["l",20-b,0],["a",f,f,0,0,1,-f,-f],["l",0,20-w],["a",f,f,0,0,1,f,-f],["z"]]):V(r,"bpmn:Gateway")?function(h){var f=h.width/2,g=h.height/2;return dr([["M",h.x+f,h.y],["l",f,g],["l",-f,g],["l",-f,-g],["z"]])}(r):function(h){var v=h.width;return dr([["M",h.x,h.y],["l",v,0],["l",0,h.height],["l",-v,0],["z"]])}(r);var h,f,b,w,s,d};var Nt={width:150,height:50};function mr(r,s){var c;s.textContent=r;try{var l,d=""===r;return s.textContent=d?"dummy":r,l={width:(c=s.getBBox()).width+2*c.x,height:c.height},d&&(l.width=0),l}catch(h){return{width:0,height:0}}}function Ir(r,s,c){for(var l,d=r.shift(),h=d;;){if((l=mr(h,c)).width=h?l.width:0," "===h||""===h||l.width<Math.round(s)||h.length<2)return ai(r,h,d,l);h=zr(h,l.width,s)}}function ai(r,s,c,l){if(s.length<c.length){var d=c.slice(s.length).trim();r.unshift(d)}return{width:l.width,height:l.height,text:s}}function zr(r,s,c){var l=Math.max(r.length*(c/s),1),d=function(h,f){var g,v=h.split(/(\s|-|\u00AD)/g),b=[],w=0;if(v.length>1)for(;g=v.shift();){if(!(g.length+w<f)){"-"!==g&&"\xad"!==g||b.pop();break}b.push(g),w+=g.length}var C=b[b.length-1];return C&&"\xad"===C&&(b[b.length-1]="-"),b.join("")}(r,l);return d||(d=r.slice(0,Math.max(Math.round(l-1),1))),d}function wi(r){this._config=oe({},{size:Nt,padding:0,style:{},align:"center-top"},r||{})}function Ii(r){var s=oe({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},r&&r.defaultStyle||{}),c=parseInt(s.fontSize,10)-1,l=oe({},s,{fontSize:c},r&&r.externalStyle||{}),d=new wi({style:s});this.getExternalLabelBounds=function(h,f){var g=d.getDimensions(f,{box:{width:90,height:30,x:h.width/2+h.x,y:h.height/2+h.y},style:l});return{x:Math.round(h.x+h.width/2-g.width/2),y:Math.round(h.y),width:Math.ceil(g.width),height:Math.ceil(g.height)}},this.getTextAnnotationBounds=function(h,f){var g=d.getDimensions(f,{box:h,style:s,align:"left-top",padding:5});return{x:h.x,y:h.y,width:h.width,height:Math.max(30,Math.round(g.height))}},this.createText=function(h,f){return d.createText(h,f||{})},this.getDefaultStyle=function(){return s},this.getExternalStyle=function(){return l}}wi.prototype.createText=function(r,s){return this.layoutText(r,s).element},wi.prototype.getDimensions=function(r,s){return this.layoutText(r,s).dimensions},wi.prototype.layoutText=function(r,s){var B,$,c=oe({},this._config.size,s.box),l=oe({},this._config.style,s.style),d_horizontal=(B=(s.align||this._config.align).split("-"))[0]||"center",d_vertical=B[1]||"top",h=Xn($=void 0!==s.padding?s.padding:this._config.padding)?oe({top:0,left:0,right:0,bottom:0},$):{top:$,left:$,right:$,bottom:$},f=s.fitBox||!1,g=function($){if("fontSize"in $&&"lineHeight"in $)return $.lineHeight*parseInt($.fontSize,10)}(l),v=r.split(/\u00AD?\r?\n/),b=[],w=c.width-h.left-h.right,C=st("text");for(Ne(C,{x:0,y:0}),Ne(C,l),ut(function(){var $=document.getElementById("helper-svg");return $||(Ne($=st("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild($)),$}(),C);v.length;)b.push(Ir(v,w,C));"middle"===d_vertical&&(h.top=h.bottom=0);var M=Xe(b,function($,B,z){return $+(g||B.height)},0)+h.top+h.bottom,T=Xe(b,function($,B,z){return B.width>$?B.width:$},0),R=h.top;"middle"===d_vertical&&(R+=(c.height-M)/2),R-=(g||b[0].height)/4;var F=st("text");return Ne(F,l),ne(b,function($){var B;switch(R+=g||$.height,d_horizontal){case"left":B=h.left;break;case"right":B=(f?T:w)-h.right-$.width;break;default:B=Math.max(((f?T:w)-$.width)/2+h.left,0)}var z=st("tspan");Ne(z,{x:B,y:R}),z.textContent=$.text,ut(F,z)}),ri(C),{dimensions:{width:T,height:M},element:F}},Ii.$inject=["config.textRenderer"];var An=/\{([^{}]+)\}/g,Ns=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,_o={__init__:["bpmnRenderer"],bpmnRenderer:["type",Bt],textRenderer:["type",Ii],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(r){return this.pathMap[r].d},this.getScaledPath=function(r,s){var c,l,d=this.pathMap[r];s.abspos?(c=s.abspos.x,l=s.abspos.y):(c=s.containerWidth*s.position.mx,l=s.containerHeight*s.position.my);var f,g={};if(s.position){for(var v=s.containerHeight/d.height*s.yScaleFactor,b=s.containerWidth/d.width*s.xScaleFactor,w=0;w<d.heightElements.length;w++)g["y"+w]=d.heightElements[w]*v;for(var C=0;C<d.widthElements.length;C++)g["x"+C]=d.widthElements[C]*b}return f={mx:c,my:l,e:g},String(d.d).replace(An,function(M,T){return R=M,B=$=f,T.replace(Ns,function(z,j,K,ce,J){j=j||ce,B&&(j in B&&(B=B[j]),"function"==typeof B&&J&&(B=B()))}),B=(null==B||B==$?R:B)+"";var R,$,B})}}]},Tn={translate:["value",function(r,s){return s=s||{},r.replace(/{([^}]+)}/g,function(c,l){return s[l]||"{"+l+"}"})}]},ir={width:90,height:20};function an(r){return V(r,"bpmn:Event")||V(r,"bpmn:Gateway")||V(r,"bpmn:DataStoreReference")||V(r,"bpmn:DataObjectReference")||V(r,"bpmn:DataInput")||V(r,"bpmn:DataOutput")||V(r,"bpmn:SequenceFlow")||V(r,"bpmn:MessageFlow")||V(r,"bpmn:Group")}function gr(r){return gi(r.label)}function gn(r){return r.waypoints?function(r){var v,b,w,C,s=r.length/2-1,c=r[Math.floor(s)],l=r[Math.ceil(s+.01)],d=(b=(v=r).length/2-1,w=v[Math.floor(b)],C=v[Math.ceil(b+.01)],{x:w.x+(C.x-w.x)/2,y:w.y+(C.y-w.y)/2}),h=Math.atan((l.y-c.y)/(l.x-c.x)),f=d.x,g=d.y;return Math.abs(h)<Math.PI/2?g-=15:f+=15,{x:f,y:g}}(r.waypoints):V(r,"bpmn:Group")?{x:r.x+r.width/2,y:r.y+ir.height/2}:{x:r.x+r.width/2,y:r.y+r.height+ir.height/2}}function gi(r){return r&&!!r.labelTarget}function la(r,s){return oe({id:r.id,type:r.$type,businessObject:r},s)}function ci(r,s,c){var l=r.di.waypoint;return!l||l.length<2?[zt(s),zt(c)]:l.map(function(d){return{x:d.x,y:d.y}})}function Ur(r,s,c,l){return new Error(r("element {element} referenced by {referenced}#{property} not yet drawn",{element:Y(c),referenced:Y(s),property:l}))}function yr(r,s,c,l,d,h){this._eventBus=r,this._canvas=s,this._elementFactory=c,this._elementRegistry=l,this._translate=d,this._textRenderer=h}yr.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],yr.prototype.add=function(r,s){var c,d,h,f,g,v,b=r.di,w=this._translate;if(V(b,"bpmndi:BPMNPlane"))c=this._elementFactory.createRoot(la(r)),this._canvas.setRootElement(c);else if(V(b,"bpmndi:BPMNShape")){var C=!qe(r),M=V(r,"bpmn:Group"),T=r.di.bounds;c=this._elementFactory.createShape(la(r,{collapsed:C,hidden:s&&(s.hidden||s.collapsed),x:Math.round(T.x),y:Math.round(T.y),width:Math.round(T.width),height:Math.round(T.height),isFrame:M})),V(r,"bpmn:BoundaryEvent")&&this._attachBoundary(r,c),V(r,"bpmn:Lane")&&(d=0),V(r,"bpmn:DataStoreReference")&&(h=s,v=(f=zt(T)).y,(g=f.x)>=h.x&&g<=h.x+h.width&&v>=h.y&&v<=h.y+h.height||(s=this._canvas.getRootElement())),this._canvas.addShape(c,s,d)}else{if(!V(b,"bpmndi:BPMNEdge"))throw new Error(w("unknown di {di} for element {semantic}",{di:Y(b),semantic:Y(r)}));var R=this._getSource(r),F=this._getTarget(r);c=this._elementFactory.createConnection(la(r,{hidden:s&&(s.hidden||s.collapsed),source:R,target:F,waypoints:ci(r,R,F)})),V(r,"bpmn:DataAssociation")&&(s=null),V(r,"bpmn:SequenceFlow")&&(d=0),this._canvas.addConnection(c,s,d)}return an(r)&&ve(c)&&this.addLabel(r,c),this._eventBus.fire("bpmnElement.added",{element:c}),c},yr.prototype._attachBoundary=function(r,s){var c=this._translate,l=r.attachedToRef;if(!l)throw new Error(c("missing {semantic}#attachedToRef",{semantic:Y(r)}));var d=this._elementRegistry.get(l.id),h=d&&d.attachers;if(!d)throw Ur(c,r,l,"attachedToRef");s.host=d,h||(d.attachers=h=[]),-1===h.indexOf(s)&&h.push(s)},yr.prototype.addLabel=function(r,s){var c,l,d,f,g,v,b,w;return f=s,(w=r.di.label)&&w.bounds?(b=w.bounds,v={width:Math.max(ir.width,b.width),height:b.height},g={x:b.x+b.width/2,y:b.y+b.height/2}):(g=gn(f),v=ir),c=oe({x:g.x-v.width/2,y:g.y-v.height/2},v),(l=ve(s))&&(c=this._textRenderer.getExternalLabelBounds(c,l)),d=this._elementFactory.createLabel(la(r,{id:r.id+"_label",labelTarget:s,type:"label",hidden:s.hidden||!ve(s),x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height)})),this._canvas.addShape(d,s.parent)},yr.prototype._getEnd=function(r,s){var c,l,d=r.$type,h=this._translate;if(l=r[s+"Ref"],"source"===s&&"bpmn:DataInputAssociation"===d&&(l=l&&l[0]),("source"===s&&"bpmn:DataOutputAssociation"===d||"target"===s&&"bpmn:DataInputAssociation"===d)&&(l=r.$parent),c=l&&this._getElement(l))return c;throw l?Ur(h,r,l,s+"Ref"):new Error(h("{semantic}#{side} Ref not specified",{semantic:Y(r),side:s}))},yr.prototype._getSource=function(r){return this._getEnd(r,"source")},yr.prototype._getTarget=function(r){return this._getEnd(r,"target")},yr.prototype._getElement=function(r){return this._elementRegistry.get(r.id)};var La={__depends__:[_o,{__depends__:[Tn],bpmnImporter:["type",yr]}]};function Uu(r){r&&"function"==typeof r.stopPropagation&&r.stopPropagation()}function Ba(r){return r.originalEvent||r.srcEvent}function Lg(r,s){Uu(r),Uu(Ba(r))}function Ic(r){return r.pointers&&r.pointers.length&&(r=r.pointers[0]),r.touches&&r.touches.length&&(r=r.touches[0]),r?{x:r.clientX,y:r.clientY}:null}function Wr(r,s){return(Ba(r)||r).button===s}function lo(r){return Wr(r,0)}function Gn(r){var s=Ba(r)||r;return!!lo(r)&&(/mac/i.test(navigator.platform)?s.metaKey:s.ctrlKey)}function Z_(r){var s=Ba(r)||r;return lo(r)&&s.shiftKey}function tx(r){return!0}function af(r){return lo(r)||function(s){return Wr(s,1)}(r)}function J_(r,s,c){var l=this;function d(B,z,j){var K,ce;!(v[B]||lo)(z)||(j?ce=s.getGraphics(j):(K=z.delegateTarget||z.target)&&(j=s.get(ce=K)),ce&&j&&!1===r.fire(B,{element:j,gfx:ce,originalEvent:z})&&(z.stopPropagation(),z.preventDefault()))}var h={};function f(B){return h[B]}var g={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},v={"element.contextmenu":tx,"element.mousedown":af,"element.mouseup":af,"element.click":af,"element.dblclick":af};function b(B,z,j,K){var ce=h[j]=function(J){d(j,J)};K&&(v[j]=K),ce.$delegate=vt_bind(B,"svg, .djs-element",z,ce)}function w(B,z,j){var K=f(j);K&&vt_unbind(B,z,K.$delegate)}r.on("canvas.destroy",function(B){var z;z=B.svg,ne(g,function(j,K){w(z,K,j)})}),r.on("canvas.init",function(B){var z;z=B.svg,ne(g,function(j,K){b(z,K,j)})}),r.on(["shape.added","connection.added"],function(B){r.fire("interactionEvents.createHit",{element:B.element,gfx:B.gfx})}),r.on(["shape.changed","connection.changed"],500,function(B){r.fire("interactionEvents.updateHit",{element:B.element,gfx:B.gfx})}),r.on("interactionEvents.createHit",500,function(B){l.createDefaultHit(B.element,B.gfx)}),r.on("interactionEvents.updateHit",function(B){l.updateDefaultHit(B.element,B.gfx)});var C=R("djs-hit djs-hit-stroke"),M=R("djs-hit djs-hit-click-stroke"),T={all:R("djs-hit djs-hit-all"),"click-stroke":M,stroke:C};function R(B,z){return z=oe({stroke:"white",strokeWidth:15},z||{}),c.cls(B,["no-fill","no-border"],z)}function F(B,z){var j=T[z];if(!j)throw new Error("invalid hit type <"+z+">");return Ne(B,j),B}function $(B,z){ut(B,z)}this.removeHits=function(B){ne(Wp(".djs-hit",B),ri)},this.createDefaultHit=function(B,z){var K=B.waypoints,ce=B.isFrame;return K?this.createWaypointsHit(z,K):this.createBoxHit(z,ce?"stroke":"all",{width:B.width,height:B.height})},this.createWaypointsHit=function(B,z){var j=Js(z);return F(j,"stroke"),$(B,j),j},this.createBoxHit=function(B,z,j){j=oe({x:0,y:0},j);var K=st("rect");return F(K,z),Ne(K,j),$(B,K),K},this.updateDefaultHit=function(B,z){var j=Un(".djs-hit",z);if(j)return Ne(j,B.waypoints?{points:vi(B.waypoints)}:{width:B.width,height:B.height}),j},this.fire=d,this.triggerMouseEvent=function(B,z,j){var K=g[B];if(!K)throw new Error("unmapped DOM event name <"+B+">");return d(K,z,j)},this.mouseHandler=f,this.registerEvent=b,this.unregisterEvent=w}J_.$inject=["eventBus","elementRegistry","styles"];var lh={__init__:["interactionEvents"],interactionEvents:["type",J_]};function cf(r,s,c){this.offset=6;var l=s.cls("djs-outline",["no-fill"]),d=this;function h(f,g){var v=st("rect");return Ne(v,oe({x:10,y:10,width:100,height:100},l)),ut(f,v),v}r.on(["shape.added","shape.changed"],500,function(f){var g=f.element,v=f.gfx,b=Un(".djs-outline",v);b||(b=h(v)),d.updateShapeOutline(b,g)}),r.on(["connection.added","connection.changed"],function(f){var g=f.element,v=f.gfx,b=Un(".djs-outline",v);b||(b=h(v)),d.updateConnectionOutline(b,g)})}cf.prototype.updateShapeOutline=function(r,s){Ne(r,{x:-this.offset,y:-this.offset,width:s.width+2*this.offset,height:s.height+2*this.offset})},cf.prototype.updateConnectionOutline=function(r,s){var c=pi(s);Ne(r,{x:c.x-this.offset,y:c.y-this.offset,width:c.width+2*this.offset,height:c.height+2*this.offset})},cf.$inject=["eventBus","styles","elementRegistry"];var uh={__init__:["outline"],outline:["type",cf]};function ja(r,s){this._eventBus=r,this._canvas=s,this._selectedElements=[];var c=this;r.on(["shape.remove","connection.remove"],function(l){c.deselect(l.element)}),r.on(["diagram.clear","plane.set"],function(l){c.select(null)})}ja.$inject=["eventBus","canvas"],ja.prototype.deselect=function(r){var s=this._selectedElements,c=s.indexOf(r);if(-1!==c){var l=s.slice();s.splice(c,1),this._eventBus.fire("selection.changed",{oldSelection:l,newSelection:s})}},ja.prototype.get=function(){return this._selectedElements},ja.prototype.isSelected=function(r){return-1!==this._selectedElements.indexOf(r)},ja.prototype.select=function(r,s){var c=this._selectedElements,l=c.slice();bt(r)||(r=r?[r]:[]);var d=this._canvas;r=r.filter(function(h){return d.findPlane(h)===d.getActivePlane()}),s?ne(r,function(h){-1===c.indexOf(h)&&c.push(h)}):this._selectedElements=c=r.slice(),this._eventBus.fire("selection.changed",{oldSelection:l,newSelection:c})};var lf="selected";function Bg(r,s,c,l){function d(f,g){s.addMarker(f,g)}function h(f,g){s.removeMarker(f,g)}this._multiSelectionBox=null,r.on("element.hover",function(f){d(f.element,"hover")}),r.on("element.out",function(f){h(f.element,"hover")}),r.on("selection.changed",function(f){var g=f.oldSelection,v=f.newSelection;ne(g,function(b){-1===v.indexOf(b)&&h(b,lf)}),ne(v,function(b){-1===g.indexOf(b)&&d(b,lf)})})}function eb(r,s,c,l){r.on("create.end",500,function(d){var h=d.context,g=h.elements,v=(h.hints||{}).autoSelect;if(h.canExecute){if(!1===v)return;bt(v)?s.select(v):s.select(g.filter(Oc))}}),r.on("connect.end",500,function(d){var h=d.context,g=h.hover;h.canExecute&&g&&s.select(g)}),r.on("shape.move.end",500,function(d){var h=d.previousSelection||[],f=l.get(d.context.shape.id);tn(h,function(g){return f.id===g.id})||s.select(f)}),r.on("element.click",function(d){if(lo(d)){var h=d.element;h===c.getRootElement()&&(h=null);var f=s.isSelected(h),g=s.get().length>1,v=Gn(d)||Z_(d);if(f&&g)return v?s.deselect(h):s.select(h);f?s.deselect(h):s.select(h,v)}})}function Oc(r){return!r.hidden}Bg.$inject=["eventBus","canvas","selection","styles"],eb.$inject=["eventBus","selection","canvas","elementRegistry"];var bo={__init__:["selectionVisuals","selectionBehavior"],__depends__:[lh,uh],selection:["type",ja],selectionVisuals:["type",Bg],selectionBehavior:["type",eb]};function jg(r){this._counter=0,this._prefix=(r?r+"-":"")+Math.floor(1e9*Math.random())+"-"}jg.prototype.next=function(){return this._prefix+ ++this._counter};var nx=new jg("ov");function xi(r,s,c,l){var d,h;this._eventBus=s,this._canvas=c,this._elementRegistry=l,this._ids=nx,this._overlayDefaults=oe({show:null,scale:!0},r&&r.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(d=c.getContainer(),h=ke('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),d.insertBefore(h,d.firstChild),h),this._init()}function uf(r,s,c){oe(r.style,{left:s+"px",top:c+"px"})}function hh(r,s){r.style.display=!1===s?"none":""}function tb(r,s){r.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(c){r.style[c+"transform"]=s})}xi.$inject=["config.overlays","eventBus","canvas","elementRegistry"],xi.prototype.get=function(r){if(Lr(r)&&(r={id:r}),Lr(r.element)&&(r.element=this._elementRegistry.get(r.element)),r.element){var s=this._getOverlayContainer(r.element,!0);return s?r.type?gt(s.overlays,Br({type:r.type})):s.overlays.slice():[]}return r.type?gt(this._overlays,Br({type:r.type})):r.id?this._overlays[r.id]:null},xi.prototype.add=function(r,s,c){if(Xn(s)&&(c=s,s=null),r.id||(r=this._elementRegistry.get(r)),!c.position)throw new Error("must specifiy overlay position");if(!c.html)throw new Error("must specifiy overlay html");if(!r)throw new Error("invalid element specified");var l=this._ids.next();return c=oe({},this._overlayDefaults,c,{id:l,type:s,element:r,html:c.html}),this._addOverlay(c),l},xi.prototype.remove=function(r){var s=this.get(r)||[];bt(s)||(s=[s]);var c=this;ne(s,function(l){var d=c._getOverlayContainer(l.element,!0);if(l&&(As(l.html),As(l.htmlContainer),delete l.htmlContainer,delete l.element,delete c._overlays[l.id]),d){var h=d.overlays.indexOf(l);-1!==h&&d.overlays.splice(h,1)}})},xi.prototype.show=function(){hh(this._overlayRoot)},xi.prototype.hide=function(){hh(this._overlayRoot,!1)},xi.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Mu(this._overlayRoot)},xi.prototype._updateOverlayContainer=function(r){var s=r.element,c=r.html,l=s.x,d=s.y;if(s.waypoints){var h=pi(s);l=h.x,d=h.y}uf(c,l,d),jr(r.html,"data-container-id",s.id)},xi.prototype._updateOverlay=function(r){var s,c,l=r.position,d=r.htmlContainer,h=r.element,f=l.left,g=l.top;void 0!==l.right&&(s=h.waypoints?pi(h).width:h.width,f=-1*l.right+s),void 0!==l.bottom&&(c=h.waypoints?pi(h).height:h.height,g=-1*l.bottom+c),uf(d,f||0,g||0)},xi.prototype._createOverlayContainer=function(r){var s=ke('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(s);var c={html:s,element:r,overlays:[]};return this._updateOverlayContainer(c),this._overlayContainers.push(c),c},xi.prototype._updateRoot=function(r){var s=r.scale||1,c="matrix("+[s,0,0,s,-1*r.x*s,-1*r.y*s].join(",")+")";tb(this._overlayRoot,c)},xi.prototype._getOverlayContainer=function(r,s){var c=tn(this._overlayContainers,function(l){return l.element===r});return c||s?c:this._createOverlayContainer(r)},xi.prototype._addOverlay=function(r){var s,c,l=r.id,d=r.element,h=r.html;h.get&&h.constructor.prototype.jquery&&(h=h.get(0)),Lr(h)&&(h=ke(h)),c=this._getOverlayContainer(d),(s=ke('<div class="djs-overlay" data-overlay-id="'+l+'" style="position: absolute">')).appendChild(h),r.type&&Yi(s).add("djs-overlay-"+r.type);var f=this._canvas.findPlane(d),g=this._canvas.getActivePlane();r.plane=f,f!==g&&hh(s,!1),r.htmlContainer=s,c.overlays.push(r),c.html.appendChild(s),this._overlays[l]=r,this._updateOverlay(r),this._updateOverlayVisibilty(r,this._canvas.viewbox())},xi.prototype._updateOverlayVisibilty=function(r,s){var c=r.show,l=c&&c.minZoom,d=c&&c.maxZoom,h=r.htmlContainer,f=!0;c&&((Ai(l)&&l>s.scale||Ai(d)&&d<s.scale)&&(f=!1),hh(h,f)),this._updateOverlayScale(r,s)},xi.prototype._updateOverlayScale=function(r,s){var c,l,d,h=r.scale,f=r.htmlContainer,g="";!0!==h&&(!1===h?(c=1,l=1):(c=h.min,l=h.max),Ai(c)&&s.scale<c&&(d=(1/s.scale||1)*c),Ai(l)&&s.scale>l&&(d=(1/s.scale||1)*l)),Ai(d)&&(g="scale("+d+","+d+")"),tb(f,g)},xi.prototype._updateOverlaysVisibilty=function(r){var s=this;ne(this._overlays,function(c){s._updateOverlayVisibilty(c,r)})},xi.prototype._init=function(){var r=this._eventBus,s=this;r.on("canvas.viewbox.changing",function(c){s.hide()}),r.on("canvas.viewbox.changed",function(c){var l;s._updateRoot(l=c.viewbox),s._updateOverlaysVisibilty(l),s.show()}),r.on(["shape.remove","connection.remove"],function(c){var l=c.element;ne(s.get({element:l}),function(f){s.remove(f.id)});var d=s._getOverlayContainer(l);if(d){As(d.html);var h=s._overlayContainers.indexOf(d);-1!==h&&s._overlayContainers.splice(h,1)}}),r.on("element.changed",500,function(c){var d=s._getOverlayContainer(c.element,!0);d&&(ne(d.overlays,function(h){s._updateOverlay(h)}),s._updateOverlayContainer(d))}),r.on("element.marker.update",function(c){var l=s._getOverlayContainer(c.element,!0);l&&Yi(l.html)[c.add?"add":"remove"](c.marker)}),r.on("plane.set",function(c){ne(s._overlays,function(l){hh(l.htmlContainer,l.plane===c.plane)})}),r.on("diagram.clear",this.clear,this)};var nb={__init__:["overlays"],overlays:["type",xi]};function Kl(r){ye.call(this,r)}function Gr(r){return!r.altKey&&(r.ctrlKey||r.metaKey)}function ls(r,s){return-1!==(r=bt(r)?r:[r]).indexOf(s.key)||-1!==r.indexOf(s.keyCode)}function ph(r){return r.shiftKey}Oe(Kl,ye),Kl.prototype._modules=[La,Tn,bo,nb],Kl.prototype._moddleExtensions={};var Yl="keyboard.keydown";function rr(r,s){var c=this;this._config=r||{},this._eventBus=s,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),s.on("diagram.destroy",function(){c._fire("destroy"),c.unbind()}),s.on("diagram.init",function(){c._fire("init")}),s.on("attach",function(){r&&r.bindTo&&c.bind(r.bindTo)}),s.on("detach",function(){c.unbind()})}rr.$inject=["config.keyboard","eventBus"],rr.prototype._keydownHandler=function(r){this._keyHandler(r,Yl)},rr.prototype._keyupHandler=function(r){this._keyHandler(r,"keyboard.keyup")},rr.prototype._keyHandler=function(r,s){this._isEventIgnored(r)||this._eventBus.fire(s||Yl,{keyEvent:r})&&r.preventDefault()},rr.prototype._isEventIgnored=function(r){return(s=r.target)&&(wl(s,"input, textarea")||"true"===s.contentEditable)&&this._isModifiedKeyIgnored(r);var s},rr.prototype._isModifiedKeyIgnored=function(r){return!Gr(r)||!this._getAllowedModifiers(r.target).includes(r.key)},rr.prototype._getAllowedModifiers=function(r){var s=ko(r,"[input-handle-modified-keys]",!0);return!s||this._node&&!this._node.contains(s)?[]:s.getAttribute("input-handle-modified-keys").split(",")},rr.prototype.bind=function(r){this.unbind(),this._node=r,Ze.bind(r,"keydown",this._keydownHandler,!0),Ze.bind(r,"keyup",this._keyupHandler,!0),this._fire("bind")},rr.prototype.getBinding=function(){return this._node},rr.prototype.unbind=function(){var r=this._node;r&&(this._fire("unbind"),Ze.unbind(r,"keydown",this._keydownHandler,!0),Ze.unbind(r,"keyup",this._keyupHandler,!0)),this._node=null},rr.prototype._fire=function(r){this._eventBus.fire("keyboard."+r,{node:this._node})},rr.prototype.addListener=function(r,s,c){di(r)&&(c=s,s=r,r=1e3),this._eventBus.on(c||Yl,r,s)},rr.prototype.removeListener=function(r,s){this._eventBus.off(s||Yl,r)},rr.prototype.hasModifier=function(r){return r.ctrlKey||r.metaKey||r.shiftKey||r.altKey},rr.prototype.isCmd=Gr,rr.prototype.isShift=ph,rr.prototype.isKey=ls;var Wu=["c","C",67],ix=["v","V",86],Gu=["y","Y",89],df=["z","Z",90];function Va(r,s){var c=this;r.on("editorActions.init",500,function(l){c.registerBindings(s,l.editorActions)})}Va.$inject=["eventBus","keyboard"],Va.prototype.registerBindings=function(r,s){function c(l,d){s.isRegistered(l)&&r.addListener(d)}c("undo",function(l){var d=l.keyEvent;if(Gr(d)&&!ph(d)&&ls(df,d))return s.trigger("undo"),!0}),c("redo",function(l){var d=l.keyEvent;if(Gr(d)&&(ls(Gu,d)||ls(df,d)&&ph(d)))return s.trigger("redo"),!0}),c("copy",function(l){var d=l.keyEvent;if(Gr(d)&&ls(Wu,d))return s.trigger("copy"),!0}),c("paste",function(l){var d=l.keyEvent;if(Gr(d)&&ls(ix,d))return s.trigger("paste"),!0}),c("stepZoom",function(l){var d=l.keyEvent;if(ls(["+","Add","="],d)&&Gr(d))return s.trigger("stepZoom",{value:1}),!0}),c("stepZoom",function(l){var d=l.keyEvent;if(ls(["-","Subtract"],d)&&Gr(d))return s.trigger("stepZoom",{value:-1}),!0}),c("zoom",function(l){var d=l.keyEvent;if(ls("0",d)&&Gr(d))return s.trigger("zoom",{value:1}),!0}),c("removeSelection",function(l){if(ls(["Backspace","Delete","Del"],l.keyEvent))return s.trigger("removeSelection"),!0})};var rb={__init__:["keyboard","keyboardBindings"],keyboard:["type",rr],keyboardBindings:["type",Va]},ob={moveSpeed:50,moveSpeedAccelerated:200};function Vg(r,s,c){var l=this;this._config=oe({},ob,r||{}),s.addListener(function(d){var h=d.keyEvent,f=l._config;if(s.isCmd(h)&&s.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],h)){var g,v=s.isShift(h)?f.moveSpeedAccelerated:f.moveSpeed;switch(h.key){case"ArrowLeft":case"Left":g="left";break;case"ArrowUp":case"Up":g="up";break;case"ArrowRight":case"Right":g="right";break;case"ArrowDown":case"Down":g="down"}return l.moveCanvas({speed:v,direction:g}),!0}}),this.moveCanvas=function(d){var h=0,f=0,g=d.speed/Math.min(Math.sqrt(c.viewbox().scale),1);switch(d.direction){case"left":h=g;break;case"up":f=g;break;case"right":h=-g;break;case"down":f=-g}c.scroll({dx:h,dy:f})}}Vg.$inject=["config.keyboardMove","keyboard","canvas"];var sb={__depends__:[rb],__init__:["keyboardMove"],keyboardMove:["type",Vg]},rx=/^djs-cursor-.*$/;function Nc(r){var s=Yi(document.body);s.removeMatching(rx),r&&s.add("djs-cursor-"+r)}function hf(){Nc(null)}function pf(r,s){function c(){return!1}return r.once(s=s||"element.click",5e3,c),function(){r.off(s,c)}}function Fc(r){return{x:r.x+r.width/2,y:r.y+r.height/2}}function Fo(r,s){return{x:r.x-s.x,y:r.y-s.y}}function ab(r,s){var c;function l(h){var f,g=c.start,v=c.button,b=Ic(h),w=Fo(b,g);!c.dragging&&(f=w,Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2))>15)&&(c.dragging=!0,0===v&&pf(r),Nc("grab")),c.dragging&&(w=Fo(b,c.last||c.start),s.scroll({dx:w.x,dy:w.y}),c.last=b),h.preventDefault()}function d(h){Ze.unbind(document,"mousemove",l),Ze.unbind(document,"mouseup",d),c=null,hf()}r.on("element.mousedown",500,function(h){return function(f){if(!ko(f.target,".djs-draggable")){var g=f.button;if(!(g>=2||f.ctrlKey||f.shiftKey||f.altKey))return c={button:g,start:Ic(f)},Ze.bind(document,"mousemove",l),Ze.bind(document,"mouseup",d),!0}}(h.originalEvent)}),this.isActive=function(){return!!c}}ab.$inject=["eventBus","canvas"];var Hg={__init__:["moveCanvas"],moveCanvas:["type",ab]};function ff(r){return Math.log(r)/Math.log(10)}function $g(r,s){var c=ff(r.min),l=ff(r.max);return(Math.abs(c)+Math.abs(l))/s}var cb=Math.sign||function(r){return r>=0?1:-1},zg={min:.2,max:4};function ua(r,s,c){r=r||{},this._enabled=!1,this._canvas=c,this._container=c._container,this._handleWheel=Ti(this._handleWheel,this),this._totalDelta=0,this._scale=r.scale||.75;var l=this;s.on("canvas.init",function(d){l._init(!1!==r.enabled)})}ua.$inject=["config.zoomScroll","eventBus","canvas"],ua.prototype.scroll=function(r){this._canvas.scroll(r)},ua.prototype.reset=function(){this._canvas.zoom("fit-viewport")},ua.prototype.zoom=function(r,s){var c=$g(zg,20);this._totalDelta+=r,Math.abs(this._totalDelta)>.1&&(this._zoom(r,s,c),this._totalDelta=0)},ua.prototype._handleWheel=function(r){if(!ko(r.target,".djs-scrollable",!0)){var s=this._container;r.preventDefault();var c,l=r.ctrlKey,d=r.shiftKey,h=-1*this._scale;if(h*=l?0===r.deltaMode?.02:.32:0===r.deltaMode?1:16,l){var f=s.getBoundingClientRect(),g={x:r.clientX-f.left,y:r.clientY-f.top};c=Math.sqrt(Math.pow(r.deltaY,2)+Math.pow(r.deltaX,2))*cb(r.deltaY)*h,this.zoom(c,g)}else this.scroll(c=d?{dx:h*r.deltaY,dy:0}:{dx:h*r.deltaX,dy:h*r.deltaY})}},ua.prototype.stepZoom=function(r,s){var c=$g(zg,10);this._zoom(r,s,c)},ua.prototype._zoom=function(r,s,c){var g,l=this._canvas,d=r>0?1:-1,h=ff(l.zoom()),f=Math.round(h/c)*c,b=Math.pow(10,f+=c*d);l.zoom((g=zg,Math.max(g.min,Math.min(g.max,b))),s)},ua.prototype.toggle=function(r){var l=this._enabled;return void 0===r&&(r=!l),l!==r&&Ze[r?"bind":"unbind"](this._container,"wheel",this._handleWheel,!1),this._enabled=r,r},ua.prototype._init=function(r){this.toggle(r)};var fh={__init__:["zoomScroll"],zoomScroll:["type",ua]};function Ha(r){Kl.call(this,r)}Oe(Ha,Kl),Ha.prototype._modules=[].concat(Kl.prototype._modules,Ha.prototype._navigationModules=[sb,Hg,fh]);var lb={exports:{}};!function(r){!function(s,c,l,d){var h,f=["","webkit","Moz","MS","ms","o"],g=c.createElement("div"),v=Math.round,b=Math.abs,w=Date.now;function C(W,ee,ue){return setTimeout(z(W,ue),ee)}function M(W,ee,ue){return!!Array.isArray(W)&&(T(W,ue[ee],ue),!0)}function T(W,ee,ue){var xe;if(W)if(W.forEach)W.forEach(ee,ue);else if(W.length!==d)for(xe=0;xe<W.length;)ee.call(ue,W[xe],xe,W),xe++;else for(xe in W)W.hasOwnProperty(xe)&&ee.call(ue,W[xe],xe,W)}function R(W,ee,ue){var xe="DEPRECATED METHOD: "+ee+"\n"+ue+" AT \n";return function(){var He=new Error("get-stack-trace"),qt=He&&He.stack?He.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Fn=s.console&&(s.console.warn||s.console.log);return Fn&&Fn.call(s.console,xe,qt),W.apply(this,arguments)}}h="function"!=typeof Object.assign?function(W){if(W===d||null===W)throw new TypeError("Cannot convert undefined or null to object");for(var ee=Object(W),ue=1;ue<arguments.length;ue++){var xe=arguments[ue];if(xe!==d&&null!==xe)for(var He in xe)xe.hasOwnProperty(He)&&(ee[He]=xe[He])}return ee}:Object.assign;var F=R(function(W,ee,ue){for(var xe=Object.keys(ee),He=0;He<xe.length;)(!ue||ue&&W[xe[He]]===d)&&(W[xe[He]]=ee[xe[He]]),He++;return W},"extend","Use `assign`."),$=R(function(W,ee){return F(W,ee,!0)},"merge","Use `assign`.");function B(W,ee,ue){var xe,He=ee.prototype;(xe=W.prototype=Object.create(He)).constructor=W,xe._super=He,ue&&h(xe,ue)}function z(W,ee){return function(){return W.apply(ee,arguments)}}function j(W,ee){return"function"==typeof W?W.apply(ee&&ee[0]||d,ee):W}function K(W,ee){return W===d?ee:W}function ce(W,ee,ue){T(Ee(ee),function(xe){W.addEventListener(xe,ue,!1)})}function J(W,ee,ue){T(Ee(ee),function(xe){W.removeEventListener(xe,ue,!1)})}function be(W,ee){for(;W;){if(W==ee)return!0;W=W.parentNode}return!1}function pe(W,ee){return W.indexOf(ee)>-1}function Ee(W){return W.trim().split(/\s+/g)}function it(W,ee,ue){if(W.indexOf&&!ue)return W.indexOf(ee);for(var xe=0;xe<W.length;){if(ue&&W[xe][ue]==ee||!ue&&W[xe]===ee)return xe;xe++}return-1}function Ce(W){return Array.prototype.slice.call(W,0)}function Me(W,ee,ue){for(var xe=[],He=[],qt=0;qt<W.length;){var Fn=ee?W[qt][ee]:W[qt];it(He,Fn)<0&&xe.push(W[qt]),He[qt]=Fn,qt++}return ue&&(xe=ee?xe.sort(function(Nr,dn){return Nr[ee]>dn[ee]}):xe.sort()),xe}function ht(W,ee){for(var ue,xe,He=ee[0].toUpperCase()+ee.slice(1),qt=0;qt<f.length;){if((xe=(ue=f[qt])?ue+He:ee)in W)return xe;qt++}return d}var X=1;function I(W){var ee=W.ownerDocument||W;return ee.defaultView||ee.parentWindow||s}var se="ontouchstart"in s,fe=ht(s,"PointerEvent")!==d,Ie=se&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),rt="touch",at="mouse",wt=["x","y"],ft=["clientX","clientY"];function Jt(W,ee){var ue=this;this.manager=W,this.callback=ee,this.element=W.element,this.target=W.options.inputTarget,this.domHandler=function(xe){j(W.options.enable,[W])&&ue.handler(xe)},this.init()}function br(W,ee,ue){var xe=ue.pointers.length,He=ue.changedPointers.length,qt=1&ee&&xe-He==0,Fn=12&ee&&xe-He==0;ue.isFirst=!!qt,ue.isFinal=!!Fn,qt&&(W.session={}),ue.eventType=ee,function(Nr,dn){var no=Nr.session,Vm=dn.pointers,oE=Vm.length;no.firstInput||(no.firstInput=zi(dn)),oE>1&&!no.firstMultiple?no.firstMultiple=zi(dn):1===oE&&(no.firstMultiple=!1);var ws,ar,sc,hl,pl,ac,sE=no.firstInput,Md=no.firstMultiple,aE=Md?Md.center:sE.center,cE=dn.center=Nn(Vm);dn.timeStamp=w(),dn.deltaTime=dn.timeStamp-sE.timeStamp,dn.angle=Ui(aE,cE),dn.distance=rn(aE,cE),sc=(ar=dn).center,hl=(ws=no).offsetDelta||{},pl=ws.prevDelta||{},ac=ws.prevInput||{},1!==ar.eventType&&4!==ac.eventType||(pl=ws.prevDelta={x:ac.deltaX||0,y:ac.deltaY||0},hl=ws.offsetDelta={x:sc.x,y:sc.y}),ar.deltaX=pl.x+(sc.x-hl.x),ar.deltaY=pl.y+(sc.y-hl.y),dn.offsetDirection=Si(dn.deltaX,dn.deltaY);var gu=jn(dn.deltaTime,dn.deltaX,dn.deltaY);dn.overallVelocityX=gu.x,dn.overallVelocityY=gu.y,dn.overallVelocity=b(gu.x)>b(gu.y)?gu.x:gu.y,dn.scale=Md?(Hm=Md.pointers,rn(($m=Vm)[0],$m[1],ft)/rn(Hm[0],Hm[1],ft)):1,dn.rotation=Md?function(ws,ar){return Ui(ar[1],ar[0],ft)+Ui(ws[1],ws[0],ft)}(Md.pointers,Vm):0,dn.maxPointers=no.prevInput?dn.pointers.length>no.prevInput.maxPointers?dn.pointers.length:no.prevInput.maxPointers:dn.pointers.length,function(ws,ar){var sc,hl,pl,ac,_a=ws.lastInterval||ar,fl=ar.timeStamp-_a.timeStamp;if(8!=ar.eventType&&(fl>25||_a.velocity===d)){var lE=ar.deltaX-_a.deltaX,uE=ar.deltaY-_a.deltaY,$s=jn(fl,lE,uE);hl=$s.x,pl=$s.y,sc=b($s.x)>b($s.y)?$s.x:$s.y,ac=Si(lE,uE),ws.lastInterval=ar}else sc=_a.velocity,hl=_a.velocityX,pl=_a.velocityY,ac=_a.direction;ar.velocity=sc,ar.velocityX=hl,ar.velocityY=pl,ar.direction=ac}(no,dn);var Hm,$m,zm=Nr.element;be(dn.srcEvent.target,zm)&&(zm=dn.srcEvent.target),dn.target=zm}(W,ue),W.emit("hammer.input",ue),W.recognize(ue),W.session.prevInput=ue}function zi(W){for(var ee=[],ue=0;ue<W.pointers.length;)ee[ue]={clientX:v(W.pointers[ue].clientX),clientY:v(W.pointers[ue].clientY)},ue++;return{timeStamp:w(),pointers:ee,center:Nn(ee),deltaX:W.deltaX,deltaY:W.deltaY}}function Nn(W){var ee=W.length;if(1===ee)return{x:v(W[0].clientX),y:v(W[0].clientY)};for(var ue=0,xe=0,He=0;He<ee;)ue+=W[He].clientX,xe+=W[He].clientY,He++;return{x:v(ue/ee),y:v(xe/ee)}}function jn(W,ee,ue){return{x:ee/W||0,y:ue/W||0}}function Si(W,ee){return W===ee?1:b(W)>=b(ee)?W<0?2:4:ee<0?8:16}function rn(W,ee,ue){ue||(ue=wt);var xe=ee[ue[0]]-W[ue[0]],He=ee[ue[1]]-W[ue[1]];return Math.sqrt(xe*xe+He*He)}function Ui(W,ee,ue){return ue||(ue=wt),180*Math.atan2(ee[ue[1]]-W[ue[1]],ee[ue[0]]-W[ue[0]])/Math.PI}Jt.prototype={handler:function(){},init:function(){this.evEl&&ce(this.element,this.evEl,this.domHandler),this.evTarget&&ce(this.target,this.evTarget,this.domHandler),this.evWin&&ce(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&J(this.element,this.evEl,this.domHandler),this.evTarget&&J(this.target,this.evTarget,this.domHandler),this.evWin&&J(I(this.element),this.evWin,this.domHandler)}};var Er={mousedown:1,mousemove:2,mouseup:4},Vn="mousedown",eo="mousemove mouseup";function on(){this.evEl=Vn,this.evWin=eo,this.pressed=!1,Jt.apply(this,arguments)}B(on,Jt,{handler:function(W){var ee=Er[W.type];1&ee&&0===W.button&&(this.pressed=!0),2&ee&&1!==W.which&&(ee=4),this.pressed&&(4&ee&&(this.pressed=!1),this.callback(this.manager,ee,{pointers:[W],changedPointers:[W],pointerType:at,srcEvent:W}))}});var qo={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Ot={2:rt,3:"pen",4:at,5:"kinect"},Rn="pointerdown",ll="pointermove pointerup pointercancel";function rc(){this.evEl=Rn,this.evWin=ll,Jt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(Rn="MSPointerDown",ll="MSPointerMove MSPointerUp MSPointerCancel"),B(rc,Jt,{handler:function(W){var ee=this.store,ue=!1,xe=W.type.toLowerCase().replace("ms",""),He=qo[xe],qt=Ot[W.pointerType]||W.pointerType,Fn=qt==rt,Nr=it(ee,W.pointerId,"pointerId");1&He&&(0===W.button||Fn)?Nr<0&&(ee.push(W),Nr=ee.length-1):12&He&&(ue=!0),Nr<0||(ee[Nr]=W,this.callback(this.manager,He,{pointers:ee,changedPointers:[W],pointerType:qt,srcEvent:W}),ue&&ee.splice(Nr,1))}});var Wi={touchstart:1,touchmove:2,touchend:4,touchcancel:8},to="touchstart",Gi="touchstart touchmove touchend touchcancel";function wr(){this.evTarget=to,this.evWin=Gi,this.started=!1,Jt.apply(this,arguments)}function Pm(W,ee){var ue=Ce(W.touches),xe=Ce(W.changedTouches);return 12&ee&&(ue=Me(ue.concat(xe),"identifier",!0)),[ue,xe]}B(wr,Jt,{handler:function(W){var ee=Wi[W.type];if(1===ee&&(this.started=!0),this.started){var ue=Pm.call(this,W,ee);12&ee&&ue[0].length-ue[1].length==0&&(this.started=!1),this.callback(this.manager,ee,{pointers:ue[0],changedPointers:ue[1],pointerType:rt,srcEvent:W})}}});var PC={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ya="touchstart touchmove touchend touchcancel";function So(){this.evTarget=ya,this.targetIds={},Jt.apply(this,arguments)}function Hs(W,ee){var ue=Ce(W.touches),xe=this.targetIds;if(3&ee&&1===ue.length)return xe[ue[0].identifier]=!0,[ue,ue];var He,qt,Fn=Ce(W.changedTouches),Nr=[],dn=this.target;if(qt=ue.filter(function(no){return be(no.target,dn)}),1===ee)for(He=0;He<qt.length;)xe[qt[He].identifier]=!0,He++;for(He=0;He<Fn.length;)xe[Fn[He].identifier]&&Nr.push(Fn[He]),12&ee&&delete xe[Fn[He].identifier],He++;return Nr.length?[Me(qt.concat(Nr),"identifier",!0),Nr]:void 0}function Im(){Jt.apply(this,arguments);var W=z(this.handler,this);this.touch=new So(this.manager,W),this.mouse=new on(this.manager,W),this.primaryTouch=null,this.lastTouches=[]}function eE(W,ee){1&W?(this.primaryTouch=ee.changedPointers[0].identifier,tE.call(this,ee)):12&W&&tE.call(this,ee)}function tE(W){var ee=W.changedPointers[0];if(ee.identifier===this.primaryTouch){var ue={x:ee.clientX,y:ee.clientY};this.lastTouches.push(ue);var xe=this.lastTouches;setTimeout(function(){var He=xe.indexOf(ue);He>-1&&xe.splice(He,1)},2500)}}function IC(W){for(var ee=W.srcEvent.clientX,ue=W.srcEvent.clientY,xe=0;xe<this.lastTouches.length;xe++){var He=this.lastTouches[xe],qt=Math.abs(ee-He.x),Fn=Math.abs(ue-He.y);if(qt<=25&&Fn<=25)return!0}return!1}B(So,Jt,{handler:function(W){var ee=PC[W.type],ue=Hs.call(this,W,ee);ue&&this.callback(this.manager,ee,{pointers:ue[0],changedPointers:ue[1],pointerType:rt,srcEvent:W})}}),B(Im,Jt,{handler:function(W,ee,ue){var He=ue.pointerType==at;if(!(He&&ue.sourceCapabilities&&ue.sourceCapabilities.firesTouchEvents)){if(ue.pointerType==rt)eE.call(this,ee,ue);else if(He&&IC.call(this,ue))return;this.callback(W,ee,ue)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var nE=ht(g.style,"touchAction"),iE=nE!==d,Om="compute",Kv="manipulation",mu="none",Nm="pan-x",pp="pan-y",fp=function(){if(!iE)return!1;var W={},ee=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ue){W[ue]=!ee||s.CSS.supports("touch-action",ue)}),W}();function Td(W,ee){this.manager=W,this.set(ee)}Td.prototype={set:function(W){W==Om&&(W=this.compute()),iE&&this.manager.element.style&&fp[W]&&(this.manager.element.style[nE]=W),this.actions=W.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var W=[];return T(this.manager.recognizers,function(ee){j(ee.options.enable,[ee])&&(W=W.concat(ee.getTouchAction()))}),function(ee){if(pe(ee,mu))return mu;var ue=pe(ee,Nm),xe=pe(ee,pp);return ue&&xe?mu:ue||xe?ue?Nm:pp:pe(ee,Kv)?Kv:"auto"}(W.join(" "))},preventDefaults:function(W){var ee=W.srcEvent,ue=W.offsetDirection;if(this.manager.session.prevented)ee.preventDefault();else{var xe=this.actions,He=pe(xe,mu)&&!fp.none,qt=pe(xe,pp)&&!fp["pan-y"],Fn=pe(xe,Nm)&&!fp["pan-x"];if(He&&1===W.pointers.length&&W.distance<2&&W.deltaTime<250)return;if(!Fn||!qt)return He||qt&&6&ue||Fn&&24&ue?this.preventSrc(ee):void 0}},preventSrc:function(W){this.manager.session.prevented=!0,W.preventDefault()}};function va(W){this.options=h({},this.defaults,W||{}),this.id=X++,this.manager=null,this.options.enable=K(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function xr(W){return 16&W?"cancel":8&W?"end":4&W?"move":2&W?"start":""}function mp(W){return 16==W?"down":8==W?"up":2==W?"left":4==W?"right":""}function dl(W,ee){var ue=ee.manager;return ue?ue.get(W):W}function Es(){va.apply(this,arguments)}function gp(){Es.apply(this,arguments),this.pX=null,this.pY=null}function Fm(){Es.apply(this,arguments)}function Lm(){va.apply(this,arguments),this._timer=null,this._input=null}function Bm(){Es.apply(this,arguments)}function jm(){Es.apply(this,arguments)}function yp(){va.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function oc(W,ee){return(ee=ee||{}).recognizers=K(ee.recognizers,oc.defaults.preset),new Yv(W,ee)}function Yv(W,ee){this.options=h({},oc.defaults,ee||{}),this.options.inputTarget=this.options.inputTarget||W,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=W,this.input=new(this.options.inputClass||(fe?rc:Ie?So:se?Im:on))(this,br),this.touchAction=new Td(this,this.options.touchAction),rE(this,!0),T(this.options.recognizers,function(xe){var He=this.add(new xe[0](xe[1]));xe[2]&&He.recognizeWith(xe[2]),xe[3]&&He.requireFailure(xe[3])},this)}function rE(W,ee){var ue,xe=W.element;xe.style&&(T(W.options.cssProps,function(He,qt){ue=ht(xe.style,qt),ee?(W.oldCssProps[ue]=xe.style[ue],xe.style[ue]=He):xe.style[ue]=W.oldCssProps[ue]||""}),ee||(W.oldCssProps={}))}va.prototype={defaults:{},set:function(W){return h(this.options,W),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(W){if(M(W,"recognizeWith",this))return this;var ee=this.simultaneous;return ee[(W=dl(W,this)).id]||(ee[W.id]=W,W.recognizeWith(this)),this},dropRecognizeWith:function(W){return M(W,"dropRecognizeWith",this)||(W=dl(W,this),delete this.simultaneous[W.id]),this},requireFailure:function(W){if(M(W,"requireFailure",this))return this;var ee=this.requireFail;return-1===it(ee,W=dl(W,this))&&(ee.push(W),W.requireFailure(this)),this},dropRequireFailure:function(W){if(M(W,"dropRequireFailure",this))return this;W=dl(W,this);var ee=it(this.requireFail,W);return ee>-1&&this.requireFail.splice(ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(W){return!!this.simultaneous[W.id]},emit:function(W){var ee=this,ue=this.state;function xe(He){ee.manager.emit(He,W)}ue<8&&xe(ee.options.event+xr(ue)),xe(ee.options.event),W.additionalEvent&&xe(W.additionalEvent),ue>=8&&xe(ee.options.event+xr(ue))},tryEmit:function(W){if(this.canEmit())return this.emit(W);this.state=32},canEmit:function(){for(var W=0;W<this.requireFail.length;){if(!(33&this.requireFail[W].state))return!1;W++}return!0},recognize:function(W){var ee=h({},W);if(!j(this.options.enable,[this,ee]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(ee),30&this.state&&this.tryEmit(ee)},process:function(W){},getTouchAction:function(){},reset:function(){}},B(Es,va,{defaults:{pointers:1},attrTest:function(W){var ee=this.options.pointers;return 0===ee||W.pointers.length===ee},process:function(W){var ee=this.state,ue=W.eventType,xe=6&ee,He=this.attrTest(W);return xe&&(8&ue||!He)?16|ee:xe||He?4&ue?8|ee:2&ee?4|ee:2:32}}),B(gp,Es,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var W=this.options.direction,ee=[];return 6&W&&ee.push(pp),24&W&&ee.push(Nm),ee},directionTest:function(W){var ee=this.options,ue=!0,xe=W.distance,He=W.direction,qt=W.deltaX,Fn=W.deltaY;return He&ee.direction||(6&ee.direction?(He=0===qt?1:qt<0?2:4,ue=qt!=this.pX,xe=Math.abs(W.deltaX)):(He=0===Fn?1:Fn<0?8:16,ue=Fn!=this.pY,xe=Math.abs(W.deltaY))),W.direction=He,ue&&xe>ee.threshold&&He&ee.direction},attrTest:function(W){return Es.prototype.attrTest.call(this,W)&&(2&this.state||!(2&this.state)&&this.directionTest(W))},emit:function(W){this.pX=W.deltaX,this.pY=W.deltaY;var ee=mp(W.direction);ee&&(W.additionalEvent=this.options.event+ee),this._super.emit.call(this,W)}}),B(Fm,Es,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mu]},attrTest:function(W){return this._super.attrTest.call(this,W)&&(Math.abs(W.scale-1)>this.options.threshold||2&this.state)},emit:function(W){1!==W.scale&&(W.additionalEvent=this.options.event+(W.scale<1?"in":"out")),this._super.emit.call(this,W)}}),B(Lm,va,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(W){var ee=this.options,ue=W.pointers.length===ee.pointers,xe=W.distance<ee.threshold,He=W.deltaTime>ee.time;if(this._input=W,!xe||!ue||12&W.eventType&&!He)this.reset();else if(1&W.eventType)this.reset(),this._timer=C(function(){this.state=8,this.tryEmit()},ee.time,this);else if(4&W.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(W){8===this.state&&(W&&4&W.eventType?this.manager.emit(this.options.event+"up",W):(this._input.timeStamp=w(),this.manager.emit(this.options.event,this._input)))}}),B(Bm,Es,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mu]},attrTest:function(W){return this._super.attrTest.call(this,W)&&(Math.abs(W.rotation)>this.options.threshold||2&this.state)}}),B(jm,Es,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return gp.prototype.getTouchAction.call(this)},attrTest:function(W){var ee,ue=this.options.direction;return 30&ue?ee=W.overallVelocity:6&ue?ee=W.overallVelocityX:24&ue&&(ee=W.overallVelocityY),this._super.attrTest.call(this,W)&&ue&W.offsetDirection&&W.distance>this.options.threshold&&W.maxPointers==this.options.pointers&&b(ee)>this.options.velocity&&4&W.eventType},emit:function(W){var ee=mp(W.offsetDirection);ee&&this.manager.emit(this.options.event+ee,W),this.manager.emit(this.options.event,W)}}),B(yp,va,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Kv]},process:function(W){var ee=this.options,ue=W.pointers.length===ee.pointers,xe=W.distance<ee.threshold,He=W.deltaTime<ee.time;if(this.reset(),1&W.eventType&&0===this.count)return this.failTimeout();if(xe&&He&&ue){if(4!=W.eventType)return this.failTimeout();var qt=!this.pTime||W.timeStamp-this.pTime<ee.interval,Fn=!this.pCenter||rn(this.pCenter,W.center)<ee.posThreshold;if(this.pTime=W.timeStamp,this.pCenter=W.center,Fn&&qt?this.count+=1:this.count=1,this._input=W,this.count%ee.taps==0)return this.hasRequireFailures()?(this._timer=C(function(){this.state=8,this.tryEmit()},ee.interval,this),2):8}return 32},failTimeout:function(){return this._timer=C(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),oc.VERSION="2.0.7",oc.defaults={domEvents:!1,touchAction:Om,enable:!0,inputTarget:null,inputClass:null,preset:[[Bm,{enable:!1}],[Fm,{enable:!1},["rotate"]],[jm,{direction:6}],[gp,{direction:6},["swipe"]],[yp],[yp,{event:"doubletap",taps:2},["tap"]],[Lm]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Yv.prototype={set:function(W){return h(this.options,W),W.touchAction&&this.touchAction.update(),W.inputTarget&&(this.input.destroy(),this.input.target=W.inputTarget,this.input.init()),this},stop:function(W){this.session.stopped=W?2:1},recognize:function(W){var ee=this.session;if(!ee.stopped){var ue;this.touchAction.preventDefaults(W);var xe=this.recognizers,He=ee.curRecognizer;(!He||He&&8&He.state)&&(He=ee.curRecognizer=null);for(var qt=0;qt<xe.length;)ue=xe[qt],2===ee.stopped||He&&ue!=He&&!ue.canRecognizeWith(He)?ue.reset():ue.recognize(W),!He&&14&ue.state&&(He=ee.curRecognizer=ue),qt++}},get:function(W){if(W instanceof va)return W;for(var ee=this.recognizers,ue=0;ue<ee.length;ue++)if(ee[ue].options.event==W)return ee[ue];return null},add:function(W){if(M(W,"add",this))return this;var ee=this.get(W.options.event);return ee&&this.remove(ee),this.recognizers.push(W),W.manager=this,this.touchAction.update(),W},remove:function(W){if(M(W,"remove",this))return this;if(W=this.get(W)){var ee=this.recognizers,ue=it(ee,W);-1!==ue&&(ee.splice(ue,1),this.touchAction.update())}return this},on:function(W,ee){if(W!==d&&ee!==d){var ue=this.handlers;return T(Ee(W),function(xe){ue[xe]=ue[xe]||[],ue[xe].push(ee)}),this}},off:function(W,ee){if(W!==d){var ue=this.handlers;return T(Ee(W),function(xe){ee?ue[xe]&&ue[xe].splice(it(ue[xe],ee),1):delete ue[xe]}),this}},emit:function(W,ee){var He,qt,Fn;this.options.domEvents&&(He=W,qt=ee,(Fn=c.createEvent("Event")).initEvent(He,!0,!0),Fn.gesture=qt,qt.target.dispatchEvent(Fn));var ue=this.handlers[W]&&this.handlers[W].slice();if(ue&&ue.length){ee.type=W,ee.preventDefault=function(){ee.srcEvent.preventDefault()};for(var xe=0;xe<ue.length;)ue[xe](ee),xe++}},destroy:function(){this.element&&rE(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(oc,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Yv,Input:Jt,TouchAction:Td,TouchInput:So,MouseInput:on,PointerEventInput:rc,TouchMouseInput:Im,SingleTouchInput:wr,Recognizer:va,AttrRecognizer:Es,Tap:yp,Pan:gp,Swipe:jm,Pinch:Fm,Rotate:Bm,Press:Lm,on:ce,off:J,each:T,merge:$,extend:F,assign:h,inherit:B,bindFn:z,prefixed:ht}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=oc,r.exports?r.exports=oc:s.Hammer=oc}(window,document)}(lb);var Lc=lb.exports,Ug=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function $a(r,s){return s.get(r,!1)}function qu(r){r.preventDefault(),"function"==typeof r.stopPropagation?r.stopPropagation():r.srcEvent&&"function"==typeof r.srcEvent.stopPropagation&&r.srcEvent.stopPropagation(),"function"==typeof r.stopImmediatePropagation&&r.stopImmediatePropagation()}function mh(r){function s(v){setTimeout(function(){ne(Ug,function(b){Ze.unbind(r,b,qu,!0)})},500)}Ze.bind(r,"touchstart",function(v){ne(Ug,function(b){Ze.bind(r,b,qu,!0)})},!0),Ze.bind(r,"touchend",s,!0),Ze.bind(r,"touchcancel",s,!0);var c=new Lc.Manager(r,{inputClass:Lc.TouchInput,recognizers:[],domEvents:!0}),l=new Lc.Tap,d=new Lc.Pan({threshold:10}),h=new Lc.Press,f=new Lc.Pinch,g=new Lc.Tap({event:"doubletap",taps:2});return f.requireFailure(d),f.requireFailure(h),c.add([d,h,f,g,l]),c.reset=function(v){var b=this.recognizers,w=this.session;w.stopped||(c.stop(v),setTimeout(function(){var C,M;for(C=0;M=b[C];C++)M.reset(),M.state=8;w.curRecognizer=null},0))},c.on("hammer.input",function(v){v.srcEvent.defaultPrevented&&c.reset(!0)}),c}function Xl(r,s,c,l,d){var h,f=$a("dragging",r),g=$a("move",r),v=$a("contextPad",r),b=$a("palette",r);function w(T){return function(R){d.fire(T,R)}}function C(T){return ko(T,"svg, .djs-element",!0)}f&&c.on("drag.move",function(T){var R=T.originalEvent;if(R&&!(R instanceof MouseEvent)){var F=Ic(R),$=C(document.elementFromPoint(F.x,F.y)),B=$&&l.get($);B!==T.hover&&(T.hover&&f.out(T),B&&(f.hover({element:B,gfx:$}),T.hover=B,T.hoverGfx=$))}}),v&&c.on("contextPad.create",function(T){var R=mh(T.pad.html);R.on("panstart",function(F){v.trigger("dragstart",F,!0)}),R.on("press",function(F){v.trigger("dragstart",F,!0)}),R.on("tap",function(F){v.trigger("click",F)})}),b&&c.on("palette.create",function(T){var R=mh(T.container);R.on("panstart",function(F){b.trigger("dragstart",F,!0)}),R.on("press",function(F){b.trigger("dragstart",F,!0)}),R.on("tap",function(F){b.trigger("click",F)})}),c.on("canvas.init",function(T){!function(T){function R(F){var $=C(F.target),B=$&&l.get($);if(g&&s.getRootElement()!==B)return g.start(F,B,!0);!function(z){var j=0,K=0;function ce(be){s.scroll({dx:be.deltaX-j,dy:be.deltaY-K}),j=be.deltaX,K=be.deltaY}function J(be){h.off("panmove",ce),h.off("panend",J),h.off("pancancel",J)}h.on("panmove",ce),h.on("panend",J),h.on("pancancel",J)}()}(h=mh(T)).on("doubletap",w("element.dblclick")),h.on("tap",w("element.click")),h.on("panstart",R),h.on("press",R),h.on("pinchstart",function(F){var $=s.zoom(),B=F.center;function z(K){var J=Math.max(.2,Math.min(4,(1-(1-K.scale)/1.5)*$));s.zoom(J,B),qu(K)}function j(K){h.off("pinchmove",z),h.off("pinchend",j),h.off("pinchcancel",j),h.reset(!0)}h.on("pinchmove",z),h.on("pinchend",j),h.on("pinchcancel",j)})}(T.svg)})}function Bc(r,s){var c=this;s.on("canvas.init",function(l){c.addBBoxMarker(l.svg)})}Xl.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],Bc.$inject=["canvas","eventBus"],Bc.prototype.addBBoxMarker=function(r){var s={fill:"none",class:"outer-bound-marker"},c=st("rect");Ne(c,{x:-1e4,y:1e4,width:10,height:10}),Ne(c,s),ut(r,c);var l=st("rect");Ne(l,{x:1e4,y:1e4,width:10,height:10}),Ne(l,s),ut(r,l)};var Ku={__depends__:[{__depends__:[lh],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",Xl],touchFix:["type",Bc]}]};function jc(r){return r&&r[r.length-1]}function Yu(r){return r.y}function mf(r){return r.x}var Ql={left:mf,center:mf,right:function(r){return r.x+r.width},top:Yu,middle:Yu,bottom:function(r){return r.y+r.height}};function gh(r){this._modeling=r}gh.$inject=["modeling"],gh.prototype._getOrientationDetails=function(r){var s="x",c="width";return-1!==["top","bottom","middle"].indexOf(r)&&(s="y",c="height"),{axis:s,dimension:c}},gh.prototype._isType=function(r,s){return-1!==s.indexOf(r)},gh.prototype._alignmentPosition=function(r,s){var c,l,d,M,h=this._getOrientationDetails(r),f=h.axis,g=h.dimension,v={},b={},w=!1;if(this._isType(r,["left","top"]))v[r]=s[0][f];else if(this._isType(r,["right","bottom"]))d=jc(s),v[r]=d[f]+d[g];else if(this._isType(r,["center","middle"])){if(ne(s,function(C){var M=C[f]+Math.round(C[g]/2);b[M]?b[M].elements.push(C):b[M]={elements:[C],center:M}}),c=Be(b,function(C){return C.elements.length>1&&(w=!0),C.elements.length}),w)return v[r]=jc(c).center,v;l=s[0],d=jc(s=Be(s,function(C){return C[f]+C[g]})),v[r]=(M=d,Math.round((l[f]+M[f]+M[g])/2))}return v},gh.prototype.trigger=function(r,s){var c=this._modeling,l=gt(r,function(f){return!(f.waypoints||f.host||f.labelTarget)});if(!(l.length<2)){var d=Be(l,Ql[s]),h=this._alignmentPosition(s,d);c.alignElements(d,h)}};var LD={__init__:["alignElements"],alignElements:["type",gh]};function Wg(r,s,c,l){for(var d;d=ox(r,c,s);)c=l(s,c,d);return c}function ub(r){return function(s,c,l){var d={x:c.x,y:c.y};return["x","y"].forEach(function(h){var f=r[h];if(f){var g="x"===h?"width":"height",v=f.margin,b=f.minDistance;d[h]=v<0?Math.min(l[h]+v-s[g]/2,c[h]-b+v):Math.max(l[h]+l[g]+v+s[g]/2,c[h]+b+v)}}),d}}function ox(r,s,c){var d,h,l={x:s.x-c.width/2,y:s.y-c.height/2,width:c.width,height:c.height};return tn((h=pt(d=r),d.host&&(h=h.concat(pt(d.host))),d.attachers&&(h=h.concat(d.attachers.reduce(function(f,g){return f.concat(pt(g))},[]))),h),function(d){return d!==c&&"intersect"===nn(d,l,10)})}function pt(r){return(s=r,s.outgoing.map(function(c){return c.target})).concat(r.incoming.map(function(l){return l.source}));var s}function sx(){return!0}function ax(r,s,c){r.on("autoPlace",100,function(l){return function(h,f,g){g||(g={});var v=g.defaultDistance||50,b=zt(h);return{x:et(h).right+v+f.width/2,y:b.y}}(l.source,l.shape)}),r.on("autoPlace.end",function(l){c.scrollToElement(l.shape)}),this.append=function(l,d,h){r.fire("autoPlace.start",{source:l,shape:d});var f=r.fire("autoPlace",{source:l,shape:d}),g=s.appendShape(l,d,f,l.parent,h);return r.fire("autoPlace.end",{source:l,shape:g}),g}}function cx(r,s){r.on("autoPlace.end",500,function(c){s.select(c.shape)})}ax.$inject=["eventBus","modeling","canvas"],cx.$inject=["eventBus","selection"];var BD={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",ax],autoPlaceSelectionBehavior:["type",cx]};function un(r,s){return jt(s,function(c){return V(r,c)})}function Gg(r,s){for("string"==typeof s&&(s=[s]);r=r.parent;)if(un(r,s))return r;return null}function lx(r,s){return V(s,"bpmn:TextAnnotation")?(l=s,d=et(c=r),Wg(c,l,{x:d.right+l.width/2,y:d.top-50-l.height/2},ub({y:{margin:-30,minDistance:20}}))):un(s,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(c,l){var d=et(c);return Wg(c,l,{x:d.right-10+l.width/2,y:d.bottom+40+l.width/2},ub({x:{margin:30,minDistance:30}}))}(r,s):V(s,"bpmn:FlowNode")?function(c,l){var d=et(c),h=zt(c),f=function(C,M){M||(M={});var T=M.defaultDistance||50,R=M.direction||"e",F=M.filter,$=M.getWeight||function(J){return J.source===C?1:-1},B=M.maxDistance||250,z=M.reference||"start";function j(J,be){return"n"===R?"start"===z?et(J).top-et(be).bottom:"center"===z?et(J).top-zt(be).y:et(J).top-et(be).top:"w"===R?"start"===z?et(J).left-et(be).right:"center"===z?et(J).left-zt(be).x:et(J).left-et(be).left:"s"===R?"start"===z?et(be).top-et(J).bottom:"center"===z?zt(be).y-et(J).bottom:et(be).bottom-et(J).bottom:"start"===z?et(be).left-et(J).right:"center"===z?zt(be).x-et(J).right:et(be).right-et(J).right}F||(F=sx);var K=C.incoming.filter(F).map(function(J){var be=$(J),pe=be<0?j(J.source,C):j(C,J.source);return{id:J.source.id,distance:pe,weight:be}}),ce=C.outgoing.filter(F).map(function(J){var be=$(J),pe=be>0?j(C,J.target):j(J.target,C);return{id:J.target.id,distance:pe,weight:be}});return Xe(K.concat(ce).reduce(function(J,be){return J[be.id+"__weight_"+be.weight]=be,J},{}),function(J,be){var pe=be.distance,Ee=be.weight;return pe<0||pe>B||(J[String(pe)]||(J[String(pe)]=0),J[String(pe)]+=1*Ee,(!J.distance||J[J.distance]<J[String(pe)])&&(J.distance=pe)),J},{}).distance||T}(c,{filter:function(C){return V(C,"bpmn:SequenceFlow")}}),g=30,b="left";return V(c,"bpmn:BoundaryEvent")&&-1!==(b=nn(c,c.host,-25)).indexOf("top")&&(g*=-1),Wg(c,l,{x:d.right+f+l.width/2,y:h.y+yh(b,80)},ub({y:{margin:g,minDistance:80}}))}(r,s):void 0;var c,l,d}function yh(r,s){return-1!=r.indexOf("top")?-1*s:-1!=r.indexOf("bottom")?s:0}function ux(r){r.on("autoPlace",function(s){return lx(s.source,s.shape)})}ux.$inject=["eventBus"];var or={__depends__:[BD],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",ux]};function Ge(r){this._eventBus=r}function Lo(r,s,c,l){Ge.call(this,r),this._elementRegistry=s,this._modeling=c,this._rules=l;var d=this;this.postExecuted(["shape.create"],function(h){var f=h.context;!1!==(f.hints||{}).autoResize&&d._expand([f.shape],f.parent||f.newParent)}),this.postExecuted(["elements.move"],function(h){var f=h.context,g=Ar(gc(f.closure.topLevel)),v=f.hints,b=!v||v.autoResize;!1!==b&&ne(pn(g,function(w){return w.parent.id}),function(w,C){bt(b)&&(w=w.filter(function(M){return tn(b,Br({id:M.id}))})),d._expand(w,C)})}),this.postExecuted(["shape.toggleCollapse"],function(h){var f=h.context,g=f.hints,v=f.shape;g&&!1===g.autoResize||v.collapsed||d._expand(v.children||[],v)}),this.postExecuted(["shape.resize"],function(h){var f=h.context,g=f.hints,v=f.shape,b=v.parent;g&&!1===g.autoResize||b&&d._expand([v],b)})}function qg(r){r.invoke(Lo,this)}function Vc(r){Ge.call(this,r),this.init()}function qr(r){Vc.call(this,r);var s=this;this.addRule("element.autoResize",function(c){return s.canResize(c.elements,c.target)})}function Bo(r,s){qr.call(this,r),this._modeling=s}Ge.$inject=["eventBus"],Ge.prototype.on=function(r,s,c,l,d,h){if((di(s)||Re(s))&&(h=d,d=l,l=c,c=s,s=null),di(c)&&(h=d,d=l,l=c,c=1e3),Xn(d)&&(h=d,d=!1),!di(l))throw new Error("handlerFn must be a function");bt(r)||(r=[r]);var f=this._eventBus;ne(r,function(g){var b,w,v=["commandStack",g,s].filter(function(b){return b}).join(".");f.on(v,c,d?(b=l,w=h,function(C){return b.call(w||null,C.context,C.command,C)}):l,h)})},ne(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(r){Ge.prototype[r]=function(s,c,l,d,h){(di(s)||Re(s))&&(h=d,d=l,l=c,c=s,s=null),this.on(s,r,c,l,d,h)}}),Lo.$inject=["eventBus","elementRegistry","modeling","rules"],Oe(Lo,Ge),Lo.prototype._getOptimalBounds=function(r,s){var c=this.getOffset(s),l=this.getPadding(s),d=et(pi(r)),h=et(s),f={};return d.top-h.top<l.top&&(f.top=d.top-c.top),d.left-h.left<l.left&&(f.left=d.left-c.left),h.right-d.right<l.right&&(f.right=d.right+c.right),h.bottom-d.bottom<l.bottom&&(f.bottom=d.bottom+c.bottom),Ps(oe({},h,f))},Lo.prototype._expand=function(r,s){if("string"==typeof s&&(s=this._elementRegistry.get(s)),this._rules.allowed("element.autoResize",{elements:r,target:s})){var c=this._getOptimalBounds(r,s);if((h=c).x!==(f=s).x||h.y!==f.y||h.width!==f.width||h.height!==f.height){var l=function(h,f){var g="";return h=et(h),f=et(f),h.top>f.top&&(g=g.concat("n")),h.right<f.right&&(g=g.concat("w")),h.bottom<f.bottom&&(g=g.concat("s")),h.left>f.left&&(g=g.concat("e")),g}(Pt(s,["x","y","width","height"]),c);this.resize(s,c,{autoResize:l});var d=s.parent;d&&this._expand([s],d)}}var h,f},Lo.prototype.getOffset=function(r){return{top:60,bottom:60,left:100,right:100}},Lo.prototype.getPadding=function(r){return{top:2,bottom:2,left:15,right:15}},Lo.prototype.resize=function(r,s,c){this._modeling.resizeShape(r,s,null,c)},qg.$inject=["injector"],Oe(qg,Lo),qg.prototype.resize=function(r,s,c){V(r,"bpmn:Participant")?this._modeling.resizeLane(r,s,null,c):this._modeling.resizeShape(r,s,null,c)},Vc.$inject=["eventBus"],Oe(Vc,Ge),Vc.prototype.addRule=function(r,s,c){var l=this;"string"==typeof r&&(r=[r]),r.forEach(function(d){l.canExecute(d,s,function(h,f,g){return c(h)},!0)})},Vc.prototype.init=function(){},qr.$inject=["eventBus"],Oe(qr,Vc),qr.prototype.canResize=function(r,s){return!1},Oe(Bo,qr),Bo.$inject=["eventBus","modeling"],Bo.prototype.canResize=function(r,s){if(!V(s,"bpmn:Participant")&&!V(s,"bpmn:Lane")&&!V(s,"bpmn:SubProcess"))return!1;var c=!0;return ne(r,function(l){(V(l,"bpmn:Lane")||l.labelTarget)&&(c=!1)}),c};var gf={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",qg],bpmnAutoResizeProvider:["type",Bo]};function Hc(r,s,c){var l,d,h=this,f=c.get("dragging",!1);f&&s.on("drag.start",function(g){s.once("drag.move",1500,function(v){!function(b){if(!b.hover){var w=b.originalEvent,C=h._findTargetGfx(w),M=C&&r.get(C);C&&M&&(b.stopPropagation(),f.hover({element:M,gfx:C}),f.move(w))}}(v)})}),s.on("element.hover",function(g){l=g.gfx,d=g.element}),s.on("element.hover",1500,function(g){d&&s.fire("element.out",{element:d,gfx:l})}),s.on("element.out",function(){l=null,d=null}),this._findTargetGfx=function(g){var v;if(g instanceof MouseEvent)return v=Ic(g),ko(document.elementFromPoint(v.x,v.y),"svg, .djs-element",!0)}}Hc.$inject=["elementRegistry","eventBus","injector"];var $c={__init__:["hoverFix"],hoverFix:["type",Hc]},Zl=Math.round,db="djs-drag-active";function Jl(r){r.preventDefault()}function dx(r,s,c,l){var d,h={threshold:5,trapClick:!0};function f(B){var z=s.viewbox(),j=s._container.getBoundingClientRect();return{x:z.x+(B.x-j.left)/z.scale,y:z.y+(B.y-j.top)/z.scale}}function g(B,z){var j=r.createEvent(oe({},(z=z||d).payload,z.data,{isTouch:z.isTouch}));return!1!==r.fire("drag."+B,j)&&r.fire(z.prefix+"."+B,j)}function v(B,z){var j,K=d.payload,ce=d.displacement,J=d.globalStart,be=Ic(B),pe=Fo(be,J),Ee=d.localStart,it=f(be),Ce=Fo(it,Ee);if(!d.active&&(z||(j=pe,Math.sqrt(Math.pow(j.x,2)+Math.pow(j.y,2))>d.threshold))){if(oe(K,{x:Zl(Ee.x+ce.x),y:Zl(Ee.y+ce.y),dx:0,dy:0},{originalEvent:B}),!1===g("start"))return F();d.active=!0,d.keepSelection||(K.previousSelection=c.get(),c.select(null)),d.cursor&&Nc(d.cursor),s.addMarker(s.getRootElement(),db)}Lg(B),d.active&&(oe(K,{x:Zl(it.x+ce.x),y:Zl(it.y+ce.y),dx:Zl(Ce.x),dy:Zl(Ce.y)},{originalEvent:B}),g("move"))}function b(B){var z=!0;d.active&&(B&&(d.payload.originalEvent=B,Lg(B)),z=g("end")),!1===z&&g("rejected"),g("ended",$(!0!==z))}function w(B){27===B.which&&(Jl(B),F())}function C(B){var z;d.active&&(z=pf(r),setTimeout(z,400),Jl(B)),b(B)}function M(B){v(B)}function T(B){var z=d.payload;z.hoverGfx=B.gfx,z.hover=B.element,g("hover")}function R(B){g("out");var z=d.payload;z.hoverGfx=null,z.hover=null}function F(B){var z;if(d){var j=d.active;j&&g("cancel"),z=$(B),j&&g("canceled",z)}}function $(B){var z,j;g("cleanup"),hf(),j=d.trapClick?C:b,Ze.unbind(document,"mousemove",v),Ze.unbind(document,"dragstart",Jl),Ze.unbind(document,"selectstart",Jl),Ze.unbind(document,"mousedown",j,!0),Ze.unbind(document,"mouseup",j,!0),Ze.unbind(document,"keyup",w),Ze.unbind(document,"touchstart",M,!0),Ze.unbind(document,"touchcancel",F,!0),Ze.unbind(document,"touchmove",v,!0),Ze.unbind(document,"touchend",b,!0),r.off("element.hover",T),r.off("element.out",R),s.removeMarker(s.getRootElement(),db);var J,K=d.payload.previousSelection;return!1!==B&&K&&!c.get().length&&(J=K.filter(function(be){return l.get(be.id)})).length&&c.select(J),z=d,d=null,z}r.on("diagram.destroy",F),this.init=function(B,z,j,K){d&&F(!1),"string"==typeof z&&(K=j,j=z,z=null);var ce,J,be,pe,Ee,it=(K=oe({},h,K||{})).data||{};pe=K.trapClick?C:b,B?(ce=Ba(B)||B,J=Ic(B),Lg(B),"dragstart"===ce.type&&Jl(ce)):(ce=null,J={x:0,y:0}),be=f(J),z||(z=be),Ee="undefined"!=typeof TouchEvent&&ce instanceof TouchEvent,d=oe({prefix:j,data:it,payload:{},globalStart:J,displacement:Fo(z,be),localStart:be,isTouch:Ee},K),K.manual||(Ee?(Ze.bind(document,"touchstart",M,!0),Ze.bind(document,"touchcancel",F,!0),Ze.bind(document,"touchmove",v,!0),Ze.bind(document,"touchend",b,!0)):(Ze.bind(document,"mousemove",v),Ze.bind(document,"dragstart",Jl),Ze.bind(document,"selectstart",Jl),Ze.bind(document,"mousedown",pe,!0),Ze.bind(document,"mouseup",pe,!0)),Ze.bind(document,"keyup",w),r.on("element.hover",T),r.on("element.out",R)),g("init"),K.autoActivate&&v(B,!0)},this.move=v,this.hover=T,this.out=R,this.end=b,this.cancel=F,this.context=function(){return d},this.setOptions=function(B){oe(h,B)}}dx.$inject=["eventBus","canvas","selection","elementRegistry"];var zc={__depends__:[$c,bo],dragging:["type",dx]};function eu(r,s,c){this._canvas=c,this._opts=oe({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},r);var l=this;s.on("drag.move",function(d){var h=l._toBorderPoint(d);l.startScroll(h)}),s.on(["drag.cleanup"],function(){l.stopScroll()})}function jo(r,s,c){return s<r&&r<c}eu.$inject=["config.autoScroll","eventBus","canvas"],eu.prototype.startScroll=function(r){var s=this._canvas,c=this._opts,l=this,d=s.getContainer().getBoundingClientRect(),h=[r.x,r.y,d.width-r.x,d.height-r.y];this.stopScroll();for(var f=0,g=0,v=0;v<4;v++)jo(h[v],c.scrollThresholdOut[v],c.scrollThresholdIn[v])&&(0===v?f=c.scrollStep:1==v?g=c.scrollStep:2==v?f=-c.scrollStep:3==v&&(g=-c.scrollStep));0===f&&0===g||(s.scroll({dx:f,dy:g}),this._scrolling=setTimeout(function(){l.startScroll(r)},c.scrollRepeatTimeout))},eu.prototype.stopScroll=function(){clearTimeout(this._scrolling)},eu.prototype.setOptions=function(r){this._opts=oe({},this._opts,r)},eu.prototype._toBorderPoint=function(r){var s=this._canvas._container.getBoundingClientRect(),c=Ic(r.originalEvent);return{x:c.x-s.left,y:c.y-s.top}};var Kg={__depends__:[zc],__init__:["autoScroll"],autoScroll:["type",eu]};function Uc(r){this._commandStack=r.get("commandStack",!1)}Uc.$inject=["injector"],Uc.prototype.allowed=function(r,s){var c=!0,l=this._commandStack;return l&&(c=l.canExecute(r,s)),void 0===c||c};var za={__init__:["rules"],rules:["type",Uc]},vh=Math.round,hx=Math.max;function Yg(r,s){return function(c,l){var d,h;for(d=0;h=c[d];d++)if(ea(h,l)<=10)return{point:c[d],bendpoint:!0,index:d};return null}(r,s)||(v=(f=Il([["M",(b=s).x,b.y],["m",0,-(w=10)],["a",w,w,0,1,1,0,20],["a",w,w,0,1,1,0,-20],["z"]],(d=[],(c=r).forEach(function(b,w){d.push([0===w?"M":"L",b.x,b.y])}),d)))[f.length-1],(g=f[0])?g!==v?g.segment2!==v.segment2?{point:c[h=hx(g.segment2,v.segment2)-1],bendpoint:!0,index:h}:{point:{x:vh(g.x+v.x)/2,y:vh(g.y+v.y)/2},index:g.segment2}:{point:{x:vh(g.x),y:vh(g.y)},index:g.segment2}:null);var c,d,h,b,w,f,g,v}function Xg(r,s,c){return Yg(s,function(l,d){var h,f=Ic(d),g=l._container.getBoundingClientRect();h={x:g.left,y:g.top};var v=l.viewbox();return{x:v.x+(f.x-h.x)/v.scale,y:v.y+(f.y-h.y)/v.scale}}(r,c))}function tu(r,s){var c=st("g");$t(c).add("djs-bendpoint"),ut(r,c);var l=st("circle");Ne(l,{cx:0,cy:0,r:4}),$t(l).add("djs-visual"),ut(c,l);var d=st("circle");return Ne(d,{cx:0,cy:0,r:10}),$t(d).add("djs-hit"),ut(c,d),s&&$t(c).add(s),c}function _h(r,s,c){var l=st("g"),d=hr(s,c),h=ao(s,c);return ut(r,l),function(r,s,c,l){var d=st("g");ut(r,d);var v,b,h=(v=s,b=c,mx("h"===l?b.x-v.x:b.y-v.y)),f=st("rect");Ne(f,{x:-7,y:-1.5,width:14,height:3}),$t(f).add("djs-visual"),ut(d,f);var g=st("rect");Ne(g,{x:-h/2,y:-7,width:h,height:14}),$t(g).add("djs-hit"),ut(d,g),Pi(d,"v"===l?90:0)}(l,s,c,h),$t(l).add("djs-segment-dragger"),$t(l).add("h"===h?"horizontal":"vertical"),Ei(l,d.x,d.y),l}function mx(r){return Math.abs(Math.round(2*r/3))}var Xu={exports:{}};!function(r,s){r.exports=function(l){if(l.CSS&&l.CSS.escape)return l.CSS.escape;var d=function(h){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var f,g=String(h),v=g.length,b=-1,w="",C=g.charCodeAt(0);++b<v;)0!=(f=g.charCodeAt(b))?w+=f>=1&&f<=31||127==f||0==b&&f>=48&&f<=57||1==b&&f>=48&&f<=57&&45==C?"\\"+f.toString(16)+" ":0==b&&1==v&&45==f||!(f>=128||45==f||95==f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122)?"\\"+g.charAt(b):g.charAt(b):w+="\ufffd";return w};return l.CSS||(l.CSS={}),l.CSS.escape=d,d}(Di)}(Xu);var bh=Xu.exports,Qu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function hb(r){return(r=""+r)&&r.replace(/[&<>"']/g,function(s){return Qu[s]})}function pb(r,s,c,l,d){function f(R,F,$){Ze.bind(R,F,function(B){c.triggerMouseEvent(F,B,$),B.stopPropagation()})}function g(R,F){var $=s.getLayer("overlays"),B=Un('.djs-bendpoints[data-element-id="'+bh(R.id)+'"]',$);return!B&&F&&(Ne(B=st("g"),{"data-element-id":R.id}),$t(B).add("djs-bendpoints"),ut($,B),f(B,"mousedown",R),f(B,"click",R),f(B,"dblclick",R)),B}function v(R,F){return Un('.djs-segment-dragger[data-segment-idx="'+R+'"]',F)}function b(R,F){F.waypoints.forEach(function($,B){var z=tu(R);ut(R,z),Ei(z,$.x,$.y)}),tu(R,"floating")}function w(R,F){for(var $,B,z,j=F.waypoints,K=1;K<j.length;K++)ao($=j[K-1],B=j[K])&&(Ne(z=_h(R,$,B),{"data-segment-idx":K}),f(z,"mousemove",F))}function C(R){var F=g(R);return F||(b(F=g(R,!0),R),w(F,R)),F}function M(R){var F=g(R);F&&(ne(Wp(".djs-segment-dragger",F),function(B){ri(B)}),ne(Wp(".djs-bendpoint",F),function(B){ri(B)}),w(F,R),b(F,R))}r.on("connection.changed",function(R){M(R.element)}),r.on("connection.remove",function(R){var F=g(R.element);F&&ri(F)}),r.on("element.marker.update",function(R){var F,$=R.element;$.waypoints&&(F=C($),R.add?$t(F).add(R.marker):$t(F).remove(R.marker))}),r.on("element.mousemove",function(R){var F,$,K,ce,J,B=R.element,z=B.waypoints;if(z){if(F=g(B,!0),!($=Xg(s,z,R.originalEvent)))return;K=$,ce=Un(".floating",F),J=K.point,ce&&Ei(ce,J.x,J.y),$.bendpoint||function(R,F,$){var B,z,j=v(F.index,R),K=$[F.index-1],ce=$[F.index],J=F.point,be=hr(K,ce),pe=ao(K,ce);j&&(B=Un(".djs-visual",j),z={x:J.x-be.x,y:J.y-be.y},"v"===pe&&(z={x:z.y,y:z.x}),Ei(B,z.x,z.y))}(F,$,z)}}),r.on("element.mousedown",function(R){if(lo(R)){var $=R.element;if($.waypoints)return function(R,F){var j,K,ce,J,$=F.waypoints,B=Xg(s,$,R);if(B)return function(z,j,K){var ce,J,be,pe,Ee,it,Ce=z.index,Me=z.point;return!(Ce<=0||z.bendpoint)&&(be=hr(ce=j[Ce-1],J=j[Ce]),pe=ao(ce,J),Ee=Math.abs(Me.x-be.x),it=Math.abs(Me.y-be.y),pe&&Ee<=K&&it<=K)}(B,$,(J=F.waypoints,(j=B).index<=0||j.bendpoint?null:(ce=ao((K={start:J[j.index-1],end:J[j.index]}).start,K.end))?mx("h"===ce?K.end.x-K.start.x:K.end.y-K.start.y)/2:null))?d.start(R,F,B.index):l.start(R,F,B.index,!B.bendpoint),!0}(R.originalEvent,$)}}),r.on("selection.changed",function(R){var F=R.newSelection[0];F&&F.waypoints&&C(F)}),r.on("element.hover",function(R){var F=R.element;F.waypoints&&(C(F),c.registerEvent(R.gfx,"mousemove","element.mousemove"))}),r.on("element.out",function(R){c.unregisterEvent(R.gfx,"mousemove","element.mousemove")}),r.on("element.updateId",function(R){var F=R.element,$=R.newId;if(F.waypoints){var B=g(F);B&&Ne(B,{"data-element-id":$})}}),this.addHandles=C,this.updateHandles=M,this.getBendpointsContainer=g,this.getSegmentDragger=v}pb.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var fb=Math.round,Ua="reconnectStart",Wa="reconnectEnd",Ga="updateWaypoints";function Wc(r,s,c,l,d,h){this._injector=r,this.start=function(f,g,v,b){var w,C=c.getGraphics(g),M=g.source,T=g.target,F=(w=b||0!==v?b||v!==g.waypoints.length-1?Ga:Wa:Ua)===Ga?"connection.updateWaypoints":"connection.reconnect",$=d.allowed(F,{connection:g,source:M,target:T});!1===$&&($=d.allowed(F,{connection:g,source:T,target:M})),!1!==$&&l.init(f,"bendpoint.move",{data:{connection:g,connectionGfx:C,context:{allowed:$,bendpointIndex:v,connection:g,source:M,target:T,insert:b,type:w}}})},s.on("bendpoint.move.hover",function(f){var g,v=f.context,b=v.connection,w=b.source,C=b.target,M=f.hover,T=v.type;if(v.hover=M,M){var R=T===Ga?"connection.updateWaypoints":"connection.reconnect";if(g=v.allowed=d.allowed(R,{connection:b,source:T===Ua?M:w,target:T===Wa?M:C}))return v.source=T===Ua?M:w,void(v.target=T===Wa?M:C);!1===g&&(g=v.allowed=d.allowed(R,{connection:b,source:T===Wa?M:C,target:T===Ua?M:w})),g&&(v.source=T===Wa?M:C,v.target=T===Ua?M:w)}}),s.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(f){var g=f.context,v=g.type;g.hover=null,g.source=null,g.target=null,v!==Ga&&(g.allowed=!1)}),s.on("bendpoint.move.end",function(f){var g=f.context,v=g.allowed,b=g.bendpointIndex,w=g.connection,C=g.insert,M=w.waypoints.slice(),T=g.source,R=g.target,F=g.type,$=g.hints||{},B={x:fb(f.x),y:fb(f.y)};if(!v)return!1;F===Ga?(C?M.splice(b,0,B):M[b]=B,$.bendpointMove={insert:C,bendpointIndex:b},M=this.cropWaypoints(w,M),h.updateWaypoints(w,function(z){z=z.slice();for(var j,K,ce,J=0;z[J];)K=z[J-1],0===ea(j=z[J],ce=z[J+1])||Kp(K,ce,j)?z.splice(J,1):J++;return z}(M),$)):(F===Ua?($.docking="source",yf(g)&&($.docking="target",$.newWaypoints=M.reverse())):F===Wa&&($.docking="target",yf(g)&&($.docking="source",$.newWaypoints=M.reverse())),h.reconnect(w,T,R,B,$))},this)}function yf(r){var s=r.hover,c=r.source,l=r.target,d=r.type;return d===Ua?s&&l&&s===l&&c!==l:d===Wa?s&&c&&s===c&&c!==l:void 0}Wc.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Wc.prototype.cropWaypoints=function(r,s){var c=this._injector.get("connectionDocking",!1);if(!c)return s;var l=r.waypoints;return r.waypoints=s,r.waypoints=c.getCroppedWaypoints(r),s=r.waypoints,r.waypoints=l,s};var ae="updateWaypoints",Zu="connect-ok",Ju="connect-not-ok",Gc="connect-hover",ed="djs-updating",mb="djs-element-hidden";function Zg(r,s,c,l){this._injector=s;var d=s.get("connectionPreview",!1);c.on("bendpoint.move.start",function(h){var f=h.context,g=f.bendpointIndex,v=f.connection,b=f.insert,w=v.waypoints,C=w.slice();f.waypoints=w,b&&C.splice(g,0,{x:h.x,y:h.y}),v.waypoints=C,$t(f.draggerGfx=tu(l.getLayer("overlays"))).add("djs-dragging"),l.addMarker(v,mb),l.addMarker(v,ed)}),c.on("bendpoint.move.hover",function(h){var f=h.context,g=f.allowed,v=f.hover,b=f.type;if(v){if(l.addMarker(v,Gc),b===ae)return;g?(l.removeMarker(v,Ju),l.addMarker(v,Zu)):!1===g&&(l.removeMarker(v,Zu),l.addMarker(v,Ju))}}),c.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(h){var f=h.context,g=f.hover,v=f.target;g&&(l.removeMarker(g,Gc),l.removeMarker(g,v?Zu:Ju))}),c.on("bendpoint.move.move",function(h){var f=h.context,g=f.allowed,v=f.bendpointIndex,b=f.draggerGfx,w=f.hover,C=f.type,M=f.connection,T=M.source,R=M.target,F=M.waypoints.slice(),$={x:h.x,y:h.y},B=f.hints||{},z={};d&&(B.connectionStart&&(z.connectionStart=B.connectionStart),B.connectionEnd&&(z.connectionEnd=B.connectionEnd),"reconnectStart"===C?yf(f)?(z.connectionEnd=z.connectionEnd||$,z.source=R,z.target=w||T,F=F.reverse()):(z.connectionStart=z.connectionStart||$,z.source=w||T,z.target=R):"reconnectEnd"===C?yf(f)?(z.connectionStart=z.connectionStart||$,z.source=w||R,z.target=T,F=F.reverse()):(z.connectionEnd=z.connectionEnd||$,z.source=T,z.target=w||R):(z.noCropping=!0,z.noLayout=!0,F[v]=$),C===ae&&(F=r.cropWaypoints(M,F)),z.waypoints=F,d.drawPreview(f,g,z)),Ei(b,h.x,h.y)},this),c.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(h){var f=h.context,g=f.connection,v=f.draggerGfx,b=f.hover,w=f.target;g.waypoints=f.waypoints,ri(v),l.removeMarker(g,ed),l.removeMarker(g,mb),b&&(l.removeMarker(b,Zu),l.removeMarker(b,w?Zu:Ju)),d&&d.cleanUp(f)})}Zg.$inject=["bendpointMove","injector","eventBus","canvas"];var Jg="connect-hover",nu="djs-updating";function vr(r,s,c){return td(r,s,r[s]+c)}function td(r,s,c){return{x:"x"===s?c:r.x,y:"y"===s?c:r.y}}function da(r){return"x"===r?"y":"x"}function gb(r,s,c){var l,d;return r.original?r.original:(l=zt(s),td(r,d=da(c),l[d]))}function ey(r,s,c,l,d,h){var f=r.get("connectionDocking",!1);function g(w,C){if(!f)return C;var M,T=w.waypoints;return w.waypoints=C,M=f.getCroppedWaypoints(w),w.waypoints=T,M}function v(w){d.update("connection",w.connection,w.connectionGfx)}this.start=function(w,C,M){var T,R,F,$,B=c.getGraphics(C),z=M-1,j=M,K=C.waypoints,ce=K[z],J=K[j],be=Xg(c,K,w);(R=ao(ce,J))&&(F="v"===R?"x":"y",0===z&&(ce=gb(ce,C.source,F)),j===K.length-1&&(J=gb(J,C.target,F)),T={connection:C,segmentStartIndex:z,segmentEndIndex:j,segmentStart:ce,segmentEnd:J,axis:F,dragPosition:$=be?be.point:{x:(ce.x+J.x)/2,y:(ce.y+J.y)/2}},l.init(w,$,"connectionSegment.move",{cursor:"x"===F?"resize-ew":"resize-ns",data:{connection:C,connectionGfx:B,context:T}}))},s.on("connectionSegment.move.start",function(w){var C=w.context,M=w.connection,T=c.getLayer("overlays");C.originalWaypoints=M.waypoints.slice(),C.draggerGfx=_h(T,C.segmentStart,C.segmentEnd),$t(C.draggerGfx).add("djs-dragging"),c.addMarker(M,nu)}),s.on("connectionSegment.move.move",function(w){var C,M,T=w.context,R=T.connection,F=T.segmentStartIndex,$=T.segmentEndIndex,B=T.segmentStart,z=T.segmentEnd,j=T.axis,K=T.originalWaypoints.slice(),ce=vr(B,j,w["d"+j]),J=vr(z,j,w["d"+j]),be=K.length,pe=0;K[F]=ce,K[$]=J,F<2&&(C=nn(R.source,ce),1===F?"intersect"===C&&(K.shift(),K[0]=ce,pe--):"intersect"!==C&&(K.unshift(B),pe++)),$>be-3&&(M=nn(R.target,J),$===be-2?"intersect"===M&&(K.pop(),K[K.length-1]=J):"intersect"!==M&&K.push(z)),T.newWaypoints=R.waypoints=g(R,K),function(w,C,M){var F,$,B,z,j,K,T=w.newWaypoints,R=(F=M,$=T[w.segmentStartIndex+C],B=T[w.segmentEndIndex+C],z=da(w.axis),j=Math.max($[z],B[z]),K=Math.min($[z],B[z]),td($,z,Math.min(Math.max(K+20,F[z]),j-20)));Ei(w.draggerGfx,R.x,R.y)}(T,pe,w),T.newSegmentStartIndex=F+pe,v(w)}),s.on("connectionSegment.move.hover",function(w){w.context.hover=w.hover,c.addMarker(w.hover,Jg)}),s.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(w){var C=w.context.hover;C&&c.removeMarker(C,Jg)}),s.on("connectionSegment.move.cleanup",function(w){var C=w.context,M=C.connection;C.draggerGfx&&ri(C.draggerGfx),c.removeMarker(M,nu)}),s.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(w){var C=w.context;C.connection.waypoints=C.originalWaypoints,v(w)}),s.on("connectionSegment.move.end",function(w){var j,K,ce,C=w.context,M=C.connection,T=C.newWaypoints,R=C.newSegmentStartIndex,F=(j=T=T.map(function(j){return{original:j.original,x:Math.round(j.x),y:Math.round(j.y)}}),K=R,ce=0,{waypoints:j.filter(function(J,be){return!Kp(j[be-1],j[be+1],J)||(ce=be<=K?ce-1:ce,!1)}),segmentOffset:ce}),$=g(M,F.waypoints);h.updateWaypoints(M,$,{segmentMove:{segmentStartIndex:C.segmentStartIndex,newSegmentStartIndex:R+F.segmentOffset}})})}ey.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var ty=Math.abs,Eh=Math.round;function ny(r){return{x:r.x,y:r.y}}function yb(r){return{x:r.x+r.width,y:r.y+r.height}}function us(r,s){return!r||isNaN(r.x)||isNaN(r.y)?s:{x:Eh(r.x+r.width/2),y:Eh(r.y+r.height/2)}}function Fs(r,s){var c=r.snapped;return!!c&&("string"==typeof s?c[s]:c.x&&c.y)}function li(r,s,c){if("string"!=typeof s)throw new Error("axis must be in [x, y]");if("number"!=typeof c&&!1!==c)throw new Error("value must be Number or false");var l,d=r[s],h=r.snapped=r.snapped||{};return!1===c?h[s]=!1:(h[s]=!0,r[s]+=l=c-d,r["d"+s]+=l),d}function vb(r){return r.children||[]}var jD=Math.abs,iy=Math.round;function _b(r){function s(l,d){if(bt(l)){for(var h=l.length;h--;)if(jD(l[h]-d)<=10)return l[h]}else{var f=d%(l=+l);if(f<10)return d-f;if(f>l-10)return d-f+l}return d}function c(l){if(l.width)return{x:iy(l.width/2+l.x),y:iy(l.height/2+l.y)}}r.on("connectionSegment.move.move",1500,function(l){var d,h,f=function(C){var M=C.snapPoints,T=C.connection,R=T.waypoints,$=C.segmentStartIndex,z=C.segmentEndIndex,j=C.axis;if(M)return M;var K=[R[$-1],C.segmentStart,C.segmentEnd,R[z+1]];return $<2&&K.unshift(c(T.source)),z>R.length-3&&K.unshift(c(T.target)),C.snapPoints=M={horizontal:[],vertical:[]},ne(K,function(ce){ce&&(ce=ce.original||ce,"y"===j&&M.horizontal.push(ce.y),"x"===j&&M.vertical.push(ce.x))}),M}(l.context),g=l.x,v=l.y;if(f){var b=g-(d=s(f.vertical,g)),w=v-(h=s(f.horizontal,v));oe(l,{dx:l.dx-b,dy:l.dy-w,x:d,y:h}),(b||-1!==f.vertical.indexOf(g))&&li(l,"x",d),(w||-1!==f.horizontal.indexOf(v))&&li(l,"y",h)}}),r.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(l){var d,h,f=l.context,g=function(R){var F=R.snapPoints,$=R.connection.waypoints,B=R.bendpointIndex;if(F)return F;var z=[$[B-1],$[B+1]];return R.snapPoints=F={horizontal:[],vertical:[]},ne(z,function(j){j&&(F.horizontal.push((j=j.original||j).y),F.vertical.push(j.x))}),F}(f),v=f.hover,b=v&&c(v),w=l.x,C=l.y;if(g){var M=w-(d=s(b?g.vertical.concat([b.x]):g.vertical,w)),T=C-(h=s(b?g.horizontal.concat([b.y]):g.horizontal,C));oe(l,{dx:l.dx-M,dy:l.dy-T,x:l.x-M,y:l.y-T}),(M||-1!==g.vertical.indexOf(w))&&li(l,"x",d),(T||-1!==g.horizontal.indexOf(C))&&li(l,"y",h)}})}_b.$inject=["eventBus"];var VD={__depends__:[zc,za],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",pb],bendpointMove:["type",Wc],bendpointMovePreview:["type",Zg],connectionSegmentMove:["type",ey],bendpointSnapping:["type",_b]};function bb(r,s,c,l){function d(h,f){return l.allowed("connection.create",{source:h,target:f})}r.on("connect.hover",function(h){var f,g=h.context,v=g.start,b=h.hover;if(g.hover=b,!Ds(f=g.canExecute=d(v,b))){if(!1!==f)return g.source=v,void(g.target=b);Ds(f=g.canExecute=d(b,v))||!1!==f&&(g.source=b,g.target=v)}}),r.on(["connect.out","connect.cleanup"],function(h){var f=h.context;f.hover=null,f.source=null,f.target=null,f.canExecute=!1}),r.on("connect.end",function(h){var f=h.context,g=f.canExecute,v=f.connectionStart,b={x:h.x,y:h.y},w=f.source,C=f.target;if(!g)return!1;var M=null,T={connectionStart:ry(f)?b:v,connectionEnd:ry(f)?v:b};Xn(g)&&(M=g),c.connect(w,C,M,T)}),this.start=function(h,f,g,v){Xn(g)||(v=g,g=zt(f)),s.init(h,"connect",{autoActivate:v,data:{shape:f,context:{start:f,connectionStart:g}}})}}function ry(r){var s=r.hover,c=r.source;return s&&c&&s===c&&c!==r.target}bb.$inject=["eventBus","dragging","modeling","rules"];var Eb="connect-ok",wh="connect-not-ok";function vf(r,s,c){var l=r.get("connectionPreview",!1);l&&s.on("connect.move",function(d){var h=d.context,f=h.canExecute,g=h.hover,v=h.source,b=h.start,C=h.target,M=h.connectionStart||h.startPosition,T=h.connectionEnd||{x:d.x,y:d.y},R=M,F=T;ry(h)&&(R=T,F=M),l.drawPreview(h,f,{source:v||b,target:C||g,connectionStart:R,connectionEnd:F})}),s.on("connect.hover",900,function(d){var g=d.context.canExecute;null!==g&&c.addMarker(d.hover,g?Eb:wh)}),s.on(["connect.out","connect.cleanup"],1100,function(d){var h=d.hover;h&&(c.removeMarker(h,Eb),c.removeMarker(h,wh))}),l&&s.on("connect.cleanup",function(d){l.cleanUp(d.context)})}vf.$inject=["injector","eventBus","canvas"];var qc={__depends__:[bo,za,zc],__init__:["connectPreview"],connect:["type",bb],connectPreview:["type",vf]};function qa(r,s,c,l){this._canvas=s,this._graphicsFactory=c,this._elementFactory=l,this._connectionDocking=r.get("connectionDocking",!1),this._layouter=r.get("layouter",!1)}qa.$inject=["injector","canvas","graphicsFactory","elementFactory"],qa.prototype.drawPreview=function(r,s,c){var l,d,h,f=r.connectionPreviewGfx,g=r.getConnection,v=(c=c||{}).source,b=c.target,w=c.waypoints,C=c.connectionStart,M=c.connectionEnd,T=c.noLayout,R=c.noCropping,F=c.noNoop,$=this;f||(f=r.connectionPreviewGfx=this.createConnectionPreviewGfx()),Sl(f),g||(g=r.getConnection=(d=function(B,z,j){return $.getConnection(B,z,j)},h={},function(B){var z=JSON.stringify(B),j=h[z];return j||(j=h[z]=d.apply(null,arguments)),j})),s&&(l=g(s,v,b)),l?(l.waypoints=w||[],this._layouter&&!T&&(l.waypoints=this._layouter.layoutConnection(l,{source:v,target:b,connectionStart:C,connectionEnd:M,waypoints:c.waypoints||l.waypoints})),l.waypoints&&l.waypoints.length||(l.waypoints=[v?zt(v):C,b?zt(b):M]),this._connectionDocking&&(v||b)&&!R&&(l.waypoints=this._connectionDocking.getCroppedWaypoints(l,v,b)),this._graphicsFactory.drawConnection(f,l)):!F&&this.drawNoopPreview(f,c)},qa.prototype.drawNoopPreview=function(r,s){var c=s.source,l=s.target,d=s.connectionStart||zt(c),h=s.connectionEnd||zt(l),f=this.cropWaypoints(d,h,c,l);ut(r,this.createNoopConnection(f[0],f[1]))},qa.prototype.cropWaypoints=function(r,s,c,l){var d=this._graphicsFactory,h=c&&d.getShapePath(c),f=l&&d.getShapePath(l),g=d.getConnectionPath({waypoints:[r,s]});return[r=c&&$u(h,g,!0)||r,s=l&&$u(f,g,!1)||s]},qa.prototype.cleanUp=function(r){r&&r.connectionPreviewGfx&&ri(r.connectionPreviewGfx)},qa.prototype.getConnection=function(r){var c,s=Xn(c=r)?c:{};return this._elementFactory.createConnection(s)},qa.prototype.createConnectionPreviewGfx=function(){var r=st("g");return Ne(r,{pointerEvents:"none"}),$t(r).add("djs-connection-preview"),ut(this._canvas.getActiveLayer(),r),r},qa.prototype.createNoopConnection=function(r,s){var c=st("polyline");return Ne(c,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),Ne(c,{points:[r.x,r.y,s.x,s.y]}),c};var gx={__init__:["connectionPreview"],connectionPreview:["type",qa]},yx=Math.min,xh=Math.max;function Ch(r){r.preventDefault()}function nd(r){r.stopPropagation()}function ds(r){this.container=r.container,this.parent=ke('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Un("[contenteditable]",this.parent),this.keyHandler=r.keyHandler||function(){},this.resizeHandler=r.resizeHandler||function(){},this.autoResize=Ti(this.autoResize,this),this.handlePaste=Ti(this.handlePaste,this)}function Vo(r,s){this._eventBus=r,this._providers=[],this._textbox=new ds({container:s.getContainer(),keyHandler:Ti(this._handleKey,this),resizeHandler:Ti(this._handleResize,this)})}ds.prototype.create=function(r,s,c,l){var d=this.parent,h=this.content,f=this.container;l=this.options=l||{};var g=Pt(s=this.style=s||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);oe(d.style,{width:r.width+"px",height:r.height+"px",maxWidth:r.maxWidth+"px",maxHeight:r.maxHeight+"px",minWidth:r.minWidth+"px",minHeight:r.minHeight+"px",left:r.x+"px",top:r.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},g);var v=Pt(s,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return oe(h.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},v),l.centerVertically&&oe(h.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},v),h.innerText=c,Ze.bind(h,"keydown",this.keyHandler),Ze.bind(h,"mousedown",nd),Ze.bind(h,"paste",this.handlePaste),l.autoResize&&Ze.bind(h,"input",this.autoResize),l.resizable&&this.resizable(s),f.appendChild(d),this.setSelection(h.lastChild,h.lastChild&&h.lastChild.length),d},ds.prototype.handlePaste=function(r){var s,c=this.options,l=this.style;if(r.preventDefault(),s=r.clipboardData?r.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(s),c.autoResize){var d=this.autoResize(l);d&&this.resizeHandler(d)}},ds.prototype.insertText=function(r){r=r.replace(/\r\n|\r|\n/g,"\n"),document.execCommand("insertText",!1,r)||this._insertTextIE(r)},ds.prototype._insertTextIE=function(r){var c,l,d=this.getSelection(),h=d.startContainer,f=d.endContainer,g=d.startOffset,v=d.endOffset,b=d.commonAncestorContainer,w=[].slice.call(b.childNodes);if(b.nodeType===Node.TEXT_NODE){var C=h.textContent;h.textContent=C.substring(0,g)+r+C.substring(v),c=h,l=g+r.length}else if(h===this.content&&f===this.content){var M=document.createTextNode(r);this.content.insertBefore(M,w[g]),c=M,l=M.textContent.length}else{var T=w.indexOf(h),R=w.indexOf(f);w.forEach(function(F,$){$===T?F.textContent=h.textContent.substring(0,g)+r+f.textContent.substring(v):$>T&&$<=R&&As(F)}),c=h,l=g+r.length}c&&void 0!==l&&setTimeout(function(){self.setSelection(c,l)})},ds.prototype.autoResize=function(){var r=this.parent,s=this.content,c=parseInt(this.style.fontSize)||12;if(s.scrollHeight>r.offsetHeight||s.scrollHeight<r.offsetHeight-c){var l=r.getBoundingClientRect(),d=s.scrollHeight;r.style.height=d+"px",this.resizeHandler({width:l.width,height:l.height,dx:0,dy:d-l.height})}},ds.prototype.resizable=function(){var r=this,s=this.parent,c=this.resizeHandle,l=parseInt(this.style.minWidth)||0,d=parseInt(this.style.minHeight)||0,h=parseInt(this.style.maxWidth)||1/0,f=parseInt(this.style.maxHeight)||1/0;if(!c){var g,v,b,w;c=this.resizeHandle=ke('<div class="djs-direct-editing-resize-handle"></div>');var C=function(T){Ch(T),nd(T);var R=yx(xh(b+T.clientX-g,l),h),F=yx(xh(w+T.clientY-v,d),f);s.style.width=R+"px",s.style.height=F+"px",r.resizeHandler({width:b,height:w,dx:T.clientX-g,dy:T.clientY-v})},M=function(T){Ch(T),nd(T),Ze.unbind(document,"mousemove",C,!1),Ze.unbind(document,"mouseup",M,!1)};Ze.bind(c,"mousedown",function(T){Ch(T),nd(T),g=T.clientX,v=T.clientY;var R=s.getBoundingClientRect();b=R.width,w=R.height,Ze.bind(document,"mousemove",C),Ze.bind(document,"mouseup",M)})}oe(c.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),s.appendChild(c)},ds.prototype.destroy=function(){var r=this.parent,s=this.content,c=this.resizeHandle;s.innerText="",r.removeAttribute("style"),s.removeAttribute("style"),Ze.unbind(s,"keydown",this.keyHandler),Ze.unbind(s,"mousedown",nd),Ze.unbind(s,"input",this.autoResize),Ze.unbind(s,"paste",this.handlePaste),c&&(c.removeAttribute("style"),As(c)),As(r)},ds.prototype.getValue=function(){return this.content.innerText.trim()},ds.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},ds.prototype.setSelection=function(r,s){var c=document.createRange();null===r?c.selectNodeContents(this.content):(c.setStart(r,s),c.setEnd(r,s));var l=window.getSelection();l.removeAllRanges(),l.addRange(c)},Vo.$inject=["eventBus","canvas"],Vo.prototype.registerProvider=function(r){this._providers.push(r)},Vo.prototype.isActive=function(){return!!this._active},Vo.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Vo.prototype._fire=function(r,s){this._eventBus.fire("directEditing."+r,s||{active:this._active})},Vo.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Vo.prototype.complete=function(){var r=this._active;if(r){var s,c=r.context.bounds,l=this.$textbox.getBoundingClientRect(),d=this.getValue();d===r.context.text&&l.height===c.height&&l.width===c.width||(s=this._textbox.container.getBoundingClientRect(),r.provider.update(r.element,d,r.context.text,{x:l.left-s.left,y:l.top-s.top,width:l.width,height:l.height})),this._fire("complete"),this.close()}},Vo.prototype.getValue=function(){return this._textbox.getValue()},Vo.prototype._handleKey=function(r){r.stopPropagation();var s=r.keyCode||r.charCode;return 27===s?(r.preventDefault(),this.cancel()):13!==s||r.shiftKey?void 0:(r.preventDefault(),this.complete())},Vo.prototype._handleResize=function(r){this._fire("resize",r)},Vo.prototype.activate=function(r){var s;this.isActive()&&this.cancel();var c=tn(this._providers,function(l){return(s=l.activate(r))?l:null});return s&&(this.$textbox=this._textbox.create(s.bounds,s.style,s.text,s.options),this._active={element:r,context:s,provider:c},s.options&&s.options.resizable&&(this.resizable=!0),this._fire("activate")),!!s};var Kc={__depends__:[lh],__init__:["directEditing"],directEditing:["type",Vo]};function hs(r,s,c){this._eventBus=s,this._overlays=c;var l=Ai(r&&r.scale)?r.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:l},this._current=null,this._init()}hs.$inject=["config.contextPad","eventBus","overlays"],hs.prototype._init=function(){var r=this._eventBus,s=this;r.on("selection.changed",function(c){var l=c.newSelection;1===l.length?s.open(l[0]):s.close()}),r.on("elements.delete",function(c){ne(c.elements,function(l){s.isOpen(l)&&s.close()})}),r.on("element.changed",function(c){var l=c.element,d=s._current;d&&d.element===l&&s.open(l,!0)})},hs.prototype.registerProvider=function(r,s){s||(s=r,r=1e3),this._eventBus.on("contextPad.getProviders",r,function(c){c.providers.push(s)})},hs.prototype.getEntries=function(r){var s=this._getProviders(),c={};return ne(s,function(l){var d=l.getContextPadEntries(r);di(d)?c=d(c):ne(d,function(h,f){c[f]=h})}),c},hs.prototype.trigger=function(r,s,c){var l,d,h=this._current.element,f=this._current.entries,g=s.delegateTarget||s.target;if(!g)return s.preventDefault();if(l=f[jr(g,"data-action")].action,d=s.originalEvent||s,di(l)){if("click"===r)return l(d,h,c)}else if(l[r])return l[r](d,h,c);s.preventDefault()},hs.prototype.open=function(r,s){!s&&this.isOpen(r)||(this.close(),this._updateAndOpen(r))},hs.prototype._getProviders=function(){var r=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(r),r.providers},hs.prototype._updateAndOpen=function(r){var s=this.getEntries(r),c=this.getPad(r),l=c.html;ne(s,function(d,h){var f,w,C,g=d.group||"default",v=ke(d.html||'<div class="entry" draggable="true"></div>');jr(v,"data-action",h),(f=Un("[data-group="+g+"]",l))||(f=ke('<div class="group" data-group="'+g+'"></div>'),l.appendChild(f)),f.appendChild(v),d.className&&(w=d.className,C=Yi(v),(bt(w)?w:w.split(/\s+/g)).forEach(function(M){C.add(M)})),d.title&&jr(v,"title",d.title),d.imageUrl&&v.appendChild(ke('<img src="'+d.imageUrl+'">'))}),Yi(l).add("open"),this._current={element:r,pad:c,entries:s},this._eventBus.fire("contextPad.open",{current:this._current})},hs.prototype.getPad=function(r){if(this.isOpen())return this._current.pad;var s=this,c=this._overlays,l=ke('<div class="djs-context-pad"></div>'),d=oe({html:l},this._overlaysConfig);vt_bind(l,".entry","click",function(f){s.trigger("click",f)}),vt_bind(l,".entry","dragstart",function(f){s.trigger("dragstart",f)}),Ze.bind(l,"mousedown",function(f){f.stopPropagation()}),this._overlayId=c.add(r,"context-pad",d);var h=c.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:r,pad:h}),h},hs.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},hs.prototype.isOpen=function(r){return!(!this._current||r&&this._current.element!==r)};var vx={__depends__:[lh,nb],contextPad:["type",hs]},_x=["marker-start","marker-mid","marker-end"],bx=["circle","ellipse","line","path","polygon","polyline","rect"];function sr(r,s,c,l){this._elementRegistry=r,this._canvas=c,this._styles=l,this._clonedMarkers={};var d=this;s.on("drag.cleanup",function(){ne(d._clonedMarkers,function(h){ri(h)}),d._clonedMarkers={}})}sr.$inject=["elementRegistry","eventBus","canvas","styles"],sr.prototype.getGfx=function(r){return this._elementRegistry.getGraphics(r)},sr.prototype.addDragger=function(r,s,c){var l=Pu(c=c||this.getGfx(r)),d=c.getBoundingClientRect();return this._cloneMarkers(Xt(l)),Ne(l,this._styles.cls("djs-dragger",[],{x:d.top,y:d.left})),ut(s,l),l},sr.prototype.addFrame=function(r,s){var c=st("rect",{class:"djs-resize-overlay",width:r.width,height:r.height,x:r.x,y:r.y});return ut(s,c),c},sr.prototype._cloneMarkers=function(r){var s=this;if(r.childNodes)for(var c=0;c<r.childNodes.length;c++)s._cloneMarkers(r.childNodes[c]);-1!==bx.indexOf(r.nodeName)&&_x.forEach(function(l){if(Ne(r,l)){var d=(h=r,f=l,g=s._canvas.getContainer(),Un("marker#"+Ne(h,f).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],g||document));s._cloneMarker(r,d,l)}var h,f,g})},sr.prototype._cloneMarker=function(r,s,c){var l=s.id,d=this._clonedMarkers[l];if(!d){var h=l+"-clone";(d=Pu(s)).id=h,$t(d).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[l]=d;var f=Un("defs",this._canvas._svg);f||(f=st("defs"),ut(this._canvas._svg,f)),ut(f,d)}Ne(r,c,"url(#"+this._clonedMarkers[l].id+")")};var Eo={__init__:["previewSupport"],previewSupport:["type",sr]},xb="drop-ok",Cb="drop-not-ok",Sb="attach-ok",Db="new-parent";function Tb(r,s,c,l,d){function h(g,v){[Sb,xb,Cb,Db].forEach(function(b){b===v?r.addMarker(g,b):r.removeMarker(g,b)})}function f(){var g=s.context();g&&"create"===g.prefix&&s.cancel()}c.on(["create.move","create.hover"],function(g){var v=g.context,b=v.elements,w=g.hover,C=v.source,M=v.hints||{};if(!w)return v.canExecute=!1,void(v.target=null);oy(g);var R=v.canExecute=w&&function(F,$,B,z,j){if(!$)return!1;var K=tn(F=gt(F,function(Ee){var Ce;return!(Ee.parent||(Ce=Ee,Ce.labelTarget&&-1!==F.indexOf(Ee.labelTarget)))}),function(Ee){return!Sh(Ee)}),ce=!1,J=!1,be=!1;Mb(F)&&(ce=d.allowed("shape.attach",{position:B,shape:K,target:$})),ce||(be=Mb(F)?d.allowed("shape.create",{position:B,shape:K,source:z,target:$}):d.allowed("elements.create",{elements:F,position:B,target:$}));var pe=j.connectionTarget;return be||ce?(K&&z&&(J=d.allowed("connection.create",{source:pe===z?K:z,target:pe===z?z:K,hints:{targetParent:$,targetAttach:ce}})),{attach:ce,connect:J}):(null===be||null===ce)&&null}(b,w,{x:g.x,y:g.y},C,M);w&&null!==R&&(v.target=w,h(w,R&&R.attach?Sb:R?Db:Cb))}),c.on(["create.end","create.out","create.cleanup"],function(g){var v=g.hover;v&&h(v,null)}),c.on("create.end",function(g){var v=g.context,b=v.source,w=v.shape,C=v.elements,M=v.target,T=v.canExecute,R=T&&T.attach,F=T&&T.connect,$=v.hints||{};if(!1===T||!M)return!1;oy(g);var B={x:g.x,y:g.y};w=F?l.appendShape(b,w,B,M,{attach:R,connection:!0===F?{}:F,connectionTarget:$.connectionTarget}):tn(C=l.createElements(C,B,M,oe({},$,{attach:R})),function(z){return!Sh(z)}),oe(v,{elements:C,shape:w}),oe(g,{elements:C,shape:w})}),c.on("create.init",function(){c.on("elements.changed",f),c.once(["create.cancel","create.end"],2e3,function(){c.off("elements.changed",f)})}),this.start=function(g,v,b){bt(v)||(v=[v]);var w=tn(v,function(M){return!Sh(M)});if(w){b=oe({elements:v,hints:{},shape:w},b||{}),ne(v,function(M){Re(M.x)||(M.x=0),Re(M.y)||(M.y=0)});var C=pi(v);ne(v,function(M){Sh(M)&&(M.waypoints=Qn(M.waypoints,function(T){return{x:T.x-C.x-C.width/2,y:T.y-C.y-C.height/2}})),oe(M,{x:M.x-C.x-C.width/2,y:M.y-C.y-C.height/2})}),s.init(g,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:w,elements:v,context:b}})}}}function oy(r){var s=r.context.createConstraints;s&&(s.left&&(r.x=Math.max(r.x,s.left)),s.right&&(r.x=Math.min(r.x,s.right)),s.top&&(r.y=Math.max(r.y,s.top)),s.bottom&&(r.y=Math.min(r.y,s.bottom)))}function Sh(r){return!!r.waypoints}function Mb(r){return r&&1===r.length&&!Sh(r[0])}function Rb(r,s,c,l,d){s.on("create.move",750,function(h){var f=h.hover,g=h.context,b=g.dragGroup;b||(b=g.dragGroup=function(w){var C=st("g");Ne(C,d.cls("djs-drag-group",["no-events"]));var M=st("g");return w.forEach(function(T){var R;T.hidden||(T.waypoints?(R=c._createContainer("connection",M),c.drawConnection(Xt(R),T)):(R=c._createContainer("shape",M),c.drawShape(Xt(R),T),Ei(R,T.x,T.y)),l.addDragger(T,C,R))}),C}(g.elements)),f?(b.parentNode||ut(r.getActiveLayer(),b),Ei(b,h.x,h.y)):ri(b)}),s.on("create.cleanup",function(h){var f=h.context.dragGroup;f&&ri(f)})}Tb.$inject=["canvas","dragging","eventBus","modeling","rules"],Rb.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var _f={__depends__:[zc,Eo,za,bo],__init__:["create","createPreview"],create:["type",Tb],createPreview:["type",Rb]},Ex="data-id",kb=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function ni(r,s,c){var l=Ai(r&&r.scale)?r.scale:{min:1,max:1.5};this._config={scale:l},this._eventBus=s,this._canvas=c,this._providers={},this._current={}}ni.$inject=["config.popupMenu","eventBus","canvas"],ni.prototype.registerProvider=function(r,s,c){c||(c=s,s=1e3),this._eventBus.on("popupMenu.getProviders."+r,s,function(l){l.providers.push(c)})},ni.prototype.isEmpty=function(r,s){if(!r)throw new Error("element parameter is missing");if(!s)throw new Error("providerId parameter is missing");var c=this._getProviders(s);if(!c)return!0;var l=this._getEntries(r,c),d=this._getHeaderEntries(r,c),h=Xs(l)>0,f=d&&Xs(d)>0;return!h&&!f},ni.prototype.open=function(r,s,c){var l=this._getProviders(s);if(!r)throw new Error("Element is missing");if(!l||!l.length)throw new Error("No registered providers for: "+s);if(!c)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var d=this._current={className:s,element:r,position:c},h=this._getEntries(r,l),f=this._getHeaderEntries(r,l);d.entries=oe({},h,f),d.container=this._createContainer(),Xs(f)&&d.container.appendChild(this._createEntries(f,"djs-popup-header")),Xs(h)&&d.container.appendChild(this._createEntries(h,"djs-popup-body"));var g=this._canvas.getContainer();this._attachContainer(d.container,g,c.cursor),this._bindAutoClose()},ni.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindAutoClose(),As(this._current.container),this._current.container=null)},ni.prototype.isOpen=function(){return!!this._current.container},ni.prototype.trigger=function(r){r.preventDefault();var s=jr(r.delegateTarget||r.target,Ex),c=this._getEntry(s);if(c.action)return c.action.call(null,r,c)},ni.prototype._getProviders=function(r){var s=this._eventBus.createEvent({type:"popupMenu.getProviders."+r,providers:[]});return this._eventBus.fire(s),s.providers},ni.prototype._getEntries=function(r,s){var c={};return ne(s,function(l){if(l.getPopupMenuEntries){var d=l.getPopupMenuEntries(r);di(d)?c=d(c):ne(d,function(h,f){c[f]=h})}else ne(l.getEntries(r),function(h){var f=h.id;if(!f)throw new Error("every entry must have the id property set");c[f]=Zt(h,["id"])})}),c},ni.prototype._getHeaderEntries=function(r,s){var c={};return ne(s,function(l){if(l.getPopupMenuHeaderEntries){var d=l.getPopupMenuHeaderEntries(r);di(d)?c=d(c):ne(d,function(h,f){c[f]=h})}else{if(!l.getHeaderEntries)return;ne(l.getHeaderEntries(r),function(h){var f=h.id;if(!f)throw new Error("every entry must have the id property set");c[f]=Zt(h,["id"])})}}),c},ni.prototype._getEntry=function(r){var s=this._current.entries[r];if(!s)throw new Error("entry not found");return s},ni.prototype._emit=function(r){this._eventBus.fire("popupMenu."+r)},ni.prototype._createContainer=function(){var r=ke('<div class="djs-popup">'),s=this._current.position,c=this._current.className;return oe(r.style,{position:"absolute",left:s.x+"px",top:s.y+"px",visibility:"hidden"}),Yi(r).add(c),r},ni.prototype._attachContainer=function(r,s,c){var l=this;vt_bind(r,".entry","click",function(d){l.trigger(d)}),this._updateScale(r),s.appendChild(r),c&&this._assureIsInbounds(r,c)},ni.prototype._updateScale=function(r){var s,c,f,g,l=this._canvas.zoom(),d=this._config.scale,h=l;!0!==d&&(!1===d?(s=1,c=1):(s=d.min,c=d.max),Ai(s)&&l<s&&(h=s),Ai(c)&&l>c&&(h=c)),g="scale("+h+")",(f=r).style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(v){f.style[v+"transform"]=g})},ni.prototype._assureIsInbounds=function(r,s){var c,l,d=this._canvas._container.getBoundingClientRect(),f=r.offsetTop,g=r.scrollWidth,v=r.scrollHeight,b={},w=s.x-d.left,C=s.y-d.top;r.offsetLeft+g>d.width&&(b.x=!0),f+v>d.height&&(b.y=!0),b.x&&b.y?(c=w-g+"px",l=C-v+"px"):b.x?(c=w-g+"px",l=C+"px"):b.y&&C<v?(c=w+"px",l="10px"):b.y&&(c=w+"px",l=C-v+"px"),oe(r.style,{left:c,top:l},{visibility:"visible","z-index":1e3})},ni.prototype._createEntries=function(r,s){var c=ke("<div>"),l=this;return Yi(c).add(s),ne(r,function(d,h){var f=l._createEntry(d,h);c.appendChild(f)}),c},ni.prototype._createEntry=function(r,s){var c=ke("<div>"),l=Yi(c);if(l.add("entry"),r.className&&r.className.split(" ").forEach(function(h){l.add(h)}),jr(c,Ex,s),r.label){var d=ke("<span>");d.textContent=r.label,c.appendChild(d)}return r.imageUrl&&c.appendChild(ke('<img src="'+r.imageUrl+'" />')),!0===r.active&&l.add("active"),!0===r.disabled&&l.add("disabled"),r.title&&(c.title=r.title),c},ni.prototype._bindAutoClose=function(){this._eventBus.once(kb,this.close,this)},ni.prototype._unbindAutoClose=function(){this._eventBus.off(kb,this.close,this)};var Pb={__init__:["popupMenu"],popupMenu:["type",ni]};function wo(){}wo.prototype.get=function(){return this._data},wo.prototype.set=function(r){this._data=r},wo.prototype.clear=function(){var r=this._data;return delete this._data,r},wo.prototype.isEmpty=function(){return!this._data};var Dh={clipboard:["type",wo]};function bf(r){var s=this;function c(l){s._lastMoveEvent=l}this._lastMoveEvent=null,r.on("canvas.init",function(l){(s._svg=l.svg).addEventListener("mousemove",c)}),r.on("canvas.destroy",function(){s._lastMouseEvent=null,s._svg.removeEventListener("mousemove",c)})}bf.$inject=["eventBus"],bf.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||((c=document.createEvent("MouseEvent")).initMouseEvent&&c.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c);var c};var id={__init__:["mouse"],mouse:["type",bf]};function ps(r,s,c,l,d,h,f,g){this._canvas=r,this._create=s,this._clipboard=c,this._elementFactory=l,this._eventBus=d,this._modeling=h,this._mouse=f,this._rules=g,d.on("copyPaste.copyElement",function(v){var b=v.descriptor,w=v.element,C=v.elements;b.priority=1,b.id=w.id,tn(C,function(M){return M===w.parent})&&(b.parent=w.parent.id),!!w.host&&(b.priority=2,b.host=w.host.id),sy(w)&&(b.priority=3,b.source=w.source.id,b.target=w.target.id,b.waypoints=Qn(w.waypoints,function(T){return(T=wx(T)).original&&(T.original=wx(T.original)),T})),ay(w)&&(b.priority=4,b.labelTarget=w.labelTarget.id),ne(["x","y","width","height"],function(M){Re(w[M])&&(b[M]=w[M])}),b.hidden=w.hidden,b.collapsed=w.collapsed}),d.on("copyPaste.pasteElements",function(v){oe(v.hints,{createElementsBehavior:!1})})}function sy(r){return!!r.waypoints}function ay(r){return!!r.labelTarget}function wx(r){return oe({},r)}ps.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],ps.prototype.copy=function(r){var s,c;return bt(r)||(r=r?[r]:[]),c=!1===(s=this._eventBus.fire("copyPaste.canCopyElements",{elements:r}))?{}:this.createTree(bt(s)?s:r),this._clipboard.set(c),this._eventBus.fire("copyPaste.elementsCopied",{elements:r,tree:c}),c},ps.prototype.paste=function(r){var s=this._clipboard.get();if(!this._clipboard.isEmpty()){var c=r&&r.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:c});var l=this._createElements(s);if(r&&r.element&&r.point)return this._paste(l,r.element,r.point,c);this._create.start(this._mouse.getLastMoveEvent(),l,{hints:c||{}})}},ps.prototype._paste=function(r,s,c,l){ne(r,function(h){Re(h.x)||(h.x=0),Re(h.y)||(h.y=0)});var d=pi(r);return ne(r,function(h){sy(h)&&(h.waypoints=Qn(h.waypoints,function(f){return{x:f.x-d.x-d.width/2,y:f.y-d.y-d.height/2}})),oe(h,{x:h.x-d.x-d.width/2,y:h.y-d.y-d.height/2})}),this._modeling.createElements(r,c,s,oe({},l))},ps.prototype._createElements=function(r){var s=this,c=this._eventBus,l={},d=[];return ne(r,function(h,f){ne(h=Be(h,"priority"),function(g){var v,b=oe({},Zt(g,["priority"]));return l[g.parent]?b.parent=l[g.parent]:delete b.parent,c.fire("copyPaste.pasteElement",{cache:l,descriptor:b}),sy(b)?(b.source=l[g.source],b.target=l[g.target],v=l[g.id]=s.createConnection(b),void d.push(v)):ay(b)?(b.labelTarget=l[b.labelTarget],v=l[g.id]=s.createLabel(b),void d.push(v)):(b.host&&(b.host=l[b.host]),v=l[g.id]=s.createShape(b),void d.push(v))})}),d},ps.prototype.createConnection=function(r){return this._elementFactory.createConnection(Zt(r,["id"]))},ps.prototype.createLabel=function(r){return this._elementFactory.createLabel(Zt(r,["id"]))},ps.prototype.createShape=function(r){return this._elementFactory.createShape(Zt(r,["id"]))},ps.prototype.hasRelations=function(r,s){var c,l;return!(sy(r)&&(c=tn(s,Br({id:r.source.id})),l=tn(s,Br({id:r.target.id})),!c||!l)||ay(r)&&!tn(s,Br({id:r.labelTarget.id})))},ps.prototype.createTree=function(r){var s=this._rules,c=this,l={},d=[];function h(f,g){var b,w,C,v=tn(d,function(b){return f===b.element});v?v.depth<g&&(b=v,w=d,C=w.indexOf(b),-1!==C&&w.splice(C,1),d=w).push({element:v.element,depth:g}):d.push({element:f,depth:g})}return Rs(_n(r),function(f,g,v){if(!ay(f))return ne(f.labels,function(b){h(b,v)}),ne([f.attachers,f.incoming,f.outgoing],function(b){b&&b.length&&ne(b,function(w){ne(w.labels,function(C){h(C,v)}),h(w,v)})}),h(f,v),f.children}),r=Qn(d,function(f){return f.element}),d=Be(d=Qn(d,function(f){return f.descriptor={},c._eventBus.fire("copyPaste.copyElement",{descriptor:f.descriptor,element:f.element,elements:r}),f}),function(f){return f.descriptor.priority}),r=Qn(d,function(f){return f.element}),ne(d,function(f){var g=f.depth;c.hasRelations(f.element,r)&&s.allowed("element.copy",{element:f.element,elements:r})?(l[g]||(l[g]=[]),l[g].push(f.descriptor)):function(r,s){var c=s.indexOf(r);-1===c||s.splice(c,1)}(f.element,r)}),l};var cy={__depends__:[Dh,_f,id,za],__init__:["copyPaste"],copyPaste:["type",ps]};function rd(r,s,c){bt(c)||(c=[c]),ne(c,function(l){Ss(r[l])||(s[l]=r[l])})}function xx(r,s,c){var l;s.on("copyPaste.copyElement",750,function(d){var h=d.descriptor,f=d.element,g=h.oldBusinessObject=Se(f);if(h.type=f.type,rd(g,h,"name"),h.di={},rd(g.di,h.di,["fill","stroke","background-color","border-color","color"]),rd(g.di,h,"isExpanded"),Cx(h))return h;g.default&&(h.default=g.default.id)}),s.on("moddleCopy.canCopyProperty",function(d){var h,g=d.property;if("processRef"===d.propertyName&&V(d.parent,"bpmn:Participant")&&V(g,"bpmn:Process"))return h=r.create("bpmn:Process"),c.copyElement(g,h)}),s.on("copyPaste.pasteElements",function(){l={}}),s.on("copyPaste.pasteElement",function(d){var h,f,g,C,M,T,v=d.cache,b=d.descriptor,w=b.oldBusinessObject;Cx(b)?b.businessObject=Se(v[b.labelTarget]):(h=r.create(w.$type),b.businessObject=c.copyElement(w,h),M=v,T=Se(C=b),C.default&&(l[C.default]={element:T,property:"default"}),C.host&&(Se(C).attachedToRef=Se(M[C.host])),l=Zt(l,Xe(l,function(R,F,$){return $===C.id&&(F.element[F.property]=T,R.push(C.id)),R},[])),rd(b,h,["isExpanded","name"]),f=b,bt(g="oldBusinessObject")||(g=[g]),ne(g,function(C){f[C]&&delete f[C]}))})}function Cx(r){return!!r.labelTarget}xx.$inject=["bpmnFactory","eventBus","moddleCopy"];var Ib=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing"];function Ah(r,s,c){this._bpmnFactory=s,this._eventBus=r,this._moddle=c,r.on("moddleCopy.canCopyProperties",function(l){var d=l.propertyNames;if(d&&d.length)return Be(d,function(h){return"extensionElements"===h})}),r.on("moddleCopy.canCopyProperty",function(l){var d=l.parent,h=Xn(d)&&d.$descriptor,f=l.propertyName;return(!f||-1===Ib.indexOf(f))&&!(f&&h&&!tn(h.properties,Br({name:f})))&&void 0}),r.on("moddleCopy.canSetCopiedProperty",function(l){var d,f=l.property;if((d=f)&&"function"==typeof d.$instanceOf&&d.$instanceOf("bpmn:ExtensionElements")&&(!f.values||!f.values.length))return!1})}function ly(r,s){return Xe(r.properties,function(c,l){return s&&l.default?c:c.concat(l.name)},[])}Ah.$inject=["eventBus","bpmnFactory","moddle"],Ah.prototype.copyElement=function(r,s,c){var l=this;c&&!bt(c)&&(c=[c]),c=c||ly(r.$descriptor);var d=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:c,sourceElement:r,targetElement:s});return!1===d||(bt(d)&&(c=d),ne(c,function(h){var f;Jo(r,h)&&(f=r.get(h));var g=l.copyProperty(f,s,h);!1!==l._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:s,property:g,propertyName:h})&&Ai(g)&&s.set(h,g)})),s},Ah.prototype.copyProperty=function(r,s,c){var l=this,d=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:s,property:r,propertyName:c});if(!1!==d){if(d)return Xn(d)&&d.$type&&!d.$parent&&(d.$parent=s),d;var h=this._moddle.getPropertyDescriptor(s,c);if(!h.isReference)return h.isId?this._copyId(r,s):bt(r)?Xe(r,function(f,g){return(d=l.copyProperty(g,s,c))?(d.$parent=s,f.concat(d)):f},[]):Xn(r)&&r.$type?this._moddle.getElementDescriptor(r).isGeneric?void 0:((d=l._bpmnFactory.create(r.$type)).$parent=s,d=l.copyElement(r,d)):r}},Ah.prototype._copyId=function(r,s){return this._moddle.ids.assigned(r)?void 0:(this._moddle.ids.claim(r,s),r)};var Ob={__depends__:[cy],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",xx],moddleCopy:["type",Ah]},Nb=Math.round;function wf(r){this._modeling=r}wf.$inject=["modeling"],wf.prototype.replaceElement=function(r,s,c){if(r.waypoints)return null;var l=this._modeling,d=s.width||r.width,h=s.height||r.height,g=s.y||r.y,v=Nb((s.x||r.x)+d/2),b=Nb(g+h/2);return l.replaceShape(r,oe({},s,{x:v,y:b,width:d,height:h}),c)};var xf={__init__:["replace"],replace:["type",wf]},Fb=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function Cf(r,s,c,l,d,h,f){this.replaceElement=function(g,v,b){b=b||{};var j,K,ce,w=v.type,C=g.businessObject;if(Sf(C)&&"bpmn:SubProcess"===w&&(K=v,(ce=(j=g)&&Jo(j,"collapsed")?j.collapsed:!qe(j))!==(K&&(Jo(K,"collapsed")||Jo(K,"isExpanded"))?Jo(K,"collapsed")?K.collapsed:!K.isExpanded:ce)&&(j.collapsed=ce,1)))return l.toggleCollapse(g),g;var M,T=r.create(w),R={type:w,businessObject:T},F=ly(C.$descriptor),$=ly(T.$descriptor,!0),B=(M=$,F.filter(function(j){return-1!==M.indexOf(j)}));oe(T,Pt(v,Fb));var z=gt(B,function(j){return"eventDefinitions"===j?yn(g,v.eventDefinitionType):"loopCharacteristics"===j?!Wn(T):!Jo(T,j)&&("processRef"!==j||!1!==v.isExpanded)&&"triggeredByEvent"!==j});return T=c.copyElement(C,T,z),v.eventDefinitionType&&(yn(T,v.eventDefinitionType)||(R.eventDefinitionType=v.eventDefinitionType,R.eventDefinitionAttrs=v.eventDefinitionAttrs)),V(C,"bpmn:Activity")&&(Sf(C)?R.isExpanded=qe(C):v&&Jo(v,"isExpanded")&&(R.isExpanded=v.isExpanded),qe(C)&&!V(C,"bpmn:Task")&&R.isExpanded&&(R.width=g.width,R.height=g.height)),Sf(C)&&!Sf(T)&&(b.moveChildren=!1),V(C,"bpmn:Participant")&&(!0===v.isExpanded?T.processRef=r.create("bpmn:Process"):b.moveChildren=!1,R.width=g.width,R.height=s._getDefaultSize(T).height),h.allowed("shape.resize",{shape:T})||(R.height=s._getDefaultSize(T).height,R.width=s._getDefaultSize(T).width),T.name=C.name,un(C,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&un(T,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(T.default=C.default),v.host&&!V(C,"bpmn:BoundaryEvent")&&V(T,"bpmn:BoundaryEvent")&&(R.host=v.host),"bpmn:DataStoreReference"!==R.type&&"bpmn:DataObjectReference"!==R.type||(R.x=g.x+(g.width-R.width)/2),R.di={},function(j,K,ce){bt(ce)||(ce=[ce]),ne(ce,function(J){Ss(j[J])||(K[J]=j[J])})}(C.di,R.di,["fill","stroke","background-color","border-color","color"]),R=d.replaceElement(g,R,b),!1!==b.select&&f.select(R),R}}function Sf(r){return V(r,"bpmn:SubProcess")}function yn(r,s){var c=Se(r);return s&&c.get("eventDefinitions").some(function(l){return V(l,s)})}Cf.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];var Lb={__depends__:[Ob,xf,bo],bpmnReplace:["type",Cf]};function Bb(r){return function(s){var c=s.target,l=Se(r),d=l.eventDefinitions&&l.eventDefinitions[0],h=l.$type===c.type,f=(d&&d.$type)===c.eventDefinitionType,g=l.triggeredByEvent===c.triggeredByEvent,v=void 0===c.isExpanded||c.isExpanded===qe(l);return!(h&&f&&g&&v)}}var uy=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],jb=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],Sx=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Dx=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Ax=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],Tx=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],Mx=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],HD=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],Rx=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],Th=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],uo=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],dy=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Vb=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Hb=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],Kr=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(r){var s="Empty Pool";return r.children&&r.children.length&&(s+=" (removes content)"),s},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function Yr(r,s,c,l,d,h,f){this._bpmnFactory=r,this._popupMenu=s,this._modeling=c,this._moddle=l,this._bpmnReplace=d,this._rules=h,this._translate=f,this.register()}Yr.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],Yr.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},Yr.prototype.getEntries=function(r){var s,c=r.businessObject;if(!this._rules.allowed("shape.replace",{element:r}))return[];var l=Bb(r);return V(c,"bpmn:DataObjectReference")?this._createEntries(r,Th):V(c,"bpmn:DataStoreReference")?this._createEntries(r,uo):V(c,"bpmn:StartEvent")&&!V(c.$parent,"bpmn:SubProcess")?(s=gt(uy,l),this._createEntries(r,s)):V(c,"bpmn:Participant")?(s=gt(Kr,function(d){return qe(c)!==d.target.isExpanded}),this._createEntries(r,s)):V(c,"bpmn:StartEvent")&&Wn(c.$parent)?(s=gt(Vb,function(d){var h=!1!==d.target.isInterrupting,f=Se(r).isInterrupting===h;return l(d)||!l(d)&&!f}),this._createEntries(r,s)):V(c,"bpmn:StartEvent")&&!Wn(c.$parent)&&V(c.$parent,"bpmn:SubProcess")?(s=gt(jb,l),this._createEntries(r,s)):V(c,"bpmn:EndEvent")?(s=gt(Dx,function(d){return!("bpmn:CancelEventDefinition"==d.target.eventDefinitionType&&!V(c.$parent,"bpmn:Transaction"))&&l(d)}),this._createEntries(r,s)):V(c,"bpmn:BoundaryEvent")?(s=gt(dy,function(d){var h=d.target;if("bpmn:CancelEventDefinition"==h.eventDefinitionType&&!V(c.attachedToRef,"bpmn:Transaction"))return!1;var g=c.cancelActivity==(!1!==h.cancelActivity);return l(d)||!l(d)&&!g}),this._createEntries(r,s)):V(c,"bpmn:IntermediateCatchEvent")||V(c,"bpmn:IntermediateThrowEvent")?(s=gt(Sx,l),this._createEntries(r,s)):V(c,"bpmn:Gateway")?(s=gt(Ax,l),this._createEntries(r,s)):V(c,"bpmn:Transaction")?(s=gt(Mx,l),this._createEntries(r,s)):Wn(c)&&qe(c)?(s=gt(HD,l),this._createEntries(r,s)):V(c,"bpmn:SubProcess")&&qe(c)?(s=gt(Tx,l),this._createEntries(r,s)):V(c,"bpmn:AdHocSubProcess")&&!qe(c)?(s=gt(Rx,function(d){var h=d.target,f="bpmn:SubProcess"===h.type,g=!0===h.isExpanded;return Bb(r)&&(!f||g)}),this._createEntries(r,s)):V(c,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(r,Hb):V(c,"bpmn:FlowNode")?(s=gt(Rx,l),V(c,"bpmn:SubProcess")&&!qe(c)&&(s=gt(s,function(d){return"Sub Process (collapsed)"!==d.label})),this._createEntries(r,s)):[]},Yr.prototype.getHeaderEntries=function(r){var s=[];return V(r,"bpmn:Activity")&&!Wn(r)&&(s=s.concat(this._getLoopEntries(r))),V(r,"bpmn:DataObjectReference")&&(s=s.concat(this._getDataObjectIsCollection(r))),V(r,"bpmn:Participant")&&(s=s.concat(this._getParticipantMultiplicity(r))),!V(r,"bpmn:SubProcess")||V(r,"bpmn:Transaction")||Wn(r)||s.push(this._getAdHocEntry(r)),s},Yr.prototype._createEntries=function(r,s){var c=[],l=this;return ne(s,function(d){var h=l._createMenuEntry(d,r);c.push(h)}),c},Yr.prototype._createSequenceFlowEntries=function(r,s){var c=Se(r),l=[],d=this._modeling,h=this._moddle,f=this;return ne(s,function(g){switch(g.actionName){case"replace-with-default-flow":c.sourceRef.default!==c&&(V(c.sourceRef,"bpmn:ExclusiveGateway")||V(c.sourceRef,"bpmn:InclusiveGateway")||V(c.sourceRef,"bpmn:ComplexGateway")||V(c.sourceRef,"bpmn:Activity"))&&l.push(f._createMenuEntry(g,r,function(){d.updateProperties(r.source,{default:c})}));break;case"replace-with-conditional-flow":!c.conditionExpression&&V(c.sourceRef,"bpmn:Activity")&&l.push(f._createMenuEntry(g,r,function(){var v=h.create("bpmn:FormalExpression",{body:""});d.updateProperties(r,{conditionExpression:v})}));break;default:if(V(c.sourceRef,"bpmn:Activity")&&c.conditionExpression)return l.push(f._createMenuEntry(g,r,function(){d.updateProperties(r,{conditionExpression:void 0})}));if((V(c.sourceRef,"bpmn:ExclusiveGateway")||V(c.sourceRef,"bpmn:InclusiveGateway")||V(c.sourceRef,"bpmn:ComplexGateway")||V(c.sourceRef,"bpmn:Activity"))&&c.sourceRef.default===c)return l.push(f._createMenuEntry(g,r,function(){d.updateProperties(r.source,{default:void 0})}))}}),l},Yr.prototype._createMenuEntry=function(r,s,c){var l=this._translate,d=this._bpmnReplace.replaceElement,h=r.label;return h&&"function"==typeof h&&(h=h(s)),c=c||function(){return d(s,r.target)},{label:l(h),className:r.className,id:r.actionName,action:c}},Yr.prototype._getLoopEntries=function(r){var s=this,c=this._translate;function l(v,b){var w;b.active?w=void 0:(w=s._moddle.create(b.options.loopCharacteristics),b.options.isSequential&&(w.isSequential=b.options.isSequential)),s._modeling.updateProperties(r,{loopCharacteristics:w})}var d,h,f,g=Se(r).loopCharacteristics;return g&&(d=g.isSequential,h=void 0===g.isSequential,f=void 0!==g.isSequential&&!g.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:c("Parallel Multi Instance"),active:f,action:l,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:c("Sequential Multi Instance"),active:d,action:l,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:c("Loop"),active:h,action:l,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},Yr.prototype._getDataObjectIsCollection=function(r){var s=this,l=r.businessObject.dataObjectRef,d=l.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:(0,this._translate)("Collection"),active:d,action:function(h,f){s._modeling.updateModdleProperties(r,l,{isCollection:!f.active})}}]},Yr.prototype._getParticipantMultiplicity=function(r){var s=this,c=this._bpmnFactory,d=r.businessObject.participantMultiplicity;return[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:(0,this._translate)("Participant Multiplicity"),active:!!d,action:function(h,f){var g;f.active||(g=c.create("bpmn:ParticipantMultiplicity")),s._modeling.updateProperties(r,{participantMultiplicity:g})}}]},Yr.prototype._getAdHocEntry=function(r){var s=this._translate,c=V(Se(r),"bpmn:AdHocSubProcess"),l=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:s("Ad-hoc"),active:c,action:function(d,h){return l(r,c?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};var hy={__depends__:[Pb,Lb],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Yr]},Df=Math.max,Af=Math.min;function py(r,s){return{top:r.top-s.top,right:r.right-s.right,bottom:r.bottom-s.bottom,left:r.left-s.left}}function Tf(r,s,c){var l=s[r],d=c.min&&c.min[r],h=c.max&&c.max[r];return Re(d)&&(l=(/top|left/.test(r)?Af:Df)(l,d)),Re(h)&&(l=(/top|left/.test(r)?Df:Af)(l,h)),l}function od(r,s){return void 0!==r?r:20}function kx(r){return!r.waypoints&&"label"!==r.type}function fy(r,s){var c,l,d,h,f,g,v;if((c=void 0===r.length?gt(r.children,kx):r).length)return l=pi(c),"object"==typeof(d=s)?(h=od(d.left),f=od(d.right),g=od(d.top),v=od(d.bottom)):h=f=g=v=od(d),{x:l.x-h,y:l.y-g,width:l.width+h+f,height:l.height+g+v}}var Mf=Math.abs,Px=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];function Mh(r,s){return s=s||[],r.children.filter(function(c){V(c,"bpmn:Lane")&&(Mh(c,s),s.push(c))}),s}function Ka(r){return r.children.filter(function(s){return V(s,"bpmn:Lane")})}function fs(r){return Gg(r,Px)||r}function $b(r,s,c,l,d,h,f,g,v,b,w,C){r=r||{},l.registerProvider(this),this._contextPad=l,this._modeling=d,this._elementFactory=h,this._connect=f,this._create=g,this._popupMenu=v,this._canvas=b,this._rules=w,this._translate=C,!1!==r.autoPlace&&(this._autoPlace=s.get("autoPlace",!1)),c.on("create.end",250,function(M){var T=M.context.shape;if(Gn(M)&&l.isOpen(T)){var R=l.getEntries(T);R.replace&&R.replace.action.click(M,T)}})}function my(r,s,c){var l=r.$instanceOf(s),d=!1;return ne(r.eventDefinitions||[],function(h){h.$type===c&&(d=!0)}),l&&d}$b.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],$b.prototype.getContextPadEntries=function(r){var s=this._contextPad,c=this._modeling,l=this._elementFactory,d=this._connect,h=this._create,f=this._popupMenu,g=this._canvas,v=this._rules,b=this._autoPlace,w=this._translate,C={};if("label"===r.type)return C;var M=r.businessObject;function T(z,j){d.start(z,j)}function R(z,j,K,ce){function J(be,pe){var Ee=l.createShape(oe({type:z},ce));h.start(be,Ee,{source:pe})}return"string"!=typeof K&&(ce=K,K=w("Append {type}",{type:z.replace(/^bpmn:/,"")})),{group:"model",className:j,title:K,action:{dragstart:J,click:b?function(be,pe){var Ee=l.createShape(oe({type:z},ce));b.append(pe,Ee)}:J}}}function F(z){return function(j,K){c.splitLane(K,z),s.open(K,!0)}}if(un(M,["bpmn:Lane","bpmn:Participant"])&&qe(M)){var $=Ka(r);oe(C,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:w("Add Lane above"),action:{click:function(z,j){c.addLane(j,"top")}}}}),$.length<2&&(r.height>=120&&oe(C,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:w("Divide into two Lanes"),action:{click:F(2)}}}),r.height>=180&&oe(C,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:w("Divide into three Lanes"),action:{click:F(3)}}})),oe(C,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:w("Add Lane below"),action:{click:function(z,j){c.addLane(j,"bottom")}}}})}V(M,"bpmn:FlowNode")&&(V(M,"bpmn:EventBasedGateway")?oe(C,{"append.receive-task":R("bpmn:ReceiveTask","bpmn-icon-receive-task",w("Append ReceiveTask")),"append.message-intermediate-event":R("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",w("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":R("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",w("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":R("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",w("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":R("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",w("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):my(M,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?oe(C,{"append.compensation-activity":R("bpmn:Task","bpmn-icon-task",w("Append compensation activity"),{isForCompensation:!0})}):V(M,"bpmn:EndEvent")||M.isForCompensation||my(M,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Wn(M)||oe(C,{"append.end-event":R("bpmn:EndEvent","bpmn-icon-end-event-none",w("Append EndEvent")),"append.gateway":R("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",w("Append Gateway")),"append.append-task":R("bpmn:Task","bpmn-icon-task",w("Append Task")),"append.intermediate-event":R("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",w("Append Intermediate/Boundary Event"))})),f.isEmpty(r,"bpmn-replace")||oe(C,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:w("Change type"),action:{click:function(z,j){var ce,J,be,pe,Ee,K=oe((ce=j,J=g.getContainer(),be=s.getPad(ce).html,pe=J.getBoundingClientRect(),{x:(Ee=be.getBoundingClientRect()).left-pe.left,y:Ee.top-pe.top+Ee.height+5}),{cursor:{x:z.x,y:z.y}});f.open(j,"bpmn-replace",K)}}}}),un(M,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&oe(C,{"append.text-annotation":R("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:w("Connect using "+(M.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:T,dragstart:T}}}),V(M,"bpmn:TextAnnotation")&&oe(C,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:w("Connect using Association"),action:{click:T,dragstart:T}}}),un(M,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&oe(C,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:w("Connect using DataInputAssociation"),action:{click:T,dragstart:T}}}),V(M,"bpmn:Group")&&oe(C,{"append.text-annotation":R("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var B=v.allowed("elements.delete",{elements:[r]});return bt(B)&&(B=B[0]===r),B&&oe(C,{delete:{group:"edit",className:"bpmn-icon-trash",title:w("Remove"),action:{click:function(z){c.removeElements([r])}}}}),C};var Rf={__depends__:[Kc,vx,bo,qc,_f,hy],__init__:["contextPadProvider"],contextPadProvider:["type",$b]},Ox={horizontal:["x","width"],vertical:["y","height"]};function Ya(r){this._modeling=r,this._filters=[],this.registerFilter(function(s,c,l){var d,h=0,f=0;return ne(s,function(g){g.waypoints||g.labelTarget||(h+=g[l],f+=1)}),d=Math.round(h/f),gt(s,function(g){return g[l]<d+50})})}Ya.$inject=["modeling"],Ya.prototype.registerFilter=function(r){if("function"!=typeof r)throw new Error("the filter has to be a function");this._filters.push(r)},Ya.prototype.trigger=function(r,s){var c,l,d=this._modeling;if(!(r.length<3||(this._setOrientation(s),l=this._filterElements(r),(c=this._createGroups(l)).length<=2)))return d.distributeElements(c,this._axis,this._dimension),c},Ya.prototype._filterElements=function(r){var s=this._filters,c=this._axis,l=this._dimension,d=[].concat(r);return s.length?(ne(s,function(h){d=h(d,c,l)}),d):r},Ya.prototype._createGroups=function(r){var s=[],c=this,l=this._axis,d=this._dimension;if(!l)throw new Error('must have a defined "axis" and "dimension"');return ne(Be(r,l),function(h,f){var v=c._findRange(h,l,d),b=s[s.length-1];b&&c._hasIntersection(b.range,v)?s[s.length-1].elements.push(h):s.push({range:v,elements:[h]})}),s},Ya.prototype._setOrientation=function(r){var s=Ox[r];this._axis=s[0],this._dimension=s[1]},Ya.prototype._hasIntersection=function(r,s){return Math.max(r.min,r.max)>=Math.min(s.min,s.max)&&Math.min(r.min,r.max)<=Math.max(s.min,s.max)},Ya.prototype._findRange=function(r){var s=r[this._axis];return{min:s+5,max:s+r[this._dimension]-5}};var Ls={__init__:["distributeElements"],distributeElements:["type",Ya]};function zb(r){r.registerFilter(function(s){return gt(s,function(c){var l=un(c,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:Participant","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(c.labelTarget||l)})})}zb.$inject=["distributeElements"];var Nx={__depends__:[Ls],__init__:["bpmnDistributeElements"],bpmnDistributeElements:["type",zb]},Ub="is not a registered action";function ms(r,s){this._actions={};var c=this;r.on("diagram.init",function(){c._registerDefaultActions(s),r.fire("editorActions.init",{editorActions:c})})}function gy(r,s){return new Error(r+" "+s)}ms.$inject=["eventBus","injector"],ms.prototype._registerDefaultActions=function(r){var s=r.get("commandStack",!1),c=r.get("modeling",!1),l=r.get("selection",!1),d=r.get("zoomScroll",!1),h=r.get("copyPaste",!1),f=r.get("canvas",!1),g=r.get("rules",!1),v=r.get("keyboardMove",!1),b=r.get("keyboardMoveSelection",!1);s&&(this.register("undo",function(){s.undo()}),this.register("redo",function(){s.redo()})),h&&l&&this.register("copy",function(){var w=l.get();h.copy(w)}),h&&this.register("paste",function(){h.paste()}),d&&this.register("stepZoom",function(w){d.stepZoom(w.value)}),f&&this.register("zoom",function(w){f.zoom(w.value)}),c&&l&&g&&this.register("removeSelection",function(){var w=l.get();if(w.length){var C,M=g.allowed("elements.delete",{elements:w});!1!==M&&(C=bt(M)?M:w).length&&c.removeElements(C.slice())}}),v&&this.register("moveCanvas",function(w){v.moveCanvas(w)}),b&&this.register("moveSelection",function(w){b.moveSelection(w.direction,w.accelerated)})},ms.prototype.trigger=function(r,s){if(!this._actions[r])throw gy(r,Ub);return this._actions[r](s)},ms.prototype.register=function(r,s){var c=this;if("string"==typeof r)return this._registerAction(r,s);ne(r,function(l,d){c._registerAction(d,l)})},ms.prototype._registerAction=function(r,s){if(this.isRegistered(r))throw gy(r,"is already registered");this._actions[r]=s},ms.prototype.unregister=function(r){if(!this.isRegistered(r))throw gy(r,Ub);this._actions[r]=void 0},ms.prototype.getActions=function(){return Object.keys(this._actions)},ms.prototype.isRegistered=function(r){return!!this._actions[r]};var kf={__init__:["editorActions"],editorActions:["type",ms]};function Rh(r){r.invoke(ms,this)}Oe(Rh,ms),Rh.$inject=["injector"],Rh.prototype._registerDefaultActions=function(r){ms.prototype._registerDefaultActions.call(this,r);var s=r.get("canvas",!1),c=r.get("elementRegistry",!1),l=r.get("selection",!1),d=r.get("spaceTool",!1),h=r.get("lassoTool",!1),f=r.get("handTool",!1),g=r.get("globalConnect",!1),v=r.get("distributeElements",!1),b=r.get("alignElements",!1),w=r.get("directEditing",!1),C=r.get("searchPad",!1),M=r.get("modeling",!1);s&&c&&l&&this._registerAction("selectElements",function(){var T=s.getRootElement(),R=c.filter(function(F){return F!==T});return l.select(R),R}),d&&this._registerAction("spaceTool",function(){d.toggle()}),h&&this._registerAction("lassoTool",function(){h.toggle()}),f&&this._registerAction("handTool",function(){f.toggle()}),g&&this._registerAction("globalConnectTool",function(){g.toggle()}),l&&v&&this._registerAction("distributeElements",function(T){var R=l.get();R.length&&v.trigger(R,T.type)}),l&&b&&this._registerAction("alignElements",function(T){var R=l.get(),F=[],$=T.type;R.length&&(F=gt(R,function(B){return!V(B,"bpmn:Lane")}),b.trigger(F,$))}),l&&M&&this._registerAction("setColor",function(T){var R=l.get();R.length&&M.setColor(R,T)}),l&&w&&this._registerAction("directEditing",function(){var T=l.get();T.length&&w.activate(T[0])}),C&&this._registerAction("find",function(){C.toggle()}),s&&M&&this._registerAction("moveToOrigin",function(){var T,R,F=s.getRootElement();T=pi(R=V(F,"bpmn:Collaboration")?c.filter(function($){return V($.parent,"bpmn:Collaboration")}):c.filter(function($){return $!==F&&!V($.parent,"bpmn:SubProcess")})),M.moveElements(R,{x:-T.x,y:-T.y},F)})};var Fx={__depends__:[kf],editorActions:["type",Rh]};function Wb(r){r.on(["create.init","shape.move.init"],function(s){var c=s.context;un(s.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(c.gridSnappingContext||(c.gridSnappingContext={}),c.gridSnappingContext.snapLocation="top-left")})}function Pf(r,s,c){return c||(c="round"),Math[c](r/s)*s}function Xa(r,s,c){var l=!c||!1!==c.active;this._eventBus=s;var d=this;s.on("diagram.init",800,function(){d.setActive(l)}),s.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,function(h){var f=h.originalEvent;if(!(!d.active||f&&Gr(f))){var g=h.context,v=g.gridSnappingContext;v||(v=g.gridSnappingContext={}),["x","y"].forEach(function(b){var T,R,F,B,z,j,K,w={},C=(R=b,F=r,B=(T=h).shape,j=(z=T.context.gridSnappingContext).snapLocation,(K=z.snapOffset)&&Re(K[R])||(K||(K=z.snapOffset={}),Re(K[R])||(K[R]=0),!B)||(F.get(B.id)||(If(R)?K[R]+=B[R]+B.width/2:K[R]+=B[R]+B.height/2),!j)||("x"===R?/left/.test(j)?K[R]-=B.width/2:/right/.test(j)&&(K[R]+=B.width/2):/top/.test(j)?K[R]-=B.height/2:/bottom/.test(j)&&(K[R]+=B.height/2)),K[R]);C&&(w.offset=C);var M=function(T,R){var F=T.context,$=F.createConstraints,B=F.resizeConstraints||{},z=F.gridSnappingContext,j=z.snapConstraints;if(j&&j[R])return j[R];j||(j=z.snapConstraints={}),j[R]||(j[R]={});var K=F.direction;$&&(If(R)?(j.x.min=$.left,j.x.max=$.right):(j.y.min=$.top,j.y.max=$.bottom));var ce=B.min,J=B.max;return ce&&(If(R)?qb(K)?j.x.max=ce.left:j.x.min=ce.right:Gb(K)?j.y.max=ce.top:j.y.min=ce.bottom),J&&(If(R)?qb(K)?j.x.min=J.left:j.x.max=J.right:Gb(K)?j.y.min=J.top:j.y.max=J.bottom),j[R]}(h,b);M&&oe(w,M),Fs(h,b)||d.snapEvent(h,b,w)})}})}function If(r){return"x"===r}function Gb(r){return-1!==r.indexOf("n")}function qb(r){return-1!==r.indexOf("w")}function gs(r,s){Ge.call(this,r),this._gridSnapping=s;var c=this;this.preExecute("shape.resize",function(l){var d=l.context,h=(d.hints||{}).autoResize;if(h){var f=d.shape,g=d.newBounds;d.newBounds=Lr(h)?c.snapComplex(g,h):c.snapSimple(f,g)}})}function Bs(r,s){r.on(["spaceTool.move","spaceTool.end"],2e3,function(c){var l,d=c.context;d.initialized&&("x"===d.axis?(l=s.snapValue(c.dx),c.x=c.x+l-c.dx,c.dx=l):(l=s.snapValue(c.dy),c.y=c.y+l-c.dy,c.dy=l))})}Wb.$inject=["eventBus"],Xa.prototype.snapEvent=function(r,s,c){li(r,s,this.snapValue(r[s],c))},Xa.prototype.getGridSpacing=function(){return 10},Xa.prototype.snapValue=function(r,s){var c,l,d=0;return s&&s.offset&&(d=s.offset),r=Pf(r+=d,10),s&&s.min&&Re(c=s.min)&&(c=Pf(c+d,10,"ceil"),r=Math.max(r,c)),s&&s.max&&Re(l=s.max)&&(l=Pf(l+d,10,"floor"),r=Math.min(r,l)),r-d},Xa.prototype.isActive=function(){return this.active},Xa.prototype.setActive=function(r){this.active=r,this._eventBus.fire("gridSnapping.toggle",{active:r})},Xa.prototype.toggleActive=function(){this.setActive(!this.active)},Xa.$inject=["elementRegistry","eventBus","config.gridSnapping"],gs.$inject=["eventBus","gridSnapping","modeling"],Oe(gs,Ge),gs.prototype.snapSimple=function(r,s){var c=this._gridSnapping;return s.width=c.snapValue(s.width,{min:s.width}),s.height=c.snapValue(s.height,{min:s.height}),s.x=r.x+r.width/2-s.width/2,s.y=r.y+r.height/2-s.height/2,s},gs.prototype.snapComplex=function(r,s){return/w|e/.test(s)&&(r=this.snapHorizontally(r,s)),/n|s/.test(s)&&(r=this.snapVertically(r,s)),r},gs.prototype.snapHorizontally=function(r,s){var c=this._gridSnapping,l=/w/.test(s),d=/e/.test(s),h={};return h.width=c.snapValue(r.width,{min:r.width}),d&&(l?(h.x=c.snapValue(r.x,{max:r.x}),h.width+=c.snapValue(r.x-h.x,{min:r.x-h.x})):r.x=r.x+r.width-h.width),oe(r,h),r},gs.prototype.snapVertically=function(r,s){var c=this._gridSnapping,l=/n/.test(s),d=/s/.test(s),h={};return h.height=c.snapValue(r.height,{min:r.height}),l&&(d?(h.y=c.snapValue(r.y,{max:r.y}),h.height+=c.snapValue(r.y-h.y,{min:r.y-h.y})):r.y=r.y+r.height-h.height),oe(r,h),r},Bs.$inject=["eventBus","gridSnapping"];var $D={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",gs],gridSnappingSpaceToolBehavior:["type",Bs]}],__init__:["gridSnapping"],gridSnapping:["type",Xa]};function Lx(r,s){r.on("autoPlace",2e3,function(c){var l=c.source,d=zt(l),h=c.shape,f=lx(l,h);return["x","y"].forEach(function(g){var v={};f[g]!==d[g]&&(f[g]>d[g]?v.min=f[g]:v.max=f[g],V(h,"bpmn:TextAnnotation")&&(v.offset="x"===g?-h.width/2:-h.height/2),f[g]=s.snapValue(f[g],v))}),f})}function yy(r,s,c){s.on(["create.start","shape.move.start"],1750,function(l){var d=l.context,h=d.shape,f=r.getRootElement();V(h,"bpmn:Participant")&&V(f,"bpmn:Process")&&f.children.length&&d.createConstraints&&(h.width=c.snapValue(h.width,{min:h.width}),h.height=c.snapValue(h.height,{min:h.height}))})}function vy(r,s,c){Ge.call(this,r),this._gridSnapping=s;var l=this;this.postExecuted(["connection.create","connection.layout"],3e3,function(d){var h=d.context,f=h.connection,g=h.hints||{},v=f.waypoints;g.connectionStart||g.connectionEnd||!1===g.createElementsBehavior||v.length>3&&c.updateWaypoints(f,l.snapMiddleSegments(v))})}function Ho(r,s,c){var l=ao(s,c),d={};return"h"===l&&(d.y=r.snapValue(s.y)),"v"===l&&(d.x=r.snapValue(s.x)),("x"in d||"y"in d)&&(s=oe({},s,d),c=oe({},c,d)),[s,c]}Lx.$inject=["eventBus","gridSnapping"],yy.$inject=["canvas","eventBus","gridSnapping"],vy.$inject=["eventBus","gridSnapping","modeling"],Oe(vy,Ge),vy.prototype.snapMiddleSegments=function(r){var s,c=this._gridSnapping;r=r.slice();for(var l=1;l<r.length-2;l++)s=Ho(c,r[l],r[l+1]),r[l]=s[0],r[l+1]=s[1];return r};var _y={__depends__:[$D,{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingCreateParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Lx],gridSnappingCreateParticipantBehavior:["type",yy],gridSnappingLayoutConnectionBehavior:["type",vy]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",Wb]};function iu(r,s){this._interactionEvents=s;var c=this;r.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(l){var d=l.element,h=l.gfx;return V(d,"bpmn:Lane")?c.createParticipantHit(d,h):V(d,"bpmn:Participant")?qe(d)?c.createParticipantHit(d,h):c.createDefaultHit(d,h):V(d,"bpmn:SubProcess")?qe(d)?c.createSubProcessHit(d,h):c.createDefaultHit(d,h):void 0})}iu.$inject=["eventBus","interactionEvents"],iu.prototype.createDefaultHit=function(r,s){return this._interactionEvents.removeHits(s),this._interactionEvents.createDefaultHit(r,s),!0},iu.prototype.createParticipantHit=function(r,s){return this._interactionEvents.removeHits(s),this._interactionEvents.createBoxHit(s,"click-stroke",{width:r.width,height:r.height}),this._interactionEvents.createBoxHit(s,"all",{width:30,height:r.height}),!0},iu.prototype.createSubProcessHit=function(r,s){return this._interactionEvents.removeHits(s),this._interactionEvents.createBoxHit(s,"click-stroke",{width:r.width,height:r.height}),this._interactionEvents.createBoxHit(s,"all",{width:r.width,height:30}),!0};var Bx={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",iu]};function kh(r){r.invoke(Va,this)}Oe(kh,Va),kh.$inject=["injector"],kh.prototype.registerBindings=function(r,s){function c(l,d){s.isRegistered(l)&&r.addListener(d)}Va.prototype.registerBindings.call(this,r,s),c("selectElements",function(l){var d=l.keyEvent;if(r.isKey(["a","A"],d)&&r.isCmd(d))return s.trigger("selectElements"),!0}),c("find",function(l){var d=l.keyEvent;if(r.isKey(["f","F"],d)&&r.isCmd(d))return s.trigger("find"),!0}),c("spaceTool",function(l){var d=l.keyEvent;if(!r.hasModifier(d))return r.isKey(["s","S"],d)?(s.trigger("spaceTool"),!0):void 0}),c("lassoTool",function(l){var d=l.keyEvent;if(!r.hasModifier(d))return r.isKey(["l","L"],d)?(s.trigger("lassoTool"),!0):void 0}),c("handTool",function(l){var d=l.keyEvent;if(!r.hasModifier(d))return r.isKey(["h","H"],d)?(s.trigger("handTool"),!0):void 0}),c("globalConnectTool",function(l){var d=l.keyEvent;if(!r.hasModifier(d))return r.isKey(["c","C"],d)?(s.trigger("globalConnectTool"),!0):void 0}),c("directEditing",function(l){var d=l.keyEvent;if(!r.hasModifier(d))return r.isKey(["e","E"],d)?(s.trigger("directEditing"),!0):void 0})};var Ph={__depends__:[rb],__init__:["keyboardBindings"],keyboardBindings:["type",kh]},Kb={moveSpeed:1,moveSpeedAccelerated:10},Yb={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},zD={left:function(r){return{x:-r,y:0}},up:function(r){return{x:0,y:-r}},right:function(r){return{x:r,y:0}},down:function(r){return{x:0,y:r}}};function ru(r,s,c,l,d){var h=this;this._config=oe({},Kb,r||{}),s.addListener(1500,function(f){var g=f.keyEvent,v=Yb[g.key];if(v&&!s.isCmd(g)){var b=s.isShift(g);return h.moveSelection(v,b),!0}}),this.moveSelection=function(f,g){var v=d.get();if(v.length){var w=zD[f](this._config[g?"moveSpeedAccelerated":"moveSpeed"]);l.allowed("elements.move",{shapes:v})&&c.moveElements(v,w)}}}ru.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var Ey={__depends__:[rb,bo],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",ru]};function wy(r,s,c,l){r.on("element.changed",function(d){var h=d.element;(h.parent||h===s.getRootElement())&&(d.gfx=c.getGraphics(h)),d.gfx&&r.fire(dt(h)+".changed",d)}),r.on("elements.changed",function(d){var h=d.elements;h.forEach(function(f){r.fire("element.changed",{element:f})}),l.updateContainments(h)}),r.on("shape.changed",function(d){l.update("shape",d.element,d.gfx)}),r.on("connection.changed",function(d){l.update("connection",d.element,d.gfx)})}wy.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Xb={__init__:["changeSupport"],changeSupport:["type",wy]};function ou(r,s,c,l){this._dragging=l,this._rules=s;var d=this;r.on("resize.start",function(f){var g,b;b=(g=f.context).minBounds,void 0===g.resizeConstraints&&(void 0===b&&(b=d.computeMinResizeBox(g)),g.resizeConstraints={min:et(b)})}),r.on("resize.move",function(f){!function(f,g){var M,T,R,F,$,B,b=f.shape,w=f.direction,C=f.resizeConstraints;f.delta=g,F=(R=g).x,$=R.y,B={x:(M=b).x,y:M.y,width:M.width,height:M.height},-1!==(T=w).indexOf("n")?(B.y=M.y+$,B.height=M.height-$):-1!==T.indexOf("s")&&(B.height=M.height+$),-1!==T.indexOf("e")?B.width=M.width+F:-1!==T.indexOf("w")&&(B.x=M.x+F,B.width=M.width-F),f.newBounds=function(M,T){if(!T)return M;var R=et(M);return Ps({top:Tf("top",R,T),right:Tf("right",R,T),bottom:Tf("bottom",R,T),left:Tf("left",R,T)})}(B,C),f.canExecute=d.canResize(f)}(f.context,{x:f.dx,y:f.dy})}),r.on("resize.end",function(f){!function(g){var C,M,v=g.shape,w=g.newBounds;if(g.canExecute){if(C=v,M=w=Hu(w),C.x===M.x&&C.y===M.y&&C.width===M.width&&C.height===M.height)return;c.resizeShape(v,w)}}(f.context)})}function Qb(r,s){var c=zt(r),l=et(r),d={x:c.x,y:c.y};return-1!==s.indexOf("n")?d.y=l.top:-1!==s.indexOf("s")&&(d.y=l.bottom),-1!==s.indexOf("e")?d.x=l.right:-1!==s.indexOf("w")&&(d.x=l.left),d}function jx(r){return"n"===r||"s"===r?"resize-ns":"e"===r||"w"===r?"resize-ew":"nw"===r||"se"===r?"resize-nwse":"resize-nesw"}ou.prototype.canResize=function(r){var s=this._rules,c=Pt(r,["newBounds","shape","delta","direction"]);return s.allowed("shape.resize",c)},ou.prototype.activate=function(r,s,c){var l,d,h=this._dragging;if("string"==typeof c&&(c={direction:c}),!(d=(l=oe({shape:s},c)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");h.init(r,Qb(s,d),"resize",{autoActivate:!0,cursor:jx(d),data:{shape:s,context:l}})},ou.prototype.computeMinResizeBox=function(r){var c,l,d,h,f,g,v,s=r.shape;return c=r.direction,l=s,d=r.minDimensions||{width:10,height:10},h=fy(s,r.childrenBoxPadding),f=et(l),g={top:/n/.test(c)?f.bottom-d.height:f.top,left:/w/.test(c)?f.right-d.width:f.left,bottom:/s/.test(c)?f.top+d.height:f.bottom,right:/e/.test(c)?f.left+d.width:f.right},v=h?et(h):g,Ps({top:Af(g.top,v.top),left:Af(g.left,v.left),bottom:Df(g.bottom,v.bottom),right:Df(g.right,v.right)})},ou.$inject=["eventBus","rules","modeling","dragging"];var Zb="djs-resizing",Jb="resize-not-ok";function e0(r,s,c){r.on("resize.move",500,function(l){var d,h,f,g;h=(d=l.context).shape,f=d.newBounds,(g=d.frame)||(g=d.frame=c.addFrame(h,s.getActiveLayer()),s.addMarker(h,Zb)),f.width>5&&Ne(g,{x:f.x,width:f.width}),f.height>5&&Ne(g,{y:f.y,height:f.height}),d.canExecute?$t(g).remove(Jb):$t(g).add(Jb)}),r.on("resize.cleanup",function(l){var d,h;h=(d=l.context).shape,d.frame&&ri(d.frame),s.removeMarker(h,Zb)})}e0.$inject=["eventBus","canvas","previewSupport"];var xy=["n","w","s","e","nw","ne","se","sw"];function Qa(r,s,c,l){this._resize=l,this._canvas=s;var d=this;r.on("selection.changed",function(h){var f=h.newSelection;d.removeResizers(),1===f.length&&ne(f,Ti(d.addResizer,d))}),r.on("shape.changed",function(h){var f=h.element;c.isSelected(f)&&(d.removeResizers(),d.addResizer(f))})}Qa.prototype.makeDraggable=function(r,s,c){var l=this._resize;function d(h){lo(h)&&l.activate(h,r,c)}Ze.bind(s,"mousedown",d),Ze.bind(s,"touchstart",d)},Qa.prototype._createResizer=function(r,s,c,l){var b,w,d=this._getResizersParent(),h=(w={x:0,y:0},-1!==(b=l).indexOf("e")?w.x=6:-1!==b.indexOf("w")&&(w.x=-6),-1!==b.indexOf("s")?w.y=6:-1!==b.indexOf("n")&&(w.y=-6),w),f=st("g");$t(f).add("djs-resizer"),$t(f).add("djs-resizer-"+r.id),$t(f).add("djs-resizer-"+l),ut(d,f);var g=st("rect");Ne(g,{x:-2+h.x,y:-2+h.y,width:4,height:4}),$t(g).add("djs-resizer-visual"),ut(f,g);var v=st("rect");return Ne(v,{x:-10+h.x,y:-10+h.y,width:20,height:20}),$t(v).add("djs-resizer-hit"),ut(f,v),Rr(f,s,c),f},Qa.prototype.createResizer=function(r,s){var c=Qb(r,s),l=this._createResizer(r,c.x,c.y,s);this.makeDraggable(r,l,s)},Qa.prototype.addResizer=function(r){var s=this;this._resize.canResize({shape:r})&&ne(xy,function(c){s.createResizer(r,c)})},Qa.prototype.removeResizers=function(){Sl(this._getResizersParent())},Qa.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Qa.$inject=["eventBus","canvas","selection","resize"];var Ff={__depends__:[za,zc,Eo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",ou],resizePreview:["type",e0],resizeHandles:["type",Qa]};function Cy(r,s){var c=s.create("bpmn:CategoryValue"),l=s.create("bpmn:Category",{categoryValue:[c]});return Je(r.get("rootElements"),l),Se(l).$parent=r,Se(c).$parent=l,c}function Ih(r,s,c,l,d,h,f){function g(v,b){(b||un(v,["bpmn:Task","bpmn:TextAnnotation","bpmn:Group"])||Lf(v))&&l.activate(v)}this._bpmnFactory=s,this._canvas=c,this._modeling=d,this._textRenderer=f,l.registerProvider(this),r.on("element.dblclick",function(v){g(v.element,!0)}),r.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open"],function(v){l.isActive()&&l.complete()}),r.on(["commandStack.changed"],function(v){l.isActive()&&l.cancel()}),r.on("directEditing.activate",function(v){h.removeResizers()}),r.on("create.end",500,function(v){var b=v.context;v.isTouch||v.context.canExecute&&(b.hints&&!1===b.hints.createElementsBehavior||g(b.shape))}),r.on("autoPlace.end",500,function(v){g(v.shape)})}function Lf(r){return V(r,"bpmn:SubProcess")&&!qe(r)}Ih.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],Ih.prototype.activate=function(r){var s=ve(r);if(void 0!==s){var c={text:s};oe(c,this.getEditingBBox(r));var l={};return(un(r,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Lf(r))&&oe(l,{centerVertically:!0}),an(r)&&oe(l,{autoResize:!0}),V(r,"bpmn:TextAnnotation")&&oe(l,{resizable:!0,autoResize:!0}),oe(c,{options:l}),c}},Ih.prototype.getEditingBBox=function(r){var ce,s=this._canvas,c=r.label||r,l=s.getAbsoluteBBox(c),d=l.x+l.width/2,h=l.y+l.height/2,f={x:l.x,y:l.y},g=s.zoom(),v=this._textRenderer.getDefaultStyle(),b=this._textRenderer.getExternalStyle(),w=b.fontSize*g,C=b.lineHeight,M=v.fontSize*g,T=v.lineHeight,R={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(V(r,"bpmn:Lane")||V(ce=r,"bpmn:Participant")&&qe(ce))&&(oe(f,{width:l.height,height:30*g,x:l.x-l.height/2+15*g,y:h-30*g/2}),oe(R,{fontSize:M+"px",lineHeight:T,paddingTop:7*g+"px",paddingBottom:7*g+"px",paddingLeft:5*g+"px",paddingRight:5*g+"px",transform:"rotate(-90deg)"})),(un(r,["bpmn:Task","bpmn:CallActivity"])||function(ce){return V(ce,"bpmn:Participant")&&!qe(ce)}(r)||Lf(r))&&(oe(f,{width:l.width,height:l.height}),oe(R,{fontSize:M+"px",lineHeight:T,paddingTop:7*g+"px",paddingBottom:7*g+"px",paddingLeft:5*g+"px",paddingRight:5*g+"px"})),function(ce){return V(ce,"bpmn:SubProcess")&&qe(ce)}(r)&&(oe(f,{width:l.width,x:l.x}),oe(R,{fontSize:M+"px",lineHeight:T,paddingTop:7*g+"px",paddingBottom:7*g+"px",paddingLeft:5*g+"px",paddingRight:5*g+"px"}));var F=90*g,$=7*g,B=4*g;if(c.labelTarget&&(oe(f,{width:F,height:l.height+$+B,x:d-F/2,y:l.y-$}),oe(R,{fontSize:w+"px",lineHeight:C,paddingTop:$+"px",paddingBottom:B+"px"})),an(c)&&!gr(c)&&!gi(c)){var z=gn(r),j=s.getAbsoluteBBox({x:z.x,y:z.y,width:0,height:0}),K=w+$+B;oe(f,{width:F,height:K,x:j.x-F/2,y:j.y-K/2}),oe(R,{fontSize:w+"px",lineHeight:C,paddingTop:$+"px",paddingBottom:B+"px"})}return V(r,"bpmn:TextAnnotation")&&(oe(f,{width:l.width,height:l.height,minWidth:30*g,minHeight:10*g}),oe(R,{textAlign:"left",paddingTop:5*g+"px",paddingBottom:7*g+"px",paddingLeft:7*g+"px",paddingRight:5*g+"px",fontSize:M+"px",lineHeight:T})),{bounds:f,style:R}},Ih.prototype.update=function(r,s,c,l){var d,h,f;if(V(r,"bpmn:TextAnnotation")&&(h=this._canvas.getAbsoluteBBox(r),d={x:r.x,y:r.y,width:r.width/h.width*l.width,height:r.height/h.height*l.height}),V(r,"bpmn:Group")&&!Se(r).categoryValueRef){var g=Cy(Se(this._canvas.getRootElement()).$parent,this._bpmnFactory);Se(r).categoryValueRef=g}(f=s)&&f.trim()||(s=null),this._modeling.updateLabel(r,s,d)};var Sy="djs-element-hidden",Yc="djs-label-hidden";function Dy(r,s,c,l){var d,h,f,g=this,v=s.getDefaultLayer();r.on("directEditing.activate",function(b){var w=b.active;if(V(d=w.element.label||w.element,"bpmn:TextAnnotation")){h=s.getAbsoluteBBox(d),f=st("g");var C=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:d.width,containerHeight:d.height,position:{mx:0,my:0}}),M=g.path=st("path");Ne(M,{d:C,strokeWidth:2,stroke:r0(d)}),ut(f,M),ut(v,f),Ei(f,d.x,d.y)}V(d,"bpmn:TextAnnotation")||d.labelTarget?s.addMarker(d,Sy):(V(d,"bpmn:Task")||V(d,"bpmn:CallActivity")||V(d,"bpmn:SubProcess")||V(d,"bpmn:Participant"))&&s.addMarker(d,Yc)}),r.on("directEditing.resize",function(b){if(V(d,"bpmn:TextAnnotation")){var M=Math.max(d.height/h.height*(b.height+b.dy),0),T=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:d.width,containerHeight:M,position:{mx:0,my:0}});Ne(g.path,{d:T})}}),r.on(["directEditing.complete","directEditing.cancel"],function(b){var w=b.active;w&&(s.removeMarker(w.element.label||w.element,Sy),s.removeMarker(d,Yc)),d=void 0,h=void 0,f&&(ri(f),f=void 0)})}function r0(r,s){return Se(r).di.get("stroke")||s||"black"}Dy.$inject=["eventBus","canvas","elementRegistry","pathMap"];var Vx={__depends__:[Xb,Ff,Kc],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Ih],labelEditingPreview:["type",Dy]},ad=["top","bottom","left","right"];function jf(r,s){function c(l){if(gr(l)){var d=function(h){var M,T,f=zt(h.label),g=Ay(zt(h),f);if(-1!==ad.indexOf(g)){var b=(T=zt(M=h),[].concat(M.incoming.map(function(R){return R.waypoints[R.waypoints.length-2]}),M.outgoing.map(function(R){return R.waypoints[1]})).map(function(R){return Ay(T,R)}));if(h.host){var w=function(M){var T,R=M.host,F=nn(zt(M),R);return T=F.indexOf("-")>=0?F.split("-"):[F],ad.filter(function($){return-1===T.indexOf($)})}(h);b=b.concat(w)}var C=ad.filter(function(M){return-1===b.indexOf(M)});if(-1===C.indexOf(g))return C[0]}}(l);d&&function(h,f){var g=zt(h),v=h.label,b=zt(v);if(v.parent){var w,C=et(h);switch(f){case"top":w={x:g.x,y:C.top-10-v.height/2};break;case"left":w={x:C.left-10-v.width/2,y:g.y};break;case"bottom":w={x:g.x,y:C.bottom+10+v.height/2};break;case"right":w={x:C.right+10+v.width/2,y:g.y}}var M=Fo(w,b);s.moveShape(v,M)}}(l,d)}}Ge.call(this,r),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(l){var d=l.context,h=d.connection,g=h.target;!1!==(d.hints||{}).createElementsBehavior&&(c(h.source),c(g))}),this.postExecuted(["label.create"],function(l){var d=l.context;!1!==(d.hints||{}).createElementsBehavior&&c(d.shape.labelTarget)}),this.postExecuted(["elements.create"],function(l){var d=l.context;!1!==(d.hints||{}).createElementsBehavior&&d.elements.forEach(function(f){c(f)})})}function Ay(r,s){return nn(s,r,5)}function Vf(r,s,c){Ge.call(this,r),this.preExecute("shape.append",function(l){var d=l.source,h=l.shape;l.position||(l.position=V(h,"bpmn:TextAnnotation")?{x:d.x+d.width/2+75,y:d.y-50-h.height/2}:{x:d.x+d.width+80+h.width/2,y:d.y+d.height/2})},!0)}function Oh(r,s){r.invoke(Ge,this),this.postExecute("shape.move",function(c){var l=c.newParent,d=c.shape;ne(gt(d.incoming.concat(d.outgoing),function(h){return V(h,"bpmn:Association")}),function(h){s.moveConnection(h,{x:0,y:0},l)})},!0)}function Nh(r,s){s.invoke(Ge,this),this._bpmnReplace=r;var c=this;this.postExecuted("elements.create",500,function(l){var d=l.elements;1===(d=d.filter(function(h){return Fh(h,h.host)})).length&&d.map(function(h){return d.indexOf(h)}).forEach(function(h){l.elements[h]=c.replaceShape(d[h],d[h])})},!0),this.preExecute("elements.move",500,function(l){var d=l.shapes,h=l.newHost;if(1===d.length){var f=d[0];Fh(f,h)&&(l.shapes=[c.replaceShape(f,h)])}},!0)}function Fh(r,s){return!gi(r)&&un(r,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!s}function cd(r,s,c){function l(d){return gt(d.attachers,function(h){return V(h,"bpmn:BoundaryEvent")})}Ge.call(this,r),this.postExecute("connection.create",function(d){var h=d.context.source,f=d.context.target,g=l(f);V(h,"bpmn:EventBasedGateway")&&V(f,"bpmn:ReceiveTask")&&g.length>0&&c.removeElements(g)}),this.postExecute("connection.reconnect",function(d){var f=d.context.newSource;V(d.context.oldSource,"bpmn:Gateway")&&V(f,"bpmn:EventBasedGateway")&&ne(f.outgoing,function(g){var v=g.target,b=l(v);V(v,"bpmn:ReceiveTask")&&b.length>0&&c.removeElements(b)})}),r.on("moddleCopy.canCopyProperty",2e3,function(d){var h=d.parent,f=d.property,g=d.propertyName,v=s.getPropertyDescriptor(h,g);v&&v.isReference&&V(f,"bpmn:RootElement")&&h.set(g,f)})}function Hf(r,s,c,l,d){function h(b){return un(b,["bpmn:ReceiveTask","bpmn:SendTask"])||(w=b,bt(C=["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])||(C=[C]),jt(C,function(M){return ze(w,M)}));var w,C}function f(b){return!!tn(r.getDefinitions().get("rootElements"),Br({id:b.id}))}function g(b){return V(b,"bpmn:ErrorEventDefinition")?"errorRef":V(b,"bpmn:EscalationEventDefinition")?"escalationRef":V(b,"bpmn:MessageEventDefinition")?"messageRef":V(b,"bpmn:SignalEventDefinition")?"signalRef":void 0}function v(b){if(un(b,["bpmn:ReceiveTask","bpmn:SendTask"]))return b.get("messageRef");var w=b.get("eventDefinitions")[0];return w.get(g(w))}c.invoke(Ge,this),this.executed("shape.create",function(b){var w=b.shape;if(h(w)){var C=v(Se(w));C&&!f(C)&&(Je(r.getDefinitions().get("rootElements"),C),b.addedRootElement=C)}},!0),this.reverted("shape.create",function(b){var w=b.addedRootElement;w&&Kn(r.getDefinitions().get("rootElements"),w)},!0),s.on("copyPaste.copyElement",function(b){var w=b.descriptor,C=b.element;if(h(C)){var M=v(Se(C));M&&(w.referencedRootElement=M)}}),s.on("copyPaste.pasteElement",500,function(b){var w=b.descriptor,C=w.businessObject;if(h(C)){var M=w.referencedRootElement;M&&(f(M)||(M=l.copyElement(M,d.create(M.$type))),function(T,R){if(un(T,["bpmn:ReceiveTask","bpmn:SendTask"]))return T.set("messageRef",R);var F=T.get("eventDefinitions")[0];F.set(g(F),R)}(C,M))}})}function Lh(r){r.invoke(Ge,this),this.preExecute("shape.create",1500,function(s){var c=s.context,l=c.parent,d=c.shape;V(l,"bpmn:Lane")&&!V(d,"bpmn:Lane")&&(c.parent=Gg(l,"bpmn:Participant"))})}Oe(jf,Ge),jf.$inject=["eventBus","modeling"],Oe(Vf,Ge),Vf.$inject=["eventBus","elementFactory","bpmnRules"],Oe(Oh,Ge),Oh.$inject=["injector","modeling"],Nh.$inject=["bpmnReplace","injector"],Oe(Nh,Ge),Nh.prototype.replaceShape=function(r,s){var c,l=(c=Se(r).eventDefinitions)&&c[0],d={type:"bpmn:BoundaryEvent",host:s};return l&&(d.eventDefinitionType=l.$type),this._bpmnReplace.replaceElement(r,d,{layoutConnection:!1})},cd.$inject=["eventBus","moddle","modeling"],Oe(cd,Ge),Hf.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],Oe(Hf,Ge),Lh.$inject=["injector"],Oe(Lh,Ge);function $f(r,s,c){s.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],1500,function(l){var d=l.context.shape||l.shape,h=l.hover;V(h,"bpmn:Lane")&&!un(d,["bpmn:Lane","bpmn:Participant"])&&(l.hover=fs(h),l.hoverGfx=r.getGraphics(l.hover));var f=c.getRootElement();h!==f&&(d.labelTarget||V(d,"bpmn:Group"))&&(l.hover=f,l.hoverGfx=r.getGraphics(l.hover))}),s.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],1500,function(l){var d=l.hover;V(d,"bpmn:Lane")&&(l.hover=fs(d)||d,l.hoverGfx=r.getGraphics(l.hover))}),s.on(["bendpoint.move.hover"],1500,function(l){var h=l.hover,f=l.context.type;V(h,"bpmn:Lane")&&/reconnect/.test(f)&&(l.hover=fs(h)||h,l.hoverGfx=r.getGraphics(l.hover))}),s.on(["connect.start"],1500,function(l){var d=l.context,h=d.start;V(h,"bpmn:Lane")&&(d.start=fs(h)||h)}),s.on("shape.move.start",2e3,function(l){var d=l.shape;V(d,"bpmn:Lane")&&(l.shape=fs(d)||d)})}function su(r,s,c){Ge.call(this,r),this.preExecute("shape.create",function(l){var d=l.context.shape;if(V(d,"bpmn:DataObjectReference")&&"label"!==d.type){var h=s.create("bpmn:DataObject");d.businessObject.dataObjectRef=h}})}$f.$inject=["elementRegistry","eventBus","canvas"],su.$inject=["eventBus","bpmnFactory","moddle"],Oe(su,Ge);function My(r,s,c){function l(d){var h,f=d.parent,g=r.getRootElement();V(g,"bpmn:Collaboration")?h=g:(h=c.makeCollaboration(),d.process=f),d.parent=h}Ge.call(this,s),s.on(["create.start","shape.move.start"],2e3,function(d){var w,C,h=d.context,f=h.shape,g=r.getRootElement();if(V(f,"bpmn:Participant")&&V(g,"bpmn:Process")&&g.children.length){var v=g.children.filter(function(w){return!V(w,"bpmn:Group")&&!gi(w)&&!w.waypoints});if(v.length){var b=pi(v);oe(f,function(w,C){C={width:C.width+40+30,height:C.height+40};var M=Math.max(w.width,C.width),T=Math.max(w.height,C.height);return{x:-M/2,y:-T/2,width:M,height:T}}(f,b)),h.createConstraints=(w=f,{bottom:(C=et(C=b)).top+w.height/2-20,left:C.right-w.width/2+20,top:C.bottom-w.height/2+20,right:C.left+w.width/2-20-30})}}}),s.on("create.start",2e3,function(d){var h=d.context.shape,f=r.getRootElement(),g=r.getGraphics(f);function v(b){b.element=f,b.gfx=g}V(h,"bpmn:Participant")&&V(f,"bpmn:Process")&&(s.on("element.hover",2e3,v),s.once("create.cleanup",function(){s.off("element.hover",v)}))}),this.preExecute("shape.create",function(d){var h=d.parent;V(d.shape,"bpmn:Participant")&&V(h,"bpmn:Process")&&l(d)},!0),this.execute("shape.create",function(d){var h=d.process,f=d.shape;h&&(d.oldProcessRef=f.businessObject.processRef,f.businessObject.processRef=h.businessObject)},!0),this.revert("shape.create",function(d){d.process&&(d.shape.businessObject.processRef=d.oldProcessRef)},!0),this.postExecute("shape.create",function(d){var h=d.process,f=d.shape;if(h){var g=h.children.slice();c.moveElements(g,{x:0,y:0},f)}},!0),this.preExecute("elements.create",2e3,function(d){var h,f=d.elements,g=d.parent;jh(f)&&V(g,"bpmn:Process")&&(l(d),h=jh(f),d.oldProcessRef=h.businessObject.processRef,h.businessObject.processRef=g.businessObject)},!0),this.revert("elements.create",function(d){d.process&&(jh(d.elements).businessObject.processRef=d.oldProcessRef)},!0),this.postExecute("elements.create",function(d){var h,g=d.process;if(g){h=jh(d.elements);var v=g.children.slice();c.moveElements(v,{x:0,y:0},h)}},!0)}function jh(r){return tn(r,function(s){return V(s,"bpmn:Participant")})}My.$inject=["canvas","eventBus","modeling"],Oe(My,Ge);var Uf="__targetRef_placeholder";function Wf(r,s){function c(h,f){var g=h.get("properties"),v=tn(g,function(b){return b.name===Uf});return!v&&f&&Je(g,v=s.create("bpmn:Property",{name:Uf})),v}function l(h,f){var b,w,g=c(h);g&&(b=g,w=f,tn(h.get("dataInputAssociations"),function(C){return C!==w&&C.targetRef===b})||Kn(h.get("properties"),g))}function d(h){var f,g=h.context,v=g.connection,b=v.businessObject,w=v.target,C=w&&w.businessObject,M=g.newTarget,T=M&&M.businessObject,R=g.oldTarget||g.target,F=R&&R.businessObject,$=v.businessObject;F&&F!==C&&l(F,b),T&&T!==C&&l(T,b),C?(f=c(C,!0),$.targetRef=f):$.targetRef=null}Ge.call(this,r),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Hx(d)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Hx(d))}function Hx(r){return function(s){if(V(s.context.connection,"bpmn:DataInputAssociation"))return r(s)}}function Vh(r){this._bpmnUpdater=r}function Ry(r,s,c,l){function d(f){return f.children.filter(function(g){return V(g,"bpmn:DataStoreReference")&&!g.labelTarget})}function h(f,g){var v=f.businessObject||f;if(g=g||c.filter(function(w){return V(w,"bpmn:Participant")&&Se(w).processRef})[0]){var b=g.businessObject||g;s.execute("dataStore.updateContainment",{dataStoreBo:v,newSemanticParent:b.processRef||b,newDiParent:b.di})}}Ge.call(this,l),s.registerHandler("dataStore.updateContainment",Vh),this.preExecute("shape.create",function(f){var g=f.context,v=g.shape;V(v,"bpmn:DataStoreReference")&&"label"!==v.type&&(g.hints||(g.hints={}),g.hints.autoResize=!1)}),this.preExecute("elements.move",function(f){var g=f.context,v=g.shapes;v.filter(function(b){return V(b,"bpmn:DataStoreReference")}).length&&(g.hints||(g.hints={}),g.hints.autoResize=v.filter(function(b){return!V(b,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(f){var g=f.context.shape,v=g.parent;V(g,"bpmn:DataStoreReference")&&"label"!==g.type&&V(v,"bpmn:Collaboration")&&h(g)}),this.postExecute("shape.move",function(f){var g=f.context,v=g.shape,b=g.oldParent,w=v.parent;V(b,"bpmn:Collaboration")||V(v,"bpmn:DataStoreReference")&&"label"!==v.type&&V(w,"bpmn:Collaboration")&&h(v,V(b,"bpmn:Participant")?b:function(C,M){for(;C.parent;){if(V(C.parent,"bpmn:Participant"))return C.parent;C=C.parent}}(b))}),this.postExecute("shape.delete",function(f){var g=f.context.shape,v=r.getRootElement();un(g,["bpmn:Participant","bpmn:SubProcess"])&&V(v,"bpmn:Collaboration")&&d(v).filter(function(b){return function(w,C){for(var M=w.businessObject||w,T=C.businessObject||C;M.$parent;){if(M.$parent===T.processRef||T)return!0;M=M.$parent}return!1}(b,g)}).forEach(function(b){h(b)})}),this.postExecute("canvas.updateRoot",function(f){var g=f.context,b=g.newRoot;d(g.oldRoot).forEach(function(w){V(b,"bpmn:Process")&&h(w,b)})})}function Gf(r,s,c){Ge.call(this,r),this.postExecuted("shape.delete",500,function(l){var v,w,C,M,T,R,F,d=l.context,h=d.hints,f=d.shape,g=d.oldParent;V(f,"bpmn:Lane")&&(h&&h.nested||(v=f,T=Ka(g),R=[],F=[],Rs(T,function($){return $.y>v.y?F.push($):R.push($),$.children}),T.length&&(w=F.length&&R.length?v.height/2:v.height,R.length&&(C=c.calculateAdjustments(R,"y",w,v.y-10),c.makeSpace(C.movingShapes,C.resizingShapes,{x:0,y:w},"s")),F.length&&(M=c.calculateAdjustments(F,"y",-w,v.y+v.height+10),c.makeSpace(M.movingShapes,M.resizingShapes,{x:0,y:-w},"n")))))})}function qf(r,s){s.invoke(Ge,this),this._bpmnReplace=r;var c=this;this.postExecuted("elements.create",500,function(l){var d=l.elements;d.filter(function(h){return s0(h,h.host)}).map(function(h){return d.indexOf(h)}).forEach(function(h){l.elements[h]=c.replaceShape(d[h])})},!0),this.preExecute("elements.move",500,function(l){var d=l.shapes,h=l.newHost;d.forEach(function(f,g){var b=f.host;s0(f,-1!==d.indexOf(b)?b:h)&&(d[g]=c.replaceShape(f))})},!0)}function s0(r,s){return!gi(r)&&V(r,"bpmn:BoundaryEvent")&&!s}function $o(r,s,c){function l(d,h,f){var g,v,b,C,M,T,R,F=h.waypoints,$=d.outgoing.slice(),B=d.incoming.slice(),z=Yg(F,R=Re(f.width)?zt(f):f);if(z){if(g=F.slice(0,z.index),v=F.slice(z.index+(z.bendpoint?1:0)),!g.length||!v.length)return;b=z.bendpoint?F[z.index]:R,a0(d,g[g.length-1])||g.push(ky(b)),a0(d,v[0])||v.unshift(ky(b))}C=h.target,s.canConnect(h.source,d,h)&&(c.reconnectEnd(h,d,g||R),M=h),s.canConnect(d,C,h)&&(M?T=c.connect(d,C,{type:h.type,waypoints:v}):(c.reconnectStart(h,d,v||R),T=h));var j=[].concat(M&&gt(B,function(K){return K.source===M.source})||[],T&&gt($,function(K){return K.target===T.target})||[]);j.length&&c.removeElements(j)}Ge.call(this,r),this.preExecute("elements.move",function(d){var h=d.newParent,f=d.shapes,g=d.delta,v=f[0];if(v&&h){h&&h.waypoints&&(d.newParent=h=h.parent);var b=zt(v),w={x:b.x+g.x,y:b.y+g.y},C=tn(h.children,function(M){return s.canInsert(f,M)&&Yg(M.waypoints,w)});C&&(d.targetFlow=C,d.position=w)}},!0),this.postExecuted("elements.move",function(d){var f=d.targetFlow;f&&l(d.shapes[0],f,d.position)},!0),this.preExecute("shape.create",function(d){var h=d.parent;s.canInsert(d.shape,h)&&(d.targetFlow=h,d.parent=h.parent)},!0),this.postExecuted("shape.create",function(d){var f=d.targetFlow;f&&l(d.shape,f,d.position)},!0)}function a0(r,s){var c=s.x,l=s.y;return c>=r.x&&c<=r.x+r.width&&l>=r.y&&l<=r.y+r.height}function ky(r){return oe({},r)}function Py(r,s){Ge.call(this,r),this.preExecuted("connection.create",function(c){var l=c.context,d=l.source,h=l.target,f=h.incoming.slice();l.hints&&!1===l.hints.createElementsBehavior||V(d,"bpmn:EventBasedGateway")&&h.incoming.length&&f.filter(Iy).forEach(function(g){s.removeConnection(g)})}),this.preExecuted("shape.replace",function(c){var l=c.context.newShape;V(l,"bpmn:EventBasedGateway")&&l.outgoing.filter(Iy).map(function(d){return d.target}).reduce(function(d,h){var f=h.incoming.filter(Iy);return d.concat(f)},[]).forEach(function(d){d.source!==l&&s.removeConnection(d)})})}function Iy(r){return V(r,"bpmn:SequenceFlow")}function Oy(r,s,c,l,d,h){function f(){return Se(s.getRootElement()).$parent}function g(v){var C,b=Se(v).categoryValueRef;if(b){var w=b.$parent;b&&(Kn(w.categoryValue,b),w&&!w.categoryValue.length&&(C=w,Kn(f().get("rootElements"),C)))}}d.invoke(Ge,this),this.executed("shape.delete",function(v){var b,w=v.context.shape;if(V(w,"bpmn:Group")){var C=Se(w).categoryValueRef,M=c.filter(function(T){return V(T,"bpmn:Group")});b=C,M.some(function(T){var R=Se(T);return R.categoryValueRef&&R.categoryValueRef===b})||g(w)}}),this.reverted("shape.delete",function(v){var b=v.context.shape;if(V(b,"bpmn:Group")){var w=Se(b).categoryValueRef,C=f(),M=w?w.$parent:null;Je(M.get("categoryValue"),w),Je(C.get("rootElements"),M)}}),this.execute("shape.create",function(v){var b=Se(v.context.shape);if(V(b,"bpmn:Group")&&!b.categoryValueRef){var w=Cy(f(),r);b.categoryValueRef=w}}),this.revert("shape.create",function(v){var b=v.context.shape;V(b,"bpmn:Group")&&(g(b),delete Se(b).categoryValueRef)}),l.on("moddleCopy.canCopyProperty",2e3,function(v){var b,w=v.property;if(V(w,"bpmn:CategoryValue"))return b=Cy(f(),r),h.copyElement(w,b)})}function Ny(r,s,c,l){var d,g;return 0==(d=(l.y-c.y)*(s.x-r.x)-(l.x-c.x)*(s.y-r.y))?null:(g=((l.x-c.x)*(r.y-c.y)-(l.y-c.y)*(r.x-c.x))/d,{x:Math.round(r.x+g*(s.x-r.x)),y:Math.round(r.y+g*(s.y-r.y))})}function Fy(r){function s(c,l,d){var h,g={x:d.x-50,y:d.y},v=Ny(c,l,d,{x:d.x,y:d.y-50}),b=Ny(c,l,d,g);h=v&&b?c0(v,d)>c0(b,d)?b:v:v||b,c.original=h}r.on("bpmnElement.added",function(c){var l,d,h=c.element;h.waypoints&&(s((d=(l=h).waypoints)[0],d[1],zt(l.source)),s(d[d.length-1],d[d.length-2],zt(l.target)))})}function c0(r,s){return Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))}function Ly(r){Ge.call(this,r);var s=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(c){var l=Se(c.context.shape);un(l,s)&&!l.di.get("isHorizontal")&&l.di.set("isHorizontal",!0)})}function l0(r){return Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))}function Ht(r){return Math.atan((r[1].y-r[0].y)/(r[1].x-r[0].x))}function Or(r,s){var f,g,v,b,c=s[0],l=s[1],d={x:l.x-c.x,y:l.y-c.y},h=-((b=[{n:(f=[c.x,c.y])[0]-(v=[r.x,r.y])[0],lambda:(g=[d.x,d.y])[0]},{n:f[1]-v[1],lambda:g[1]}])[0].n*g[0]+b[1].n*g[1])/(b[0].lambda*g[0]+b[1].lambda*g[1]);return{x:c.x+h*d.x,y:c.y+h*d.y}}function u0(r,s){var c=Or(r,s);return l0({x:c.x-r.x,y:c.y-r.y})}function Hh(r,s){return l0({x:r.x-s.x,y:r.y-s.y})}Wf.$inject=["eventBus","bpmnFactory"],Oe(Wf,Ge),Vh.$inject=["bpmnUpdater"],Vh.prototype.execute=function(r){var s=r.dataStoreBo,c=r.newSemanticParent,l=r.newDiParent;r.oldSemanticParent=s.$parent,r.oldDiParent=s.di.$parent,this._bpmnUpdater.updateSemanticParent(s,c),this._bpmnUpdater.updateDiParent(s.di,l)},Vh.prototype.revert=function(r){var s=r.dataStoreBo,l=r.oldDiParent;this._bpmnUpdater.updateSemanticParent(s,r.oldSemanticParent),this._bpmnUpdater.updateDiParent(s.di,l)},Ry.$inject=["canvas","commandStack","elementRegistry","eventBus"],Oe(Ry,Ge),Gf.$inject=["eventBus","modeling","spaceTool"],Oe(Gf,Ge),qf.$inject=["bpmnReplace","injector"],Oe(qf,Ge),qf.prototype.replaceShape=function(r){var c,l=(c=Se(r).eventDefinitions)&&c[0];return this._bpmnReplace.replaceElement(r,l?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:l.$type}:{type:"bpmn:IntermediateThrowEvent"},{layoutConnection:!1})},Oe($o,Ge),$o.$inject=["eventBus","bpmnRules","modeling"],Py.$inject=["eventBus","modeling"],Oe(Py,Ge),Oy.$inject=["bpmnFactory","canvas","elementRegistry","eventBus","injector","moddleCopy"],Oe(Oy,Ge),Fy.$inject=["eventBus"],Ly.$inject=["eventBus"],Oe(Ly,Ge);var $h=Math.sqrt,ys=Math.min,d0=Math.max,h0=Math.abs;function Kf(r){return Math.pow(r,2)}function zo(r,s){return $h(Kf(r.x-s.x)+Kf(r.y-s.y))}function By(r,s,c,l){var d=s.x-r.x,h=s.y-r.y,f=c.x-r.x,g=c.y-r.y,v=d*d+h*h,b=(d*f+h*g)/v,w=b*b-(f*f+g*g-l*l)/v;if(w<0&&w>-1e-6&&(w=0),w<0)return[];var C=$h(w),M=-b+C,T=-b-C,R={x:r.x-d*M,y:r.y-h*M};return 0===w?[R]:[R,{x:r.x-d*T,y:r.y-h*T}].filter(function(F){return jy(($=F).x,(B=r).x,(z=s).x)&&jy($.y,B.y,z.y);var $,B,z})}function jy(r,s,c){return r>=ys(s,c)-ld&&r<=d0(s,c)+ld}var ld=.1;function $x(r,s){return h0(r.x-s.x)<=ld&&h0(r.y-s.y)<=ld}function zx(r,s){var c=Hh(r[s-1],r[s]);return c/(c+Hh(r[s],r[s+1]))}function zh(r,s){return[r[s],r[s+1]]}function Xc(r,s,c){var l=Fc(s),d=Fc(c),h=Fo(r,l);return Tr({x:d.x+h.x*(c.width/s.width),y:d.y+h.y*(c.height/s.height)})}function Yf(r,s,c){var l=Fc(r),d=Fc(s),h=Fc(c),f=Fo(r,l),g=Fo(l,d);return function(T,R,F){var ce,J,be,pe,$=et(R),B=et(F);if((be=ce=$).right!==(pe=J=B).right&&be.left!==pe.left||function(be,pe){return be.top!==pe.top&&be.bottom!==pe.bottom}(ce,J))return null;var z,K=nn(R,T);if("top"===K)z={x:0,y:B.bottom-$.bottom};else if("bottom"===K)z={x:0,y:B.top-$.top};else if("right"===K)z={x:B.left-$.left,y:0};else{if("left"!==K)return null;z={x:B.right-$.right,y:0}}return nn(F,{x:T.x+z.x,y:T.y+z.y})!==K?null:z}(l,s,c)||Tr({x:h.x+g.x*(c.width/s.width)+f.x-r.x,y:h.y+g.y*(c.height/s.height)+f.y-r.y})}var Vy={width:90,height:20};function $y(r,s,c,l){Ge.call(this,r),this.postExecute("element.updateProperties",function(d){var h=d.context,f=h.element,g=h.properties;if("name"in g&&s.updateLabel(f,g.name),"text"in g&&V(f,"bpmn:TextAnnotation")){var v=l.getTextAnnotationBounds({x:f.x,y:f.y,width:f.width,height:f.height},g.text||"");s.updateLabel(f,g.text,v)}}),this.postExecute(["shape.create","connection.create"],function(d){var h=d.context;if(!1!==(h.hints||{}).createElementsBehavior){var f=h.shape||h.connection,g=f.businessObject;if(!gi(f)&&an(f)&&ve(f)){var v=gn(f),b=l.getExternalLabelBounds(Vy,ve(f));s.createLabel(f,v,{id:g.id+"_label",businessObject:g,width:b.width,height:b.height})}}}),this.postExecute("shape.delete",function(d){var h=d.context,f=h.labelTarget;f&&!1!==(h.hints||{}).unsetLabel&&s.updateLabel(f,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(d){var h,f=d.context.shape;f.labelTarget&&V(f.labelTarget||f,"bpmn:BaseElement")&&((h=f.businessObject.di).label||(h.label=c.create("bpmndi:BPMNLabel",{bounds:c.create("dc:Bounds")})),oe(h.label.bounds,{x:f.x,y:f.y,width:f.width,height:f.height}))}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(d){var b,w,C,M,T,R,h=d.context;if(!1!==(h.hints||{}).labelBehavior){var f,g=h.connection.label;g&&g.parent&&(C=(w=(b=d.context).connection).label,M=oe({},b.hints),T=b.newWaypoints||w.waypoints,R=b.oldWaypoints,void 0===M.startChanged&&(M.startChanged=!!M.connectionStart),void 0===M.endChanged&&(M.endChanged=!!M.connectionEnd),f=function(r,s,c,l){var it,d=0,h=0,f={x:(it=r).x+it.width/2,y:it.y+it.height/2},g=function(it,Ce){var Me,ht,X,I,se,fe,Ie,rt,at,Et,wt,ft,Jt=0;for(Jt=0;Jt<Ce.length-1;Jt++){if($x(Me=Ce[Jt],ht=Ce[Jt+1])?fe=[Me]:(X=zo(it,Me),I=zo(it,ht),fe=By(Me,ht,it,ys(X,I))),fe.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===fe.length&&(Ie={type:"bendpoint",position:fe[0],segmentIndex:Jt,bendpointIndex:$x(Me,fe[0])?Jt:Jt+1}),2===fe.length&&(Ie={type:"segment",position:se={x:((wt=fe[0]).x+(ft=fe[1]).x)/2,y:(wt.y+ft.y)/2},segmentIndex:Jt,relativeLocation:zo(Me,se)/zo(Me,ht)}),rt=zo(Ie.position,it),(!Et||at>rt)&&(Et=Ie,at=rt)}return Et}(f,c),v=g.segmentIndex,b=function(it,Ce,Me,ht){var X=Me.segmentIndex,I=Ce.length-it.length;if(ht.segmentMove){var fe=ht.segmentMove.newSegmentStartIndex;return X===ht.segmentMove.segmentStartIndex?fe:X>=fe?X+I<fe?fe:X+I:X}if(ht.bendpointMove){var Ie,rt=ht.bendpointMove.insert,at=ht.bendpointMove.bendpointIndex;return 0===I?X:(X>=at&&(Ie=rt?X+1:X-1),X<at&&(Ie=X,rt&&"bendpoint"!==Me.type&&at-1===X&&zx(Ce,at)<Me.relativeLocation&&Ie++),Ie)}return 0===I?X:ht.connectionStart?0===X?0:null:ht.connectionEnd&&X===it.length-2?Ce.length-2:null}(c,s,g,l);if(null===b)return{x:d,y:h};if(b<0||b>s.length-2)return{x:d,y:h};var w,C,M=zh(c,v),T=zh(s,b),R=g.position,F=function(it,Ce){var Me=Hh(it[0],it[1]),ht=Hh(it[0],Ce);return 0===Me?0:ht/Me}(M,R),$=(w=T,C=Ht(M),Ht(w)-C);if("bendpoint"===g.type){var B=s.length-c.length,z=g.bendpointIndex;if(-1!==s.indexOf(c[z]))return{x:d,y:h};if(0===B){var K=s[z];return{x:K.x-g.position.x,y:K.y-g.position.y}}B<0&&0!==z&&z<c.length-1&&(F=zx(c,z))}var ce,J,be=(T[1].x-T[0].x)*F+T[0].x,pe=(T[1].y-T[0].y)*F+T[0].y,Ee=(ce={x:f.x-R.x,y:f.y-R.y},(J=$)?{x:Math.cos(J)*ce.x-Math.sin(J)*ce.y,y:Math.sin(J)*ce.x+Math.cos(J)*ce.y}:ce);return Tr({x:d=be+Ee.x-f.x,y:h=pe+Ee.y-f.y})}(C,T,R,M),s.moveShape(g,f))}}),this.postExecute(["shape.replace"],function(d){var h=d.context,f=h.newShape,g=h.oldShape,v=Se(f);v&&an(v)&&g.label&&f.label&&(f.label.x=g.label.x,f.label.y=g.label.y)}),this.postExecute("shape.resize",function(d){var h,f=d.context,g=f.shape,v=f.newBounds,b=f.oldBounds;if(gr(g)){var w=g.label,C=function(r,s,c){return Tr(Fo(Xc(r,s,c),r))}(function(M,T){var F;if(T.length)return Or(M,(F=M,Be(T.map(function(B){return{line:B,distance:u0(F,B)}}),"distance")[0].line))}(zt(w),[[{x:(h=b).x,y:h.y},{x:h.x+(h.width||0),y:h.y}],[{x:h.x+(h.width||0),y:h.y},{x:h.x+(h.width||0),y:h.y+(h.height||0)}],[{x:h.x,y:h.y+(h.height||0)},{x:h.x+(h.width||0),y:h.y+(h.height||0)}],[{x:h.x,y:h.y},{x:h.x,y:h.y+(h.height||0)}]]),b,v);s.moveShape(w,C)}})}function Xf(r,s,c){var l=zy(r),d=Uy(l,s),h=l[0];return d.length?d[d.length-1]:Xc(h.original||h,c,s)}function Qf(r,s,c){var l=zy(r),d=Uy(l,s),h=l[l.length-1];return d.length?d[0]:Xc(h.original||h,c,s)}function Zf(r,s,c){var l=zy(r),d=m0(s,c),h=l[0];return Xc(h.original||h,d,s)}function f0(r,s,c){var l=zy(r),d=m0(s,c),h=l[l.length-1];return Xc(h.original||h,d,s)}function m0(r,s){return{x:r.x-s.x,y:r.y-s.y,width:r.width,height:r.height}}function zy(r){var s=r.waypoints;if(!s.length)throw new Error("connection#"+r.id+": no waypoints");return s}function Uy(r,s){return gt(Qn(r,g0),function(c){return"intersect"===nn(s,c,1)})}function g0(r){return r.original||r}function Wy(r,s){Ge.call(this,r),this.postExecute("shape.replace",function(c){var w,C,l=c.oldShape,d=c.newShape;if(C=d,V(w=l,"bpmn:Participant")&&qe(w)&&V(C,"bpmn:Participant")&&!qe(C)){var h,f,g,v,b=(f=wc([h=l],!1),g=[],v=[],f.forEach(function(w){w!==h&&(w.incoming.forEach(function(C){V(C,"bpmn:MessageFlow")&&g.push(C)}),w.outgoing.forEach(function(C){V(C,"bpmn:MessageFlow")&&v.push(C)}))},[]),{incoming:g,outgoing:v});b.incoming.forEach(function(w){var C=Qf(w,d,l);s.reconnectEnd(w,d,C)}),b.outgoing.forEach(function(w){var C=Xf(w,d,l);s.reconnectStart(w,d,C)})}},!0)}function Jf(r,s,c){r.on(["shape.move.rejected","create.rejected"],function(l){var d,h,g=l.context,v=g.shape;V(g.target,"bpmn:Collaboration")&&V(v,"bpmn:FlowNode")&&(d=l,h=c("flow elements must be children of pools/participants"),s.add({position:{x:d.x+5,y:d.y+5},type:"error",timeout:2e3,html:"<div>"+h+"</div>"}))})}function y0(r,s,c,l){Ge.call(this,r);var d=l.get("dragging",!1);function h(f){var g,v,b=f.source,w=f.target;f.parent&&(V(f,"bpmn:SequenceFlow")&&(c.canConnectSequenceFlow(b,w)||(v=!0),c.canConnectMessageFlow(b,w)&&(g="bpmn:MessageFlow")),V(f,"bpmn:MessageFlow")&&(c.canConnectMessageFlow(b,w)||(v=!0),c.canConnectSequenceFlow(b,w)&&(g="bpmn:SequenceFlow")),V(f,"bpmn:Association")&&!c.canConnectAssociation(b,w)&&(v=!0),v&&s.removeConnection(f),g&&s.connect(b,w,{type:g,waypoints:f.waypoints.slice()}))}this.postExecuted("elements.move",function(f){ne(f.closure.allConnections,h)},!0),this.preExecute("connection.reconnect",function(f){var g,v,T,R,F,$,B,b=f.context,w=b.connection,C=b.newSource||w.source,M=b.newTarget||w.target;(g=c.canConnect(C,M))&&g.type!==w.type&&(v=s.connect(C,M,{type:g.type,waypoints:w.waypoints.slice()}),s.removeConnection(w),b.connection=v,d&&(T=w,R=v,!(B=($=d.context())&&$.payload.previousSelection)||!B.length||-1!==(F=B.indexOf(T))&&B.splice(F,1,R)))}),this.postExecuted("element.updateProperties",function(f){var g,v=f.context,b=v.properties,w=v.element,C=w.businessObject;b.default&&(g=tn(w.outgoing,Br({id:w.businessObject.default.id})))&&s.updateProperties(g,{conditionExpression:void 0}),b.conditionExpression&&C.sourceRef.default===C&&s.updateProperties(w.source,{default:void 0})})}function v0(r,s){Ge.call(this,r),this.preExecute("shape.delete",function(c){var l=c.shape,d=l.parent;V(l,"bpmn:Participant")&&(c.collaborationRoot=d)},!0),this.postExecute("shape.delete",function(c){var l=c.collaborationRoot;l&&!l.businessObject.participants.length&&s.makeProcess()},!0)}function Gy(r,s,c,l,d,h){l.invoke(Ge,this),this._bpmnReplace=r,this._elementRegistry=c,this._selection=h,this.postExecuted(["elements.create"],500,function(f){var g=f.context,b=g.elements,w=s.canReplace(b,g.parent);w&&this.replaceElements(b,w.replacements)},this),this.postExecuted(["elements.move"],500,function(f){var g=f.context,v=g.newParent,b=g.newHost,w=[];ne(g.closure.topLevel,function(M){w=Wn(M)?w.concat(M.children):w.concat(M)}),1===w.length&&b&&(v=b);var C=s.canReplace(w,v);C&&this.replaceElements(w,C.replacements,b)},this),this.postExecute(["shape.replace"],1500,function(f){var g,v=f.context,C=v.oldShape.attachers;C&&C.length&&(g=s.canReplace(C,v.newShape),this.replaceElements(C,g.replacements))},this),this.postExecuted(["shape.replace"],1500,function(f){var g=f.context,v=g.oldShape,b=g.newShape;d.unclaimId(v.businessObject.id,v.businessObject),d.updateProperties(b,{id:v.id})})}Oe($y,Ge),$y.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],Wy.$inject=["eventBus","modeling"],Oe(Wy,Ge),Jf.$inject=["eventBus","tooltips","translate"],Oe(y0,Ge),y0.$inject=["eventBus","modeling","bpmnRules","injector"],v0.$inject=["eventBus","modeling"],Oe(v0,Ge),Oe(Gy,Ge),Gy.prototype.replaceElements=function(r,s){var c=this._elementRegistry,l=this._bpmnReplace,d=this._selection;ne(s,function(h){var f={type:h.newElementType},g=c.get(h.oldElementId),v=r.indexOf(g);r[v]=l.replaceElement(g,f,{select:!1})}),s&&d.select(r)},Gy.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var tm={width:300,height:150},Gx={width:140,height:120},qx={width:50,height:30};function Kx(r){r.on("resize.start",1500,function(s){var f,g,v,b,w,C,M,T,R,F,c=s.context,l=c.shape,d=c.direction,h=c.balanced;(V(l,"bpmn:Lane")||V(l,"bpmn:Participant"))&&(c.resizeConstraints=(g=d,v=h,b=fs(f=l),w=!0,C=!0,M=Mh(b,[b]),T=et(f),R={},F={},/e/.test(g)?F.right=T.left+300:/w/.test(g)&&(F.left=T.right-300),M.forEach(function($){var B=et($);/n/.test(g)&&(B.top<T.top-10&&(w=!1),v&&qy(T.top-B.bottom)<10&&ud(R,"top",B.top+60),qy(T.top-B.top)<5&&Uh(F,"top",B.bottom-60)),/s/.test(g)&&(B.bottom>T.bottom+10&&(C=!1),v&&qy(T.bottom-B.top)<10&&Uh(R,"bottom",B.bottom-60),qy(T.bottom-B.bottom)<5&&ud(F,"bottom",B.top+60))}),b.children.filter(function($){return!$.hidden&&!$.waypoints&&(V($,"bpmn:FlowElement")||V($,"bpmn:Artifact"))}).forEach(function($){var B=et($);w&&/n/.test(g)&&Uh(F,"top",B.top-20),/e/.test(g)&&ud(F,"right",B.right+20),C&&/s/.test(g)&&ud(F,"bottom",B.bottom+20),/w/.test(g)&&Uh(F,"left",B.left-50)}),{min:F,max:R})),V(l,"bpmn:Participant")&&(c.minDimensions=tm),V(l,"bpmn:SubProcess")&&qe(l)&&(c.minDimensions=Gx),V(l,"bpmn:TextAnnotation")&&(c.minDimensions=qx)})}Kx.$inject=["eventBus"];var qy=Math.abs,Qc=Math.min,Ky=Math.max;function _0(r,s,c,l){var d=r[s];r[s]=void 0===d?c:l(c,d)}function Uh(r,s,c){return _0(r,s,c,Qc)}function ud(r,s,c){return _0(r,s,c,Ky)}function Yy(r,s){r.on("resize.start",1501,function(c){var l=c.context,d=l.shape;(V(d,"bpmn:Lane")||V(d,"bpmn:Participant"))&&(l.balanced=!Gn(c))}),r.on("resize.end",1001,function(c){var l=c.context,d=l.shape,h=l.canExecute,f=l.newBounds;if(V(d,"bpmn:Lane")||V(d,"bpmn:Participant"))return h&&(f=Hu(f),s.resizeLane(d,f,l.balanced)),!1})}function Wh(r,s,c){Ge.call(this,r),this.preExecute("shape.delete",function(l){var v,b,w,d=l.context.shape;if(1===d.incoming.length&&1===d.outgoing.length){var h=d.incoming[0],f=d.outgoing[0];if(V(h,"bpmn:SequenceFlow")&&V(f,"bpmn:SequenceFlow")&&s.canConnect(h.source,f.target,h)){var g=(b=f.waypoints,(w=Ny(dd((v=h.waypoints)[v.length-2]),dd(v[v.length-1]),dd(b[1]),dd(b[0])))?[].concat(v.slice(0,v.length-1),[w],b.slice(1)):[dd(v[0]),dd(b[b.length-1])]);c.reconnectEnd(h,f.target,g)}}})}function dd(r){return r.original||r}Yy.$inject=["eventBus","modeling"],Oe(Wh,Ge),Wh.$inject=["eventBus","bpmnRules","modeling"];var Zc=Math.max;function Xy(r){r.on("spaceTool.getMinDimensions",function(s){var l=s.axis,d=s.start,h={};return ne(s.shapes,function(f){var g=f.id;V(f,"bpmn:Participant")&&(h[g]="x"===l?tm:{width:tm.width,height:Yx(f,d)}),V(f,"bpmn:SubProcess")&&qe(f)&&(h[g]=Gx),V(f,"bpmn:TextAnnotation")&&(h[g]=qx)}),h})}function Yx(r,s){var l,d,h;return Ka(r).length?(d=s,h=nm(Ka(l=r),d),Zc(tm.height,l.height-h.height+60)):tm.height}function nm(r,s){var c,l,d;for(c=0;c<r.length;c++)if(s>=(l=r[c]).y&&s<=l.y+l.height)return(d=Ka(l)).length?nm(d,s):l}function Qy(r,s){r.invoke(Ge,this),this.postExecuted("shape.replace",function(c){var l=c.context.oldShape,d=c.context.newShape;if(V(d,"bpmn:SubProcess")&&V(l,"bpmn:Task")&&qe(d)){var h,f={x:(h=d).x+h.width/6,y:h.y+h.height/2};s.createShape({type:"bpmn:StartEvent"},f,d)}})}function im(r,s,c,l){Ge.call(this,r),this.executed(["shape.toggleCollapse"],500,function(d){var h,f=d.context.shape;V(f,"bpmn:SubProcess")&&(f.collapsed?Se(f).di.isExpanded=!1:((h=f.children).length&&h.forEach(function(g){"label"!==g.type||g.businessObject.name||(g.hidden=!0)}),Se(f).di.isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],500,function(d){var h=d.context.shape;Se(h).di.isExpanded=!h.collapsed}),this.postExecuted(["shape.toggleCollapse"],500,function(d){var h,v,b,f=d.context.shape,g=s._getDefaultSize(f);h=f.collapsed?{x:(v=f).x+(v.width-(b=g).width)/2,y:v.y+(v.height-b.height)/2,width:b.width,height:b.height}:function(v,b){var w,C,T=b;return(w=fy((C=v.children,C.filter(function(R){return!R.hidden})).concat([v])))?(T.width=Math.max(w.width,T.width),T.height=Math.max(w.height,T.height),T.x=w.x+(w.width-T.width)/2,T.y=w.y+(w.height-T.height)/2):(T.x=v.x+(v.width-T.width)/2,T.y=v.y+(v.height-T.height)/2),T}(f,g),c.resizeShape(f,h,null,{autoResize:!f.collapsed&&"nwse"})})}function Zy(r,s,c,l){s.invoke(Ge,this),this.preExecute("shape.delete",function(d){var h=d.context.shape,f=h.businessObject;gi(h)||(V(h,"bpmn:Participant")&&qe(h)&&c.ids.unclaim(f.processRef.id),l.unclaimId(f.id,f))}),this.preExecute("connection.delete",function(d){var h=d.context.connection.businessObject;l.unclaimId(h.id,h)}),this.preExecute("canvas.updateRoot",function(){var d=r.getRootElement().businessObject;c.ids.unclaim(d.id)})}function Jy(r,s,c){var l;Ge.call(this,r);var h=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(h,5e3,function(f){(l=l||new Gh).enter()}),this.postExecuted(h,500,function(f){!function(){if(!l)throw new Error(c("out of bounds release"));l.leave()&&(s.updateLaneRefs(l.flowNodes,l.lanes),l=null)}()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(f){var g=f.context.shape,v=function(){if(!l)throw new Error(c("out of bounds release"));return l}();g.labelTarget||(V(g,"bpmn:Lane")&&v.addLane(g),V(g,"bpmn:FlowNode")&&v.addFlowNode(g))})}function Gh(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(r){this.lanes.push(r)},this.addFlowNode=function(r){this.flowNodes.push(r)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Jc(r,s){Ge.call(this,r),this.preExecute("connection.delete",function(c){var l=c.context.connection,d=l.source;(function(h,f){if(!V(h,"bpmn:SequenceFlow"))return!1;var g=Se(f),v=Se(h);return g.get("default")===v})(l,d)&&s.updateProperties(d,{default:null})})}Xy.$inject=["eventBus"],Qy.$inject=["injector","modeling"],Oe(Qy,Ge),Oe(im,Ge),im.$inject=["eventBus","elementFactory","modeling"],Oe(Zy,Ge),Zy.$inject=["canvas","injector","moddle","modeling"],Jy.$inject=["eventBus","modeling","translate"],Oe(Jy,Ge),Oe(Jc,Ge),Jc.$inject=["eventBus","modeling"];var ev={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","rootElementReferenceBehavior","createBehavior","fixHoverBehavior","createDataObjectBehavior","createParticipantBehavior","dataStoreBehavior","dataInputAssociationBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","toggleElementCollapseBehaviour","spaceToolBehavior","subProcessStartEventBehavior","unclaimIdBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior"],adaptiveLabelPositioningBehavior:["type",jf],appendBehavior:["type",Vf],associationBehavior:["type",Oh],attachEventBehavior:["type",Nh],boundaryEventBehavior:["type",cd],rootElementReferenceBehavior:["type",Hf],createBehavior:["type",Lh],fixHoverBehavior:["type",$f],createDataObjectBehavior:["type",su],createParticipantBehavior:["type",My],dataInputAssociationBehavior:["type",Wf],dataStoreBehavior:["type",Ry],deleteLaneBehavior:["type",Gf],detachEventBehavior:["type",qf],dropOnFlowBehavior:["type",$o],eventBasedGatewayBehavior:["type",Py],groupBehavior:["type",Oy],importDockingFix:["type",Fy],isHorizontalFix:["type",Ly],labelBehavior:["type",$y],messageFlowBehavior:["type",Wy],modelingFeedback:["type",Jf],replaceConnectionBehavior:["type",y0],removeParticipantBehavior:["type",v0],replaceElementBehaviour:["type",Gy],resizeBehavior:["type",Kx],resizeLaneBehavior:["type",Yy],removeElementBehavior:["type",Wh],toggleElementCollapseBehaviour:["type",im],spaceToolBehavior:["type",Xy],subProcessStartEventBehavior:["type",Qy],unclaimIdBehavior:["type",Zy],updateFlowNodeRefsBehavior:["type",Jy],unsetDefaultFlowBehavior:["type",Jc]};function au(r,s){var c=nn(r,s,-15);return"intersect"!==c?c:null}function Oi(r){Vc.call(this,r)}function el(r){return!r||gi(r)}function b0(r){do{if(V(r,"bpmn:Process"))return Se(r);if(V(r,"bpmn:Participant"))return Se(r).processRef||Se(r)}while(r=r.parent)}function rm(r){return V(r,"bpmn:TextAnnotation")}function om(r){return V(r,"bpmn:Group")&&!r.labelTarget}function qh(r){return V(r,"bpmn:BoundaryEvent")&&Uo(r,"bpmn:CompensateEventDefinition")}function tl(r){return Se(r).isForCompensation}function tv(r){for(var s=r;s=s.parent;){if(V(s,"bpmn:FlowElementsContainer"))return Se(s);if(V(s,"bpmn:Participant"))return Se(s).processRef}return null}function Uo(r,s){return!!tn(Se(r).eventDefinitions||[],function(c){return V(c,s)})}function E0(r,s){return(Se(r).eventDefinitions||[]).every(function(c){return V(c,s)})}function nv(r){return V(r,"bpmn:ReceiveTask")||V(r,"bpmn:IntermediateCatchEvent")&&(Uo(r,"bpmn:MessageEventDefinition")||Uo(r,"bpmn:TimerEventDefinition")||Uo(r,"bpmn:ConditionalEventDefinition")||Uo(r,"bpmn:SignalEventDefinition"))}function iv(r){return r.waypoints}function sm(r,s){return-1!==function(c){for(var l=[];c;)(c=c.parent)&&l.push(c);return l}(s).indexOf(r)}function Kh(r,s,c){if(el(r)||el(s))return null;if(!V(c,"bpmn:DataAssociation")){if(cm(r,s))return{type:"bpmn:MessageFlow"};if(rv(r,s))return{type:"bpmn:SequenceFlow"}}return ov(r,s)||(qh(r)&&tl(s)?{type:"bpmn:Association",associationDirection:"One"}:!!S0(r,s)&&{type:"bpmn:Association"})}function hd(r,s,c){return!(!gi(r)&&!om(r))||!(V(s,"bpmn:Participant")&&!qe(s))&&(V(r,"bpmn:Participant")?V(s,"bpmn:Process")||V(s,"bpmn:Collaboration"):un(r,["bpmn:DataInput","bpmn:DataOutput"])&&r.parent?s===r.parent:V(r,"bpmn:Lane")?V(s,"bpmn:Participant")||V(s,"bpmn:Lane"):!(V(r,"bpmn:BoundaryEvent")&&(l=r,!Se(l).cancelActivity||!x0(l)&&!xo(l)))&&(V(r,"bpmn:FlowElement")&&!V(r,"bpmn:DataStoreReference")?V(s,"bpmn:FlowElementsContainer")?qe(s):un(s,["bpmn:Participant","bpmn:Lane"]):V(r,"bpmn:DataStoreReference")&&V(s,"bpmn:Collaboration")?jt(Se(s).get("participants"),function(d){return!!d.get("processRef")}):un(r,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?un(s,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!V(r,"bpmn:MessageFlow")&&(V(s,"bpmn:Collaboration")||r.source.parent==s||r.target.parent==s)));var l}function w0(r){return V(r,"bpmn:Lane")}function x0(r){var s=Se(r);return s&&!(s.eventDefinitions&&s.eventDefinitions.length)}function xo(r){return C0(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function C0(r,s){return s.some(function(c){return Uo(r,c)})}function Yh(r,s,c,l){if(Array.isArray(r)||(r=[r]),1!==r.length)return!1;var h,d=r[0];return!gi(d)&&!!function(r){return!!function(s){return!gi(s)&&V(s,"bpmn:BoundaryEvent")}(r)||!(!V(r,"bpmn:IntermediateThrowEvent")||!x0(r))||V(r,"bpmn:IntermediateCatchEvent")&&xo(r)}(d)&&!Wn(s)&&!(!V(s,"bpmn:Activity")||tl(s))&&!(l&&!au(l,s))&&!(V(h=s,"bpmn:ReceiveTask")&&tn(h.incoming,function(f){return V(f.source,"bpmn:EventBasedGateway")}))&&"attach"}function Qx(r,s,c){if(!s)return!1;var l={replacements:[]};return ne(r,function(d){var h;Wn(s)||V(d,"bpmn:StartEvent")&&"label"!==d.type&&hd(d,s)&&((h=d)&&!1!==Se(h).isInterrupting||l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"}),(function(h){return ze(h,"bpmn:ErrorEventDefinition")}(d)||function(h){return ze(h,"bpmn:EscalationEventDefinition")}(d)||function(h){return ze(h,"bpmn:CompensateEventDefinition")}(d))&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"}),C0(d,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&V(s,"bpmn:SubProcess")&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"})),V(s,"bpmn:Transaction")||Uo(d,"bpmn:CancelEventDefinition")&&"label"!==d.type&&(V(d,"bpmn:EndEvent")&&hd(d,s)&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:EndEvent"}),V(d,"bpmn:BoundaryEvent")&&Yh(d,s,0,c)&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:BoundaryEvent"}))}),!!l.replacements.length&&l}function Zx(r,s){return!jt(r,w0)&&(!s||r.every(function(c){return hd(c,s)}))}function am(r,s,c,l){return!!s&&(!(!gi(r)&&!om(r))||c!==s&&(!c||!sm(c,s))&&(hd(r,s)||lm(r,s)))}function Jx(r,s){return V(r,"bpmn:SubProcess")?qe(r)&&(!s||s.width>=100&&s.height>=80):V(r,"bpmn:Lane")?!s||s.width>=130&&s.height>=60:V(r,"bpmn:Participant")?!s||s.width>=250&&s.height>=50:!!rm(r)||!!om(r)}function S0(r,s){return!(iv(r)||iv(s)||(!qh(r)||!tl(s))&&(sm(s,r)||sm(r,s)||(c=r,l=s,d=rm(c),h=rm(l),(!d&&!h||d===h)&&!ov(r,s))));var c,l,d,h}function cm(r,s){return!(T0(r)&&!T0(s))&&V(l=r,"bpmn:InteractionNode")&&!V(l,"bpmn:BoundaryEvent")&&(!V(l,"bpmn:Event")||V(l,"bpmn:ThrowEvent")&&E0(l,"bpmn:MessageEventDefinition"))&&V(d=s,"bpmn:InteractionNode")&&!tl(d)&&(!V(d,"bpmn:Event")||V(d,"bpmn:CatchEvent")&&E0(d,"bpmn:MessageEventDefinition"))&&!(V(d,"bpmn:BoundaryEvent")&&!Uo(d,"bpmn:MessageEventDefinition"))&&(c=s,b0(r)!==b0(c));var d,c,l}function rv(r,s){return!(nv(s)&&s.incoming.length>0&&(c=s.incoming,(c=c||[]).some(A0))&&!V(r,"bpmn:EventBasedGateway"))&&V(d=r,"bpmn:FlowNode")&&!V(d,"bpmn:EndEvent")&&!Wn(d)&&!(V(d,"bpmn:IntermediateThrowEvent")&&Uo(d,"bpmn:LinkEventDefinition"))&&!qh(d)&&!tl(d)&&V(h=s,"bpmn:FlowNode")&&!V(h,"bpmn:StartEvent")&&!V(h,"bpmn:BoundaryEvent")&&!Wn(h)&&!(V(h,"bpmn:IntermediateCatchEvent")&&Uo(h,"bpmn:LinkEventDefinition"))&&!tl(h)&&(l=s,tv(r)===tv(l))&&!(V(r,"bpmn:EventBasedGateway")&&!nv(s));var h,c,l,d}function ov(r,s){return un(r,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&un(s,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!un(s,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!un(r,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function lm(r,s,c){if(!s)return!1;if(Array.isArray(r)){if(1!==r.length)return!1;r=r[0]}return s.source!==r&&s.target!==r&&un(s,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!gi(s)&&V(r,"bpmn:FlowNode")&&!V(r,"bpmn:BoundaryEvent")&&hd(r,s.parent)}function D0(r,s){return!!gi(s)||!(V(s,"bpmn:Lane")&&(c=r,l=s.parent,!c||!l||-1===c.indexOf(l)));var c,l}function A0(r){if(r&&r.source)return V(r.source,"bpmn:EventBasedGateway")}function T0(r){return Gg(r,"bpmn:Process")||Gg(r,"bpmn:Collaboration")}Oe(Oi,Vc),Oi.$inject=["eventBus"],Oi.prototype.init=function(){this.addRule("connection.start",function(r){return function(s){return el(s)?null:un(s,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}(r.source)}),this.addRule("connection.create",function(r){var s=r.source,c=r.target,l=r.hints||{},d=l.targetParent;if(l.targetAttach)return!1;d&&(c.parent=d);try{return Kh(s,c)}finally{d&&(c.parent=null)}}),this.addRule("connection.reconnect",function(r){return Kh(r.source,r.target,r.connection)}),this.addRule("connection.updateWaypoints",function(r){return{type:r.connection.type}}),this.addRule("shape.resize",function(r){return Jx(r.shape,r.newBounds)}),this.addRule("elements.create",function(r){var s=r.elements,c=r.position,l=r.target;return!(iv(l)&&!lm(s,l))&&ur(s,function(d){return iv(d)?Kh(d.source,d.target,d):d.host?Yh(d,d.host,0,c):am(d,l,null)})}),this.addRule("elements.move",function(r){var s=r.target,c=r.shapes,l=r.position;return Yh(c,s,0,l)||Qx(c,s,l)||Zx(c,s)||lm(c,s)}),this.addRule("shape.create",function(r){return am(r.shape,r.target,r.source)}),this.addRule("shape.attach",function(r){return Yh(r.shape,r.target,0,r.position)}),this.addRule("element.copy",function(r){return D0(r.elements,r.element)})},Oi.prototype.canConnectMessageFlow=cm,Oi.prototype.canConnectSequenceFlow=rv,Oi.prototype.canConnectDataAssociation=ov,Oi.prototype.canConnectAssociation=S0,Oi.prototype.canMove=Zx,Oi.prototype.canAttach=Yh,Oi.prototype.canReplace=Qx,Oi.prototype.canDrop=hd,Oi.prototype.canInsert=lm,Oi.prototype.canCreate=am,Oi.prototype.canConnect=Kh,Oi.prototype.canResize=Jx,Oi.prototype.canCopy=D0;var M0={__depends__:[za],__init__:["bpmnRules"],bpmnRules:["type",Oi]};function R0(r,s){r.on("saveXML.start",2e3,function(){var l,d=s.getRootElement(),h=Se(d).di;l=Qn(gt(wc([d],!1),function(f){return f!==d&&!f.labelTarget}),N),h.set("planeElement",l)})}R0.$inject=["eventBus","canvas"];var eC={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",R0]};function Xh(r){Ge.call(this,r);var s=this;this.preExecute(["shape.create","connection.create"],function(c){var l=c.context,f=s.getOrdering(l.shape||l.connection,l.parent);f&&(void 0!==f.parent&&(l.parent=f.parent),l.parentIndex=f.index)}),this.preExecute(["shape.move","connection.move"],function(c){var l=c.context,d=l.shape||l.connection,f=s.getOrdering(d,l.newParent||d.parent);f&&(void 0!==f.parent&&(l.newParent=f.parent),l.newParentIndex=f.index)})}function um(r,s,c){Xh.call(this,r);var l=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:3,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function d(h){var f=h.order;if(f||(h.order=f=function(g){if(g.labelTarget)return{level:10};var v=tn(l,function(b){return un(g,[b.type])});return v&&v.order||{level:1}}(h)),!f)throw new Error("no order for <"+h.id+">");return f}this.getOrdering=function(h,f){if(h.labelTarget)return{parent:s.getRootElement(),index:-1};var g=d(h);g.containers&&(f=function(w,C,M){for(var T=C;T&&!un(T,M);)T=T.parent;if(!T)throw new Error("no parent for <"+w.id+"> in <"+(C&&C.id)+">");return T}(h,f,g.containers));var v=f.children.indexOf(h),b=function(w,C){C=Kd(C);var M=bt(w)?-1:void 0;return ne(w,function(T,R){if(C(T,R))return M=R,!1}),M}(f.children,function(w){return!(!h.labelTarget&&w.labelTarget)&&g.level<d(w).level});return-1!==b&&-1!==v&&v<b&&(b-=1),{index:b,parent:f}}}Xh.prototype.getOrdering=function(r,s){return null},Oe(Xh,Ge),um.$inject=["eventBus","canvas","translate"],Oe(um,Xh);var tC={__depends__:[Tn],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",um]};function fn(r,s){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=s,this._eventBus=r,this._uid=1,r.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}fn.$inject=["eventBus","injector"],fn.prototype.execute=function(r,s){if(!r)throw new Error("command required");this._currentExecution.trigger="execute";var c={command:r,context:s};this._pushAction(c),this._internalExecute(c),this._popAction(c)},fn.prototype.canExecute=function(r,s){var c={command:r,context:s},l=this._getHandler(r),d=this._fire(r,"canExecute",c);if(void 0===d){if(!l)return!1;l.canExecute&&(d=l.canExecute(s))}return d},fn.prototype.clear=function(r){this._stack.length=0,this._stackIdx=-1,!1!==r&&this._fire("changed",{trigger:"clear"})},fn.prototype.undo=function(){var r,s=this._getUndoAction();if(s){for(this._currentExecution.trigger="undo",this._pushAction(s);s&&(this._internalUndo(s),(r=this._getUndoAction())&&r.id===s.id);)s=r;this._popAction()}},fn.prototype.redo=function(){var r,s=this._getRedoAction();if(s){for(this._currentExecution.trigger="redo",this._pushAction(s);s&&(this._internalExecute(s,!0),(r=this._getRedoAction())&&r.id===s.id);)s=r;this._popAction()}},fn.prototype.register=function(r,s){this._setHandler(r,s)},fn.prototype.registerHandler=function(r,s){if(!r||!s)throw new Error("command and handlerCls must be defined");var c=this._injector.instantiate(s);this.register(r,c)},fn.prototype.canUndo=function(){return!!this._getUndoAction()},fn.prototype.canRedo=function(){return!!this._getRedoAction()},fn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},fn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},fn.prototype._internalUndo=function(r){var s=this,c=r.command,l=r.context,d=this._getHandler(c);this._atomicDo(function(){s._fire(c,"revert",r),d.revert&&s._markDirty(d.revert(l)),s._revertedAction(r),s._fire(c,"reverted",r)})},fn.prototype._fire=function(r,s,c){arguments.length<3&&(c=s,s=null);var l,d,h,f=s?[r+"."+s,s]:[r];for(c=this._eventBus.createEvent(c),l=0;(d=f[l])&&(h=this._eventBus.fire("commandStack."+d,c),!c.cancelBubble);l++);return h},fn.prototype._createId=function(){return this._uid++},fn.prototype._atomicDo=function(r){var s=this._currentExecution;s.atomic=!0;try{r()}finally{s.atomic=!1}},fn.prototype._internalExecute=function(r,s){var c=this,l=r.command,d=r.context,h=this._getHandler(l);if(!h)throw new Error("no command handler registered for <"+l+">");this._pushAction(r),s||(this._fire(l,"preExecute",r),h.preExecute&&h.preExecute(d),this._fire(l,"preExecuted",r)),this._atomicDo(function(){c._fire(l,"execute",r),h.execute&&c._markDirty(h.execute(d)),c._executedAction(r,s),c._fire(l,"executed",r)}),s||(this._fire(l,"postExecute",r),h.postExecute&&h.postExecute(d),this._fire(l,"postExecuted",r)),this._popAction(r)},fn.prototype._pushAction=function(r){var s=this._currentExecution,c=s.actions,l=c[0];if(s.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+r.command+")");r.id||(r.id=l&&l.id||this._createId()),c.push(r)},fn.prototype._popAction=function(){var r=this._currentExecution,s=r.trigger,c=r.actions,l=r.dirty;c.pop(),c.length||(this._eventBus.fire("elements.changed",{elements:zp("id",l.reverse())}),l.length=0,this._fire("changed",{trigger:s}),r.trigger=null)},fn.prototype._markDirty=function(r){var s=this._currentExecution;r&&(r=bt(r)?r:[r],s.dirty=s.dirty.concat(r))},fn.prototype._executedAction=function(r,s){var c=++this._stackIdx;s||this._stack.splice(c,this._stack.length,r)},fn.prototype._revertedAction=function(r){this._stackIdx--},fn.prototype._getHandler=function(r){return this._handlerMap[r]},fn.prototype._setHandler=function(r,s){if(!r||!s)throw new Error("command and handler required");if(this._handlerMap[r])throw new Error("overriding handler for command <"+r+">");this._handlerMap[r]=s};var sv={commandStack:["type",fn]},nC=new jg("tt");function av(r,s){r.style.display=!1===s?"none":""}var k0=".djs-tooltip";function Xr(r,s){var c,l;this._eventBus=r,this._canvas=s,this._ids=nC,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(c=s.getContainer(),l=ke('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />'),c.insertBefore(l,c.firstChild),l);var d=this;vt_bind(this._tooltipRoot,k0,"mousedown",function(h){h.stopPropagation()}),vt_bind(this._tooltipRoot,k0,"mouseover",function(h){d.trigger("mouseover",h)}),vt_bind(this._tooltipRoot,k0,"mouseout",function(h){d.trigger("mouseout",h)}),this._init()}Xr.$inject=["eventBus","canvas"],Xr.prototype.add=function(r){if(!r.position)throw new Error("must specifiy tooltip position");if(!r.html)throw new Error("must specifiy tooltip html");var s=this._ids.next();return r=oe({},this._tooltipDefaults,r,{id:s}),this._addTooltip(r),r.timeout&&this.setTimeout(r),s},Xr.prototype.trigger=function(r,s){var l=this.get(jr(s.delegateTarget||s.target,"data-tooltip-id"));l&&("mouseover"===r&&l.timeout&&this.clearTimeout(l),"mouseout"===r&&l.timeout&&(l.timeout=1e3,this.setTimeout(l)))},Xr.prototype.get=function(r){return"string"!=typeof r&&(r=r.id),this._tooltips[r]},Xr.prototype.clearTimeout=function(r){if(r=this.get(r)){var s=r.removeTimer;s&&(clearTimeout(s),r.removeTimer=null)}},Xr.prototype.setTimeout=function(r){if(r=this.get(r)){this.clearTimeout(r);var s=this;r.removeTimer=setTimeout(function(){s.remove(r)},r.timeout)}},Xr.prototype.remove=function(r){var s=this.get(r);s&&(As(s.html),As(s.htmlContainer),delete s.htmlContainer,delete this._tooltips[s.id])},Xr.prototype.show=function(){av(this._tooltipRoot)},Xr.prototype.hide=function(){av(this._tooltipRoot,!1)},Xr.prototype._updateRoot=function(r){var s=r.scale||1,c=r.scale||1,l="matrix("+s+",0,0,"+c+","+-1*r.x*s+","+-1*r.y*c+")";this._tooltipRoot.style.transform=l,this._tooltipRoot.style["-ms-transform"]=l},Xr.prototype._addTooltip=function(r){var s,c=r.id,l=r.html,d=this._tooltipRoot;l.get&&l.constructor.prototype.jquery&&(l=l.get(0)),Lr(l)&&(l=ke(l)),(s=ke('<div data-tooltip-id="'+c+'" class="djs-tooltip" style="position: absolute">')).appendChild(l),r.type&&Yi(s).add("djs-tooltip-"+r.type),r.className&&Yi(s).add(r.className),r.htmlContainer=s,d.appendChild(s),this._tooltips[c]=r,this._updateTooltip(r)},Xr.prototype._updateTooltip=function(r){var d=r.position;oe(r.htmlContainer.style,{left:d.x+"px",top:d.y+"px"})},Xr.prototype._updateTooltipVisibilty=function(r){ne(this._tooltips,function(s){var c=s.show,d=!0;c&&((c.minZoom>r.scale||c.maxZoom<r.scale)&&(d=!1),av(s.htmlContainer,d))})},Xr.prototype._init=function(){var r=this;this._eventBus.on("canvas.viewbox.changing",function(s){r.hide()}),this._eventBus.on("canvas.viewbox.changed",function(s){var c;r._updateRoot(c=s.viewbox),r._updateTooltipVisibilty(c),r.show()})};var iC={__init__:["tooltips"],tooltips:["type",Xr]};function pd(r,s){if("function"!=typeof s)throw new Error("removeFn iterator must be a function");if(r){for(var c;c=r[0];)s(c);return r}}function cv(r,s,c){Ge.call(this,s);var l=r.get("movePreview",!1);s.on("shape.move.start",1400,function(d){var h=d.context,g=h.validatedShapes;h.shapes=dm(h.shapes),h.validatedShapes=dm(g)}),l&&s.on("shape.move.start",250,function(d){var h=d.context,g=[];ne(h.shapes,function(v){ne(v.labels,function(b){b.hidden||-1!==h.shapes.indexOf(b)||g.push(b),v.labelTarget&&g.push(v)})}),ne(g,function(v){l.makeDraggable(h,v,!0)})}),this.preExecuted("elements.move",1400,function(d){var h=d.context.closure,f=h.enclosedElements,g=[];ne(f,function(v){ne(v.labels,function(b){f[b.id]||g.push(b)})}),h.addAll(g)}),this.preExecute(["connection.delete","shape.delete"],function(d){var h=d.context;pd((h.connection||h.shape).labels,function(f){c.removeShape(f,{nested:!0})})}),this.execute("shape.delete",function(d){var h=d.context,f=h.shape,g=f.labelTarget;g&&(h.labelTargetIndex=Bi(g.labels,f),h.labelTarget=g,f.labelTarget=null)}),this.revert("shape.delete",function(d){var h=d.context,f=h.shape,g=h.labelTarget;g&&(Je(g.labels,f,h.labelTargetIndex),f.labelTarget=g)})}function dm(r){return gt(r,function(s){return-1===r.indexOf(s.labelTarget)})}Oe(cv,Ge),cv.$inject=["injector","eventBus","modeling"];var rC={__init__:["labelSupport"],labelSupport:["type",cv]},P0="attach-ok";function fd(r,s,c,l,d){Ge.call(this,s);var h=r.get("movePreview",!1);s.on("shape.move.start",1401,function(f){var g,v,M,T,b=f.context,C=b.validatedShapes;b.shapes=(v=Qh(g=b.shapes),Gd("id",g,v)),b.validatedShapes=(T=pn(M=C,"id"),gt(M,function(R){for(;R;){if(R.host&&T[R.host.id])return!1;R=R.parent}return!0}))}),h&&s.on("shape.move.start",251,function(f){var g=f.context;ne(Qh(g.shapes),function(v){h.makeDraggable(g,v,!0),ne(v.labels,function(b){h.makeDraggable(g,b,!0)})})}),h&&s.on("shape.move.start",function(f){var g=f.context.shapes;if(1===g.length){var v=g[0].host;v&&(c.addMarker(v,P0),s.once(["shape.move.out","shape.move.cleanup"],function(){c.removeMarker(v,P0)}))}}),this.preExecuted("elements.move",1401,function(f){var g=f.context,v=g.closure;ne(Qh(g.shapes),function(b){v.add(b,v.topLevel[b.host.id])})}),this.postExecuted("elements.move",function(f){var g=f.context,v=g.shapes,b=g.newHost;b&&1!==v.length||ne(b?v:gt(v,function(w){return!!w.host&&-1===v.indexOf(w.host)}),function(w){d.updateAttachment(w,b)})}),this.postExecuted("elements.move",function(f){ne(f.context.shapes,function(g){ne(g.attachers,function(v){ne(v.outgoing.slice(),function(b){l.allowed("connection.reconnect",{connection:b,source:b.source,target:b.target})||d.removeConnection(b)}),ne(v.incoming.slice(),function(b){l.allowed("connection.reconnect",{connection:b,source:b.source,target:b.target})||d.removeConnection(b)})})})}),this.postExecute("shape.create",function(f){var g=f.context,b=g.host;b&&d.updateAttachment(g.shape,b)}),this.postExecute("shape.replace",function(f){var g=f.context,v=g.oldShape,b=g.newShape;pd(v.attachers,function(w){"attach"===l.allowed("elements.move",{target:b,shapes:[w]})?d.updateAttachment(w,b):d.removeShape(w)}),b.attachers.length&&ne(b.attachers,function(w){var C=Yf(w,v,b);d.moveShape(w,C,w.parent)})}),this.postExecute("shape.resize",function(f){var g=f.context,b=g.oldBounds,w=g.newBounds;!1!==(g.hints||{}).attachSupport&&ne(g.shape.attachers,function(M){var T=Yf(M,b,w);d.moveShape(M,T,M.parent),ne(M.labels,function(R){d.moveShape(R,T,R.parent)})})}),this.preExecute("shape.delete",function(f){var g=f.context.shape;pd(g.attachers,function(v){d.removeShape(v)}),g.host&&d.updateAttachment(g,null)})}function Qh(r){return Ar(Qn(r,function(s){return s.attachers||[]}))}Oe(fd,Ge),fd.$inject=["injector","eventBus","canvas","rules","modeling"];var oC={__depends__:[za],__init__:["attachSupport"],attachSupport:["type",fd]};function Za(r,s){this._eventBus=r,this._dragging=s,this._tools=[],this._active=null}Za.$inject=["eventBus","dragging"],Za.prototype.registerTool=function(r,s){var c=this._tools;if(!s)throw new Error('A tool has to be registered with it\'s "events"');c.push(r),this.bindEvents(r,s)},Za.prototype.isActive=function(r){return r&&this._active===r},Za.prototype.length=function(r){return this._tools.length},Za.prototype.setActive=function(r){var s=this._eventBus;this._active!==r&&(this._active=r,s.fire("tool-manager.update",{tool:r}))},Za.prototype.bindEvents=function(r,s){var c=this._eventBus,l=this._dragging,d=[];c.on(s.tool+".init",function(h){if(!h.context.reactivate&&this.isActive(r))return this.setActive(null),void l.cancel();this.setActive(r)},this),ne(s,function(h){d.push(h+".ended"),d.push(h+".canceled")}),c.on(d,250,function(h){var f,g;this._active&&((g=(f=h).originalEvent&&f.originalEvent.target)&&ko(g,'.group[data-group="tools"]')||this.setActive(null))},this)};var md={__depends__:[zc],__init__:["toolManager"],toolManager:["type",Za]};function gd(r,s){return-1!==r.indexOf(s)}var lv=Math.abs,sC=Math.round,js={x:"width",y:"height"},aC="crosshair",hm={n:"top",w:"left",s:"bottom",e:"right"},uv={n:"s",w:"e",s:"n",e:"w"};function ha(r,s,c,l,d,h,f){this._canvas=r,this._dragging=s,this._eventBus=c,this._modeling=l,this._rules=d,this._toolManager=h,this._mouse=f;var g=this;h.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),c.on("spaceTool.selection.end",function(v){c.once("spaceTool.selection.ended",function(){g.activateMakeSpace(v.originalEvent)})}),c.on("spaceTool.move",1500,function(v){var b=v.context,w=b.initialized;w||(w=b.initialized=g.init(v,b)),w&&hv(v)}),c.on("spaceTool.end",function(v){var b=v.context,w=b.axis,C=b.direction,M=b.movingShapes,T=b.resizingShapes,R=b.start;if(b.initialized){hv(v);var F={x:0,y:0};F[w]=sC(v["d"+w]),g.makeSpace(M,T,F,C,R),c.once("spaceTool.ended",function($){g.activateSelection($.originalEvent,!0,!0)})}})}function dv(r){return{top:r.top-20,right:r.right+20,bottom:r.bottom+20,left:r.left-20}}function hv(r){var s,c,l=r.context.spaceToolConstraints;l&&(Re(l.left)&&(s=Math.max(r.x,l.left),r.dx=r.dx+s-r.x,r.x=s),Re(l.right)&&(s=Math.min(r.x,l.right),r.dx=r.dx+s-r.x,r.x=s),Re(l.top)&&(c=Math.max(r.y,l.top),r.dy=r.dy+c-r.y,r.y=c),Re(l.bottom)&&(c=Math.min(r.y,l.bottom),r.dy=r.dy+c-r.y,r.y=c))}function pm(r,s){return-1!==r.indexOf(s)}function Vs(r){return!!r.waypoints}function Zh(r){return!!r.labelTarget}ha.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],ha.prototype.activateSelection=function(r,s,c){this._dragging.init(r,"spaceTool.selection",{autoActivate:s,cursor:aC,data:{context:{reactivate:c}},trapClick:!1})},ha.prototype.activateMakeSpace=function(r){this._dragging.init(r,"spaceTool",{autoActivate:!0,cursor:aC,data:{context:{}}})},ha.prototype.makeSpace=function(r,s,c,l,d){return this._modeling.createSpace(r,s,c,l,d)},ha.prototype.init=function(r,s){var c=lv(r.dx)>lv(r.dy)?"x":"y",l=r["d"+c],d=r[c]-l;if(lv(l)<5)return!1;l<0&&(l*=-1),Gn(r)&&(l*=-1);var h=function(v,b){if("x"===v){if(b>0)return"e";if(b<0)return"w"}if("y"===v){if(b>0)return"s";if(b<0)return"n"}return null}(c,l),f=wc(this._canvas.getRootElement(),!0),g=this.calculateAdjustments(f,c,l,d);return oe(s,g,{axis:c,direction:h,spaceToolConstraints:function(v,b,w,C,M){var T=v.movingShapes,R=v.resizingShapes;if(R.length){var F,$,B={};return ne(R,function(z){var j,K,ce,J=et(z),be=gt(z.children,function(it){return!(Vs(it)||Zh(it)||pm(T,it)||pm(R,it))}),pe=gt(z.children,function(it){return!Vs(it)&&!Zh(it)&&pm(T,it)});be.length&&(K=dv(et(pi(be))),j=C-J[hm[w]]+K[hm[w]],"n"===w?B.bottom=$=Re($)?Math.min($,j):j:"w"===w?B.right=$=Re($)?Math.min($,j):j:"s"===w?B.top=F=Re(F)?Math.max(F,j):j:"e"===w&&(B.left=F=Re(F)?Math.max(F,j):j)),pe.length&&(ce=dv(et(pi(pe))),j=C-ce[hm[uv[w]]]+J[hm[uv[w]]],"n"===w?B.bottom=$=Re($)?Math.min($,j):j:"w"===w?B.right=$=Re($)?Math.min($,j):j:"s"===w?B.top=F=Re(F)?Math.max(F,j):j:"e"===w&&(B.left=F=Re(F)?Math.max(F,j):j));var Ee=M&&M[z.id];Ee&&("n"===w?(j=C+z[js[b]]-Ee[js[b]],B.bottom=$=Re($)?Math.min($,j):j):"w"===w?(j=C+z[js[b]]-Ee[js[b]],B.right=$=Re($)?Math.min($,j):j):"s"===w?(j=C-z[js[b]]+Ee[js[b]],B.top=F=Re(F)?Math.max(F,j):j):"e"===w&&(j=C-z[js[b]]+Ee[js[b]],B.left=F=Re(F)?Math.max(F,j):j))}),B}}(g,c,h,d,this._eventBus.fire("spaceTool.getMinDimensions",{axis:c,direction:h,shapes:g.resizingShapes,start:d})),start:d}),Nc("resize-"+("x"===c?"ew":"ns")),!0},ha.prototype.calculateAdjustments=function(r,s,c,l){var d=this._rules,h=[],f=[];return ne(r,function(g){if(g.parent&&!Vs(g)){var v=g[s],b=v+g[js[s]];return c>0&&v>l||c<0&&b<l?h.push(g):v<l&&b>l&&d.allowed("shape.resize",{shape:g})?f.push(g):void 0}}),{movingShapes:h,resizingShapes:f}},ha.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var r=this._mouse.getLastMoveEvent();this.activateSelection(r,!!r)},ha.prototype.isActive=function(){var r=this._dragging.context();return r&&/^spaceTool/.test(r.prefix)};var pv="djs-dragging",I0="djs-resizing",fv=Math.max;function cu(r,s,c,l,d){function h(f,g){ne(f,function(v){d.addDragger(v,g),c.addMarker(v,pv)})}r.on("spaceTool.selection.start",function(f){var g=c.getLayer("space"),v=f.context,C=st("g");Ne(C,l.cls("djs-crosshair-group",["no-events"])),ut(g,C);var M=st("path");Ne(M,"d","M 0,-10000 L 0,10000"),$t(M).add("djs-crosshair"),ut(C,M);var T=st("path");Ne(T,"d","M -10000,0 L 10000,0"),$t(T).add("djs-crosshair"),ut(C,T),v.crosshairGroup=C}),r.on("spaceTool.selection.move",function(f){Ei(f.context.crosshairGroup,f.x,f.y)}),r.on("spaceTool.selection.cleanup",function(f){var g=f.context.crosshairGroup;g&&ri(g)}),r.on("spaceTool.move",250,function(f){var g=f.context,v=g.line,b=g.axis,w=g.movingShapes,C=g.resizingShapes;if(g.initialized){if(!g.dragGroup){var M=c.getLayer("space");Ne(v=st("path"),"d","M0,0 L0,0"),$t(v).add("djs-crosshair"),ut(M,v),g.line=v;var T=st("g");Ne(T,l.cls("djs-drag-group",["no-events"])),ut(c.getActiveLayer(),T),h(w,T),h(g.movingConnections=s.filter(function(B){var z=!1;ne(w,function(J){ne(J.outgoing,function(be){B===be&&(z=!0)})});var j=!1;ne(w,function(J){ne(J.incoming,function(be){B===be&&(j=!0)})});var K=!1;ne(C,function(J){ne(J.outgoing,function(be){B===be&&(K=!0)})});var ce=!1;return ne(C,function(J){ne(J.incoming,function(be){B===be&&(ce=!0)})}),B.waypoints&&(z||K)&&(j||ce)}),T),g.dragGroup=T}if(!g.frameGroup){var R=st("g");Ne(R,l.cls("djs-frame-group",["no-events"])),ut(c.getActiveLayer(),R);var F=[];ne(C,function(B){var z=d.addFrame(B,R),j=z.getBBox();F.push({element:z,initialBounds:j}),c.addMarker(B,I0)}),g.frameGroup=R,g.frames=F}Ne(v,{d:{x:"M"+f.x+", -10000 L"+f.x+", 10000",y:"M -10000, "+f.y+" L 10000, "+f.y}[b]});var $={x:f.dx,y:f.dy};$[{x:"y",y:"x"}[g.axis]]=0,Ei(g.dragGroup,$.x,$.y),ne(g.frames,function(B){var z,j,K=B.element,ce=B.initialBounds;Ne(K,"e"===g.direction?{width:fv(ce.width+$.x,5)}:{width:z=fv(ce.width-$.x,5),x:ce.x+ce.width-z}),Ne(K,"s"===g.direction?{height:fv(ce.height+$.y,5)}:{height:j=fv(ce.height-$.y,5),y:ce.y+ce.height-j})})}}),r.on("spaceTool.cleanup",function(f){var g=f.context,b=g.movingConnections,w=g.resizingShapes,C=g.line,M=g.dragGroup,T=g.frameGroup;ne(g.movingShapes,function(R){c.removeMarker(R,pv)}),ne(b,function(R){c.removeMarker(R,pv)}),M&&(ri(C),ri(M)),ne(w,function(R){c.removeMarker(R,I0)}),T&&ri(T)})}cu.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var mv={__init__:["spaceToolPreview"],__depends__:[zc,za,md,Eo,id],spaceTool:["type",ha],spaceToolPreview:["type",cu]};function Qr(r){this._model=r}function _r(r,s,c,l){Ge.call(this,r),this._bpmnFactory=s,this._translate=l;var d=this;function h(w){ne(w.context.oldRoot.children,function(C){V(C,"bpmn:BaseElement")&&d.updateParent(C)})}function f(w){var C=w.context.shape;V(C,"bpmn:BaseElement")&&d.updateBounds(C)}function g(w){d.updateConnection(w.context)}function v(w){d.updateConnectionWaypoints(w.context.connection)}function b(w){d.updateAttachment(w.context)}this.executed(["connection.layout","connection.create"],function(w){var C,M=w.context;M.cropped||!1===(M.hints||{}).createElementsBehavior||((C=M.connection).waypoints=c.getCroppedWaypoints(C),M.cropped=!0)}),this.reverted(["connection.layout"],function(w){delete w.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],vs(function(w){var C=w.context;d.updateParent(C.shape||C.connection,C.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],vs(function(w){var C=w.context;d.updateParent(C.shape||C.connection,C.parent||C.newParent)})),this.executed(["canvas.updateRoot"],h),this.reverted(["canvas.updateRoot"],h),this.executed(["shape.move","shape.create","shape.resize"],vs(function(w){"label"!==w.context.shape.type&&f(w)})),this.reverted(["shape.move","shape.create","shape.resize"],vs(function(w){"label"!==w.context.shape.type&&f(w)})),r.on("shape.changed",function(w){"label"===w.element.type&&f({context:{shape:w.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],vs(g)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],vs(g)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],vs(v)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],vs(v)),this.executed("connection.reconnect",vs(function(w){var C=w.context,T=C.oldSource,R=C.newSource,F=Se(C.connection),$=Se(T),B=Se(R);F.conditionExpression&&!un(B,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(C.oldConditionExpression=F.conditionExpression,delete F.conditionExpression),T!==R&&$.default===F&&(C.oldDefault=$.default,delete $.default)})),this.reverted("connection.reconnect",vs(function(w){var C=w.context,T=C.oldSource,R=C.newSource,F=Se(C.connection),$=Se(T),B=Se(R);C.oldConditionExpression&&(F.conditionExpression=C.oldConditionExpression),C.oldDefault&&($.default=C.oldDefault,delete B.default)})),this.executed(["element.updateAttachment"],vs(b)),this.reverted(["element.updateAttachment"],vs(b))}function vs(r){return function(s){var c=s.context;V(c.shape||c.connection,"bpmn:BaseElement")&&r(s)}}function pa(r,s,c){In.call(this),this._bpmnFactory=r,this._moddle=s,this._translate=c}function gv(r,s,c){r[c]=s[c],delete s[c]}function fm(r,s){this._modeling=r,this._canvas=s}function Jh(r){this._modeling=r}function mm(r,s){this._canvas=r,this._layouter=s}Qr.$inject=["moddle"],Qr.prototype._needsId=function(r){return un(r,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},Qr.prototype._ensureId=function(r){var s;s=V(r,"bpmn:Activity")?"Activity":V(r,"bpmn:Event")?"Event":V(r,"bpmn:Gateway")?"Gateway":un(r,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(r.$type||"").replace(/^[^:]*:/g,""),s+="_",!r.id&&this._needsId(r)&&(r.id=this._model.ids.nextPrefixed(s,r))},Qr.prototype.create=function(r,s){var c=this._model.create(r,s||{});return this._ensureId(c),c},Qr.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},Qr.prototype.createDiShape=function(r,s,c){return this.create("bpmndi:BPMNShape",oe({bpmnElement:r,bounds:this.createDiBounds(s)},c))},Qr.prototype.createDiBounds=function(r){return this.create("dc:Bounds",r)},Qr.prototype.createDiWaypoints=function(r){var s=this;return Qn(r,function(c){return s.createDiWaypoint(c)})},Qr.prototype.createDiWaypoint=function(r){return this.create("dc:Point",Pt(r,["x","y"]))},Qr.prototype.createDiEdge=function(r,s,c){return this.create("bpmndi:BPMNEdge",oe({bpmnElement:r},c))},Qr.prototype.createDiPlane=function(r){return this.create("bpmndi:BPMNPlane",{bpmnElement:r})},Oe(_r,Ge),_r.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],_r.prototype.updateAttachment=function(r){var s=r.shape,l=s.host;s.businessObject.attachedToRef=l&&l.businessObject},_r.prototype.updateParent=function(r,s){if(!(r instanceof bi||V(r,"bpmn:DataStoreReference")&&r.parent&&V(r.parent,"bpmn:Collaboration"))){var c=r.parent,l=r.businessObject,d=c&&c.businessObject,h=d&&d.di;V(r,"bpmn:FlowNode")&&this.updateFlowNodeRefs(l,d,s&&s.businessObject),V(r,"bpmn:DataOutputAssociation")&&(d=r.source?r.source.businessObject:null),V(r,"bpmn:DataInputAssociation")&&(d=r.target?r.target.businessObject:null),this.updateSemanticParent(l,d),V(r,"bpmn:DataObjectReference")&&l.dataObjectRef&&this.updateSemanticParent(l.dataObjectRef,d),this.updateDiParent(l.di,h)}},_r.prototype.updateBounds=function(r){var s=r.businessObject.di,c=r instanceof bi?this._getLabel(s):s,l=c.bounds;l||(l=this._bpmnFactory.createDiBounds(),c.set("bounds",l)),oe(l,{x:r.x,y:r.y,width:r.width,height:r.height})},_r.prototype.updateFlowNodeRefs=function(r,s,c){c!==s&&(V(c,"bpmn:Lane")&&Kn(c.get("flowNodeRef"),r),V(s,"bpmn:Lane")&&Je(s.get("flowNodeRef"),r))},_r.prototype.updateDiConnection=function(r,s,c){r.sourceElement&&r.sourceElement.bpmnElement!==s&&(r.sourceElement=s&&s.di),r.targetElement&&r.targetElement.bpmnElement!==c&&(r.targetElement=c&&c.di)},_r.prototype.updateDiParent=function(r,s){if(s&&!V(s,"bpmndi:BPMNPlane")&&(s=s.$parent),r.$parent!==s){var c=(s||r.$parent).get("planeElement");s?(c.push(r),r.$parent=s):(Kn(c,r),r.$parent=null)}},_r.prototype.getLaneSet=function(r){var s,c;return V(r,"bpmn:Lane")?((s=r.childLaneSet)||(s=this._bpmnFactory.create("bpmn:LaneSet"),r.childLaneSet=s,s.$parent=r),s):(V(r,"bpmn:Participant")&&(r=r.processRef),(s=(c=r.get("laneSets"))[0])||((s=this._bpmnFactory.create("bpmn:LaneSet")).$parent=r,c.push(s)),s)},_r.prototype.updateSemanticParent=function(r,s,c){var l,d=this._translate;if(r.$parent!==s&&(!V(r,"bpmn:DataInput")&&!V(r,"bpmn:DataOutput")||(V(s,"bpmn:Participant")&&"processRef"in s&&(s=s.processRef),!("ioSpecification"in s)||s.ioSpecification!==r.$parent))){if(V(r,"bpmn:Lane"))s&&(s=this.getLaneSet(s)),l="lanes";else if(V(r,"bpmn:FlowElement")){if(s)if(V(s,"bpmn:Participant"))s=s.processRef;else if(V(s,"bpmn:Lane"))do{s=s.$parent.$parent}while(V(s,"bpmn:Lane"));l="flowElements"}else if(V(r,"bpmn:Artifact")){for(;s&&!V(s,"bpmn:Process")&&!V(s,"bpmn:SubProcess")&&!V(s,"bpmn:Collaboration");){if(V(s,"bpmn:Participant")){s=s.processRef;break}s=s.$parent}l="artifacts"}else if(V(r,"bpmn:MessageFlow"))l="messageFlows";else if(V(r,"bpmn:Participant")){l="participants";var h,f=r.processRef;f&&(h=function(b){for(;b&&!V(b,"bpmn:Definitions");)b=b.$parent;return b}(r.$parent||s),r.$parent&&(Kn(h.get("rootElements"),f),f.$parent=null),s&&(Je(h.get("rootElements"),f),f.$parent=h))}else V(r,"bpmn:DataOutputAssociation")?l="dataOutputAssociations":V(r,"bpmn:DataInputAssociation")&&(l="dataInputAssociations");if(!l)throw new Error(d("no parent for {element} in {parent}",{element:r.id,parent:s.id}));var g;if(r.$parent&&Kn(g=r.$parent.get(l),r),s?((g=s.get(l)).push(r),r.$parent=s):r.$parent=null,c){var v=c.get(l);Kn(g,r),s&&(v||s.set(l,v=[]),v.push(r))}}},_r.prototype.updateConnectionWaypoints=function(r){r.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(r.waypoints))},_r.prototype.updateConnection=function(r){var c=r.connection,l=Se(c),d=Se(c.source),h=Se(c.target);if(V(l,"bpmn:DataAssociation"))V(l,"bpmn:DataInputAssociation")?(l.get("sourceRef")[0]=d,this.updateSemanticParent(l,h,r.parent||r.newParent||h)):V(l,"bpmn:DataOutputAssociation")&&(this.updateSemanticParent(l,d,r.parent||r.newParent||d),l.targetRef=h);else{var f=V(l,"bpmn:SequenceFlow");l.sourceRef!==d&&(f&&(Kn(l.sourceRef&&l.sourceRef.get("outgoing"),l),d&&d.get("outgoing")&&d.get("outgoing").push(l)),l.sourceRef=d),l.targetRef!==h&&(f&&(Kn(l.targetRef&&l.targetRef.get("incoming"),l),h&&h.get("incoming")&&h.get("incoming").push(l)),l.targetRef=h)}this.updateConnectionWaypoints(c),this.updateDiConnection(l.di,d,h)},_r.prototype._getLabel=function(r){return r.label||(r.label=this._bpmnFactory.createDiLabel()),r.label},Oe(pa,In),pa.$inject=["bpmnFactory","moddle","translate"],pa.prototype.baseCreate=In.prototype.create,pa.prototype.create=function(r,s){return"label"===r?this.baseCreate(r,oe({type:"label"},ir,s)):this.createBpmnElement(r,s)},pa.prototype.createBpmnElement=function(r,s){var c,l,d,g,v,f=(s=s||{}).businessObject;if(!f){if(!s.type)throw new Error((0,this._translate)("no shape type specified"));f=this._bpmnFactory.create(s.type)}return f.di||(f.di="root"===r?this._bpmnFactory.createDiPlane(f,[],{id:f.id+"_di"}):"connection"===r?this._bpmnFactory.createDiEdge(f,[],{id:f.id+"_di"}):this._bpmnFactory.createDiShape(f,{},{id:f.id+"_di"})),V(f,"bpmn:Group")&&(s=oe({isFrame:!0},s)),s.di&&(oe(f.di,s.di),delete s.di),g=f,v=s,ne(["processRef","isInterrupting","associationDirection","isForCompensation"],function(w){void 0!==v[w]&&gv(g,v,w)}),s.isExpanded&&gv(f.di,s,"isExpanded"),V(f,"bpmn:ExclusiveGateway")&&(f.di.isMarkerVisible=!0),s.eventDefinitionType&&(l=f.get("eventDefinitions")||[],d=this._bpmnFactory.create(s.eventDefinitionType,s.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===s.eventDefinitionType&&(d.condition=this._bpmnFactory.create("bpmn:FormalExpression")),l.push(d),d.$parent=f,f.eventDefinitions=l,delete s.eventDefinitionType),c=this._getDefaultSize(f),s=oe({businessObject:f,id:f.id},c,s),this.baseCreate(r,s)},pa.prototype._getDefaultSize=function(r){return V(r,"bpmn:SubProcess")?qe(r)?{width:350,height:200}:{width:100,height:80}:V(r,"bpmn:Task")?{width:100,height:80}:V(r,"bpmn:Gateway")?{width:50,height:50}:V(r,"bpmn:Event")?{width:36,height:36}:V(r,"bpmn:Participant")?qe(r)?{width:600,height:250}:{width:400,height:60}:V(r,"bpmn:Lane")?{width:400,height:100}:V(r,"bpmn:DataObjectReference")?{width:36,height:50}:V(r,"bpmn:DataStoreReference")?{width:50,height:50}:V(r,"bpmn:TextAnnotation")?{width:100,height:30}:V(r,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},pa.prototype.createParticipantShape=function(r){return Xn(r)||(r={isExpanded:r}),!1!==(r=oe({type:"bpmn:Participant"},r||{})).isExpanded&&(r.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(r)},fm.$inject=["modeling","canvas"],fm.prototype.preExecute=function(r){var s=this._modeling,l=r.alignment;ne(r.elements,function(d){var h={x:0,y:0};l.left?h.x=l.left-d.x:l.right?h.x=l.right-d.width-d.x:l.center?h.x=l.center-Math.round(d.width/2)-d.x:l.top?h.y=l.top-d.y:l.bottom?h.y=l.bottom-d.height-d.y:l.middle&&(h.y=l.middle-Math.round(d.height/2)-d.y),s.moveElements([d],h,d.parent)})},fm.prototype.postExecute=function(r){},Jh.$inject=["modeling"],Jh.prototype.preExecute=function(r){var s=r.source;if(!s)throw new Error("source required");var l=r.shape;l=r.shape=this._modeling.createShape(l,r.position,r.target||s.parent,{attach:(r.hints||{}).attach}),r.shape=l},Jh.prototype.postExecute=function(r){var c,l=r.hints||{};c=r.shape,jt(r.source.outgoing,function(d){return d.target===c})||(l.connectionTarget===r.source?this._modeling.connect(r.shape,r.source,r.connection):this._modeling.connect(r.source,r.shape,r.connection))},mm.$inject=["canvas","layouter"],mm.prototype.execute=function(r){var s=r.connection,c=r.source,l=r.target,d=r.parent,h=r.parentIndex,f=r.hints;if(!c||!l)throw new Error("source and target required");if(!d)throw new Error("parent required");return s.source=c,s.target=l,s.waypoints||(s.waypoints=this._layouter.layoutConnection(s,f)),this._canvas.addConnection(s,d,h),s},mm.prototype.revert=function(r){var s=r.connection;return this._canvas.removeConnection(s),s.source=null,s.target=null,s};var yd=Math.round;function yv(r){this._modeling=r}function O0(r){return!!r.waypoints}yv.$inject=["modeling"],yv.prototype.preExecute=function(r){var s=r.elements,c=r.parent,l=r.parentIndex,d=r.position,h=r.hints,f=this._modeling;ne(s,function(w){Re(w.x)||(w.x=0),Re(w.y)||(w.y=0)});var g=pi(s);ne(s,function(w){O0(w)&&(w.waypoints=Qn(w.waypoints,function(C){return{x:yd(C.x-g.x-g.width/2+d.x),y:yd(C.y-g.y-g.height/2+d.y)}})),oe(w,{x:yd(w.x-g.x-g.width/2+d.x),y:yd(w.y-g.y-g.height/2+d.y)})});var v=_n(s),b={};ne(s,function(w){if(O0(w))b[w.id]=Re(l)?f.createConnection(b[w.source.id],b[w.target.id],l,w,w.parent||c,h):f.createConnection(b[w.source.id],b[w.target.id],w,w.parent||c,h);else{var C=oe({},h);-1===v.indexOf(w)&&(C.autoResize=!1),b[w.id]=Re(l)?f.createShape(w,Pt(w,["x","y","width","height"]),w.parent||c,l,C):f.createShape(w,Pt(w,["x","y","width","height"]),w.parent||c,C)}}),r.elements=gc(b)};var vv=Math.round;function Wo(r){this._canvas=r}function vd(r){Wo.call(this,r)}Wo.$inject=["canvas"],Wo.prototype.execute=function(r){var s=r.shape,c=r.position,l=r.parent,d=r.parentIndex;if(!l)throw new Error("parent required");if(!c)throw new Error("position required");return oe(s,void 0!==c.width?c:{x:c.x-vv(s.width/2),y:c.y-vv(s.height/2)}),this._canvas.addShape(s,l,d),s},Wo.prototype.revert=function(r){var s=r.shape;return this._canvas.removeShape(s),s},Oe(vd,Wo),vd.$inject=["canvas"];var cC=Wo.prototype.execute;vd.prototype.execute=function(r){var c,s=r.shape;return c=s,["width","height"].forEach(function(l){void 0===c[l]&&(c[l]=0)}),s.labelTarget=r.labelTarget,cC.call(this,r)};var lC=Wo.prototype.revert;function Ja(r,s){this._canvas=r,this._modeling=s}function _v(r,s){this._modeling=r,this._elementRegistry=s}function ep(r,s){this._canvas=r,this._modeling=s}function gm(r){this._modeling=r}vd.prototype.revert=function(r){return r.shape.labelTarget=null,lC.call(this,r)},Ja.$inject=["canvas","modeling"],Ja.prototype.execute=function(r){var s=r.connection,c=s.parent;return r.parent=c,r.parentIndex=Bi(c.children,s),r.source=s.source,r.target=s.target,this._canvas.removeConnection(s),s.source=null,s.target=null,s},Ja.prototype.revert=function(r){var s=r.connection,c=r.parent,l=r.parentIndex;return s.source=r.source,s.target=r.target,Je(c.children,s,l),this._canvas.addConnection(s,c),s},_v.$inject=["modeling","elementRegistry"],_v.prototype.postExecute=function(r){var s=this._modeling,c=this._elementRegistry;ne(r.elements,function(l){c.get(l.id)&&(l.waypoints?s.removeConnection(l):s.removeShape(l))})},ep.$inject=["canvas","modeling"],ep.prototype.preExecute=function(r){var s=this._modeling,c=r.shape;pd(c.incoming,function(l){s.removeConnection(l,{nested:!0})}),pd(c.outgoing,function(l){s.removeConnection(l,{nested:!0})}),pd(c.children,function(l){l.waypoints?s.removeConnection(l,{nested:!0}):s.removeShape(l,{nested:!0})})},ep.prototype.execute=function(r){var s=this._canvas,c=r.shape,l=c.parent;return r.oldParent=l,r.oldParentIndex=Bi(l.children,c),s.removeShape(c),c},ep.prototype.revert=function(r){var s=this._canvas,c=r.shape,l=r.oldParent;return Je(l.children,c,r.oldParentIndex),s.addShape(c,l),c},gm.$inject=["modeling"];var N0={x:"y",y:"x"};function bv(r,s){this._layouter=r,this._canvas=s}function Ev(){}function ym(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function cn(r){this._modeling=r}function _d(r){this._helper=new cn(r)}function ho(r){this._modeling=r,this._helper=new cn(r)}function lu(r){this._modeling=r}function vm(r){return r.original||r}function ec(r,s){this._modeling=r,this._rules=s}function tp(r){this._modeling=r}function tc(r){this._modeling=r}function wv(r){return oe({},r)}function xv(r){switch(r){case"n":case"s":return"y";case"w":case"e":return"x"}}function Cv(r,s,c){var l=xv(c);return/e|s/.test(c)?r[l]>s:/n|w/.test(c)?r[l]<s:void 0}function nl(r,s){return-1!==r.indexOf(s)}function _m(r){this._modeling=r}function bd(r){var s={};return ne(r,function(c){s[c.id]=c.hidden,c.children&&(s=oe({},s,bd(c.children)))}),s}function bm(r,s){var c=[];return ne(r,function(l){l.hidden=s,c=c.concat(l),l.children&&(c=c.concat(bm(l.children,l.collapsed||s)))}),c}function Sv(r,s){var c=[];return ne(r,function(l){l.hidden=s[l.id],c=c.concat(l),l.children&&(c=c.concat(Sv(l.children,s)))}),c}function np(r){this._modeling=r}function Dv(r,s){return Kn(r&&r.attachers,s)}function Av(r,s,c){if(r){var l=r.attachers;l||(r.attachers=l=[]),Je(l,s,c)}}function Tv(){}function xn(r,s,c){this._eventBus=r,this._elementFactory=s,this._commandStack=c;var l=this;r.on("diagram.init",function(){l.registerHandlers(c)})}function ip(r){this._elementRegistry=r}function F0(r,s){ne(s,function(c,l){r.set(l,c)})}gm.prototype.preExecute=function(r){var s=this._modeling,c=r.groups,l=r.axis,d=r.dimension;function h(F,$){F.range.min=Math.min($[l],F.range.min),F.range.max=Math.max($[l]+$[d],F.range.max)}function f(F){return F[l]+F[d]/2}function g(F){return F.length-1}function v(F){return F.max-F.min}var b,w,C=c[0],M=g(c),T=c[M],R=0;ne(c,function(F,$){var B,z,j;F.elements.length<2?$&&$!==c.length-1&&(h(F,F.elements[0]),R+=v(F.range)):(z=(B=Be(F.elements,l))[0],$===M&&(z=B[g(B)]),j=f(z),F.range=null,ne(B,function(K){var J,be;(be={y:0})[l]=j-f(J=K),be[l]&&(be[N0[l]]=0,s.moveElements([J],be,J.parent)),null!==F.range?h(F,K):F.range={min:K[l],max:K[l]+K[d]}}),$&&$!==c.length-1&&(R+=v(F.range)))}),w=Math.abs(T.range.min-C.range.max),(b=Math.round((w-R)/(c.length-1)))<c.length-1||ne(c,function(F,$){var B,z={};F!==C&&F!==T&&(B=c[$-1],F.range.max=0,ne(F.elements,function(j,K){z[N0[l]]=0,z[l]=B.range.max-j[l]+b,F.range.min!==j[l]&&(z[l]+=j[l]-F.range.min),z[l]&&s.moveElements([j],z,j.parent),F.range.max=Math.max(j[l]+j[d],K?F.range.max:0)}))})},gm.prototype.postExecute=function(r){},bv.$inject=["layouter","canvas"],bv.prototype.execute=function(r){var s=r.connection;return oe(r,{oldWaypoints:s.waypoints}),s.waypoints=this._layouter.layoutConnection(s,r.hints),s},bv.prototype.revert=function(r){var s=r.connection;return s.waypoints=r.oldWaypoints,s},Ev.prototype.execute=function(r){var s=r.connection,c=r.delta,l=r.newParent||s.parent,d=r.newParentIndex,h=s.parent;return r.oldParent=h,r.oldParentIndex=Kn(h.children,s),Je(l.children,s,d),s.parent=l,ne(s.waypoints,function(f){f.x+=c.x,f.y+=c.y,f.original&&(f.original.x+=c.x,f.original.y+=c.y)}),s},Ev.prototype.revert=function(r){var s=r.connection,l=r.oldParent,d=r.oldParentIndex,h=r.delta;return Kn(s.parent.children,s),Je(l.children,s,d),s.parent=l,ne(s.waypoints,function(f){f.x-=h.x,f.y-=h.y,f.original&&(f.original.x-=h.x,f.original.y-=h.y)}),s},ym.prototype.add=function(r,s){return this.addAll([r],s)},ym.prototype.addAll=function(r,s){return oe(this,function(c,l,d){Ss(l)&&(l=!0),Xn(l)&&(d=l,l=!0);var h=Lu((d=d||{}).allShapes),f=Lu(d.allConnections),g=Lu(d.enclosedElements),v=Lu(d.enclosedConnections),b=Lu(d.topLevel,l&&pn(c,function(C){return C.id}));function w(C){b[C.source.id]&&b[C.target.id]&&(b[C.id]=[C]),h[C.source.id]&&h[C.target.id]&&(v[C.id]=g[C.id]=C),f[C.id]=C}return Rs(c,function(C){if(g[C.id]=C,!C.waypoints)return h[C.id]=C,ne(C.incoming,w),ne(C.outgoing,w),C.children;v[C.id]=f[C.id]=C}),{allShapes:h,allConnections:f,topLevel:b,enclosedConnections:v,enclosedElements:g}}(r,!!s,this)),this},cn.prototype.moveRecursive=function(r,s,c){return r?this.moveClosure(this.getClosure(r),s,c):[]},cn.prototype.moveClosure=function(r,s,c,l,d){var h=this._modeling,f=r.allShapes,g=r.allConnections,v=r.enclosedConnections,b=r.topLevel,w=!1;d&&d.parent===c&&(w=!0),ne(f,function(C){h.moveShape(C,s,b[C.id]&&!w&&c,{recurse:!1,layout:!1})}),ne(g,function(C){var M=!!f[C.source.id],T=!!f[C.target.id];v[C.id]&&M&&T?h.moveConnection(C,s,b[C.id]&&!w&&c):h.layoutConnection(C,{connectionStart:M&&Zf(C,C.source,s),connectionEnd:T&&f0(C,C.target,s)})})},cn.prototype.getClosure=function(r){return(new ym).addAll(r,!0)},_d.$inject=["modeling"],_d.prototype.preExecute=function(r){r.closure=this._helper.getClosure(r.shapes)},_d.prototype.postExecute=function(r){var s,c=r.hints;c&&c.primaryShape&&(c.oldParent=(s=c.primaryShape).parent),this._helper.moveClosure(r.closure,r.delta,r.newParent,r.newHost,s)},ho.$inject=["modeling"],ho.prototype.execute=function(r){var s=r.shape,c=r.delta,l=r.newParent||s.parent,d=r.newParentIndex,h=s.parent;return r.oldBounds=Pt(s,["x","y","width","height"]),r.oldParent=h,r.oldParentIndex=Kn(h.children,s),Je(l.children,s,d),oe(s,{parent:l,x:s.x+c.x,y:s.y+c.y}),s},ho.prototype.postExecute=function(r){var s=r.shape,c=r.delta,l=r.hints,d=this._modeling;!1!==l.layout&&(ne(s.incoming,function(h){d.layoutConnection(h,{connectionEnd:f0(h,s,c)})}),ne(s.outgoing,function(h){d.layoutConnection(h,{connectionStart:Zf(h,s,c)})})),!1!==l.recurse&&this.moveChildren(r)},ho.prototype.revert=function(r){var s=r.shape,c=r.oldParent,d=r.delta;return Je(c.children,s,r.oldParentIndex),oe(s,{parent:c,x:s.x-d.x,y:s.y-d.y}),s},ho.prototype.moveChildren=function(r){this._helper.moveRecursive(r.shape.children,r.delta,null)},ho.prototype.getNewParent=function(r){return r.newParent||r.shape.parent},lu.$inject=["modeling"],lu.prototype.execute=function(r){var s=r.newSource,c=r.newTarget,l=r.connection,d=r.dockingOrPoints;if(!s&&!c)throw new Error("newSource or newTarget required");return bt(d)&&(r.oldWaypoints=l.waypoints,l.waypoints=d),s&&(r.oldSource=l.source,l.source=s),c&&(r.oldTarget=l.target,l.target=c),l},lu.prototype.postExecute=function(r){var s=r.connection,c=r.newSource,l=r.newTarget,d=r.dockingOrPoints,h=r.hints||{},f={};h.connectionStart&&(f.connectionStart=h.connectionStart),h.connectionEnd&&(f.connectionEnd=h.connectionEnd),!1!==h.layoutConnection&&(!c||l&&"source"!==h.docking||(f.connectionStart=f.connectionStart||vm(bt(d)?d[0]:d)),!l||c&&"target"!==h.docking||(f.connectionEnd=f.connectionEnd||vm(bt(d)?d[d.length-1]:d)),h.newWaypoints&&(f.waypoints=h.newWaypoints),this._modeling.layoutConnection(s,f))},lu.prototype.revert=function(r){var s=r.oldSource,c=r.oldTarget,l=r.oldWaypoints,d=r.connection;return s&&(d.source=s),c&&(d.target=c),l&&(d.waypoints=l),d},ec.$inject=["modeling","rules"],ec.prototype.preExecute=function(r){var s,c=this,l=this._modeling,d=this._rules,h=r.oldShape,f=r.newData,g=r.hints||{};function v(R,F,$){return d.allowed("connection.reconnect",{connection:$,source:R,target:F})}var b,C={x:h.x,y:h.y,width:h.width,height:h.height};s=r.newShape=r.newShape||c.createShape(f,{x:f.x,y:f.y},h.parent,g),h.host&&l.updateAttachment(s,h.host),!1!==g.moveChildren&&(b=h.children.slice(),l.moveElements(b,{x:0,y:0},s,g));var M=h.incoming.slice(),T=h.outgoing.slice();ne(M,function(R){v(R.source,s,R)&&c.reconnectEnd(R,s,Qf(R,s,C),g)}),ne(T,function(R){v(s,R.target,R)&&c.reconnectStart(R,s,Xf(R,s,C),g)})},ec.prototype.postExecute=function(r){this._modeling.removeShape(r.oldShape)},ec.prototype.execute=function(r){},ec.prototype.revert=function(r){},ec.prototype.createShape=function(r,s,c,l){return this._modeling.createShape(r,s,c,l)},ec.prototype.reconnectStart=function(r,s,c,l){this._modeling.reconnectStart(r,s,c,l)},ec.prototype.reconnectEnd=function(r,s,c,l){this._modeling.reconnectEnd(r,s,c,l)},tp.$inject=["modeling"],tp.prototype.execute=function(r){var s=r.shape,c=r.newBounds,l=r.minBounds;if(void 0===c.x||void 0===c.y||void 0===c.width||void 0===c.height)throw new Error("newBounds must have {x, y, width, height} properties");if(l&&(c.width<l.width||c.height<l.height))throw new Error("width and height cannot be less than minimum height and width");if(!l&&c.width<10||c.height<10)throw new Error("width and height cannot be less than 10px");return r.oldBounds={width:s.width,height:s.height,x:s.x,y:s.y},oe(s,{width:c.width,height:c.height,x:c.x,y:c.y}),s},tp.prototype.postExecute=function(r){var s=this._modeling,c=r.shape,l=r.oldBounds;!1!==(r.hints||{}).layout&&(ne(c.incoming,function(d){s.layoutConnection(d,{connectionEnd:Qf(d,c,l)})}),ne(c.outgoing,function(d){s.layoutConnection(d,{connectionStart:Xf(d,c,l)})}))},tp.prototype.revert=function(r){var s=r.shape,c=r.oldBounds;return oe(s,{width:c.width,height:c.height,x:c.x,y:c.y}),s},tc.$inject=["modeling"],tc.prototype.preExecute=function(r){var g,v,b,s=r.delta,c=r.direction,l=r.movingShapes,d=r.resizingShapes,h=r.start,f={};this.moveShapes(l,s),ne(d,function(g){var v;f[g.id]={x:(v=g).x,y:v.y,height:v.height,width:v.width}}),this.resizeShapes(d,s,c),this.updateConnectionWaypoints((b=[],ne((g=l).concat(v=d),function(w){ne(w.incoming.concat(w.outgoing),function(T){var R=T.source,F=T.target;(gd(g,R)||gd(g,F)||gd(v,R)||gd(v,F))&&(gd(b,T)||b.push(T))})}),b),s,c,h,l,d,f)},tc.prototype.execute=function(){},tc.prototype.revert=function(){},tc.prototype.moveShapes=function(r,s){var c=this;ne(r,function(l){c._modeling.moveShape(l,s,null,{autoResize:!1,layout:!1,recurse:!1})})},tc.prototype.resizeShapes=function(r,s,c){var l=this;ne(r,function(d){var h=function(f,g,v){var b=f.x,w=f.y,C=f.width,M=f.height,T=v.x,R=v.y;switch(g){case"n":return{x:b,y:w+R,width:C,height:M-R};case"s":return{x:b,y:w,width:C,height:M+R};case"w":return{x:b+T,y:w,width:C-T,height:M};case"e":return{x:b,y:w,width:C+T,height:M};default:throw new Error("unknown direction: "+g)}}(d,c,s);l._modeling.resizeShape(d,h,null,{attachSupport:!1,autoResize:!1,layout:!1})})},tc.prototype.updateConnectionWaypoints=function(r,s,c,l,d,h,f){var g=this,v=d.concat(h);ne(r,function(b){var w=b.source,C=b.target,M=Qn(b.waypoints,function($){return($=wv($)).original&&($.original=wv($.original)),$}),T=xv(c),R={labelBehavior:!1};nl(v,w)&&nl(v,C)?(M=Qn(M,function(F){return Cv(F,l,c)&&(F[T]=F[T]+s[T]),F.original&&Cv(F.original,l,c)&&(F.original[T]=F.original[T]+s[T]),F}),g._modeling.updateWaypoints(b,M,{labelBehavior:!1})):(nl(v,w)||nl(v,C))&&(nl(d,w)?R.connectionStart=Zf(b,w,s):nl(d,C)?R.connectionEnd=f0(b,C,s):nl(h,w)?R.connectionStart=Xf(b,w,f[w.id]):nl(h,C)&&(R.connectionEnd=Qf(b,C,f[C.id])),g._modeling.layoutConnection(b,R))})},_m.$inject=["modeling"],_m.prototype.execute=function(r){var s=r.shape,c=s.children;r.oldChildrenVisibility=bd(c),s.collapsed=!s.collapsed;var l=bm(c,s.collapsed);return[s].concat(l)},_m.prototype.revert=function(r){var s=r.shape,l=Sv(s.children,r.oldChildrenVisibility);return s.collapsed=!s.collapsed,[s].concat(l)},np.$inject=["modeling"],np.prototype.execute=function(r){var s=r.shape,c=r.newHost,l=s.host;return r.oldHost=l,r.attacherIdx=Dv(l,s),Av(c,s),s.host=c,s},np.prototype.revert=function(r){var s=r.shape,c=r.newHost,l=r.oldHost,d=r.attacherIdx;return s.host=l,Dv(c,s),Av(l,s,d),s},Tv.prototype.execute=function(r){var s=r.connection,c=r.newWaypoints;return r.oldWaypoints=s.waypoints,s.waypoints=c,s},Tv.prototype.revert=function(r){var s=r.connection;return s.waypoints=r.oldWaypoints,s},xn.$inject=["eventBus","elementFactory","commandStack"],xn.prototype.getHandlers=function(){return{"shape.append":Jh,"shape.create":Wo,"shape.delete":ep,"shape.move":ho,"shape.resize":tp,"shape.replace":ec,"shape.toggleCollapse":_m,spaceTool:tc,"label.create":vd,"connection.create":mm,"connection.delete":Ja,"connection.move":Ev,"connection.layout":bv,"connection.updateWaypoints":Tv,"connection.reconnect":lu,"elements.create":yv,"elements.move":_d,"elements.delete":_v,"elements.distribute":gm,"elements.align":fm,"element.updateAttachment":np}},xn.prototype.registerHandlers=function(r){ne(this.getHandlers(),function(s,c){r.registerHandler(c,s)})},xn.prototype.moveShape=function(r,s,c,l,d){"object"==typeof l&&(d=l,l=null),this._commandStack.execute("shape.move",{shape:r,delta:s,newParent:c,newParentIndex:l,hints:d||{}})},xn.prototype.updateAttachment=function(r,s){this._commandStack.execute("element.updateAttachment",{shape:r,newHost:s})},xn.prototype.moveElements=function(r,s,c,l){var d,h=(l=l||{}).attach,f=c;!0===h?(d=c,f=c.parent):!1===h&&(d=null),this._commandStack.execute("elements.move",{shapes:r,delta:s,newParent:f,newHost:d,hints:l})},xn.prototype.moveConnection=function(r,s,c,l,d){"object"==typeof l&&(d=l,l=void 0),this._commandStack.execute("connection.move",{connection:r,delta:s,newParent:c,newParentIndex:l,hints:d||{}})},xn.prototype.layoutConnection=function(r,s){this._commandStack.execute("connection.layout",{connection:r,hints:s||{}})},xn.prototype.createConnection=function(r,s,c,l,d,h){"object"==typeof c&&(h=d,d=l,l=c,c=void 0);var f={source:r,target:s,parent:d,parentIndex:c,connection:l=this._create("connection",l),hints:h};return this._commandStack.execute("connection.create",f),f.connection},xn.prototype.createShape=function(r,s,c,l,d){"number"!=typeof l&&(d=l,l=void 0);var h,f,g=(d=d||{}).attach;r=this._create("shape",r),g?(h=c.parent,f=c):h=c;var v={position:s,shape:r,parent:h,parentIndex:l,host:f,hints:d};return this._commandStack.execute("shape.create",v),v.shape},xn.prototype.createElements=function(r,s,c,l,d){bt(r)||(r=[r]),"number"!=typeof l&&(d=l,l=void 0);var h={position:s,elements:r,parent:c,parentIndex:l,hints:d=d||{}};return this._commandStack.execute("elements.create",h),h.elements},xn.prototype.createLabel=function(r,s,c,l){c=this._create("label",c);var d={labelTarget:r,position:s,parent:l||r.parent,shape:c};return this._commandStack.execute("label.create",d),d.shape},xn.prototype.appendShape=function(r,s,c,l,d){d=d||{};var h={source:r,position:c,target:l,shape:s=this._create("shape",s),connection:d.connection,connectionParent:d.connectionParent,hints:d};return this._commandStack.execute("shape.append",h),h.shape},xn.prototype.removeElements=function(r){this._commandStack.execute("elements.delete",{elements:r})},xn.prototype.distributeElements=function(r,s,c){this._commandStack.execute("elements.distribute",{groups:r,axis:s,dimension:c})},xn.prototype.removeShape=function(r,s){this._commandStack.execute("shape.delete",{shape:r,hints:s||{}})},xn.prototype.removeConnection=function(r,s){this._commandStack.execute("connection.delete",{connection:r,hints:s||{}})},xn.prototype.replaceShape=function(r,s,c){var l={oldShape:r,newData:s,hints:c||{}};return this._commandStack.execute("shape.replace",l),l.newShape},xn.prototype.alignElements=function(r,s){this._commandStack.execute("elements.align",{elements:r,alignment:s})},xn.prototype.resizeShape=function(r,s,c,l){this._commandStack.execute("shape.resize",{shape:r,newBounds:s,minBounds:c,hints:l})},xn.prototype.createSpace=function(r,s,c,l,d){this._commandStack.execute("spaceTool",{delta:c,direction:l,movingShapes:r,resizingShapes:s,start:d})},xn.prototype.updateWaypoints=function(r,s,c){this._commandStack.execute("connection.updateWaypoints",{connection:r,newWaypoints:s,hints:c||{}})},xn.prototype.reconnect=function(r,s,c,l,d){this._commandStack.execute("connection.reconnect",{connection:r,newSource:s,newTarget:c,dockingOrPoints:l,hints:d||{}})},xn.prototype.reconnectStart=function(r,s,c,l){l||(l={}),this.reconnect(r,s,r.target,c,oe(l,{docking:"source"}))},xn.prototype.reconnectEnd=function(r,s,c,l){l||(l={}),this.reconnect(r,r.source,s,c,oe(l,{docking:"target"}))},xn.prototype.connect=function(r,s,c,l){return this.createConnection(r,s,c||{},r.parent,l)},xn.prototype._create=function(r,s){return s instanceof ka?s:this._elementFactory.create(r,s)},xn.prototype.toggleCollapse=function(r,s){this._commandStack.execute("shape.toggleCollapse",{shape:r,hints:s||{}})},ip.$inject=["elementRegistry"],ip.prototype.execute=function(r){var s=r.element,c=r.moddleElement,l=r.properties;if(!c)throw new Error("<moddleElement> required");var f,d=r.changed||this.getVisualReferences(c).concat(s),h=r.oldProperties||(f=c,Xe(Ys(l),function(v,b){return v[b]=f.get(b),v},{}));return F0(c,l),r.oldProperties=h,r.changed=d,d},ip.prototype.revert=function(r){var l=r.changed;return F0(r.moddleElement,r.oldProperties),l},ip.prototype.getVisualReferences=function(r){var c,s=this._elementRegistry;return V(r,"bpmn:DataObject")?(c=r,s.filter(function(d){return V(d,"bpmn:DataObjectReference")&&Se(d).dataObjectRef===c})):[]};var uC={width:0,height:0};function rp(r,s,c,l,d){this._elementRegistry=r,this._moddle=s,this._translate=c,this._modeling=l,this._textRenderer=d}function dC(r,s){return"id"in r&&r.id!==s.id}function hC(r,s){ne(s,function(c,l){var d;"di"!==l?r.set(l,c):r.di&&(d=r.di,ne(c,function(f,g){d.set(g,f)}))})}rp.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],rp.prototype.execute=function(r){var s=r.element,c=[s];if(!s)throw new Error((0,this._translate)("element required"));var b,w,d=this._elementRegistry,h=this._moddle.ids,f=s.businessObject,g=(w=oe({},b=r.properties),Rv.forEach(function(C){C in b&&(w[C]=Se(w[C]))}),w),v=r.oldProperties||function(b,w){return Xe(Ys(w),function(C,M){return C[M]="di"!==M?b.get(M):(T=b.di,Xe(Ys(w.di),function(F,$){return F[$]=T.get($),F},{})),C;var T},{})}(f,g);return dC(g,f)&&(h.unclaim(f.id),d.updateId(s,g.id),h.claim(g.id,f)),"default"in g&&(g.default&&c.push(d.get(g.default.id)),f.default&&c.push(d.get(f.default.id))),hC(f,g),r.oldProperties=v,r.changed=c,c},rp.prototype.postExecute=function(r){var s=r.element.label,c=s&&Se(s).name;if(c){var l=this._textRenderer.getExternalLabelBounds(s,c);this._modeling.resizeShape(s,l,uC)}},rp.prototype.revert=function(r){var s=r.element,c=r.properties,l=r.oldProperties,d=s.businessObject,h=this._elementRegistry,f=this._moddle.ids;return hC(d,l),dC(c,d)&&(f.unclaim(c.id),h.updateId(s,l.id),f.claim(l.id,d)),r.changed};var Rv=["default"];function Em(r,s){this._canvas=r,this._modeling=s}function wm(r,s){this._modeling=r,this._spaceTool=s}function xm(r,s){this._modeling=r,this._translate=s}function Cm(r,s){this._modeling=r,this._spaceTool=s}Em.$inject=["canvas","modeling"],Em.prototype.execute=function(r){var s=this._canvas,c=r.newRoot,l=c.businessObject,d=s.getRootElement(),h=d.businessObject,f=h.$parent,g=h.di;s.setRootElement(c,!0),Je(f.rootElements,l),l.$parent=f,Kn(f.rootElements,h),h.$parent=null,h.di=null,g.bpmnElement=l,l.di=g,r.oldRoot=d},Em.prototype.revert=function(r){var c=r.newRoot.businessObject,l=r.oldRoot,d=l.businessObject,h=c.$parent,f=c.di;this._canvas.setRootElement(l,!0),Kn(h.rootElements,c),c.$parent=null,Je(h.rootElements,d),d.$parent=h,c.di=null,f.bpmnElement=d,d.di=f},wm.$inject=["modeling","spaceTool"],wm.prototype.preExecute=function(r){var s=this._spaceTool,c=this._modeling,l=r.shape,d=r.location,h=fs(l),f=h===l,g=f?l:l.parent;Ka(g).length||c.createShape({type:"bpmn:Lane"},{x:l.x+30,y:l.y,width:l.width-30,height:l.height},g);var v=[];Rs(h,function(R){return v.push(R),R.label&&v.push(R.label),R===l?[]:gt(R.children,function(F){return F!==l})});var b="top"===d?-120:120,w="top"===d?l.y:l.y+l.height,C=w+("top"===d?10:-10),M="top"===d?"n":"s",T=s.calculateAdjustments(v,"y",b,C);s.makeSpace(T.movingShapes,T.resizingShapes,{x:0,y:b},M,C),r.newLane=c.createShape({type:"bpmn:Lane"},{x:l.x+(f?30:0),y:w-("top"===d?120:0),width:l.width-(f?30:0),height:120},g)},xm.$inject=["modeling","translate"],xm.prototype.preExecute=function(r){var s=this._modeling,c=this._translate,l=r.shape,d=r.count,h=Ka(l),f=h.length;if(f>d)throw new Error(c("more than {count} child lanes",{count:d}));var b,C,M=Math.round(l.height/d);for(C=0;C<d;C++)b={x:l.x+30,y:l.y+C*M,width:l.width-30,height:C===d-1?l.height-M*C:M},C<f?s.resizeShape(h[C],b):s.createShape({type:"bpmn:Lane"},b,l)},Cm.$inject=["modeling","spaceTool"],Cm.prototype.preExecute=function(r){var s=r.shape,c=r.newBounds;!1!==r.balanced?this.resizeBalanced(s,c):this.resizeSpace(s,c)},Cm.prototype.resizeBalanced=function(r,s){var c=this._modeling,l=function(r,s){var v,c=fs(r),l=Mh(c,V(c,"bpmn:Process")?[]:[c]),d=et(r),h=et(s),f=(v=r,py(et(s),et(v))),g=[];return l.forEach(function(v){if(v!==r){var b,w,C=0,M=f.right,T=0,R=f.left,F=et(v);f.top&&(Mf(F.bottom-d.top)<10&&(T=h.top-F.bottom),Mf(F.top-d.top)<5&&(C=h.top-F.top)),f.bottom&&(Mf(F.top-d.bottom)<10&&(C=h.bottom-F.top),Mf(F.bottom-d.bottom)<5&&(T=h.bottom-F.bottom)),(C||M||T||R)&&g.push({shape:v,newBounds:(b=v,w={top:C,right:M,bottom:T,left:R},{x:b.x+(w.left||0),y:b.y+(w.top||0),width:b.width-(w.left||0)+(w.right||0),height:b.height-(w.top||0)+(w.bottom||0)})})}}),g}(r,s);c.resizeShape(r,s),l.forEach(function(d){c.resizeShape(d.shape,d.newBounds)})},Cm.prototype.resizeSpace=function(r,s){var c,d,f,g=this._spaceTool,v=et(r),b=py(et(s),v),w=fs(r),C=[],M=[];Rs(w,function(T){return C.push(T),(V(T,"bpmn:Lane")||V(T,"bpmn:Participant"))&&M.push(T),T.children}),(b.bottom||b.top)&&(c=b.bottom||b.top,d=b.bottom?"s":"n",f=g.calculateAdjustments(C,"y",b.top>0||b.bottom<0?-c:c,r.y+(b.bottom?r.height:0)+(b.bottom?-10:10)),g.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:c},d)),(b.left||b.right)&&(c=b.right||b.left,d=b.right?"e":"w",f=g.calculateAdjustments(M,"x",b.left>0||b.right<0?-c:c,r.x+(b.right?r.width:0)+(b.right?-10:100)),g.makeSpace(f.movingShapes,f.resizingShapes,{x:c,y:0},d))};var po="flowNodeRef",B0="lanes";function Sm(r){this._elementRegistry=r}function op(r){this._moddle=r}Sm.$inject=["elementRegistry"],Sm.prototype.computeUpdates=function(r,s){var c=[],l=[],d={},h=[];function f(v){-1===c.indexOf(v)&&(h.push(v),c.push(v))}return s.forEach(function(v){var b=fs(v);b&&-1===c.indexOf(b)&&(b.children.filter(function(w){return V(w,"bpmn:FlowNode")}).forEach(f),c.push(b))}),r.forEach(f),h.forEach(function(v){var b=v.businessObject,w=b.get(B0).slice(),C=function(v){return v.parent?(b=v,w=fs(b),d[w.id]||(d[w.id]=Mh(w)),d[w.id]).filter(function(b){return w=v,C=et(b),T=w.y+w.height/2,(M=w.x+w.width/2)>C.left&&M<C.right&&T>C.top&&T<C.bottom;var w,C,M,T}).map(function(b){return b.businessObject}):[];var b,w}(v);l.push({flowNode:b,remove:w,add:C})}),s.forEach(function(v){var b=v.businessObject;v.parent||b.get(po).forEach(function(w){l.push({flowNode:w,remove:[b],add:[]})})}),l},Sm.prototype.execute=function(r){var s=r.updates;s||(s=r.updates=this.computeUpdates(r.flowNodeShapes,r.laneShapes)),s.forEach(function(c){var l=c.flowNode,d=l.get(B0);c.remove.forEach(function(h){Kn(d,h),Kn(h.get(po),l)}),c.add.forEach(function(h){Je(d,h),Je(h.get(po),l)})})},Sm.prototype.revert=function(r){r.updates.forEach(function(s){var c=s.flowNode,l=c.get(B0);s.add.forEach(function(d){Kn(l,d),Kn(d.get(po),c)}),s.remove.forEach(function(d){Je(l,d),Je(d.get(po),c)})})},op.$inject=["moddle"],op.prototype.execute=function(r){var s=this._moddle.ids,c=r.id;r.claiming?s.claim(c,r.element):s.unclaim(c)},op.prototype.revert=function(r){var s=this._moddle.ids,c=r.id,l=r.element;r.claiming?s.unclaim(c):s.claim(c,l)};var j0={fill:void 0,stroke:void 0};function Dm(r){this._commandStack=r,this._normalizeColor=function(s){if(s){if(Lr(s)){var c=(l=s,(d=document.createElement("canvas").getContext("2d")).fillStyle="transparent",d.fillStyle=l,/^#[0-9a-fA-F]{6}$/.test(d.fillStyle)?d.fillStyle:null);if(c)return c}throw new Error("invalid color value: "+s)}var l,d}}Dm.$inject=["commandStack"],Dm.prototype.postExecute=function(r){var s=r.elements,c=r.colors||j0,l=this,d={};"fill"in c&&oe(d,{"background-color":this._normalizeColor(c.fill)}),"stroke"in c&&oe(d,{"border-color":this._normalizeColor(c.stroke)}),ne(s,function(h){var g,f=h.waypoints?Pt(d,["border-color"]):d;"border-color"in(g=f)&&(g.stroke=g["border-color"]),"background-color"in g&&(g.fill=g["background-color"]),l._commandStack.execute("element.updateProperties",{element:h,properties:{di:f}})})};var pC={width:0,height:0};function fC(r,s){function c(l,d){var v,w,C,h=l.label||l,f=l.labelTarget||l;return v=d,(C=Ve(w=h.businessObject))&&("categoryValueRef"===C?w.categoryValueRef.value=v:w[C]=v),[h,f]}this.preExecute=function(l){var d=l.element,h=d.businessObject,f=l.newLabel;if(!gi(d)&&an(d)&&!gr(d)&&!kv(f)){var g=gn(d);r.createLabel(d,g={x:g.x,y:g.y+7},{id:h.id+"_label",businessObject:h})}},this.execute=function(l){return l.oldLabel=ve(l.element),c(l.element,l.newLabel)},this.revert=function(l){return c(l.element,l.oldLabel)},this.postExecute=function(l){var d=l.element,h=d.label||d,f=l.newLabel,g=l.newBounds,v=l.hints||{};if(gi(h)||V(h,"bpmn:TextAnnotation"))if(gi(h)&&kv(f))!1!==v.removeShape&&r.removeShape(h,{unsetLabel:!1});else{var b=ve(h);void 0===g&&(g=s.getExternalLabelBounds(h,b)),g&&r.resizeShape(h,g,pC)}}}function kv(r){return!r||!r.trim()}function Mn(r,s,c,l){xn.call(this,r,s,c),this._bpmnRules=l}function V0(){}fC.$inject=["modeling","textRenderer"],Oe(Mn,xn),Mn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],Mn.prototype.getHandlers=function(){var r=xn.prototype.getHandlers.call(this);return r["element.updateModdleProperties"]=ip,r["element.updateProperties"]=rp,r["canvas.updateRoot"]=Em,r["lane.add"]=wm,r["lane.resize"]=Cm,r["lane.split"]=xm,r["lane.updateRefs"]=Sm,r["id.updateClaim"]=op,r["element.setColor"]=Dm,r["element.updateLabel"]=fC,r},Mn.prototype.updateLabel=function(r,s,c,l){this._commandStack.execute("element.updateLabel",{element:r,newLabel:s,newBounds:c,hints:l||{}})},Mn.prototype.connect=function(r,s,c,l){if(c||(c=this._bpmnRules.canConnect(r,s)),c)return this.createConnection(r,s,c,r.parent,l)},Mn.prototype.updateModdleProperties=function(r,s,c){this._commandStack.execute("element.updateModdleProperties",{element:r,moddleElement:s,properties:c})},Mn.prototype.updateProperties=function(r,s){this._commandStack.execute("element.updateProperties",{element:r,properties:s})},Mn.prototype.resizeLane=function(r,s,c){this._commandStack.execute("lane.resize",{shape:r,newBounds:s,balanced:c})},Mn.prototype.addLane=function(r,s){var c={shape:r,location:s};return this._commandStack.execute("lane.add",c),c.newLane},Mn.prototype.splitLane=function(r,s){this._commandStack.execute("lane.split",{shape:r,count:s})},Mn.prototype.makeCollaboration=function(){var r=this._create("root",{type:"bpmn:Collaboration"});return this._commandStack.execute("canvas.updateRoot",{newRoot:r}),r},Mn.prototype.updateLaneRefs=function(r,s){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:r,laneShapes:s})},Mn.prototype.makeProcess=function(){var r={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",r)},Mn.prototype.claimId=function(r,s){this._commandStack.execute("id.updateClaim",{id:r,element:s,claiming:!0})},Mn.prototype.unclaimId=function(r,s){this._commandStack.execute("id.updateClaim",{id:r,element:s})},Mn.prototype.setColor=function(r,s){r.length||(r=[r]),this._commandStack.execute("element.setColor",{elements:r,colors:s})},V0.prototype.layoutConnection=function(r,s){return[(s=s||{}).connectionStart||zt(s.source||r.source),s.connectionEnd||zt(s.target||r.target)]};var Ed=Math.round,mC={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function H0(r,s,c){var l,d,f=nn(s,r,5),g=c.split(":")[0],v=Ed((s.x-r.x)/2+r.x),b=Ed((s.y-r.y)/2+r.y),w={t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[g].test(f),C=/h|r|l/.test(g),M=!1;return w?(l=C?{x:v,y:r.y}:{x:r.x,y:b},d=C?"h:h":"v:v"):(d=C?"h:v":"v:h",{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[g].test(f)?l={x:v,y:b}:C?(M=b===r.y,l={x:r.x+20*(/l/.test(g)?-1:1),y:M?b+20:b}):l={x:(M=v===r.x)?v+20:v,y:r.y+20*(/t/.test(g)?-1:1)}),{waypoints:Pv(r,l,d).concat(l),directions:d,turnNextDirections:M}}function $0(r){return r.split(":").reverse().join(":")}function Pv(r,s,c){if(!(f=c=c||"h:h")||!/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(f))throw new Error("unknown directions: <"+c+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");var f;if(Iv(c)){var l=function(f,g,v){return H0(f,g,v)}(r,s,c),d=function(f,g,v){var b=H0(g,f,$0(v));return{waypoints:b.waypoints.slice().reverse(),directions:$0(b.directions),turnNextDirections:b.turnNextDirections}}(r,s,c),h=function(f,g){var v=f.directions.split(":")[1],b=g.directions.split(":")[0];f.turnNextDirections&&(v="h"==v?"v":"h"),g.turnNextDirections&&(b="h"==b?"v":"h");var w=v+":"+b;return{waypoints:Pv(f.waypoints[f.waypoints.length-1],g.waypoints[0],w),directions:w}}(l,d);return[].concat(l.waypoints,h.waypoints,d.waypoints)}return function(f,g,v){var b=Ed((g.x-f.x)/2+f.x),w=Ed((g.y-f.y)/2+f.y);if("h:v"===v)return[{x:g.x,y:f.y}];if("v:h"===v)return[{x:f.x,y:g.y}];if("h:h"===v)return[{x:b,y:f.y},{x:b,y:g.y}];if("v:v"===v)return[{x:f.x,y:w},{x:g.x,y:w}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(r,s,c)}function gC(r,s,c,l,d){var h=function(r,s){return Ss(r)?[]:(function(c){if(!bt(c))throw new Error("must supply array")}(r),s=Kd(s),r.filter(function(c,l){return!s(c,l)}))}(d&&d.preferredLayouts||[],"straight")[0]||"h:h",f=nn(r,s,mC[h]||0),g=function(b,w){if(Iv(w))return w;switch(b){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return w}}(f,h);c=c||zt(r),l=l||zt(s);var b,w,M,v=g.split(":");return b=wd(c,r,v[0],{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[f]),w=wd(l,s,v[1],f),(M=Pv(b,w,g)).unshift(b),M.push(w),z0(M)}function sp(r,s,c){return(l=s[r])>=c[r]&&l<=c[r]+c[{x:"width",y:"height"}[r]];var l}function il(r,s,c,l){if((g=l).length<3||!(g.length>4)&&tn(g,function(v,b){var w=g[b-1];return w&&ea(v,w)<3}))return null;var g,d,h=l[0],f=l.slice();return f[0]=c,f[1]=function(g,v,b){switch(ao(v,g)){case"v":return{x:b.x,y:g.y};case"h":return{x:g.x,y:b.y}}return{x:g.x,y:g.y}}(f[1],h,c),(d=function(g,v,b){var w;for(w=g.length-2;0!==w;w--)if(xc(g[w],v,20)||xc(g[w],b,20))return g.slice(w);return g}(f,r,s))!==f&&(f=il(r,s,c,d)),f&&ao(f)?null:f}function Iv(r){return r&&/t|r|b|l/.test(r)}function wd(r,s,c,l){if("h"===c&&(c=/left/.test(l)?"l":"r"),"v"===c&&(c=/top/.test(l)?"t":"b"),"t"===c)return{original:r,x:r.x,y:s.y};if("r"===c)return{original:r,x:s.x+s.width,y:r.y};if("b"===c)return{original:r,x:r.x,y:s.y+s.height};if("l"===c)return{original:r,x:s.x,y:r.y};throw new Error("unexpected dockingDirection: <"+c+">")}function z0(r){return r.reduce(function(s,c,l){return Kp(s[s.length-1],r[l+1],c,0)||s.push(c),s},[])}var Ov={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},xd={top:"t",right:"r",bottom:"b",left:"l"};function _s(){}function ap(r,s){return V(s,"bpmn:Participant")?"source":V(r,"bpmn:Participant")?"target":Jr(s)?"source":Jr(r)||V(s,"bpmn:Event")?"target":V(r,"bpmn:Event")?"source":null}function Zr(r){return Jr(r)?"target":"source"}function rl(r,s){return r?r.original||r:zt(s)}function cp(r,s){return V(s,"bpmn:Activity")&&V(r,"bpmn:BoundaryEvent")&&s.businessObject.isForCompensation}function Jr(r){return V(r,"bpmn:SubProcess")&&qe(r)}function Co(r,s){return r===s}function fa(r){var s=/right|left/.exec(r);return s&&s[0]}function bs(r){var s=/top|bottom/.exec(r);return s&&s[0]}function ol(r){return"right"===r||"left"===r}function Cd(r,s){var c=s.waypoints,l=c&&c.length&&nn(c[0],r);return"top"===l?["t:r"]:"right"===l?["r:b"]:"left"===l?["l:t"]:["b:l"]}function Sd(r,s,c){var l,d,C,M,T,R,F,B,h=zt(r),f=zt(s),g=(d=(l=r).host,nn(zt(l),d,-10)),v=Co(r.host,s),b=-1!==["top","right","bottom","left"].indexOf(g),w=nn(f,h,{x:r.width/2+s.width/2,y:r.height/2+s.height/2});return v?(C=g,T=r,R=s,F=c,B=(M=b)?C:bs(C),[xd[B]+":"+(M?ol(C)?uu("y",T,R,F)?"h":"b":uu("x",T,R,F)?"v":"l":"v")]):[function(C,M,T){return T?xd[C]:Co(bs(C),bs(M))||(R=fa(C),F=fa(M),Ov[R]===F)?xd[bs(C)]:xd[fa(C)];var R,F}(g,w,b)+":"+function(C,M,T){return T?ol(C)?(R=M,F=fa(C),-1!==R.indexOf(Ov[F])||Co(C,M)?"h":"v"):function(B,z){var j=bs(B);return-1!==z.indexOf(Ov[j])}(C,M)||Co(C,M)?"v":"h":ol(M)||Co(bs(C),bs(M))&&fa(M)?"h":"v";var R,F}(g,w,b)]}function uu(r,s,c,l){return!(sl(r,l,c,40)||sl(r,l,{x:c.x+c.width,y:c.y+c.height},40)||sl(r,l,zt(s),40))}function sl(r,s,c,l){return Math.abs(s[r]-c[r])<l}function du(r){return oe({original:r.point.original||r.point},r.actual)}function Go(r,s){this._elementRegistry=r,this._graphicsFactory=s}Oe(_s,V0),_s.prototype.layoutConnection=function(r,s){s||(s={});var c,l,d=s.source||r.source,h=s.target||r.target,f=s.waypoints||r.waypoints,g=s.connectionStart,v=s.connectionEnd;return g||(g=rl(f&&f[0],d)),v||(v=rl(f&&f[f.length-1],h)),(V(r,"bpmn:Association")||V(r,"bpmn:DataAssociation"))&&f&&!cp(d,h)?[].concat([g],f.slice(1,-1),[v]):(V(r,"bpmn:MessageFlow")?c={preferredLayouts:["straight","v:v"],preserveDocking:ap(d,h)}:(V(r,"bpmn:SequenceFlow")||cp(d,h))&&(c=d===h?{preferredLayouts:Cd(d,r)}:V(d,"bpmn:BoundaryEvent")?{preferredLayouts:Sd(d,h,v)}:Jr(d)||Jr(h)?{preferredLayouts:["straight","h:h"],preserveDocking:Zr(d)}:V(d,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:V(h,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),c&&(l=z0(function(r,s,c,l,d,h){var f,g,v,b,w,C,M,T,R;return bt(c)&&(d=c,h=l,c=zt(r),l=zt(s)),d=d||[],(f=-1!==(h=oe({preferredLayouts:[]},h)).preferredLayouts.indexOf("straight")&&(b=c,w=l,C=h,R={},T=nn(g=r,v=s),/^(top|bottom|left|right)$/.test(T)?(/top|bottom/.test(T)&&(M="x"),/left|right/.test(T)&&(M="y"),"target"===C.preserveDocking?sp(M,w,g)?(R[M]=w[M],[{x:void 0!==R.x?R.x:b.x,y:void 0!==R.y?R.y:b.y,original:{x:void 0!==R.x?R.x:b.x,y:void 0!==R.y?R.y:b.y}},{x:w.x,y:w.y}]):null:sp(M,b,v)?(R[M]=b[M],[{x:b.x,y:b.y},{x:void 0!==R.x?R.x:w.x,y:void 0!==R.y?R.y:w.y,original:{x:void 0!==R.x?R.x:w.x,y:void 0!==R.y?R.y:w.y}}]):null):null))||(f=h.connectionEnd&&function(g,v,b,w){var C=w.slice().reverse();return(C=il(g,v,b,C))?C.reverse():null}(s,r,l,d))?f:(f=h.connectionStart&&il(r,s,c,d))||(!h.connectionStart&&!h.connectionEnd&&d&&d.length?d:gC(r,s,c,l,h))}(d,h,g,v,f,c=oe(c,s)))),l||[g,v])},Go.$inject=["elementRegistry","graphicsFactory"],Go.prototype.getCroppedWaypoints=function(r,s,c){c=c||r.target;var l=this.getDockingPoint(r,s=s||r.source,!0),d=this.getDockingPoint(r,c),h=r.waypoints.slice(l.idx+1,d.idx);return h.unshift(du(l)),h.push(du(d)),h},Go.prototype.getDockingPoint=function(r,s,c){var l,d,h=r.waypoints;return{point:d=h[l=c?0:h.length-1],actual:this._getIntersection(s,r,c)||d,idx:l}},Go.prototype._getIntersection=function(r,s,c){return $u(this._getShapePath(r),this._getConnectionPath(s),c)},Go.prototype._getConnectionPath=function(r){return this._graphicsFactory.getConnectionPath(r)},Go.prototype._getShapePath=function(r){return this._graphicsFactory.getShapePath(r)},Go.prototype._getGfx=function(r){return this._elementRegistry.getGraphics(r)};var U0={__init__:["modeling","bpmnUpdater"],__depends__:[ev,M0,eC,tC,Lb,sv,iC,rC,oC,bo,Xb,mv],bpmnFactory:["type",Qr],bpmnUpdater:["type",_r],elementFactory:["type",pa],modeling:["type",Mn],layouter:["type",_s],connectionDocking:["type",Go]},lp=Math.round;function Nv(r,s,c,l,d){function h(g,v,b,w){return d.allowed("elements.move",{shapes:g,delta:v,position:b,target:w})}function f(g,v,b,w){if(Xn(b)&&(w=b,b=!1),!v.waypoints&&v.parent){var C={x:(M=v).x+lp(M.width/2),y:M.y+lp(M.height/2)};return s.init(g,C,"shape.move",{cursor:"grabbing",autoActivate:b,data:{shape:v,context:w||{}}}),!0}var M}r.on("shape.move.start",1500,function(g){var C,M,v=g.context,b=g.shape,w=l.get().slice();-1===w.indexOf(b)&&(w=[b]),oe(v,{shapes:(C=w,M=pn(C,"id"),w=gt(C,function(T){for(;T=T.parent;)if(M[T.id])return!1;return!0})),validatedShapes:w,shape:b})}),r.on("shape.move.start",1250,function(g){var v=g.context;if(!(v.canExecute=h(v.validatedShapes)))return!1}),r.on("shape.move.move",500,function(g){var v,b=g.context,C=g.hover,M={x:g.dx,y:g.dy};v=h(b.validatedShapes,M,{x:g.x,y:g.y},C),b.delta=M,b.canExecute=v,b.target=null!==v?C:null}),r.on("shape.move.end",function(g){var v=g.context,b=v.delta,w=v.canExecute,C="attach"===w,M=v.shapes;if(!1===w)return!1;b.x=lp(b.x),b.y=lp(b.y),0===b.x&&0===b.y||c.moveElements(M,b,v.target,{primaryShape:v.shape,attach:C})}),r.on("element.mousedown",function(g){if(lo(g)){var v=Ba(g);if(!v)throw new Error("must supply DOM mousedown event");return f(v,g.element)}}),this.start=f}Nv.$inject=["eventBus","dragging","modeling","selection","rules"];var Am="djs-dragging",Fv="drop-ok",Lv="drop-not-ok",Bv="new-parent",jv="attach-ok";function Vv(r,s,c,l){function h(g){var v=wc(g,!0),b=Qn(v,function(w){return(w.incoming||[]).concat(w.outgoing||[])});return Ar(v.concat(b))}function f(g,v){[jv,Fv,Lv,Bv].forEach(function(b){b===v?s.addMarker(g,b):s.removeMarker(g,b)})}r.on("shape.move.start",499,function(g){var v=g.context,b=v.shapes,w=v.allDraggedElements,C=function(g){return gt(v=h(g),function(b){return!b.waypoints||tn(v,Br({id:b.source.id}))&&tn(v,Br({id:b.target.id}))});var v}(b);if(!v.dragGroup){var M=st("g");Ne(M,c.cls("djs-drag-group",["no-events"])),ut(s.getActiveLayer(),M),v.dragGroup=M}C.forEach(function(T){l.addDragger(T,v.dragGroup)}),ne(w=w?Ar([w,h(b)]):h(b),function(T){s.addMarker(T,Am)}),v.allDraggedElements=w,v.differentParents=1!==Xs(pn(b,function(T){return T.parent&&T.parent.id}))}),r.on("shape.move.move",499,function(g){var v=g.context,b=v.dragGroup,w=v.target;w&&f(w,"attach"===v.canExecute?jv:v.canExecute&&w&&w.id!==v.shape.parent.id?Bv:v.canExecute?Fv:Lv),Ei(b,g.dx,g.dy)}),r.on(["shape.move.out","shape.move.cleanup"],function(g){var v=g.context.target;v&&f(v,null)}),r.on("shape.move.cleanup",function(g){var v=g.context,w=v.dragGroup;ne(v.allDraggedElements,function(C){s.removeMarker(C,Am)}),w&&ri(w)}),this.makeDraggable=function(g,v,b){l.addDragger(v,g.dragGroup),b&&s.addMarker(v,Am),g.allDraggedElements?g.allDraggedElements.push(v):g.allDraggedElements=[v]}}Vv.$inject=["eventBus","canvas","styles","previewSupport"];var vC={__depends__:[lh,bo,uh,za,zc,Eo],__init__:["move","movePreview"],move:["type",Nv],movePreview:["type",Vv]};function Ci(r,s){this._eventBus=r,this._canvas=s;var c=this;r.on("tool-manager.update",function(l){c.updateToolHighlight(l.tool)}),r.on("i18n.changed",function(){c._update()}),r.on("diagram.init",function(){c._diagramInitialized=!0,c._rebuild()})}function bC(r,s){var c=s.getPaletteEntries();return di(c)?c(r):(ne(c,function(l,d){r[d]=l}),r)}Ci.$inject=["eventBus","canvas"],Ci.prototype.registerProvider=function(r,s){s||(s=r,r=1e3),this._eventBus.on("palette.getProviders",r,function(c){c.providers.push(s)}),this._rebuild()},Ci.prototype.getEntries=function(){return this._getProviders().reduce(bC,{})},Ci.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},Ci.prototype._init=function(){var r=this,s=this._eventBus,c=this._getParentContainer(),l=this._container=ke(Ci.HTML_MARKUP);c.appendChild(l),vt_bind(l,".djs-palette-toggle, .entry","click",function(d){if(wl(d.delegateTarget,".djs-palette-toggle"))return r.toggle();r.trigger("click",d)}),Ze.bind(l,"mousedown",function(d){d.stopPropagation()}),vt_bind(l,".entry","dragstart",function(d){r.trigger("dragstart",d)}),s.on("canvas.resized",this._layoutChanged,this),s.fire("palette.create",{container:l})},Ci.prototype._getProviders=function(r){var s=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(s),s.providers},Ci.prototype._toggleState=function(r){r=r||{};var s,c=this._getParentContainer(),d=this._eventBus,h=Yi(this._container);s="twoColumn"in r?r.twoColumn:this._needsCollapse(c.clientHeight,this._entries||{}),h.toggle("two-column",s),"open"in r&&h.toggle("open",r.open),d.fire("palette.changed",{twoColumn:s,open:this.isOpen()})},Ci.prototype._update=function(){var r=Un(".djs-palette-entries",this._container),s=this._entries=this.getEntries();Mu(r),ne(s,function(c,l){var d=c.group||"default",h=Un("[data-group="+d+"]",r);h||(h=ke('<div class="group" data-group="'+d+'"></div>'),r.appendChild(h));var b,w,g=ke(c.html||(c.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'));h.appendChild(g),c.separator||(jr(g,"data-action",l),c.title&&jr(g,"title",c.title),c.className&&(b=c.className,w=Yi(g),(bt(b)?b:b.split(/\s+/g)).forEach(function(C){w.add(C)})),c.imageUrl&&g.appendChild(ke('<img src="'+c.imageUrl+'">')))}),this.open()},Ci.prototype.trigger=function(r,s,c){var l,d,h,f=this._entries,g=s.delegateTarget||s.target;if(!g)return s.preventDefault();(l=f[jr(g,"data-action")])&&(h=s.originalEvent||s,di(d=l.action)?"click"===r&&d(h,c):d[r]&&d[r](h,c),s.preventDefault())},Ci.prototype._layoutChanged=function(){this._toggleState({})},Ci.prototype._needsCollapse=function(r,s){return r<46*Object.keys(s).length+50},Ci.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Ci.prototype.open=function(){this._toggleState({open:!0})},Ci.prototype.toggle=function(r){this.isOpen()?this.close():this.open()},Ci.prototype.isActiveTool=function(r){return r&&this._activeTool===r},Ci.prototype.updateToolHighlight=function(r){var s;this._toolsContainer||(s=Un(".djs-palette-entries",this._container),this._toolsContainer=Un("[data-group=tools]",s)),ne(this._toolsContainer.children,function(c){var l=c.getAttribute("data-action");if(l){var d=Yi(c);l=l.replace("-tool",""),d.contains("entry")&&l===r?d.add("highlighted-entry"):d.remove("highlighted-entry")}})},Ci.prototype.isOpen=function(){return Yi(this._container).has("open")},Ci.prototype._getParentContainer=function(){return this._canvas.getContainer()},Ci.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var EC={__init__:["palette"],palette:["type",Ci]},Hv="crosshair";function hu(r,s,c,l,d,h,f){this._selection=d,this._dragging=c,this._mouse=f;var g=this;h.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),r.on("lasso.selection.end",function(C){(C.hover||C.originalEvent.target instanceof SVGElement)&&r.once("lasso.selection.ended",function(){g.activateLasso(C.originalEvent,!0)})}),r.on("lasso.end",function(C){var M=Tm(C),T=l.filter(function(R){return R});g.select(T,M)}),r.on("lasso.start",function(C){var M=C.context;M.bbox=Tm(C),function(C){var M,T=s.getActiveLayer();Ne(M=C.frame=st("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),ut(T,M)}(M)}),r.on("lasso.move",function(C){var M=C.context;M.bbox=Tm(C),function(C){var T=C.bbox;Ne(C.frame,{x:T.x,y:T.y,width:T.width,height:T.height})}(M)}),r.on("lasso.cleanup",function(C){!function(C){C.frame&&ri(C.frame)}(C.context)}),r.on("element.mousedown",1500,function(C){if(Z_(C))return g.activateLasso(C.originalEvent),!0})}function Tm(r){var s={x:r.x-r.dx,y:r.y-r.dy},c={x:r.x,y:r.y};return s.x<=c.x&&s.y<c.y||s.x<c.x&&s.y<=c.y?{x:s.x,y:s.y,width:c.x-s.x,height:c.y-s.y}:s.x>=c.x&&s.y<c.y||s.x>c.x&&s.y<=c.y?{x:c.x,y:s.y,width:s.x-c.x,height:c.y-s.y}:s.x<=c.x&&s.y>c.y||s.x<c.x&&s.y>=c.y?{x:s.x,y:c.y,width:c.x-s.x,height:s.y-c.y}:s.x>=c.x&&s.y>c.y||s.x>c.x&&s.y>=c.y?{x:c.x,y:c.y,width:s.x-c.x,height:s.y-c.y}:{x:c.x,y:c.y,width:0,height:0}}hu.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],hu.prototype.activateLasso=function(r,s){this._dragging.init(r,"lasso",{autoActivate:s,cursor:Hv,data:{context:{}}})},hu.prototype.activateSelection=function(r,s){this._dragging.init(r,"lasso.selection",{trapClick:!1,autoActivate:s,cursor:Hv,data:{context:{}}})},hu.prototype.select=function(r,s){var d,h,c=(d=s,h={},ne(r,function(f){var g=f;g.waypoints&&(g=pi(g)),!Re(d.y)&&g.x>d.x&&(h[f.id]=f),!Re(d.x)&&g.y>d.y&&(h[f.id]=f),g.x>d.x&&g.y>d.y&&(Re(d.width)&&Re(d.height)&&g.width+g.x<d.width+d.x&&g.height+g.y<d.height+d.y?h[f.id]=f:Re(d.width)&&Re(d.height)||(h[f.id]=f))}),h);this._selection.select(gc(c))},hu.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var r=this._mouse.getLastMoveEvent();this.activateSelection(r,!!r)},hu.prototype.isActive=function(){var r=this._dragging.context();return r&&/^lasso/.test(r.prefix)};var wC={__depends__:[md,id],__init__:["lassoTool"],lassoTool:["type",hu]};function pu(r,s,c,l,d,h){this._dragging=c,this._mouse=h;var f=this,g=l.get("keyboard",!1);d.registerTool("hand",{tool:"hand",dragging:"hand.move"}),r.on("element.mousedown",1500,function(v){if(Gn(v))return f.activateMove(v.originalEvent,!0),!1}),g&&g.addListener(1500,function(v){if(xC(v.keyEvent)&&!f.isActive()){var b=f._mouse.getLastMoveEvent();f.activateMove(b,!!b)}},"keyboard.keydown"),g&&g.addListener(1500,function(v){xC(v.keyEvent)&&f.isActive()&&f.toggle()},"keyboard.keyup"),r.on("hand.end",function(v){if(!(v.hover||v.originalEvent.target instanceof SVGElement))return!1;r.once("hand.ended",function(){f.activateMove(v.originalEvent,{reactivate:!0})})}),r.on("hand.move.move",function(v){var b=s.viewbox().scale;s.scroll({dx:v.dx*b,dy:v.dy*b})}),r.on("hand.move.end",function(v){var b=v.context.reactivate;return!Gn(v)&&b&&r.once("hand.move.ended",function(w){f.activateHand(w.originalEvent,!0,!0)}),!1})}function xC(r){return ls(" ",r)}pu.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],pu.prototype.activateMove=function(r,s,c){"object"==typeof s&&(c=s,s=!1),this._dragging.init(r,"hand.move",{autoActivate:s,cursor:"grab",data:{context:c||{}}})},pu.prototype.activateHand=function(r,s,c){this._dragging.init(r,"hand",{trapClick:!1,autoActivate:s,cursor:"grab",data:{context:{reactivate:c}}})},pu.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var r=this._mouse.getLastMoveEvent();this.activateHand(r,!!r)},pu.prototype.isActive=function(){var r=this._dragging.context();return!!r&&/^(hand|hand\.move)$/.test(r.prefix)};var GD={__depends__:[md,id],__init__:["handTool"],handTool:["type",pu]},q0="connect-ok",CC="connect-not-ok";function Dd(r,s,c,l,d,h,f){var g=this;this._dragging=s,this._rules=h,this._mouse=f,d.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),r.on("global-connect.hover",function(v){var b=v.context,w=v.hover,C=b.canStartConnect=g.canStartConnect(w);null!==C&&(b.startTarget=w,l.addMarker(w,C?q0:CC))}),r.on(["global-connect.out","global-connect.cleanup"],function(v){var b=v.context.startTarget;b&&l.removeMarker(b,v.context.canStartConnect?q0:CC)}),r.on(["global-connect.ended"],function(v){var b=v.context.startTarget,w={x:v.x,y:v.y};if(g.canStartConnect(b))return r.once("element.out",function(){r.once(["connect.ended","connect.canceled"],function(){r.fire("global-connect.drag.ended")}),c.start(null,b,w)}),!1})}Dd.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Dd.prototype.start=function(r,s){this._dragging.init(r,"global-connect",{autoActivate:s,trapClick:!1,data:{context:{}}})},Dd.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var r=this._mouse.getLastMoveEvent();return this.start(r,!!r)},Dd.prototype.isActive=function(){var r=this._dragging.context();return r&&/^global-connect/.test(r.prefix)},Dd.prototype.canStartConnect=function(r){return this._rules.allowed("connection.start",{source:r})};var SC={__depends__:[qc,za,zc,md,id],globalConnect:["type",Dd]};function up(r,s,c,l,d,h,f,g){this._palette=r,this._create=s,this._elementFactory=c,this._spaceTool=l,this._lassoTool=d,this._handTool=h,this._globalConnect=f,this._translate=g,r.registerProvider(this)}up.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],up.prototype.getPaletteEntries=function(r){var s={},c=this._create,l=this._elementFactory,d=this._spaceTool,h=this._lassoTool,f=this._handTool,g=this._globalConnect,v=this._translate;function b(M,T,R,F,$){function B(j){var K=l.createShape(oe({type:M},$));$&&(K.businessObject.di.isExpanded=$.isExpanded),c.start(j,K)}var z=M.replace(/^bpmn:/,"");return{group:T,className:R,title:F||v("Create {type}",{type:z}),action:{dragstart:B,click:B}}}function w(M){var T=l.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),R=l.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:T});c.start(M,[T,R],{hints:{autoSelect:[R]}})}function C(M){c.start(M,l.createParticipantShape())}return oe(s,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:v("Activate the hand tool"),action:{click:function(M){f.activateHand(M)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:v("Activate the lasso tool"),action:{click:function(M){h.activateSelection(M)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:v("Activate the create/remove space tool"),action:{click:function(M){d.activateSelection(M)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:v("Activate the global connect tool"),action:{click:function(M){g.start(M)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":b("bpmn:StartEvent","event","bpmn-icon-start-event-none",v("Create StartEvent")),"create.intermediate-event":b("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",v("Create Intermediate/Boundary Event")),"create.end-event":b("bpmn:EndEvent","event","bpmn-icon-end-event-none",v("Create EndEvent")),"create.exclusive-gateway":b("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",v("Create Gateway")),"create.task":b("bpmn:Task","activity","bpmn-icon-task",v("Create Task")),"create.data-object":b("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",v("Create DataObjectReference")),"create.data-store":b("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",v("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:v("Create expanded SubProcess"),action:{dragstart:w,click:w}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:v("Create Pool/Participant"),action:{dragstart:C,click:C}},"create.group":b("bpmn:Group","artifact","bpmn-icon-group",v("Create Group"))}),s};var zv={__depends__:[EC,_f,mv,wC,GD,SC,Tn],__init__:["paletteProvider"],paletteProvider:["type",up]};function Uv(r,s,c,l,d){Ge.call(this,r),r.on("shape.move.move",250,function(h){var v,f=h.context,g=f.canExecute;f.visualReplacements||(f.visualReplacements={}),g&&g.replacements?ne((v=f).canExecute.replacements,function(b){var w=b.oldElementId,C={type:b.newElementType};if(!v.visualReplacements[w]){var M=s.get(w);oe(C,{x:M.x,y:M.y});var T=c.createShape(C);l.addShape(T,M.parent);var R=Un('[data-element-id="'+bh(M.id)+'"]',v.dragGroup);R&&Ne(R,{display:"none"});var F=d.addDragger(T,v.dragGroup);v.visualReplacements[w]=F,l.removeShape(T)}}):function(v){var b=v.visualReplacements;ne(b,function(w,C){var M=Un('[data-element-id="'+bh(C)+'"]',v.dragGroup);M&&Ne(M,{display:"inline"}),w.remove(),b[C]&&delete b[C]})}(f)})}Uv.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],Oe(Uv,Ge);var qD={__depends__:[Eo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Uv]},DC=["x","y"],AC=Math.abs;function Wv(r){r.on(["connect.hover","connect.move","connect.end"],1250,function(s){var v,b,w,c=s.context,l=c.canExecute,d=c.start,h=c.hover,f=c.source,g=c.target;s.originalEvent&&Gr(s.originalEvent)||(c.initialConnectionStart||(c.initialConnectionStart=c.connectionStart),l&&h&&(v=s,b=h,w=V(h,"bpmn:Task")?10:20,DC.forEach(function(C){var M=fu(C,b);v[C]<b[C]+w?li(v,C,b[C]+w):v[C]>b[C]+M-w&&li(v,C,b[C]+M-w)})),h&&function(v,b){return jt(["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],function(w){return Y0(v,w)})}(l)?(c.connectionStart=us(d),un(h,["bpmn:Event","bpmn:Gateway"])&&TC(s,us(h)),un(h,["bpmn:Task","bpmn:SubProcess"])&&function(v,b){var w=us(b);DC.forEach(function(C){var M,T,R;(M=v)[R=C]>(T=b)[R]+20&&M[R]<T[R]+fu(R,T)-20&&li(v,C,w[C])})}(s,h),V(f,"bpmn:BoundaryEvent")&&g===f.host&&function(v){var F,$,B,b=v.context,C=b.target;if(B=(F=b).source,!($=F.hover)||!B||$!==B){var M=us(b.source),T=nn(M,C,-10),R=[];/top|bottom/.test(T)&&R.push("x"),/left|right/.test(T)&&R.push("y"),R.forEach(function(F){var B=v[F];AC(B-M[F])<40&&li(v,F,B>M[F]?M[F]+40:M[F]-40)})}}(s)):Y0(l,"bpmn:MessageFlow")?(V(d,"bpmn:Event")&&(c.connectionStart=us(d)),V(h,"bpmn:Event")&&TC(s,us(h))):c.connectionStart=c.initialConnectionStart)})}function TC(r,s){li(r,"x",s.x),li(r,"y",s.y)}function Y0(r,s){return r&&r.type===s}function fu(r,s){return"x"===r?s.width:s.height}function al(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function dp(r){this._snapValues={}}function ma(r,s,c){var l=this;this._elementRegistry=r,s.on(["create.start","shape.move.start"],function(d){l.initSnap(d)}),s.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,function(d){var h=d.context,f=h.shape,g=h.snapContext,v=h.target;if((!d.originalEvent||!Gr(d.originalEvent))&&!Fs(d)&&v){var b=g.pointsForTarget(v);b.initialized||((b=l.addSnapTargetPoints(b,f,v)).initialized=!0),c.snap(d,b)}}),s.on(["create.cleanup","shape.move.cleanup"],function(){c.hide()})}function Mm(r){return!!r.labelTarget}function ic(r,s){s.invoke(ma,this),r.on(["create.move","create.end"],1500,MC),r.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(c){var f,g,v,b,w,C,l=c.context,d=l.canExecute,h=l.target;d&&("attach"===d||d.attach)&&!Fs(c)&&(f=c,b=et(g=h),w=au(f,g),v=(C=f.context.shape).parent?{x:0,y:0}:zt(C),/top/.test(w)?li(f,"y",b.top-v.y):/bottom/.test(w)&&li(f,"y",b.bottom-v.y),/left/.test(w)?li(f,"x",b.left-v.x):/right/.test(w)&&li(f,"x",b.right-v.x))})}function MC(r){var s=r.context.createConstraints;if(s){var c=s.top,l=s.right,d=s.bottom,h=s.left;(h&&h>=r.x||l&&l<=r.x)&&li(r,"x",r.x),(c&&c>=r.y||d&&d<=r.y)&&li(r,"y",r.y)}}function Gv(r,s){return-1!==r.indexOf(s)}function X0(r,s,c){return s?{x:r.x-c.x,y:r.y-c.y}:{x:r.x,y:r.y}}function hp(r,s){var c=this;r.on(["resize.start"],function(l){c.initSnap(l)}),r.on(["resize.move","resize.end"],1250,function(l){var w,d=l.context,h=d.shape,f=h.parent,g=d.direction,v=d.snapContext;if(!(l.originalEvent&&Gr(l.originalEvent)||Fs(l))){var b=v.pointsForTarget(f);b.initialized||((b=c.addSnapTargetPoints(b,h,f,g)).initialized=!0),("n"===(w=g)||"s"===w)&&li(l,"x",l.x),function(w){return"e"===w||"w"===w}(g)&&li(l,"y",l.y),s.snap(l,b)}}),r.on(["resize.cleanup"],function(){s.hide()})}function Q0(r,s){var c=zt(r),l=et(r),d={x:c.x,y:c.y};return-1!==s.indexOf("n")?d.y=l.top:-1!==s.indexOf("s")&&(d.y=l.bottom),-1!==s.indexOf("e")?d.x=l.right:-1!==s.indexOf("w")&&(d.x=l.left),d}function cl(r){this._canvas=r,this._asyncHide=es(Ti(this.hide,this),1e3)}Wv.$inject=["eventBus"],al.prototype.getSnapOrigin=function(r){return this._snapOrigins[r]},al.prototype.setSnapOrigin=function(r,s){this._snapOrigins[r]=s,-1===this._snapLocations.indexOf(r)&&this._snapLocations.push(r)},al.prototype.addDefaultSnap=function(r,s){var c=this._defaultSnaps[r];c||(c=this._defaultSnaps[r]=[]),c.push(s)},al.prototype.getSnapLocations=function(){return this._snapLocations},al.prototype.setSnapLocations=function(r){this._snapLocations=r},al.prototype.pointsForTarget=function(r){var s=r.id||r,c=this._targets[s];return c||(c=this._targets[s]=new dp).initDefaults(this._defaultSnaps),c},dp.prototype.add=function(r,s){var c=this._snapValues[r];c||(c=this._snapValues[r]={x:[],y:[]}),-1===c.x.indexOf(s.x)&&c.x.push(s.x),-1===c.y.indexOf(s.y)&&c.y.push(s.y)},dp.prototype.snap=function(r,s,c,l){var d=this._snapValues[s];return d&&function(h,f,g){var v,b;for(g=void 0===g?10:g,v=0;v<f.length;v++)if(ty((b=f[v])-h)<=g)return b}(r[c],d[c],l)},dp.prototype.initDefaults=function(r){var s=this;ne(r||{},function(c,l){ne(c,function(d){s.add(l,d)})})},ma.$inject=["elementRegistry","eventBus","snapping"],ma.prototype.initSnap=function(r){var s,c=this._elementRegistry,l=r.context,d=l.shape,h=l.snapContext;h||(h=l.snapContext=new al);var f=(s=c.get(d.id)?us(d,r):{x:r.x+us(d).x,y:r.y+us(d).y}).x-d.width/2,g=s.y-d.height/2,v=s.x+d.width/2,b=s.y+d.height/2;return h.setSnapOrigin("mid",{x:s.x-r.x,y:s.y-r.y}),Mm(d)||(h.setSnapOrigin("top-left",{x:f-r.x,y:g-r.y}),h.setSnapOrigin("bottom-right",{x:v-r.x,y:b-r.y})),h},ma.prototype.addSnapTargetPoints=function(r,s,c){return ne(this.getSnapTargets(s,c),function(l){if(Mm(l))Mm(s)&&r.add("mid",us(l));else if(l.waypoints){if(l.waypoints.length<3)return;ne(l.waypoints.slice(1,-1),function(d){r.add("mid",d)})}else r.add("mid",us(l))}),Re(s.x)&&Re(s.y)&&this._elementRegistry.get(s.id)&&r.add("mid",us(s)),r},ma.prototype.getSnapTargets=function(r,s){return vb(s).filter(function(c){return!c.hidden})},Oe(ic,ma),ic.$inject=["eventBus","injector"],ic.prototype.initSnap=function(r){var s=ma.prototype.initSnap.call(this,r),c=r.shape,l=!!this._elementRegistry.get(c.id);return ne(c.outgoing,function(d){var h=d.waypoints[0];s.setSnapOrigin(d.id+"-docking",X0(h=h.original||h,l,r))}),ne(c.incoming,function(d){var h=d.waypoints[d.waypoints.length-1];s.setSnapOrigin(d.id+"-docking",X0(h=h.original||h,l,r))}),V(c,"bpmn:Participant")&&s.setSnapLocations(["top-left","bottom-right","mid"]),s},ic.prototype.addSnapTargetPoints=function(r,s,c){ma.prototype.addSnapTargetPoints.call(this,r,s,c);var l=this.getSnapTargets(s,c);ne(l,function(h){var g;(V(g=h,"bpmn:SubProcess")&&qe(g)||V(g,"bpmn:Participant")||("bpmn:TextAnnotation",[s,h].every(function(g){return V(g,"bpmn:TextAnnotation")})))&&(r.add("top-left",ny(h)),r.add("bottom-right",yb(h)))});var d=this._elementRegistry;return ne(s.incoming,function(h){if(d.get(s.id)){Gv(l,h.source)||r.add("mid",zt(h.source));var f=h.waypoints[0];r.add(h.id+"-docking",f.original||f)}}),ne(s.outgoing,function(h){if(d.get(s.id)){Gv(l,h.target)||r.add("mid",zt(h.target));var f=h.waypoints[h.waypoints.length-1];r.add(h.id+"-docking",f.original||f)}}),V(c,"bpmn:SequenceFlow")&&(r=this.addSnapTargetPoints(r,s,c.parent)),r},ic.prototype.getSnapTargets=function(r,s){return ma.prototype.getSnapTargets.call(this,r,s).filter(function(c){return!V(c,"bpmn:Lane")})},hp.prototype.initSnap=function(r){var s=r.context,c=s.shape,l=s.direction,d=s.snapContext;d||(d=s.snapContext=new al);var h=Q0(c,l);return d.setSnapOrigin("corner",{x:h.x-r.x,y:h.y-r.y}),d},hp.prototype.addSnapTargetPoints=function(r,s,c,l){return ne(this.getSnapTargets(s,c),function(d){r.add("corner",yb(d)),r.add("corner",ny(d))}),r.add("corner",Q0(s,l)),r},hp.$inject=["eventBus","snapping"],hp.prototype.getSnapTargets=function(r,s){return vb(s).filter(function(c){return!(c.host===r||(h=c,h.waypoints)||function(h){return!!h.hidden}(c)||function(h){return!!h.labelTarget}(c));var h})},cl.$inject=["canvas"],cl.prototype.snap=function(r,s){var c=r.context.snapContext,l=c.getSnapLocations(),d={x:Fs(r,"x"),y:Fs(r,"y")};ne(l,function(h){var f=c.getSnapOrigin(h),g={x:r.x+f.x,y:r.y+f.y};if(ne(["x","y"],function(v){var b;d[v]||void 0!==(b=s.snap(g,h,v,7))&&(d[v]={value:b,originValue:b-f[v]})}),d.x&&d.y)return!1}),this.showSnapLine("vertical",d.x&&d.x.value),this.showSnapLine("horizontal",d.y&&d.y.value),ne(["x","y"],function(h){var f=d[h];Xn(f)&&li(r,h,f.originValue)})},cl.prototype._createLine=function(r){var s=this._canvas.getLayer("snap"),c=st("path");return Ne(c,{d:"M0,0 L0,0"}),$t(c).add("djs-snap-line"),ut(s,c),{update:function(l){Re(l)?Ne(c,"horizontal"===r?{d:"M-100000,"+l+" L+100000,"+l,display:""}:{d:"M "+l+",-100000 L "+l+", +100000",display:""}):Ne(c,{display:"none"})}}},cl.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},cl.prototype.showSnapLine=function(r,s){var c=this.getSnapLine(r);c&&c.update(s),this._asyncHide()},cl.prototype.getSnapLine=function(r){return this._snapLines||this._createSnapLines(),this._snapLines[r]},cl.prototype.hide=function(){ne(this._snapLines,function(r){r.update()})};var RC={__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ma],resizeSnapping:["type",hp],snapping:["type",cl]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Wv],createMoveSnapping:["type",ic]};function _t(r,s,c,l){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=r,this._eventBus=s,this._overlays=c,this._selection=l,this._container=ke(_t.BOX_HTML),this._searchInput=Un(_t.INPUT_SELECTOR,this._container),this._resultsContainer=Un(_t.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),s.on(["canvas.destroy","diagram.destroy"],this.close,this)}function Z0(r,s,c){var f,l=(f="",s.forEach(function(g){f+=g.matched?'<strong class="'+_t.RESULT_HIGHLIGHT_CLASS+'">'+hb(g.matched)+"</strong>":hb(g.normal)}),""!==f?f:null),d=ke(c);d.innerHTML=l,r.appendChild(d)}_t.$inject=["canvas","eventBus","overlays","selection"],_t.prototype._bindEvents=function(){var r=this;function s(c,l,d,h){r._eventMaps.push({el:c,type:d,listener:vt_bind(c,l,d,h)})}s(document,"html","click",function(c){r.close()}),s(this._container,_t.INPUT_SELECTOR,"click",function(c){c.stopPropagation(),c.delegateTarget.focus()}),s(this._container,_t.RESULT_SELECTOR,"mouseover",function(c){c.stopPropagation(),r._scrollToNode(c.delegateTarget),r._preselect(c.delegateTarget)}),s(this._container,_t.RESULT_SELECTOR,"click",function(c){c.stopPropagation(),r._select(c.delegateTarget)}),s(this._container,_t.INPUT_SELECTOR,"keydown",function(c){38===c.keyCode&&c.preventDefault(),40===c.keyCode&&c.preventDefault()}),s(this._container,_t.INPUT_SELECTOR,"keyup",function(c){if(27===c.keyCode)return r.close();if(13===c.keyCode){var l=r._getCurrentResult();return l?r._select(l):r.close()}return 38===c.keyCode?r._scrollToDirection(!0):40===c.keyCode?r._scrollToDirection():void(37!==c.keyCode&&39!==c.keyCode&&r._search(c.delegateTarget.value))})},_t.prototype._unbindEvents=function(){this._eventMaps.forEach(function(r){vt_unbind(r.el,r.type,r.listener)})},_t.prototype._search=function(r){var s=this;if(this._clearResults(),r&&""!==r){var c=this._searchProvider.find(r);if(c.length){c.forEach(function(d){var h=d.element.id,f=s._createResultNode(d,h);s._results[h]={element:d.element,node:f}});var l=Un(_t.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(l),this._preselect(l)}}},_t.prototype._scrollToDirection=function(r){var s=this._getCurrentResult();if(s){var c=r?s.previousElementSibling:s.nextElementSibling;c&&(this._scrollToNode(c),this._preselect(c))}},_t.prototype._scrollToNode=function(r){if(r&&r!==this._getCurrentResult()){var s=r.offsetTop,c=this._resultsContainer.scrollTop,l=s-this._resultsContainer.clientHeight+r.clientHeight;s<c?this._resultsContainer.scrollTop=s:c<l&&(this._resultsContainer.scrollTop=l)}},_t.prototype._clearResults=function(){Mu(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},_t.prototype._getCurrentResult=function(){return Un(_t.RESULT_SELECTED_SELECTOR,this._resultsContainer)},_t.prototype._createResultNode=function(r,s){var c=ke(_t.RESULT_HTML);return r.primaryTokens.length>0&&Z0(c,r.primaryTokens,_t.RESULT_PRIMARY_HTML),Z0(c,r.secondaryTokens,_t.RESULT_SECONDARY_HTML),jr(c,_t.RESULT_ID_ATTRIBUTE,s),this._resultsContainer.appendChild(c),c},_t.prototype.registerProvider=function(r){this._searchProvider=r},_t.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,Yi(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},_t.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,Yi(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},_t.prototype.toggle=function(){this.isOpen()?this.close():this.open()},_t.prototype.isOpen=function(){return this._open},_t.prototype._preselect=function(r){var s=this._getCurrentResult();if(r!==s){s&&Yi(s).remove(_t.RESULT_SELECTED_CLASS);var c=jr(r,_t.RESULT_ID_ATTRIBUTE),l=this._results[c].element;Yi(r).add(_t.RESULT_SELECTED_CLASS),this._resetOverlay(l),this._canvas.scrollToElement(l,{top:400}),this._selection.select(l),this._eventBus.fire("searchPad.preselected",l)}},_t.prototype._select=function(r){var s=jr(r,_t.RESULT_ID_ATTRIBUTE),c=this._results[s].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(c,{top:400}),this._selection.select(c),this._eventBus.fire("searchPad.selected",c)},_t.prototype._resetOverlay=function(r){if(this._overlayId&&this._overlays.remove(this._overlayId),r){var s={position:{bottom:(h=(c=pi(r)).height+2*6)-6,right:(d=c.width+12)-6},show:!0,html:'<div style="'+["width: "+d+"px","height: "+h+"px"].join("; ")+'" class="'+_t.OVERLAY_CLASS+'"></div>'};this._overlayId=this._overlays.add(r,s)}var c,d,h},_t.CONTAINER_SELECTOR=".djs-search-container",_t.INPUT_SELECTOR=".djs-search-input input",_t.RESULTS_CONTAINER_SELECTOR=".djs-search-results",_t.RESULT_SELECTOR=".djs-search-result",_t.RESULT_SELECTED_SELECTOR="."+(_t.RESULT_SELECTED_CLASS="djs-search-result-selected"),_t.RESULT_ID_ATTRIBUTE="data-result-id",_t.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",_t.OVERLAY_CLASS="djs-search-overlay",_t.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',_t.RESULT_HTML='<div class="djs-search-result"></div>',_t.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',_t.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var J0={__depends__:[nb,bo],searchPad:["type",_t]};function Rm(r,s,c){this._elementRegistry=r,this._canvas=c,s.registerProvider(this)}function km(r){return gt(r,function(s){return!!s.matched}).length>0}function kC(r,s){var c=[],l=r;if(!r)return c;r=r.toLowerCase(),s=s.toLowerCase();var d=r.indexOf(s);return d>-1?(0!==d&&c.push({normal:l.substr(0,d)}),c.push({matched:l.substr(d,s.length)}),s.length+d<r.length&&c.push({normal:l.substr(s.length+d,r.length)})):c.push({normal:l}),c}Rm.$inject=["elementRegistry","searchPad","canvas"],Rm.prototype.find=function(r){var s=this._canvas.getRootElement(),c=this._elementRegistry.filter(function(l){return!l.labelTarget});return c=gt(c,function(l){return l!==s}),Be(c=gt(c=Qn(c,function(l){return{primaryTokens:kC(ve(l),r),secondaryTokens:kC(l.id,r),element:l}}),function(l){return km(l.primaryTokens)||km(l.secondaryTokens)}),function(l){return ve(l.element)+l.element.id})};var qv={__depends__:[J0],__init__:["bpmnSearch"],bpmnSearch:["type",Rm]};function ga(r){Fe.call(this,r)}return Oe(ga,Fe),ga.Viewer=Kl,ga.NavigatedViewer=Ha,ga.prototype.createDiagram=ot(function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')}),ga.prototype._modules=[].concat(Kl.prototype._modules,ga.prototype._interactionModules=[sb,Hg,Ku,fh],ga.prototype._modelingModules=[LD,or,Kg,gf,VD,qc,gx,Rf,Ob,_f,Nx,Fx,_y,Bx,Ph,Ey,Vx,U0,vC,zv,qD,Ff,RC,qv]),ga}()},330:function(so){so.exports=function(){"use strict";var Di={exports:{}};Di.exports="function"==typeof Object.create?function(m,_){_&&(m.super_=_,m.prototype=Object.create(_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,_){if(_){m.super_=_;var x=function(){};x.prototype=_.prototype,m.prototype=new x,m.prototype.constructor=m}};var kn=Di.exports,Oe=Object.prototype.toString,Wd=Object.prototype.hasOwnProperty;function lr(m){return void 0!==m}function Ar(m){return"[object Array]"===Oe.call(m)}function vn(m){return"[object Object]"===Oe.call(m)}function El(m){return"[object Number]"===Oe.call(m)}function Ss(m){var _=Oe.call(m);return"[object Function]"===_||"[object AsyncFunction]"===_||"[object GeneratorFunction]"===_||"[object AsyncGeneratorFunction]"===_||"[object Proxy]"===_}function Ai(m){return"[object String]"===Oe.call(m)}function Ds(m,_){return Wd.call(m,_)}function bt(m,_){var x,S;return _=Ss(S=_)?S:function(P){return P===S},Re(m,function(S,P){if(_(S,P))return x=S,!1}),x}function Xn(m,_){var x=[];return Re(m,function(S,P){_(S,P)&&x.push(S)}),x}function Re(m,_){var x;if(void 0!==m){var S=Ar(m)?gt:tn;for(var P in m)if(Ds(m,P)&&!1===_(x=m[P],S(P)))return x}}function di(m,_,x){return Re(m,function(S,P){x=_(x,S,P)}),x}function Lr(m,_){return!!di(m,function(x,S,P){return x&&_(S,P)},!0)}function Jo(m){return function(_){return Lr(m,function(x,S){return _[S]===x})}}function tn(m){return m}function gt(m){return Number(m)}function ne(m,_){return m.bind(_)}function $p(){return($p=Object.assign||function(m){for(var _=1;_<arguments.length;_++){var x=arguments[_];for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(m[S]=x[S])}return m}).apply(this,arguments)}function Xe(m){for(var _=arguments.length,x=new Array(_>1?_-1:0),S=1;S<_;S++)x[S-1]=arguments[S];return $p.apply(void 0,[m].concat(x))}function ur(m,_){var x=this;m.on(["render.shape","render.connection"],_=_||1e3,function(S,P){var O=S.type,H=P.element,Y=P.gfx;if(x.canRender(H))return"render.shape"===O?x.drawShape(Y,H):x.drawConnection(Y,H)}),m.on(["render.getShapePath","render.getConnectionPath"],_,function(S,P){if(x.canRender(P))return"render.getShapePath"===S.type?x.getShapePath(P):x.getConnectionPath(P)})}function jt(m,_){var x=Qn(m);return x&&"function"==typeof x.$instanceOf&&x.$instanceOf(_)}function Qn(m){return m&&m.businessObject||m}function Ys(m){return!jt(m,"bpmn:CallActivity")&&(jt(m,"bpmn:SubProcess")?Qn(m).di&&!!Qn(m).di.isExpanded:!jt(m,"bpmn:Participant")||!!Qn(m).processRef)}function Xs(m){var S,_=m.businessObject,x=jt(S=_,"bpmn:FlowElement")||jt(S,"bpmn:Participant")||jt(S,"bpmn:Lane")||jt(S,"bpmn:SequenceFlow")||jt(S,"bpmn:MessageFlow")||jt(S,"bpmn:DataInput")||jt(S,"bpmn:DataOutput")?"name":jt(S,"bpmn:TextAnnotation")?"text":jt(S,"bpmn:Group")?"categoryValueRef":void 0;if(x)return"categoryValueRef"===x?function(S){var P=S.categoryValueRef;return P&&P.value||""}(_):_[x]||""}function gc(m,_){return _.appendChild(function(x,S){if(x.ownerDocument!==S.ownerDocument)try{return S.ownerDocument.importNode(x,!0)}catch(P){}return x}(m,_))}function pn(m,_){return gc(_,m),m}ur.prototype.canRender=function(){},ur.prototype.drawShape=function(){},ur.prototype.drawConnection=function(){},ur.prototype.getShapePath=function(){},ur.prototype.getConnectionPath=function(){};var zp={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Gd(m,_,x){var S=_.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),P=zp[S];P?(2===P&&"number"==typeof x&&(x=String(x)+"px"),m.style[S]=x):m.setAttributeNS(null,_,x)}function Be(m,_,x){if("string"==typeof _){if(void 0===x)return S=m,zp[P=_]?S.style[P]:S.getAttributeNS(null,P);Gd(m,_,x)}else!function(S,P){var O,H,Y=Object.keys(P);for(O=0;H=Y[O];O++)Gd(S,H,P[H])}(m,_);var S,P;return m}function Br(m,_){if(m.indexOf)return m.indexOf(_);for(var x=0;x<m.length;++x)if(m[x]===_)return x;return-1}var qd=/\s+/,Kd=Object.prototype.toString;function Yd(m){return void 0!==m}function yt(m){return new es(m)}function es(m){if(!m||!m.nodeType)throw new Error("A DOM element reference is required");this.el=m,this.list=m.classList}function Ti(m){var _=m.parentNode;return _&&_.removeChild(m),m}es.prototype.add=function(m){if(this.list)return this.list.add(m),this;var _=this.array();return~Br(_,m)||_.push(m),Yd(this.el.className.baseVal)?this.el.className.baseVal=_.join(" "):this.el.className=_.join(" "),this},es.prototype.remove=function(m){if("[object RegExp]"===Kd.call(m))return this.removeMatching(m);if(this.list)return this.list.remove(m),this;var _=this.array(),x=Br(_,m);return~x&&_.splice(x,1),this.el.className.baseVal=_.join(" "),this},es.prototype.removeMatching=function(m){for(var _=this.array(),x=0;x<_.length;x++)m.test(_[x])&&this.remove(_[x]);return this},es.prototype.toggle=function(m,_){return this.list?(Yd(_)?_!==this.list.toggle(m,_)&&this.list.toggle(m):this.list.toggle(m),this):(Yd(_)?_?this.add(m):this.remove(m):this.has(m)?this.remove(m):this.add(m),this)},es.prototype.array=function(){var m=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(qd);return""===m[0]&&m.shift(),m},es.prototype.has=es.prototype.contains=function(m){return this.list?this.list.contains(m):!!~Br(this.array(),m)};var Ln="http://www.w3.org/2000/svg",oe='<svg xmlns="'+Ln+'"';function Pt(m){var _=!1;"<svg"===m.substring(0,4)?-1===m.indexOf(Ln)&&(m=oe+m.substring(4)):(m=oe+">"+m+"</svg>",_=!0);var O,H,x=(O=m,(H=new DOMParser).async=!1,H.parseFromString(O,"text/xml"));if(!_)return x;for(var S=document.createDocumentFragment(),P=x.firstChild;P.firstChild;)S.appendChild(P.firstChild);return S}function Zt(m,_){var x;return"<"===m.charAt(0)?(x=Pt(m).firstChild,x=document.importNode(x,!0)):x=document.createElementNS(Ln,m),_&&Be(x,_),x}var jr=Zt("svg");function Xd(m,_){var x,S,P=Object.keys(_);for(x=0;S=P[x];x++)m[S]=_[S];return m}function yc(m){return m?jr.createSVGTransformFromMatrix(m):jr.createSVGTransform()}var Eg=/([&<>]{1})/g,X_=/([\n\r"]{1})/g,Yi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function ts(m,_){return m.replace(_,function(x,S){return Yi[S]||S})}function Mu(m,_){var x,S,P,O,H;switch(m.nodeType){case 3:_.push(ts(m.textContent,Eg));break;case 1:if(_.push("<",m.tagName),m.hasAttributes())for(x=0,S=(P=m.attributes).length;x<S;++x)O=P.item(x),_.push(" ",O.name,'="',ts(O.value,X_),'"');if(m.hasChildNodes()){for(_.push(">"),x=0,S=(H=m.childNodes).length;x<S;++x)Mu(H.item(x),_);_.push("</",m.tagName,">")}else _.push("/>");break;case 8:_.push("\x3c!--",ts(m.nodeValue,Eg),"--\x3e");break;case 4:_.push("<![CDATA[",m.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+m.nodeType)}return _}function Up(m,_){if(void 0!==_){try{!function(m,_){var x=Pt(_);if(function(H){for(var Y;Y=H.firstChild;)Ti(Y)}(m),_){"#document-fragment"===x.nodeName||(x=x.documentElement);for(var P=Array.prototype.slice.call(x.childNodes),O=0;O<P.length;O++)gc(P[O],m)}}(m,_)}catch(x){throw new Error("error parsing SVG: "+x.message)}return m}return function(x){for(var S=x.firstChild,P=[];S;)Mu(S,P),S=S.nextSibling;return P.join("")}(m)}function wl(m,_){return _ instanceof SVGMatrix?m.createSVGTransformFromMatrix(_):_}function ko(m,_){var x=m.transform.baseVal;return _&&(Array.isArray(_)||(_=[_]),function(S,P){var O,H;for(S.clear(),O=0;H=P[O];O++)S.appendItem(wl(S,H))}(x,_)),x.consolidate()}function vc(m){return m.join(",").replace(/,?([A-z]),?/g,"$1")}function wg(m){for(var _,x="",S=0;_=m[S];S++)x+=_.x+","+_.y+" ";return x}function Qd(m,_){var x=Zt("polyline");return Be(x,{points:wg(m)}),_&&Be(x,_),x}function Ze(m,_,x){return!!bt(m.eventDefinitions,function(S){return S.$type===_&&(P=m,Lr(x,function(H,Y){return P[Y]==H}));var P})}function _c(m){return m.businessObject.di}function Xi(m){return m.businessObject}function vt(m,_){var x=_c(m);return x.get("color:background-color")||x.get("bioc:fill")||_||"white"}function ke(m,_){var x=_c(m);return x.get("color:border-color")||x.get("bioc:stroke")||_||"black"}function bc(m,_,x){var S=_c(m).get("label");return S&&S.get("color:color")||_||ke(m,x)}var Mi=[].indexOf,Un=function(m,_){if(Mi)return m.indexOf(_);for(var x=0;x<m.length;++x)if(m[x]===_)return x;return-1},Wp=/\s+/,As=Object.prototype.toString;function xl(m){return new ut(m)}function ut(m){if(!m||!m.nodeType)throw new Error("A DOM element reference is required");this.el=m,this.list=m.classList}function Ru(m){for(;m.childNodes.length;)m.removeChild(m.childNodes[0]);return m}ut.prototype.add=function(m){if(this.list)return this.list.add(m),this;var _=this.array();return~Un(_,m)||_.push(m),this.el.className=_.join(" "),this},ut.prototype.remove=function(m){if("[object RegExp]"==As.call(m))return this.removeMatching(m);if(this.list)return this.list.remove(m),this;var _=this.array(),x=Un(_,m);return~x&&_.splice(x,1),this.el.className=_.join(" "),this},ut.prototype.removeMatching=function(m){for(var _=this.array(),x=0;x<_.length;x++)m.test(_[x])&&this.remove(_[x]);return this},ut.prototype.toggle=function(m,_){return this.list?(void 0!==_?_!==this.list.toggle(m,_)&&this.list.toggle(m):this.list.toggle(m),this):(void 0!==_?_?this.add(m):this.remove(m):this.has(m)?this.remove(m):this.add(m),this)},ut.prototype.array=function(){var m=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Wp);return""===m[0]&&m.shift(),m},ut.prototype.has=ut.prototype.contains=function(m){return this.list?this.list.contains(m):!!~Un(this.array(),m)};var Sl,Qs="undefined"!=typeof Element?Element.prototype:{},Ne=Qs.matches||Qs.matchesSelector||Qs.webkitMatchesSelector||Qs.mozMatchesSelector||Qs.msMatchesSelector||Qs.oMatchesSelector,ku=function(m,_){if(!m||1!==m.nodeType)return!1;if(Ne)return Ne.call(m,_);for(var x=m.parentNode.querySelectorAll(_),S=0;S<x.length;S++)if(x[S]==m)return!0;return!1},Zd=window.addEventListener?"addEventListener":"attachEvent",Gp=window.removeEventListener?"removeEventListener":"detachEvent",Cl="addEventListener"!==Zd?"on":"",$t=function(m,_,x,S){return m[Zd](Cl+_,x,S||!1),x},ri=["focus","blur"],Pu_bind=function(m,_,x,S,P){return-1!==ri.indexOf(x)&&(P=!0),$t(m,x,function(O){O.delegateTarget=function(Y,Q,he){for(var Te=Y;Te&&Te.nodeType!==document.DOCUMENT_NODE&&Te.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(ku(Te,Q))return Te;Te=Te.parentNode}return ku(Te,Q)?Te:null}(O.target||O.srcElement,_),O.delegateTarget&&S.call(m,O)},P)},Pu_unbind=function(m,_,x,S){return-1!==ri.indexOf(_)&&(S=!0),function(m,_,x,S){return m[Gp](Cl+_,x,S||!1),x}(m,_,x,S)},Ts=function(m,_){if("string"!=typeof m)throw new TypeError("String expected");_||(_=document);var x=/<([\w:]+)/.exec(m);if(!x)return _.createTextNode(m);m=m.replace(/^\s+|\s+$/g,"");var S=x[1];if("body"==S)return(P=_.createElement("html")).innerHTML=m,P.removeChild(P.lastChild);var P,O=hi[S]||hi._default,H=O[0],Y=O[1],Q=O[2];for((P=_.createElement("div")).innerHTML=Y+m+Q;H--;)P=P.lastChild;if(P.firstChild==P.lastChild)return P.removeChild(P.firstChild);for(var he=_.createDocumentFragment();P.firstChild;)he.appendChild(P.removeChild(P.firstChild));return he},Iu=!1;"undefined"!=typeof document&&((Sl=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Iu=!Sl.getElementsByTagName("link").length,Sl=void 0);var hi={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Iu?[1,"X<div>","</div>"]:[0,"",""]};function st(m,_){return(_=_||document).querySelector(m)}function Vr(m){m.parentNode&&m.parentNode.removeChild(m)}function Jd(m,_,x,S,P){var O=yc();O.setTranslate(_,x);var H=yc();H.setRotate(S||0,0,0);var Y=yc();Y.setScale(P||1,P||1),ko(m,[O,H,Y])}function qn(m,_,x){var S=yc();S.setTranslate(_,x),ko(m,S)}hi.td=hi.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],hi.option=hi.optgroup=[1,'<select multiple="multiple">',"</select>"],hi.thead=hi.tbody=hi.colgroup=hi.caption=hi.tfoot=[1,"<table>","</table>"],hi.polyline=hi.ellipse=hi.polygon=hi.circle=hi.text=hi.line=hi.path=hi.rect=hi.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var m,_,Ec=(m=function(m){var _=m.exports=function(x,S){if(S||(S=16),void 0===x&&(x=128),x<=0)return"0";for(var P=Math.log(Math.pow(2,x))/Math.log(S),O=2;P===1/0;O*=2)P=Math.log(Math.pow(2,x/O))/Math.log(S)*O;var H=P-Math.floor(P),Y="";for(O=0;O<Math.floor(P);O++)Y=Math.floor(Math.random()*S).toString(S)+Y;if(H){var Q=Math.pow(S,H);Y=Math.floor(Math.random()*Q).toString(S)+Y}var he=parseInt(Y,S);return he!==1/0&&he>=Math.pow(2,x)?_(x,S):Y};_.rack=function(x,S,P){var O=function(Y){var Q=0;do{if(Q++>10){if(!P)throw new Error("too many ID collisions, use more bits");x+=P}var he=_(x,S)}while(Object.hasOwnProperty.call(H,he));return H[he]=Y,he},H=O.hats={};return O.get=function(Y){return O.hats[Y]},O.set=function(Y,Q){return O.hats[Y]=Q,O},O.bits=x||128,O.base=S||16,O}},m(_={exports:{}}),_.exports);function Qi(m){if(!(this instanceof Qi))return new Qi(m);this._seed=(m=m||[128,36,1]).length?Ec.rack(m[0],m[1],m[2]):m}Qi.prototype.next=function(m){return this._seed(m||!0)},Qi.prototype.nextPrefixed=function(m,_){var x;do{x=m+this.next(!0)}while(this.assigned(x));return this.claim(x,_),x},Qi.prototype.claim=function(m,_){this._seed.set(m,_||!0)},Qi.prototype.assigned=function(m){return this._seed.get(m)||!1},Qi.prototype.unclaim=function(m){delete this._seed.hats[m]},Qi.prototype.clear=function(){var m,_=this._seed.hats;for(m in _)this.unclaim(m)};var Q_=new Qi,Zs=.95;function Ms(m,_,x,S,P,O,H){ur.call(this,_,H);var Y=m&&m.defaultFillColor,Q=m&&m.defaultStrokeColor,he=m&&m.defaultLabelColor,Te=Q_.next(),lt={},ot=x.computeStyle;function Ae(q,N){var re=Xe({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},N.attrs),le=N.ref||{x:0,y:0},de=N.scale||1;"none"===re.strokeDasharray&&(re.strokeDasharray=[1e4,1]);var tt=Zt("marker");Be(N.element,re),pn(tt,N.element),Be(tt,{id:q,viewBox:"0 0 20 20",refX:le.x,refY:le.y,markerWidth:20*de,markerHeight:20*de,orient:"auto"});var mt=st("defs",P._svg);mt||(mt=Zt("defs"),pn(P._svg,mt)),pn(mt,tt),lt[q]=tt}function $e(q){return q.replace(/[^0-9a-zA-z]+/g,"_")}function Ye(q,N,re){var le=q+"-"+$e(N)+"-"+$e(re)+"-"+Te;return lt[le]||function(de,tt,mt,It){if("sequenceflow-end"===tt){var Bt=Zt("path");Be(Bt,{d:"M 1 5 L 11 10 L 1 15 Z"}),Ae(de,{element:Bt,ref:{x:11,y:10},scale:.5,attrs:{fill:It,stroke:It}})}if("messageflow-start"===tt){var Nt=Zt("circle");Be(Nt,{cx:6,cy:6,r:3.5}),Ae(de,{element:Nt,attrs:{fill:mt,stroke:It},ref:{x:6,y:6}})}if("messageflow-end"===tt){var mr=Zt("path");Be(mr,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),Ae(de,{element:mr,attrs:{fill:mt,stroke:It,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===tt){var Ir=Zt("path");Be(Ir,{d:"M 11 5 L 1 10 L 11 15"}),Ae(de,{element:Ir,attrs:{fill:"none",stroke:It,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===tt){var ai=Zt("path");Be(ai,{d:"M 1 5 L 11 10 L 1 15"}),Ae(de,{element:ai,attrs:{fill:"none",stroke:It,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===tt){var zr=Zt("path");Be(zr,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),Ae(de,{element:zr,attrs:{fill:mt,stroke:It},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===tt){var wi=Zt("path");Be(wi,{d:"M 6 4 L 10 16"}),Ae(de,{element:wi,attrs:{stroke:It},ref:{x:0,y:10},scale:.5})}}(le,q,N,re),"url(#"+le+")"}function De(q,N,re,le,de){vn(le)&&(de=le,le=0),le=le||0,"none"===(de=ot(de,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete de.fillOpacity;var tt=N/2,mt=re/2,It=Zt("circle");return Be(It,{cx:tt,cy:mt,r:Math.round((N+re)/4-le)}),Be(It,de),pn(q,It),It}function we(q,N,re,le,de,tt){vn(de)&&(tt=de,de=0),de=de||0,tt=ot(tt,{stroke:"black",strokeWidth:2,fill:"white"});var mt=Zt("rect");return Be(mt,{x:de,y:de,width:N-2*de,height:re-2*de,rx:le,ry:le}),Be(mt,tt),pn(q,mt),mt}function ye(q,N,re){var le=Qd(N,re=ot(re,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return pn(q,le),le}function ge(q,N,re){re=ot(re,["no-fill"],{strokeWidth:2,stroke:"black"});var le=Zt("path");return Be(le,{d:N}),Be(le,re),pn(q,le),le}function Pe(q,N,re,le){return ge(N,re,Xe({"data-marker":q},le))}function Ue(q){return function(N,re){return Ve[q](N,re)}}function Fe(q){return Ve[q]}function V(q,N){var de,re=Xi(q),le="bpmn:IntermediateThrowEvent"===(de=re).$type||"bpmn:EndEvent"===de.$type;return re.eventDefinitions&&re.eventDefinitions.length>1?re.parallelMultiple?Fe("bpmn:ParallelMultipleEventDefinition")(N,q,le):Fe("bpmn:MultipleEventDefinition")(N,q,le):Ze(re,"bpmn:MessageEventDefinition")?Fe("bpmn:MessageEventDefinition")(N,q,le):Ze(re,"bpmn:TimerEventDefinition")?Fe("bpmn:TimerEventDefinition")(N,q,le):Ze(re,"bpmn:ConditionalEventDefinition")?Fe("bpmn:ConditionalEventDefinition")(N,q):Ze(re,"bpmn:SignalEventDefinition")?Fe("bpmn:SignalEventDefinition")(N,q,le):Ze(re,"bpmn:EscalationEventDefinition")?Fe("bpmn:EscalationEventDefinition")(N,q,le):Ze(re,"bpmn:LinkEventDefinition")?Fe("bpmn:LinkEventDefinition")(N,q,le):Ze(re,"bpmn:ErrorEventDefinition")?Fe("bpmn:ErrorEventDefinition")(N,q,le):Ze(re,"bpmn:CancelEventDefinition")?Fe("bpmn:CancelEventDefinition")(N,q,le):Ze(re,"bpmn:CompensateEventDefinition")?Fe("bpmn:CompensateEventDefinition")(N,q,le):Ze(re,"bpmn:TerminateEventDefinition")?Fe("bpmn:TerminateEventDefinition")(N,q,le):null}function Se(q,N,re){re=Xe({size:{width:100}},re);var le=O.createText(N||"",re);return yt(le).add("djs-label"),pn(q,le),le}function qe(q,N,re){return Se(q,Xi(N).name,{box:N,align:re,padding:5,style:{fill:bc(N,he,Q)}})}function Wn(q,N,re){Jd(Se(q,N,{box:{height:30,width:re.height},align:"center-middle",style:{fill:bc(re,he,Q)}}),0,1*re.height,270)}function ze(q){for(var N=q.waypoints,re="m  "+N[0].x+","+N[0].y,le=1;le<N.length;le++)re+="L"+N[le].x+","+N[le].y+" ";return re}var Ve=this.handlers={"bpmn:Event":function(q,N,re){return"fillOpacity"in re||(re.fillOpacity=Zs),De(q,N.width,N.height,re)},"bpmn:StartEvent":function(q,N){var re={fill:vt(N,Y),stroke:ke(N,Q)};Xi(N).isInterrupting||(re={strokeDasharray:"6",strokeLinecap:"round",fill:vt(N,Y),stroke:ke(N,Q)});var le=Fe("bpmn:Event")(q,N,re);return V(N,q),le},"bpmn:MessageEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:re?ke(N,Q):vt(N,Y),stroke:re?vt(N,Y):ke(N,Q)})},"bpmn:TimerEventDefinition":function(q,N){var re=De(q,N.width,N.height,.2*N.height,{strokeWidth:2,fill:vt(N,Y),stroke:ke(N,Q)});ge(q,S.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:ke(N,Q)});for(var le=0;le<12;le++)ge(q,S.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.5}}),{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*le+","+N.height/2+","+N.width/2+")",stroke:ke(N,Q)});return re},"bpmn:EscalationEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)})},"bpmn:ConditionalEventDefinition":function(q,N){return ge(q,S.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:ke(N,Q)})},"bpmn:LinkEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)})},"bpmn:ErrorEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)})},"bpmn:CancelEventDefinition":function(q,N,re){var de,mt,le=ge(q,S.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)});return de=le,45,(mt=yc()).setRotate(45,0,0),ko(de,mt),le},"bpmn:CompensateEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)})},"bpmn:SignalEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:N.width,containerHeight:N.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:re?ke(N,Q):"none",stroke:ke(N,Q)})},"bpmn:MultipleEventDefinition":function(q,N,re){return ge(q,S.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:N.width,containerHeight:N.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:re?ke(N,Q):"none"})},"bpmn:ParallelMultipleEventDefinition":function(q,N){return ge(q,S.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:N.width,containerHeight:N.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:ke(N,Q),stroke:ke(N,Q)})},"bpmn:EndEvent":function(q,N){var re=Fe("bpmn:Event")(q,N,{strokeWidth:4,fill:vt(N,Y),stroke:ke(N,Q)});return V(N,q),re},"bpmn:TerminateEventDefinition":function(q,N){return De(q,N.width,N.height,8,{strokeWidth:4,fill:ke(N,Q),stroke:ke(N,Q)})},"bpmn:IntermediateEvent":function(q,N){var re=Fe("bpmn:Event")(q,N,{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)});return De(q,N.width,N.height,3,{strokeWidth:1,fill:vt(N,"none"),stroke:ke(N,Q)}),V(N,q),re},"bpmn:IntermediateCatchEvent":Ue("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":Ue("bpmn:IntermediateEvent"),"bpmn:Activity":function(q,N,re){return"fillOpacity"in(re=re||{})||(re.fillOpacity=Zs),we(q,N.width,N.height,10,re)},"bpmn:Task":function(q,N){var re={fill:vt(N,Y),stroke:ke(N,Q)},le=Fe("bpmn:Activity")(q,N,re);return qe(q,N,"center-middle"),ve(q,N),le},"bpmn:ServiceTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return ge(q,S.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)}),ge(q,S.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:vt(N,Y)}),ge(q,S.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)}),re},"bpmn:UserTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return ge(q,S.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:vt(N,Y),stroke:ke(N,Q)}),ge(q,S.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:vt(N,Y),stroke:ke(N,Q)}),ge(q,S.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ke(N,Q),stroke:ke(N,Q)}),re},"bpmn:ManualTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return ge(q,S.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:vt(N,Y),stroke:ke(N,Q)}),re},"bpmn:SendTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return ge(q,S.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:ke(N,Q),stroke:vt(N,Y)}),re},"bpmn:ReceiveTask":function(q,N){var re,le=Xi(N),de=Fe("bpmn:Task")(q,N);return le.instantiate?(De(q,28,28,4.4,{strokeWidth:1}),re=S.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):re=S.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),ge(q,re,{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)}),de},"bpmn:ScriptTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return ge(q,S.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:ke(N,Q)}),re},"bpmn:BusinessRuleTask":function(q,N){var re=Fe("bpmn:Task")(q,N);return Be(ge(q,S.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:vt(N,"#aaaaaa"),stroke:ke(N,Q)}),Be(ge(q,S.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:ke(N,Q)}),re},"bpmn:SubProcess":function(q,N,re){re=Xe({fill:vt(N,Y),stroke:ke(N,Q)},re);var tt,le=Fe("bpmn:Activity")(q,N,re),de=Ys(N);return(tt=N)&&!!Qn(tt).triggeredByEvent&&Be(le,{strokeDasharray:"1,2"}),qe(q,N,de?"center-top":"center-middle"),de?ve(q,N):ve(q,N,["SubProcessMarker"]),le},"bpmn:AdHocSubProcess":function(q,N){return Fe("bpmn:SubProcess")(q,N)},"bpmn:Transaction":function(q,N){var re=Fe("bpmn:SubProcess")(q,N),le=x.style(["no-fill","no-events"],{stroke:ke(N,Q)});return we(q,N.width,N.height,8,3,le),re},"bpmn:CallActivity":function(q,N){return Fe("bpmn:SubProcess")(q,N,{strokeWidth:5})},"bpmn:Participant":function(q,N){var re={fillOpacity:Zs,fill:vt(N,Y),stroke:ke(N,Q)},le=Fe("bpmn:Lane")(q,N,re);return Ys(N)?(ye(q,[{x:30,y:0},{x:30,y:N.height}],{stroke:ke(N,Q)}),Wn(q,Xi(N).name,N)):Se(q,Xi(N).name,{box:N,align:"center-middle",style:{fill:bc(N,he,Q)}}),!!Xi(N).participantMultiplicity&&Fe("ParticipantMultiplicityMarker")(q,N),le},"bpmn:Lane":function(q,N,re){var le=we(q,N.width,N.height,0,Xe({fill:vt(N,Y),fillOpacity:.35,stroke:ke(N,Q)},re)),de=Xi(N);return"bpmn:Lane"===de.$type&&Wn(q,de.name,N),le},"bpmn:InclusiveGateway":function(q,N){var re=Fe("bpmn:Gateway")(q,N);return De(q,N.width,N.height,.24*N.height,{strokeWidth:2.5,fill:vt(N,Y),stroke:ke(N,Q)}),re},"bpmn:ExclusiveGateway":function(q,N){var re=Fe("bpmn:Gateway")(q,N),le=S.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.32,my:.3}});return _c(N).isMarkerVisible&&ge(q,le,{strokeWidth:1,fill:ke(N,Q),stroke:ke(N,Q)}),re},"bpmn:ComplexGateway":function(q,N){var re=Fe("bpmn:Gateway")(q,N);return ge(q,S.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:ke(N,Q),stroke:ke(N,Q)}),re},"bpmn:ParallelGateway":function(q,N){var re=Fe("bpmn:Gateway")(q,N);return ge(q,S.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:N.width,containerHeight:N.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:ke(N,Q),stroke:ke(N,Q)}),re},"bpmn:EventBasedGateway":function(q,N){var re=Xi(N),le=Fe("bpmn:Gateway")(q,N);De(q,N.width,N.height,.2*N.height,{strokeWidth:1,fill:"none",stroke:ke(N,Q)});var de=re.eventGatewayType,tt=!!re.instantiate;"Parallel"===de?Be(ge(q,S.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}})),{strokeWidth:1,fill:"none"}):"Exclusive"===de&&(tt||Be(De(q,N.width,N.height,.26*N.height),{strokeWidth:1,fill:"none",stroke:ke(N,Q)}),ge(q,S.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:N.width,containerHeight:N.height,position:{mx:.36,my:.44}}),{strokeWidth:2,fill:vt(N,"none"),stroke:ke(N,Q)}));return le},"bpmn:Gateway":function(q,N){var re={fill:vt(N,Y),fillOpacity:Zs,stroke:ke(N,Q)};return function(le,de,tt,mt){var It=de/2,Bt=tt/2,Nt=[{x:It,y:0},{x:de,y:Bt},{x:It,y:tt},{x:0,y:Bt}].map(function(Ir){return Ir.x+","+Ir.y}).join(" ");mt=ot(mt,{stroke:"black",strokeWidth:2,fill:"white"});var mr=Zt("polygon");return Be(mr,{points:Nt}),Be(mr,mt),pn(le,mr),mr}(q,N.width,N.height,re)},"bpmn:SequenceFlow":function(q,N){var re,le=ze(N),de=vt(N,Y),tt=ke(N,Q),mt=ge(q,le,{strokeLinejoin:"round",markerEnd:Ye("sequenceflow-end",de,tt),stroke:ke(N,Q)}),It=Xi(N);return N.source&&(re=N.source.businessObject,It.conditionExpression&&re.$instanceOf("bpmn:Activity")&&Be(mt,{markerStart:Ye("conditional-flow-marker",de,tt)}),re.default&&(re.$instanceOf("bpmn:Gateway")||re.$instanceOf("bpmn:Activity"))&&re.default===It&&Be(mt,{markerStart:Ye("conditional-default-flow-marker",de,tt)})),mt},"bpmn:Association":function(q,N,re){var le=Xi(N),de=vt(N,Y),tt=ke(N,Q);return re=Xe({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:ke(N,Q)},re||{}),"One"!==le.associationDirection&&"Both"!==le.associationDirection||(re.markerEnd=Ye("association-end",de,tt)),"Both"===le.associationDirection&&(re.markerStart=Ye("association-start",de,tt)),ye(q,N.waypoints,re)},"bpmn:DataInputAssociation":function(q,N){var re=vt(N,Y),le=ke(N,Q);return Fe("bpmn:Association")(q,N,{markerEnd:Ye("association-end",re,le)})},"bpmn:DataOutputAssociation":function(q,N){var re=vt(N,Y),le=ke(N,Q);return Fe("bpmn:Association")(q,N,{markerEnd:Ye("association-end",re,le)})},"bpmn:MessageFlow":function(q,N){var re=Xi(N),le=_c(N),de=vt(N,Y),tt=ke(N,Q),mt=ge(q,ze(N),{markerEnd:Ye("messageflow-end",de,tt),markerStart:Ye("messageflow-start",de,tt),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:ke(N,Q)});if(re.messageRef){var It=mt.getPointAtLength(mt.getTotalLength()/2),Bt=S.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:It.x,y:It.y}}),Nt={strokeWidth:1};"initiating"===le.messageVisibleKind?(Nt.fill="white",Nt.stroke="black"):(Nt.fill="#888",Nt.stroke="white");var mr=ge(q,Bt,Nt),Ir=Se(q,re.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:ke(N,he)}}),ai=mr.getBBox(),zr=Ir.getBBox();Jd(Ir,It.x-zr.width/2,It.y+ai.height/2+10,0)}return mt},"bpmn:DataObject":function(q,N){var le,de,re=ge(q,S.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:.474,my:.296}}),{fill:vt(N,Y),fillOpacity:Zs,stroke:ke(N,Q)});return de=(le=Xi(N)).dataObjectRef,(le.isCollection||de&&de.isCollection)&&function(le,de){ge(le,S.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:de.width,containerHeight:de.height,position:{mx:.33,my:(de.height-18)/de.height}}),{strokeWidth:2})}(q,N),re},"bpmn:DataObjectReference":Ue("bpmn:DataObject"),"bpmn:DataInput":function(q,N){var re=S.getRawPath("DATA_ARROW"),le=Fe("bpmn:DataObject")(q,N);return ge(q,re,{strokeWidth:1}),le},"bpmn:DataOutput":function(q,N){var re=S.getRawPath("DATA_ARROW"),le=Fe("bpmn:DataObject")(q,N);return ge(q,re,{strokeWidth:1,fill:"black"}),le},"bpmn:DataStoreReference":function(q,N){return ge(q,S.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:vt(N,Y),fillOpacity:Zs,stroke:ke(N,Q)})},"bpmn:BoundaryEvent":function(q,N){var re=Xi(N).cancelActivity,le={strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)};re||(le.strokeDasharray="6",le.strokeLinecap="round");var de=Xe({},le,{fillOpacity:1}),tt=Xe({},le,{fill:"none"}),mt=Fe("bpmn:Event")(q,N,de);return De(q,N.width,N.height,3,tt),V(N,q),mt},"bpmn:Group":function(q,N){return we(q,N.width,N.height,10,{stroke:ke(N,Q),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(q,N){return de={width:90,height:30,x:(le=N).width/2+le.x,y:le.height/2+le.y},Se(q,Xs(le),{box:de,fitBox:!0,style:Xe({},O.getExternalStyle(),{fill:bc(le,he,Q)})});var le,de},"bpmn:TextAnnotation":function(q,N){var re=we(q,N.width,N.height,0,0,{fill:"none",stroke:"none"});return ge(q,S.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:0,my:0}}),{stroke:ke(N,Q)}),Se(q,Xi(N).text||"",{box:N,align:"left-top",padding:5,style:{fill:bc(N,he,Q)}}),re},ParticipantMultiplicityMarker:function(q,N){Pe("participant-multiplicity",q,S.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:N.width/2/N.width,my:(N.height-15)/N.height}}),{strokeWidth:2,fill:vt(N,Y),stroke:ke(N,Q)})},SubProcessMarker:function(q,N){qn(we(q,14,14,0,{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)}),N.width/2-7.5,N.height-20),Pe("sub-process",q,S.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2-7.5)/N.width,my:(N.height-20)/N.height}}),{fill:vt(N,Y),stroke:ke(N,Q)})},ParallelMarker:function(q,N,re){Pe("parallel",q,S.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+re.parallel)/N.width,my:(N.height-20)/N.height}}),{fill:vt(N,Y),stroke:ke(N,Q)})},SequentialMarker:function(q,N,re){Pe("sequential",q,S.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+re.seq)/N.width,my:(N.height-19)/N.height}}),{fill:vt(N,Y),stroke:ke(N,Q)})},CompensationMarker:function(q,N,re){Pe("compensation",q,S.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+re.compensation)/N.width,my:(N.height-13)/N.height}}),{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q)})},LoopMarker:function(q,N,re){Pe("loop",q,S.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+re.loop)/N.width,my:(N.height-7)/N.height}}),{strokeWidth:1,fill:vt(N,Y),stroke:ke(N,Q),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(q,N,re){Pe("adhoc",q,S.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:N.width,containerHeight:N.height,position:{mx:(N.width/2+re.adhoc)/N.width,my:(N.height-15)/N.height}}),{strokeWidth:1,fill:ke(N,Q),stroke:ke(N,Q)})}};function ve(q,N,re){var le,de=Xi(N),tt=re&&-1!==re.indexOf("SubProcessMarker");le=tt?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},Re(re,function(Bt){Fe(Bt)(q,N,le)}),de.isForCompensation&&Fe("CompensationMarker")(q,N,le),"bpmn:AdHocSubProcess"===de.$type&&Fe("AdhocMarker")(q,N,le);var mt=de.loopCharacteristics,It=mt&&mt.isSequential;mt&&(void 0===It&&Fe("LoopMarker")(q,N,le),!1===It&&Fe("ParallelMarker")(q,N,le),!0===It&&Fe("SequentialMarker")(q,N,le))}this._drawPath=ge}kn(Ms,ur),Ms.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Ms.prototype.canRender=function(m){return jt(m,"bpmn:BaseElement")},Ms.prototype.drawShape=function(m,_){return(0,this.handlers[_.type])(m,_)},Ms.prototype.drawConnection=function(m,_){return(0,this.handlers[_.type])(m,_)},Ms.prototype.getShapePath=function(m){return jt(m,"bpmn:Event")?vc([["M",(_=m).x+_.width/2,_.y+_.height/2],["m",0,-(P=_.width/2)],["a",P,P,0,1,1,0,2*P],["a",P,P,0,1,1,0,-2*P],["z"]]):jt(m,"bpmn:Activity")?vc([["M",(O=m).x+(H=10),O.y],["l",(he=O.width)-20,0],["a",H,H,0,0,1,H,H],["l",0,(Te=O.height)-20],["a",H,H,0,0,1,-H,H],["l",20-he,0],["a",H,H,0,0,1,-H,-H],["l",0,20-Te],["a",H,H,0,0,1,H,-H],["z"]]):jt(m,"bpmn:Gateway")?function(O){var H=O.width/2,Y=O.height/2;return vc([["M",O.x+H,O.y],["l",H,Y],["l",-H,Y],["l",-H,-Y],["z"]])}(m):function(O){var Q=O.width;return vc([["M",O.x,O.y],["l",Q,0],["l",0,O.height],["l",-Q,0],["z"]])}(m);var O,H,he,Te,_,P};var eh={width:150,height:50};function th(m,_){var x;_.textContent=m;try{var S,P=""===m;return _.textContent=P?"dummy":m,S={width:(x=_.getBBox()).width+2*x.x,height:x.height},P&&(S.width=0),S}catch(O){return{width:0,height:0}}}function Dl(m,_,x){for(var S,P=m.shift(),O=P;;){if((S=th(O,x)).width=O?S.width:0," "===O||""===O||S.width<Math.round(_)||O.length<2)return Al(m,O,P,S);O=qp(O,S.width,_)}}function Al(m,_,x,S){if(_.length<x.length){var P=x.slice(_.length).trim();m.unshift(P)}return{width:S.width,height:S.height,text:_}}function qp(m,_,x){var S=Math.max(m.length*(x/_),1),P=function(O,H){var Y,Q=O.split(/(\s|-|\u00AD)/g),he=[],Te=0;if(Q.length>1)for(;Y=Q.shift();){if(!(Y.length+Te<H)){"-"!==Y&&"\xad"!==Y||he.pop();break}he.push(Y),Te+=Y.length}var lt=he[he.length-1];return lt&&"\xad"===lt&&(he[he.length-1]="-"),he.join("")}(m,S);return P||(P=m.slice(0,Math.max(Math.round(S-1),1))),P}function Ra(m){this._config=Xe({},{size:eh,padding:0,style:{},align:"center-top"},m||{})}function Ou(m){var _=Xe({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},m&&m.defaultStyle||{}),x=parseInt(_.fontSize,10)-1,S=Xe({},_,{fontSize:x},m&&m.externalStyle||{}),P=new Ra({style:_});this.getExternalLabelBounds=function(O,H){var Y=P.getDimensions(H,{box:{width:90,height:30,x:O.width/2+O.x,y:O.height/2+O.y},style:S});return{x:Math.round(O.x+O.width/2-Y.width/2),y:Math.round(O.y),width:Math.ceil(Y.width),height:Math.ceil(Y.height)}},this.getTextAnnotationBounds=function(O,H){var Y=P.getDimensions(H,{box:O,style:_,align:"left-top",padding:5});return{x:O.x,y:O.y,width:O.width,height:Math.max(30,Math.round(Y.height))}},this.createText=function(O,H){return P.createText(O,H||{})},this.getDefaultStyle=function(){return _},this.getExternalStyle=function(){return S}}Ra.prototype.createText=function(m,_){return this.layoutText(m,_).element},Ra.prototype.getDimensions=function(m,_){return this.layoutText(m,_).dimensions},Ra.prototype.layoutText=function(m,_){var we,De,x=Xe({},this._config.size,_.box),S=Xe({},this._config.style,_.style),P_horizontal=(we=(_.align||this._config.align).split("-"))[0]||"center",P_vertical=we[1]||"top",O=vn(De=void 0!==_.padding?_.padding:this._config.padding)?Xe({top:0,left:0,right:0,bottom:0},De):{top:De,left:De,right:De,bottom:De},H=_.fitBox||!1,Y=function(De){if("fontSize"in De&&"lineHeight"in De)return De.lineHeight*parseInt(De.fontSize,10)}(S),Q=m.split(/\u00AD?\r?\n/),he=[],Te=x.width-O.left-O.right,lt=Zt("text");for(Be(lt,{x:0,y:0}),Be(lt,S),pn(function(){var De=document.getElementById("helper-svg");return De||(Be(De=Zt("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(De)),De}(),lt);Q.length;)he.push(Dl(Q,Te,lt));"middle"===P_vertical&&(O.top=O.bottom=0);var ot=di(he,function(De,we,ye){return De+(Y||we.height)},0)+O.top+O.bottom,Ae=di(he,function(De,we,ye){return we.width>De?we.width:De},0),$e=O.top;"middle"===P_vertical&&($e+=(x.height-ot)/2),$e-=(Y||he[0].height)/4;var Ye=Zt("text");return Be(Ye,S),Re(he,function(De){var we;switch($e+=Y||De.height,P_horizontal){case"left":we=O.left;break;case"right":we=(H?Ae:Te)-O.right-De.width;break;default:we=Math.max(((H?Ae:Te)-De.width)/2+O.left,0)}var ye=Zt("tspan");Be(ye,{x:we,y:$e}),ye.textContent=De.text,pn(Ye,ye)}),Ti(lt),{dimensions:{width:Ae,height:ot},element:Ye}},Ou.$inject=["config.textRenderer"];var Nu=/\{([^{}]+)\}/g,xg=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,Cg={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ms],textRenderer:["type",Ou],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(m){return this.pathMap[m].d},this.getScaledPath=function(m,_){var x,S,P=this.pathMap[m];_.abspos?(x=_.abspos.x,S=_.abspos.y):(x=_.containerWidth*_.position.mx,S=_.containerHeight*_.position.my);var H,Y={};if(_.position){for(var Q=_.containerHeight/P.height*_.yScaleFactor,he=_.containerWidth/P.width*_.xScaleFactor,Te=0;Te<P.heightElements.length;Te++)Y["y"+Te]=P.heightElements[Te]*Q;for(var lt=0;lt<P.widthElements.length;lt++)Y["x"+lt]=P.widthElements[lt]*he}return H={mx:x,my:S,e:Y},String(P.d).replace(Nu,function(ot,Ae){return $e=ot,we=De=H,Ae.replace(xg,function(ye,ge,Pe,Ue,Fe){ge=ge||Ue,we&&(ge in we&&(we=we[ge]),"function"==typeof we&&Fe&&(we=we()))}),we=(null==we||we==De?$e:we)+"";var $e,De,we})}}]},nh={translate:["value",function(m,_){return _=_||{},m.replace(/{([^}]+)}/g,function(x,S){return _[S]||"{"+S+"}"})}]},Fu={width:90,height:20};function Ri(m,_){var x,S,P,H,O=m.di.label;return O&&O.bounds?(P=O.bounds,S={width:Math.max(Fu.width,P.width),height:P.height},x={x:P.x+P.width/2,y:P.y+P.height/2}):(x=(H=_).waypoints?function(m){var Q,he,Te,lt,_=m.length/2-1,x=m[Math.floor(_)],S=m[Math.ceil(_+.01)],P=(he=(Q=m).length/2-1,Te=Q[Math.floor(he)],lt=Q[Math.ceil(he+.01)],{x:Te.x+(lt.x-Te.x)/2,y:Te.y+(lt.y-Te.y)/2}),O=Math.atan((S.y-x.y)/(S.x-x.x)),H=P.x,Y=P.y;return Math.abs(O)<Math.PI/2?Y-=15:H+=15,{x:H,y:Y}}(H.waypoints):jt(H,"bpmn:Group")?{x:H.x+H.width/2,y:H.y+Fu.height/2}:{x:H.x+H.width/2,y:H.y+H.height+Fu.height/2},S=Fu),Xe({x:x.x-S.width/2,y:x.y-S.height/2},S)}function Po(m){return{top:m.y,right:m.x+(m.width||0),bottom:m.y+(m.height||0),left:m.x}}function dr(m){return _={x:m.x+(m.width||0)/2,y:m.y+(m.height||0)/2},{x:Math.round(_.x),y:Math.round(_.y)};var _}function vi(m){return m?"<"+m.$type+(m.id?' id="'+m.id:"")+'" />':"<null>"}function Js(m,_){return Xe({id:m.id,type:m.$type,businessObject:m},_)}function _n(m,_,x){var S=m.di.waypoint;return!S||S.length<2?[dr(_),dr(x)]:S.map(function(P){return{x:P.x,y:P.y}})}function Tl(m,_,x,S){return new Error(m("element {element} referenced by {referenced}#{property} not yet drawn",{element:vi(x),referenced:vi(_),property:S}))}function Ct(m,_,x,S,P,O){this._eventBus=m,this._canvas=_,this._elementFactory=x,this._elementRegistry=S,this._translate=P,this._textRenderer=O}Ct.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Ct.prototype.add=function(m,_){var x,P,O,H,Y,Q,De,he=m.di,Te=this._translate;if(jt(he,"bpmndi:BPMNPlane"))x=this._elementFactory.createRoot(Js(m)),this._canvas.setRootElement(x);else if(jt(he,"bpmndi:BPMNShape")){var lt=!Ys(m),ot=jt(m,"bpmn:Group"),Ae=m.di.bounds;x=this._elementFactory.createShape(Js(m,{collapsed:lt,hidden:_&&(_.hidden||_.collapsed),x:Math.round(Ae.x),y:Math.round(Ae.y),width:Math.round(Ae.width),height:Math.round(Ae.height),isFrame:ot})),jt(m,"bpmn:BoundaryEvent")&&this._attachBoundary(m,x),jt(m,"bpmn:Lane")&&(P=0),jt(m,"bpmn:DataStoreReference")&&(O=_,Q=(H=dr(Ae)).y,(Y=H.x)>=O.x&&Y<=O.x+O.width&&Q>=O.y&&Q<=O.y+O.height||(_=this._canvas.getRootElement())),this._canvas.addShape(x,_,P)}else{if(!jt(he,"bpmndi:BPMNEdge"))throw new Error(Te("unknown di {di} for element {semantic}",{di:vi(he),semantic:vi(m)}));var $e=this._getSource(m),Ye=this._getTarget(m);x=this._elementFactory.createConnection(Js(m,{hidden:_&&(_.hidden||_.collapsed),source:$e,target:Ye,waypoints:_n(m,$e,Ye)})),jt(m,"bpmn:DataAssociation")&&(_=null),jt(m,"bpmn:SequenceFlow")&&(P=0),this._canvas.addConnection(x,_,P)}return(jt(De=m,"bpmn:Event")||jt(De,"bpmn:Gateway")||jt(De,"bpmn:DataStoreReference")||jt(De,"bpmn:DataObjectReference")||jt(De,"bpmn:DataInput")||jt(De,"bpmn:DataOutput")||jt(De,"bpmn:SequenceFlow")||jt(De,"bpmn:MessageFlow")||jt(De,"bpmn:Group"))&&Xs(x)&&this.addLabel(m,x),this._eventBus.fire("bpmnElement.added",{element:x}),x},Ct.prototype._attachBoundary=function(m,_){var x=this._translate,S=m.attachedToRef;if(!S)throw new Error(x("missing {semantic}#attachedToRef",{semantic:vi(m)}));var P=this._elementRegistry.get(S.id),O=P&&P.attachers;if(!P)throw Tl(x,m,S,"attachedToRef");_.host=P,O||(P.attachers=O=[]),-1===O.indexOf(_)&&O.push(_)},Ct.prototype.addLabel=function(m,_){var x,S,P;return x=Ri(m,_),(S=Xs(_))&&(x=this._textRenderer.getExternalLabelBounds(x,S)),P=this._elementFactory.createLabel(Js(m,{id:m.id+"_label",labelTarget:_,type:"label",hidden:_.hidden||!Xs(_),x:Math.round(x.x),y:Math.round(x.y),width:Math.round(x.width),height:Math.round(x.height)})),this._canvas.addShape(P,_.parent)},Ct.prototype._getEnd=function(m,_){var x,S,P=m.$type,O=this._translate;if(S=m[_+"Ref"],"source"===_&&"bpmn:DataInputAssociation"===P&&(S=S&&S[0]),("source"===_&&"bpmn:DataOutputAssociation"===P||"target"===_&&"bpmn:DataInputAssociation"===P)&&(S=m.$parent),x=S&&this._getElement(S))return x;throw S?Tl(O,m,S,_+"Ref"):new Error(O("{semantic}#{side} Ref not specified",{semantic:vi(m),side:_}))},Ct.prototype._getSource=function(m){return this._getEnd(m,"source")},Ct.prototype._getTarget=function(m){return this._getEnd(m,"target")},Ct.prototype._getElement=function(m){return this._elementRegistry.get(m.id)};var Rs={__depends__:[Cg,{__depends__:[nh],bpmnImporter:["type",Ct]}]};function wc(m){return m.originalEvent||m.srcEvent}function pi(m,_){return(wc(m)||m).button===_}function dt(m){return pi(m,0)}function Lu(m){return!0}function Zi(m){return dt(m)||function(_){return pi(_,1)}(m)}function Dg(m,_,x){var S=this;function P(we,ye,ge){var Pe,Ue;!(Q[we]||dt)(ye)||(ge?Ue=_.getGraphics(ge):(Pe=ye.delegateTarget||ye.target)&&(ge=_.get(Ue=Pe)),Ue&&ge&&!1===m.fire(we,{element:ge,gfx:Ue,originalEvent:ye})&&(ye.stopPropagation(),ye.preventDefault()))}var O={};function H(we){return O[we]}var Y={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},Q={"element.contextmenu":Lu,"element.mousedown":Zi,"element.mouseup":Zi,"element.click":Zi,"element.dblclick":Zi};function he(we,ye,ge,Pe){var Ue=O[ge]=function(Fe){P(ge,Fe)};Pe&&(Q[ge]=Pe),Ue.$delegate=Pu_bind(we,"svg, .djs-element",ye,Ue)}function Te(we,ye,ge){var Pe=H(ge);Pe&&Pu_unbind(we,ye,Pe.$delegate)}m.on("canvas.destroy",function(we){var ye;ye=we.svg,Re(Y,function(ge,Pe){Te(ye,Pe,ge)})}),m.on("canvas.init",function(we){var ye;ye=we.svg,Re(Y,function(ge,Pe){he(ye,Pe,ge)})}),m.on(["shape.added","connection.added"],function(we){m.fire("interactionEvents.createHit",{element:we.element,gfx:we.gfx})}),m.on(["shape.changed","connection.changed"],500,function(we){m.fire("interactionEvents.updateHit",{element:we.element,gfx:we.gfx})}),m.on("interactionEvents.createHit",500,function(we){S.createDefaultHit(we.element,we.gfx)}),m.on("interactionEvents.updateHit",function(we){S.updateDefaultHit(we.element,we.gfx)});var lt=$e("djs-hit djs-hit-stroke"),ot=$e("djs-hit djs-hit-click-stroke"),Ae={all:$e("djs-hit djs-hit-all"),"click-stroke":ot,stroke:lt};function $e(we,ye){return ye=Xe({stroke:"white",strokeWidth:15},ye||{}),x.cls(we,["no-fill","no-border"],ye)}function Ye(we,ye){var ge=Ae[ye];if(!ge)throw new Error("invalid hit type <"+ye+">");return Be(we,ge),we}function De(we,ye){pn(we,ye)}this.removeHits=function(we){Re((we||document).querySelectorAll(".djs-hit"),Ti)},this.createDefaultHit=function(we,ye){var Pe=we.waypoints,Ue=we.isFrame;return Pe?this.createWaypointsHit(ye,Pe):this.createBoxHit(ye,Ue?"stroke":"all",{width:we.width,height:we.height})},this.createWaypointsHit=function(we,ye){var ge=Qd(ye);return Ye(ge,"stroke"),De(we,ge),ge},this.createBoxHit=function(we,ye,ge){ge=Xe({x:0,y:0},ge);var Pe=Zt("rect");return Ye(Pe,ye),Be(Pe,ge),De(we,Pe),Pe},this.updateDefaultHit=function(we,ye){var ge=st(".djs-hit",ye);if(ge)return Be(ge,we.waypoints?{points:wg(we.waypoints)}:{width:we.width,height:we.height}),ge},this.fire=P,this.triggerMouseEvent=function(we,ye,ge){var Pe=Y[we];if(!Pe)throw new Error("unmapped DOM event name <"+we+">");return P(Pe,ye,ge)},this.mouseHandler=H,this.registerEvent=he,this.unregisterEvent=Te}Dg.$inject=["eventBus","elementRegistry","styles"];var Kn={__init__:["interactionEvents"],interactionEvents:["type",Dg]};function Je(m,_){var x,S,P,O;return _=!!_,Ar(m)||(m=[m]),Re(m,function(H){var Y=H;H.waypoints&&!_&&(Y=Je(H.waypoints,!0));var Q=Y.x,he=Y.y,Te=Y.height||0,lt=Y.width||0;(Q<x||void 0===x)&&(x=Q),(he<S||void 0===S)&&(S=he),(Q+lt>P||void 0===P)&&(P=Q+lt),(he+Te>O||void 0===O)&&(O=he+Te)}),{x,y:S,height:O-S,width:P-x}}function Bi(m){return!(!m||!m.isFrame)}function ea(m,_,x){this.offset=6;var S=_.cls("djs-outline",["no-fill"]),P=this;function O(H,Y){var Q=Zt("rect");return Be(Q,Xe({x:10,y:10,width:100,height:100},S)),pn(H,Q),Q}m.on(["shape.added","shape.changed"],500,function(H){var Y=H.element,Q=H.gfx,he=st(".djs-outline",Q);he||(he=O(Q)),P.updateShapeOutline(he,Y)}),m.on(["connection.added","connection.changed"],function(H){var Y=H.element,Q=H.gfx,he=st(".djs-outline",Q);he||(he=O(Q)),P.updateConnectionOutline(he,Y)})}ea.prototype.updateShapeOutline=function(m,_){Be(m,{x:-this.offset,y:-this.offset,width:_.width+2*this.offset,height:_.height+2*this.offset})},ea.prototype.updateConnectionOutline=function(m,_){var x=Je(_);Be(m,{x:x.x-this.offset,y:x.y-this.offset,width:x.width+2*this.offset,height:x.height+2*this.offset})},ea.$inject=["eventBus","styles","elementRegistry"];var Kp={__init__:["outline"],outline:["type",ea]};function ao(m,_){this._eventBus=m,this._canvas=_,this._selectedElements=[];var x=this;m.on(["shape.remove","connection.remove"],function(S){x.deselect(S.element)}),m.on(["diagram.clear","plane.set"],function(S){x.select(null)})}ao.$inject=["eventBus","canvas"],ao.prototype.deselect=function(m){var _=this._selectedElements,x=_.indexOf(m);if(-1!==x){var S=_.slice();_.splice(x,1),this._eventBus.fire("selection.changed",{oldSelection:S,newSelection:_})}},ao.prototype.get=function(){return this._selectedElements},ao.prototype.isSelected=function(m){return-1!==this._selectedElements.indexOf(m)},ao.prototype.select=function(m,_){var x=this._selectedElements,S=x.slice();Ar(m)||(m=m?[m]:[]);var P=this._canvas;m=m.filter(function(O){return P.findPlane(O)===P.getActivePlane()}),_?Re(m,function(O){-1===x.indexOf(O)&&x.push(O)}):this._selectedElements=x=m.slice(),this._eventBus.fire("selection.changed",{oldSelection:S,newSelection:x})};var hr="selected";function Ag(m,_,x,S){function P(H,Y){_.addMarker(H,Y)}function O(H,Y){_.removeMarker(H,Y)}this._multiSelectionBox=null,m.on("element.hover",function(H){P(H.element,"hover")}),m.on("element.out",function(H){O(H.element,"hover")}),m.on("selection.changed",function(H){var Y=H.oldSelection,Q=H.newSelection;Re(Y,function(he){-1===Q.indexOf(he)&&O(he,hr)}),Re(Q,function(he){-1===Y.indexOf(he)&&P(he,hr)})})}function rh(m,_,x,S){m.on("create.end",500,function(P){var O=P.context,Y=O.elements,Q=(O.hints||{}).autoSelect;if(O.canExecute){if(!1===Q)return;Ar(Q)?_.select(Q):_.select(Y.filter(fi))}}),m.on("connect.end",500,function(P){var O=P.context,Y=O.hover;O.canExecute&&Y&&_.select(Y)}),m.on("shape.move.end",500,function(P){var O=P.previousSelection||[],H=S.get(P.context.shape.id);bt(O,function(Y){return H.id===Y.id})||_.select(H)}),m.on("element.click",function(P){if(dt(P)){var O=P.element;O===x.getRootElement()&&(O=null);var H=_.isSelected(O),Y=_.get().length>1,Q=function(m){var _=wc(m)||m;return!!dt(m)&&(/mac/i.test(navigator.platform)?_.metaKey:_.ctrlKey)}(P)||(Te=wc(he=P)||he,dt(he)&&Te.shiftKey);if(H&&Y)return Q?_.deselect(O):_.select(O);H?_.deselect(O):_.select(O,Q)}var he,Te})}function fi(m){return!m.hidden}Ag.$inject=["eventBus","canvas","selection","styles"],rh.$inject=["eventBus","selection","canvas","elementRegistry"];var pr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Kn,Kp],selection:["type",ao],selectionVisuals:["type",Ag],selectionBehavior:["type",rh]};function ns(m){this._counter=0,this._prefix=(m?m+"-":"")+Math.floor(1e9*Math.random())+"-"}ns.prototype.next=function(){return this._prefix+ ++this._counter};var ks=new ns("ov");function ji(m,_,x,S){var P,O;this._eventBus=_,this._canvas=x,this._elementRegistry=S,this._ids=ks,this._overlayDefaults=Xe({show:null,scale:!0},m&&m.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(P=x.getContainer(),O=Ts('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />'),P.insertBefore(O,P.firstChild),O),this._init()}function ta(m,_,x){Xe(m.style,{left:_+"px",top:x+"px"})}function Ml(m,_){m.style.display=!1===_?"none":""}function Tg(m,_){m.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(x){m.style[x+"transform"]=_})}ji.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ji.prototype.get=function(m){if(Ai(m)&&(m={id:m}),Ai(m.element)&&(m.element=this._elementRegistry.get(m.element)),m.element){var _=this._getOverlayContainer(m.element,!0);return _?m.type?Xn(_.overlays,Jo({type:m.type})):_.overlays.slice():[]}return m.type?Xn(this._overlays,Jo({type:m.type})):m.id?this._overlays[m.id]:null},ji.prototype.add=function(m,_,x){if(vn(_)&&(x=_,_=null),m.id||(m=this._elementRegistry.get(m)),!x.position)throw new Error("must specifiy overlay position");if(!x.html)throw new Error("must specifiy overlay html");if(!m)throw new Error("invalid element specified");var S=this._ids.next();return x=Xe({},this._overlayDefaults,x,{id:S,type:_,element:m,html:x.html}),this._addOverlay(x),S},ji.prototype.remove=function(m){var _=this.get(m)||[];Ar(_)||(_=[_]);var x=this;Re(_,function(S){var P=x._getOverlayContainer(S.element,!0);if(S&&(Vr(S.html),Vr(S.htmlContainer),delete S.htmlContainer,delete S.element,delete x._overlays[S.id]),P){var O=P.overlays.indexOf(S);-1!==O&&P.overlays.splice(O,1)}})},ji.prototype.show=function(){Ml(this._overlayRoot)},ji.prototype.hide=function(){Ml(this._overlayRoot,!1)},ji.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ru(this._overlayRoot)},ji.prototype._updateOverlayContainer=function(m){var _=m.element,x=m.html,S=_.x,P=_.y;if(_.waypoints){var O=Je(_);S=O.x,P=O.y}ta(x,S,P),function(H,Y,Q){2==arguments.length?H.getAttribute(Y):null===Q?H.removeAttribute(Y):H.setAttribute(Y,Q)}(m.html,"data-container-id",_.id)},ji.prototype._updateOverlay=function(m){var _,x,S=m.position,P=m.htmlContainer,O=m.element,H=S.left,Y=S.top;void 0!==S.right&&(_=O.waypoints?Je(O).width:O.width,H=-1*S.right+_),void 0!==S.bottom&&(x=O.waypoints?Je(O).height:O.height,Y=-1*S.bottom+x),ta(P,H||0,Y||0)},ji.prototype._createOverlayContainer=function(m){var _=Ts('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(_);var x={html:_,element:m,overlays:[]};return this._updateOverlayContainer(x),this._overlayContainers.push(x),x},ji.prototype._updateRoot=function(m){var _=m.scale||1,x="matrix("+[_,0,0,_,-1*m.x*_,-1*m.y*_].join(",")+")";Tg(this._overlayRoot,x)},ji.prototype._getOverlayContainer=function(m,_){var x=bt(this._overlayContainers,function(S){return S.element===m});return x||_?x:this._createOverlayContainer(m)},ji.prototype._addOverlay=function(m){var _,x,S=m.id,P=m.element,O=m.html;O.get&&O.constructor.prototype.jquery&&(O=O.get(0)),Ai(O)&&(O=Ts(O)),x=this._getOverlayContainer(P),(_=Ts('<div class="djs-overlay" data-overlay-id="'+S+'" style="position: absolute">')).appendChild(O),m.type&&xl(_).add("djs-overlay-"+m.type);var H=this._canvas.findPlane(P),Y=this._canvas.getActivePlane();m.plane=H,H!==Y&&Ml(_,!1),m.htmlContainer=_,x.overlays.push(m),x.html.appendChild(_),this._overlays[S]=m,this._updateOverlay(m),this._updateOverlayVisibilty(m,this._canvas.viewbox())},ji.prototype._updateOverlayVisibilty=function(m,_){var x=m.show,S=x&&x.minZoom,P=x&&x.maxZoom,O=m.htmlContainer,H=!0;x&&((lr(S)&&S>_.scale||lr(P)&&P<_.scale)&&(H=!1),Ml(O,H)),this._updateOverlayScale(m,_)},ji.prototype._updateOverlayScale=function(m,_){var x,S,P,O=m.scale,H=m.htmlContainer,Y="";!0!==O&&(!1===O?(x=1,S=1):(x=O.min,S=O.max),lr(x)&&_.scale<x&&(P=(1/_.scale||1)*x),lr(S)&&_.scale>S&&(P=(1/_.scale||1)*S)),lr(P)&&(Y="scale("+P+","+P+")"),Tg(H,Y)},ji.prototype._updateOverlaysVisibilty=function(m){var _=this;Re(this._overlays,function(x){_._updateOverlayVisibilty(x,m)})},ji.prototype._init=function(){var m=this._eventBus,_=this;m.on("canvas.viewbox.changing",function(x){_.hide()}),m.on("canvas.viewbox.changed",function(x){var S;_._updateRoot(S=x.viewbox),_._updateOverlaysVisibilty(S),_.show()}),m.on(["shape.remove","connection.remove"],function(x){var S=x.element;Re(_.get({element:S}),function(H){_.remove(H.id)});var P=_._getOverlayContainer(S);if(P){Vr(P.html);var O=_._overlayContainers.indexOf(P);-1!==O&&_._overlayContainers.splice(O,1)}}),m.on("element.changed",500,function(x){var P=_._getOverlayContainer(x.element,!0);P&&(Re(P.overlays,function(O){_._updateOverlay(O)}),_._updateOverlayContainer(P))}),m.on("element.marker.update",function(x){var S=_._getOverlayContainer(x.element,!0);S&&xl(S.html)[x.add?"add":"remove"](x.marker)}),m.on("plane.set",function(x){Re(_._overlays,function(S){Ml(S.htmlContainer,S.plane===x.plane)})}),m.on("diagram.clear",this.clear,this)};var Bu={__init__:["overlays"],overlays:["type",ji]},Yp=/^class /;function ki(m){return"[object Array]"===Object.prototype.toString.call(m)}function Pn(m,_){return Object.prototype.hasOwnProperty.call(m,_)}function na(){var m=Array.prototype.slice.call(arguments);1===m.length&&ki(m[0])&&(m=m[0]);var _=m.pop();return _.$inject=m,_}var Xp=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Mg=/^(?:async )?(?:function\s*)?[^(]*\(\s*([^)]*)\)/m,Qe=/\/\*([^*]*)\*\//m;function Rg(m){if("function"!=typeof m)throw new Error('Cannot annotate "'+m+'". Expected a function!');var _=m.toString().match(Yp.test(m.toString())?Xp:Mg);return _&&_[1]&&_[1].split(",").map(function(x){return(_=x.match(Qe))?_[1].trim():x.trim()})||[]}function wn(){var m=[];this.factory=function(_,x){return m.push([_,"factory",x]),this},this.value=function(_,x){return m.push([_,"value",x]),this},this.type=function(_,x){return m.push([_,"type",x]),this},this.forEach=function(_){m.forEach(_)}}function Vi(m,_){_=_||{get:function(Ae,$e){if(x.push(Ae),!1===$e)return null;throw H('No provider for "'+Ae+'"!')}};var x=[],S=this._providers=Object.create(_._providers||null),P=this._instances=Object.create(null),O=P.injector=this,H=function(Ae){var $e=x.join(" -> ");return x.length=0,new Error($e?Ae+" (Resolving: "+$e+")":Ae)},Y=function(Ae,$e){if(!S[Ae]&&-1!==Ae.indexOf(".")){for(var Ye=Ae.split("."),De=Y(Ye.shift());Ye.length;)De=De[Ye.shift()];return De}if(Pn(P,Ae))return P[Ae];if(Pn(S,Ae)){if(-1!==x.indexOf(Ae))throw x.push(Ae),H("Cannot resolve circular dependency!");return x.push(Ae),P[Ae]=S[Ae][0](S[Ae][1]),x.pop(),P[Ae]}return _.get(Ae,$e)},Q=function(Ae,$e){if(void 0===$e&&($e={}),"function"!=typeof Ae){if(!ki(Ae))throw new Error('Cannot invoke "'+Ae+'". Expected a function!');Ae=na(Ae.slice())}return{fn:Ae,dependencies:(Ae.$inject||Rg(Ae)).map(function(Ye){return Pn($e,Ye)?$e[Ye]:Y(Ye)})}},he=function(Ae){var $e=Q(Ae);return new(Function.prototype.bind.apply($e.fn,[null].concat($e.dependencies)))},Te=function(Ae,$e,Ye){var De=Q(Ae,Ye);return De.fn.apply($e,De.dependencies)},lt=function(Ae){return na(function($e){return Ae.get($e)})},ot={factory:Te,type:he,value:function(Ae){return Ae}};m.forEach(function(Ae){function $e(ye,ge){return"value"!==ye&&ki(ge)&&(ge=na(ge.slice())),ge}if(Ae instanceof wn)Ae.forEach(function(ye){var Pe=ye[1];S[ye[0]]=[ot[Pe],$e(Pe,ye[2]),Pe]});else if("object"==typeof Ae)if(Ae.__exports__){var Ye=Object.keys(Ae).reduce(function(ye,ge){return"__"!==ge.substring(0,2)&&(ye[ge]=Ae[ge]),ye},Object.create(null)),De=new Vi((Ae.__modules__||[]).concat([Ye]),O),we=na(function(ye){return De.get(ye)});Ae.__exports__.forEach(function(ye){S[ye]=[we,ye,"private",De]})}else Object.keys(Ae).forEach(function(ye){if("private"!==Ae[ye][2]){var ge=Ae[ye][0];S[ye]=[ot[ge],$e(ge,Ae[ye][1]),ge]}else S[ye]=Ae[ye]})}),this.get=Y,this.invoke=Te,this.instantiate=he,this.createChild=function(Ae,$e){if($e&&$e.length){var Ye,De,we,ye,ge=Object.create(null),Pe=Object.create(null),Ue=[],Fe=[],V=[];for(var Se in S)Ye=S[Se],-1!==$e.indexOf(Se)&&("private"===Ye[2]?-1===(De=Ue.indexOf(Ye[3]))?(we=Ye[3].createChild([],$e),ye=lt(we),Ue.push(Ye[3]),Fe.push(we),V.push(ye),ge[Se]=[ye,Se,"private",we]):ge[Se]=[V[De],Se,"private",Fe[De]]:ge[Se]=[Ye[2],Ye[1]],Pe[Se]=!0),"factory"!==Ye[2]&&"type"!==Ye[2]||!Ye[1].$scope||$e.forEach(function(qe){-1!==Ye[1].$scope.indexOf(qe)&&(ge[Se]=[Ye[2],Ye[1]],Pe[qe]=!0)});$e.forEach(function(qe){if(!Pe[qe])throw new Error('No provider for "'+qe+'". Cannot use provider from the parent!')}),Ae.unshift(ge)}return new Vi(Ae,O)}}function is(m,_){ur.call(this,m,1),this.CONNECTION_STYLE=_.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=_.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=_.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}kn(is,ur),is.prototype.canRender=function(){return!0},is.prototype.drawShape=function(m,_){var x=Zt("rect");return Be(x,{x:0,y:0,width:_.width||0,height:_.height||0}),Bi(_)?Be(x,this.FRAME_STYLE):Be(x,this.SHAPE_STYLE),pn(m,x),x},is.prototype.drawConnection=function(m,_){var x=Qd(_.waypoints,this.CONNECTION_STYLE);return pn(m,x),x},is.prototype.getShapePath=function(m){var S=m.width;return vc([["M",m.x,m.y],["l",S,0],["l",0,m.height],["l",-S,0],["z"]])},is.prototype.getConnectionPath=function(m){var _,x,S=m.waypoints,P=[];for(_=0;x=S[_];_++)P.push([0===_?"M":"L",(x=x.original||x).x,x.y]);return vc(P)},is.$inject=["eventBus","styles"];var Qp={__init__:["defaultRenderer"],defaultRenderer:["type",is],styles:["type",function(){var m={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},_=this;this.cls=function(x,S,P){return Xe(this.style(S,P),{class:x})},this.style=function(x,S){Ar(x)||S||(S=x,x=[]);var P=di(x,function(O,H){return Xe(O,m[H]||{})},{});return S?Xe(P,S):P},this.computeStyle=function(x,S,P){return Ar(S)||(P=S,S=[]),_.style(S||[],Xe({},P,x||{}))}}]};function ju(m,_){return Math.round(m*_)/_}function Cc(m){return El(m)?m+"px":m}function Rl(m,_,x){var S=Zt("g");return yt(S).add(_),m.insertBefore(S,m.childNodes[void 0!==x?x:m.childNodes.length-1]||null),S}var Sc="base",kl="djs-element-hidden",Vu={shape:["x","y","width","height"],connection:["waypoints"]};function Le(m,_,x,S){this._eventBus=_,this._elementRegistry=S,this._graphicsFactory=x,this._init(m||{})}function Pl(m,_){m.setAttribute("transform","matrix("+_.a+","+_.b+","+_.c+","+_.d+","+_.e+","+_.f+")")}Le.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Le.prototype._init=function(m){var O,H,Y,_=this._eventBus,x=this._container=(H=(O=Xe({},{width:"100%",height:"100%"},O=m)).container||document.body,(Y=document.createElement("div")).setAttribute("class","djs-container"),Xe(Y.style,{position:"relative",overflow:"hidden",width:Cc(O.width),height:Cc(O.height)}),H.appendChild(Y),Y),S=this._svg=Zt("svg");Be(S,{width:"100%",height:"100%"}),pn(x,S);var P=this._viewport=Rl(S,"viewport");this._layers={},this._planes={},!1!==m.deferUpdate&&(this._viewboxChanged=function(O,H){var Y,Q,he,Te;function lt(){var Ae=Date.now(),$e=Te+300-Ae;if($e>0)return ot($e);O.apply(he,Q),Y=Te=Q=he=void 0}function ot(Ae){Y=setTimeout(lt,Ae)}return function(){Te=Date.now();for(var Ae=arguments.length,$e=new Array(Ae),Ye=0;Ye<Ae;Ye++)$e[Ye]=arguments[Ye];Q=$e,he=this,Y||ot(300)}}(ne(this._viewboxChanged,this))),_.on("diagram.init",function(){_.fire("canvas.init",{svg:S,viewport:P})},this),_.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),_.on("diagram.destroy",500,this._destroy,this),_.on("diagram.clear",500,this._clear,this)},Le.prototype._destroy=function(m){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var _=this._container.parentNode;_&&_.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._activePlane,delete this._viewport},Le.prototype._clear=function(){var m=this;this._elementRegistry.getAll().forEach(function(_){var S,x="waypoints"in(S=_)?"connection":"x"in S?"shape":"root";"root"===x?m.setRootElementForPlane(null,m.findPlane(_),!0):m._removeElement(_,x)}),this._activePlane=null,this._planes={},delete this._cachedViewbox},Le.prototype.getDefaultLayer=function(){return this.getLayer(Sc)},Le.prototype.getLayer=function(m,_){if(!m)throw new Error("must specify a name");var x=this._layers[m];if(x||(x=this._layers[m]=this._createLayer(m,_)),void 0!==_&&x.index!==_)throw new Error("layer <"+m+"> already created at index <"+_+">");return x.group},Le.prototype._createLayer=function(m,_){_||(_=0);var x=di(this._layers,function(S,P){return _>=P.index&&S++,S},0);return{group:Rl(this._viewport,"layer-"+m,x),index:_}},Le.prototype.getPlane=function(m){if(!m)throw new Error("must specify a name");return this._planes[m]},Le.prototype.createPlane=function(m,_){if(!m)throw new Error("must specify a name");if(this._planes[m])throw new Error("plane "+m+" already exists");_||(_={id:"__implicitroot"+m,children:[],isImplicit:!0});var x=this.getLayer(m);yt(x).add(kl);var S=this._planes[m]={layer:x,name:m,rootElement:null};return this.setRootElementForPlane(_,S),S},Le.prototype.setActivePlane=function(m){if(!m)throw new Error("must specify a plane");return"string"==typeof m&&(m=this.getPlane(m)),this._activePlane&&yt(this._activePlane.layer).add(kl),this._activePlane=m,yt(m.layer).remove(kl),m.rootElement&&this._elementRegistry.updateGraphics(m.rootElement,this._svg,!0),this._eventBus.fire("plane.set",{plane:m}),m},Le.prototype.getActiveLayer=function(){return this.getActivePlane().layer},Le.prototype.getActivePlane=function(){var m=this._activePlane;return m||(m=this.createPlane(Sc),this.setActivePlane(Sc)),m},Le.prototype.findPlane=function(m){"string"==typeof m&&(m=this._elementRegistry.get(m));var _=function(x){for(;x.parent;)x=x.parent;return x}(m);return bt(this._planes,function(x){return x.rootElement===_})},Le.prototype.getContainer=function(){return this._container},Le.prototype._updateMarker=function(m,_,x){var S;m.id||(m=this._elementRegistry.get(m)),(S=this._elementRegistry._elements[m.id])&&(Re([S.gfx,S.secondaryGfx],function(P){P&&(x?yt(P).add(_):yt(P).remove(_))}),this._eventBus.fire("element.marker.update",{element:m,gfx:S.gfx,marker:_,add:!!x}))},Le.prototype.addMarker=function(m,_){this._updateMarker(m,_,!0)},Le.prototype.removeMarker=function(m,_){this._updateMarker(m,_,!1)},Le.prototype.hasMarker=function(m,_){return m.id||(m=this._elementRegistry.get(m)),yt(this.getGraphics(m)).has(_)},Le.prototype.toggleMarker=function(m,_){this.hasMarker(m,_)?this.removeMarker(m,_):this.addMarker(m,_)},Le.prototype.getRootElement=function(){return this.getActivePlane().rootElement},Le.prototype.setRootElement=function(m,_){var x=this._activePlane;if(x)return this.setRootElementForPlane(m,x,_);var S=this.createPlane(Sc,m);return this.setActivePlane(S),S.rootElement},Le.prototype.setRootElementForPlane=function(m,_,x){"string"==typeof _&&(_=this.getPlane(_)),m&&this._ensureValid("root",m);var S=_.rootElement,P=this._elementRegistry,O=this._eventBus;if(S){if(!x)throw new Error("rootElement already set, need to specify override");O.fire("root.remove",{element:S}),O.fire("root.removed",{element:S}),P.remove(S)}if(m){var H=_.layer;O.fire("root.add",{element:m}),P.add(m,H),O.fire("root.added",{element:m,gfx:H}),_===this._activePlane&&this._elementRegistry.updateGraphics(m,this._svg,!0)}return _.rootElement=m,m},Le.prototype._ensureValid=function(m,_){if(!_.id)throw new Error("element must have an id");if(this._elementRegistry.get(_.id))throw new Error("element with id "+_.id+" already exists");var x=Vu[m];if(!Lr(x,function(S){return void 0!==_[S]}))throw new Error("must supply { "+x.join(", ")+" } with "+m)},Le.prototype._setParent=function(m,_,x){(function(S,P,O){if(S&&P){"number"!=typeof O&&(O=-1);var H=S.indexOf(P);if(-1!==H){if(H===O||-1===O)return;S.splice(H,1)}-1!==O?S.splice(O,0,P):S.push(P)}})(_.children,m,x),m.parent=_},Le.prototype._addElement=function(m,_,x,S){x=x||this.getRootElement();var P=this._eventBus,O=this._graphicsFactory;this._ensureValid(m,_),P.fire(m+".add",{element:_,parent:x}),this._setParent(_,x,S);var H=O.create(m,_,S);return this._elementRegistry.add(_,H),O.update(m,_,H),P.fire(m+".added",{element:_,gfx:H}),_},Le.prototype.addShape=function(m,_,x){return this._addElement("shape",m,_,x)},Le.prototype.addConnection=function(m,_,x){return this._addElement("connection",m,_,x)},Le.prototype._removeElement=function(m,_){var x=this._elementRegistry,S=this._graphicsFactory,P=this._eventBus;if(m=x.get(m.id||m))return P.fire(_+".remove",{element:m}),S.remove(m),function(O,H){if(!O||!H)return-1;var Y=O.indexOf(H);-1!==Y&&O.splice(Y,1)}(m.parent&&m.parent.children,m),m.parent=null,P.fire(_+".removed",{element:m}),x.remove(m),m},Le.prototype.removeShape=function(m){return this._removeElement(m,"shape")},Le.prototype.removeConnection=function(m){return this._removeElement(m,"connection")},Le.prototype.getGraphics=function(m,_){return this._elementRegistry.getGraphics(m,_)},Le.prototype._changeViewbox=function(m){this._eventBus.fire("canvas.viewbox.changing"),m.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Le.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Le.prototype.viewbox=function(m){if(void 0===m&&this._cachedViewbox)return this._cachedViewbox;var _,x,S,P,O,H,Y=this._viewport,Q=this.getSize();return m?(this._changeViewbox(function(){P=Math.min(Q.width/m.width,Q.height/m.height);var he=this._svg.createSVGMatrix().scale(P).translate(-m.x,-m.y);ko(Y,he)}),m):(_=this.getDefaultLayer().getBBox(),x=(S=ko(Y))?S.matrix:function(he,Te,lt,ot,Ae,$e){var Ye=jr.createSVGMatrix();switch(arguments.length){case 0:return Ye;case 1:return Xd(Ye,he);case 6:return Xd(Ye,{a:he,b:Te,c:lt,d:ot,e:Ae,f:$e})}}(),P=ju(x.a,1e3),O=ju(-x.e||0,1e3),H=ju(-x.f||0,1e3),m=this._cachedViewbox={x:O?O/P:0,y:H?H/P:0,width:Q.width/P,height:Q.height/P,scale:P,inner:{width:_.width,height:_.height,x:_.x,y:_.y},outer:Q})},Le.prototype.scroll=function(m){var _=this._viewport,x=_.getCTM();return m&&this._changeViewbox(function(){m=Xe({dx:0,dy:0},m||{}),x=this._svg.createSVGMatrix().translate(m.dx,m.dy).multiply(x),Pl(_,x)}),{x:x.e,y:x.f}},Le.prototype.scrollToElement=function(m,_){var x=100,S=this.findPlane(m);S!==this._activePlane&&this.setActivePlane(S),_||(_={}),"number"==typeof _&&(x=_),_={top:_.top||x,right:_.right||x,bottom:_.bottom||x,left:_.left||x};var P,O,H=Je(m),Y=Po(H),Q=this.viewbox(),he=this.zoom();Q.y+=_.top/he,Q.x+=_.left/he,Q.width-=(_.right+_.left)/he,Q.height-=(_.bottom+_.top)/he;var Te=Po(Q);if(H.width<Q.width&&H.height<Q.height){var lt=Math.max(0,Y.right-Te.right),ot=Math.min(0,Y.left-Te.left),Ae=Math.max(0,Y.bottom-Te.bottom),$e=Math.min(0,Y.top-Te.top);P=lt||ot,O=Ae||$e}else P=H.x-Q.x,O=H.y-Q.y;this.scroll({dx:-P*he,dy:-O*he})},Le.prototype.zoom=function(m,_){return m?"fit-viewport"===m?this._fitViewport(_):(this._changeViewbox(function(){"object"!=typeof _&&(x=this.viewbox().outer,_={x:x.width/2,y:x.height/2}),S=this._setZoom(m,_)}),ju(S.a,1e3)):this.viewbox(m).scale;var x,S},Le.prototype._fitViewport=function(m){var _,x,S=this.viewbox(),P=S.outer,O=S.inner;return O.x>=0&&O.y>=0&&O.x+O.width<=P.width&&O.y+O.height<=P.height&&!m?x={x:0,y:0,width:Math.max(O.width+O.x,P.width),height:Math.max(O.height+O.y,P.height)}:(_=Math.min(1,P.width/O.width,P.height/O.height),x={x:O.x+(m?O.width/2-P.width/_/2:0),y:O.y+(m?O.height/2-P.height/_/2:0),width:P.width/_,height:P.height/_}),this.viewbox(x),this.viewbox(!1).scale},Le.prototype._setZoom=function(m,_){var x,S,P,O,H=this._svg,Y=this._viewport,Q=H.createSVGMatrix(),he=H.createSVGPoint(),Te=(S=Y.getCTM()).a;return _?(x=Xe(he,_).matrixTransform(S.inverse()),P=Q.translate(x.x,x.y).scale(1/Te*m).translate(-x.x,-x.y),O=S.multiply(P)):O=Q.scale(m),Pl(this._viewport,O),O},Le.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Le.prototype.getAbsoluteBBox=function(m){var _,x=this.viewbox();return{x:(_=m.waypoints?this.getGraphics(m).getBBox():m).x*x.scale-x.x*x.scale,y:_.y*x.scale-x.y*x.scale,width:_.width*x.scale,height:_.height*x.scale}},Le.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Dc="data-element-id";function mi(m){this._elements={},this._eventBus=m}mi.$inject=["eventBus"],mi.prototype.add=function(m,_,x){var S=m.id;this._validateId(S),Be(_,Dc,S),x&&Be(x,Dc,S),this._elements[S]={element:m,gfx:_,secondaryGfx:x}},mi.prototype.remove=function(m){var _=this._elements,x=m.id||m,S=x&&_[x];S&&(Be(S.gfx,Dc,""),S.secondaryGfx&&Be(S.secondaryGfx,Dc,""),delete _[x])},mi.prototype.updateId=function(m,_){this._validateId(_),"string"==typeof m&&(m=this.get(m)),this._eventBus.fire("element.updateId",{element:m,newId:_});var x=this.getGraphics(m),S=this.getGraphics(m,!0);this.remove(m),m.id=_,this.add(m,x,S)},mi.prototype.updateGraphics=function(m,_,x){var S=m.id||m,P=this._elements[S];return x?P.secondaryGfx=_:P.gfx=_,Be(_,Dc,S),_},mi.prototype.get=function(m){var _;_="string"==typeof m?m:m&&Be(m,Dc);var x=this._elements[_];return x&&x.element},mi.prototype.filter=function(m){var _=[];return this.forEach(function(x,S){m(x,S)&&_.push(x)}),_},mi.prototype.find=function(m){for(var _=this._elements,x=Object.keys(_),S=0;S<x.length;S++){var P=_[x[S]],O=P.element;if(m(O,P.gfx))return O}},mi.prototype.getAll=function(){return this.filter(function(m){return m})},mi.prototype.forEach=function(m){var _=this._elements;Object.keys(_).forEach(function(x){var S=_[x];return m(S.element,S.gfx)})},mi.prototype.getGraphics=function(m,_){var S=this._elements[m.id||m];return S&&(_?S.secondaryGfx:S.gfx)},mi.prototype._validateId=function(m){if(!m)throw new Error("element must have an id");if(this._elements[m])throw new Error("element with id "+m+" already added")};var Il={exports:{}},Hu={extend:function(m,_,x,S){var P=x.inverse;return Object.defineProperty(m,"remove",{value:function(O){var H=this.indexOf(O);return-1!==H&&(this.splice(H,1),_.unset(O,P,S)),O}}),Object.defineProperty(m,"contains",{value:function(O){return-1!==this.indexOf(O)}}),Object.defineProperty(m,"add",{value:function(O,H){var Y=this.indexOf(O);if(void 0===H){if(-1!==Y)return;H=this.length}-1!==Y&&this.splice(Y,1),this.splice(H,0,O),-1===Y&&_.set(O,P,S)}}),Object.defineProperty(m,"__refs_collection",{value:!0}),m},isExtended:function(m){return!0===m.__refs_collection}},Tr=Hu;function et(m,_,x){var S=Tr.extend(x[_.name]||[],m,_,x);Object.defineProperty(x,_.name,{enumerable:_.enumerable,value:S}),S.length&&S.forEach(function(P){m.set(P,_.inverse,x)})}function Ps(m,_){if(!(this instanceof Ps))return new Ps(m,_);m.inverse=_,_.inverse=m,this.props={},this.props[m.name]=m,this.props[_.name]=_}Ps.prototype.bind=function(m,_){if("string"==typeof _){if(!this.props[_])throw new Error("no property <"+_+"> in ref");_=this.props[_]}var x,S,P,O,H;_.collection?et(this,_,m):(x=this,O=(S=_).inverse,H=(P=m)[S.name],Object.defineProperty(P,S.name,{configurable:S.configurable,enumerable:S.enumerable,get:function(){return H},set:function(Y){if(Y!==H){var Q=H;H=null,Q&&x.unset(Q,O,P),x.set(H=Y,O,P)}}}))},Ps.prototype.ensureRefsCollection=function(m,_){var x=m[_.name];return Tr.isExtended(x)||et(this,_,m),x},Ps.prototype.ensureBound=function(m,_){var S;S=_,Object.prototype.hasOwnProperty.call(m,S.name||S)||this.bind(m,_)},Ps.prototype.unset=function(m,_,x){m&&(this.ensureBound(m,_),_.collection?this.ensureRefsCollection(m,_).remove(x):m[_.name]=void 0)},Ps.prototype.set=function(m,_,x){m&&(this.ensureBound(m,_),_.collection?this.ensureRefsCollection(m,_).add(x):m[_.name]=x)},Il.exports=Ps,Il.exports.Collection=Hu;var nn=Il.exports,$u=new nn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Ol=new nn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),oh=new nn({name:"attachers",collection:!0},{name:"host"}),Zp=new nn({name:"outgoing",collection:!0},{name:"source"}),sn=new nn({name:"incoming",collection:!0},{name:"target"});function Nl(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(m){var _=this.label,x=this.labels;!m&&_?x.remove(_):x.add(m,0)}}),$u.bind(this,"parent"),Ol.bind(this,"labels"),Zp.bind(this,"outgoing"),sn.bind(this,"incoming")}function Fl(){Nl.call(this),$u.bind(this,"children"),oh.bind(this,"host"),oh.bind(this,"attachers")}function St(){Fl.call(this)}function bn(){Fl.call(this),Ol.bind(this,"labelTarget")}function rs(){Nl.call(this),Zp.bind(this,"source"),sn.bind(this,"target")}kn(Fl,Nl),kn(St,Fl),kn(bn,Fl),kn(rs,Nl);var Mr={connection:rs,shape:Fl,label:bn,root:St};function os(){this._uid=12}os.prototype.createRoot=function(m){return this.create("root",m)},os.prototype.createLabel=function(m){return this.create("label",m)},os.prototype.createShape=function(m){return this.create("shape",m)},os.prototype.createConnection=function(m){return this.create("connection",m)},os.prototype.create=function(m,_){return(_=Xe({},_||{})).id||(_.id=m+"_"+this._uid++),function(x,S){var P=Mr[x];if(!P)throw new Error("unknown type: <"+x+">");return Xe(new P,S)}(m,_)};var Ll=Array.prototype.slice;function Zn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function ss(){}function _i(m,_){this._eventBus=m,this._elementRegistry=_}function Hr(m,_,x){var S=x||_.firstChild;m!==S&&_.insertBefore(m,S)}Zn.prototype.on=function(m,_,x,S){if(m=Ar(m)?m:[m],Ss(_)&&(S=x,x=_,_=1e3),!El(_))throw new Error("priority must be a number");var P=x;S&&((P=ne(x,S)).__fn=x.__fn||x);var O=this;m.forEach(function(H){O._addListener(H,{priority:_,callback:P,next:null})})},Zn.prototype.once=function(m,_,x,S){var P=this;if(Ss(_)&&(S=x,x=_,_=1e3),!El(_))throw new Error("priority must be a number");function O(){O.__isTomb=!0;var H=x.apply(S,arguments);return P.off(m,O),H}O.__fn=x,this.on(m,_,O)},Zn.prototype.off=function(m,_){m=Ar(m)?m:[m];var x=this;m.forEach(function(S){x._removeListener(S,_)})},Zn.prototype.createEvent=function(m){var _=new ss;return _.init(m),_},Zn.prototype.fire=function(m,_){var x,S,P,O;if(O=Ll.call(arguments),"object"==typeof m&&(m=(_=m).type),!m)throw new Error("no event type specified");if(S=this._listeners[m]){x=_ instanceof ss?_:this.createEvent(_),O[0]=x;var H=x.type;m!==H&&(x.type=m);try{P=this._invokeListeners(x,O,S)}finally{m!==H&&(x.type=H)}return void 0===P&&x.defaultPrevented&&(P=!1),P}},Zn.prototype.handleError=function(m){return!1===this.fire("error",{error:m})},Zn.prototype._destroy=function(){this._listeners={}},Zn.prototype._invokeListeners=function(m,_,x){for(var S;x&&!m.cancelBubble;)S=this._invokeListener(m,_,x),x=x.next;return S},Zn.prototype._invokeListener=function(m,_,x){var S,P;if(x.callback.__isTomb)return S;try{void 0!==(S=(P=x.callback).apply(null,_))&&(m.returnValue=S,m.stopPropagation()),!1===S&&m.preventDefault()}catch(P){if(!this.handleError(P))throw console.error("unhandled error in event listener",P),P}return S},Zn.prototype._addListener=function(m,_){var x,S=this._getListeners(m);if(S){for(;S;){if(S.priority<_.priority)return _.next=S,void(x?x.next=_:this._setListeners(m,_));x=S,S=S.next}x.next=_}else this._setListeners(m,_)},Zn.prototype._getListeners=function(m){return this._listeners[m]},Zn.prototype._setListeners=function(m,_){this._listeners[m]=_},Zn.prototype._removeListener=function(m,_){var x,S,P,O=this._getListeners(m);if(_)for(;O;)x=O.next,(P=O.callback)!==_&&P.__fn!==_||(S?S.next=x:this._setListeners(m,x)),S=O,O=x;else this._setListeners(m,null)},ss.prototype.stopPropagation=function(){this.cancelBubble=!0},ss.prototype.preventDefault=function(){this.defaultPrevented=!0},ss.prototype.init=function(m){Xe(this,m||{})},_i.$inject=["eventBus","elementRegistry"],_i.prototype._getChildrenContainer=function(m){var _,x=this._elementRegistry.getGraphics(m);return m.parent?(_=x.parentNode.childNodes[1])||(yt(_=Zt("g")).add("djs-children"),pn(x.parentNode,_)):_=x,_},_i.prototype._clear=function(m){var _=m.childNodes[0];return Ru(_),_},_i.prototype._createContainer=function(m,_,x,S){var P=Zt("g");yt(P).add("djs-group"),void 0!==x?Hr(P,_,_.childNodes[x]):pn(_,P);var O=Zt("g");yt(O).add("djs-element"),yt(O).add("djs-"+m),S&&yt(O).add("djs-frame"),pn(P,O);var H=Zt("g");return yt(H).add("djs-visual"),pn(O,H),O},_i.prototype.create=function(m,_,x){var S=this._getChildrenContainer(_.parent);return this._createContainer(m,S,x,Bi(_))},_i.prototype.updateContainments=function(m){var _=this,x=this._elementRegistry;Re(di(m,function(S,P){return P.parent&&(S[P.parent.id]=P.parent),S},{}),function(S){var P=S.children;if(P){var O=_._getChildrenContainer(S);Re(P.slice().reverse(),function(H){Hr(x.getGraphics(H).parentNode,O)})}})},_i.prototype.drawShape=function(m,_){return this._eventBus.fire("render.shape",{gfx:m,element:_})},_i.prototype.getShapePath=function(m){return this._eventBus.fire("render.getShapePath",m)},_i.prototype.drawConnection=function(m,_){return this._eventBus.fire("render.connection",{gfx:m,element:_})},_i.prototype.getConnectionPath=function(m){return this._eventBus.fire("render.getConnectionPath",m)},_i.prototype.update=function(m,_,x){if(_.parent){var S=this._clear(x);if("shape"===m)this.drawShape(S,_),qn(x,_.x,_.y);else{if("connection"!==m)throw new Error("unknown type: "+m);this.drawConnection(S,_)}Be(x,"display",_.hidden?"none":"block")}},_i.prototype.remove=function(m){Ti(this._elementRegistry.getGraphics(m).parentNode)};var Ac={__depends__:[Qp],__init__:["canvas"],canvas:["type",Le],elementRegistry:["type",mi],elementFactory:["type",os],eventBus:["type",Zn],graphicsFactory:["type",_i]};function ia(m,_){var x;this.injector=_=_||function(m){var _=[],x=[];function S(O){return _.indexOf(O)>=0}m.forEach(function O(H){S(H)||((H.__depends__||[]).forEach(O),S(H)||(_.push(H),(H.__init__||[]).forEach(function(Y){x.push(Y)})))});var P=new Vi(_);return x.forEach(function(O){try{P["string"==typeof O?"get":"invoke"](O)}catch(H){throw console.error("Failed to instantiate component"),console.error(H.stack),H}}),P}([{config:["value",x=(x=m)||{}]},Ac].concat(x.modules||[])),this.get=_.get,this.invoke=_.invoke,this.get("eventBus").fire("diagram.init")}function Bl(){}function Sn(m,_){this.model=m,this.properties=_}ia.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},ia.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Bl.prototype.get=function(m){return this.$model.properties.get(this,m)},Bl.prototype.set=function(m,_){this.$model.properties.set(this,m,_)},Sn.prototype.createType=function(m){var _=this.model,x=this.properties,S=Object.create(Bl.prototype);Re(m.properties,function(H){H.isMany||void 0===H.default||(S[H.name]=H.default)}),x.defineModel(S,_),x.defineDescriptor(S,m);var P=m.ns.name;function O(H){x.define(this,"$type",{value:P,enumerable:!0}),x.define(this,"$attrs",{value:{}}),x.define(this,"$parent",{writable:!0}),Re(H,ne(function(Y,Q){this.set(Q,Y)},this))}return O.prototype=S,O.hasType=S.$instanceOf=this.model.hasType,x.defineModel(O,_),x.defineDescriptor(O,m),O};var Jp={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},ka={String:function(m){return m},Boolean:function(m){return"true"===m},Integer:function(m){return parseInt(m,10)},Real:function(m){return parseFloat(m)}};function Gt(m,_){var x=ka[m];return x?x(_):_}function Ji(m){return!!Jp[m]}function bi(m){return!!ka[m]}function Jn(m,_){var x,S,P=m.split(/:/);if(1===P.length)x=m,S=_;else{if(2!==P.length)throw new Error("expected <prefix:localName> or <localName>, got "+m);x=P[1],S=P[0]}return{name:m=(S?S+":":"")+x,prefix:S,localName:x}}function Hi(m){this.ns=m,this.name=m.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function In(m,_){this.packageMap={},this.typeMap={},this.packages=[],this.properties=_,Re(m,ne(this.registerPackage,this))}function co(m,_,x){var S=_[x];if(S in m)throw new Error("package with "+x+" <"+S+"> already defined")}function je(m){this.model=m}function Vt(m,_,x){Object.defineProperty(m,_.name,{enumerable:!_.isReference,writable:!0,value:x,configurable:!0})}function Xt(m){this.properties=new je(this),this.factory=new Sn(this,this.properties),this.registry=new In(m,this.properties),this.typeCache={}}Hi.prototype.build=function(){return m=this,_=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],x={},S=Object(m),Re(_,function(P){P in S&&(x[P]=m[P])}),x;var m,_,x,S},Hi.prototype.addProperty=function(m,_,x){"boolean"==typeof _&&(x=_,_=void 0),this.addNamedProperty(m,!1!==x);var S=this.properties;void 0!==_?S.splice(_,0,m):S.push(m)},Hi.prototype.replaceProperty=function(m,_,x){var S=m.ns,P=this.properties,O=this.propertiesByName,H=m.name!==_.name;if(m.isId){if(!_.isId)throw new Error("property <"+_.ns.name+"> must be id property to refine <"+m.ns.name+">");this.setIdProperty(_,!1)}if(m.isBody){if(!_.isBody)throw new Error("property <"+_.ns.name+"> must be body property to refine <"+m.ns.name+">");this.setBodyProperty(_,!1)}var Y=P.indexOf(m);if(-1===Y)throw new Error("property <"+S.name+"> not found in property list");P.splice(Y,1),this.addProperty(_,x?void 0:Y,H),O[S.name]=O[S.localName]=_},Hi.prototype.redefineProperty=function(m,_,x){var S=m.ns.prefix,P=_.split("#"),O=Jn(P[0],S),H=Jn(P[1],O.prefix).name,Y=this.propertiesByName[H];if(!Y)throw new Error("refined property <"+H+"> not found");this.replaceProperty(Y,m,x),delete m.redefines},Hi.prototype.addNamedProperty=function(m,_){var x=m.ns,S=this.propertiesByName;_&&(this.assertNotDefined(m,x.name),this.assertNotDefined(m,x.localName)),S[x.name]=S[x.localName]=m},Hi.prototype.removeNamedProperty=function(m){var _=m.ns,x=this.propertiesByName;delete x[_.name],delete x[_.localName]},Hi.prototype.setBodyProperty=function(m,_){if(_&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+m.ns.name+">)");this.bodyProperty=m},Hi.prototype.setIdProperty=function(m,_){if(_&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+m.ns.name+">)");this.idProperty=m},Hi.prototype.assertNotDefined=function(m,_){var x=m.name,S=this.propertiesByName[x];if(S)throw new Error("property <"+x+"> already defined; override of <"+S.definedBy.ns.name+"#"+S.ns.name+"> by <"+m.definedBy.ns.name+"#"+m.ns.name+"> not allowed without redefines")},Hi.prototype.hasProperty=function(m){return this.propertiesByName[m]},Hi.prototype.addTrait=function(m,_){var x=this.allTypesByName,S=this.allTypes,P=m.name;P in x||(Re(m.properties,ne(function(O){O=Xe({},O,{name:O.ns.localName,inherited:_}),Object.defineProperty(O,"definedBy",{value:m});var H=O.replaces,Y=O.redefines;H||Y?this.redefineProperty(O,H||Y,H):(O.isBody&&this.setBodyProperty(O),O.isId&&this.setIdProperty(O),this.addProperty(O))},this)),S.push(m),x[P]=m)},In.prototype.getPackage=function(m){return this.packageMap[m]},In.prototype.getPackages=function(){return this.packages},In.prototype.registerPackage=function(m){m=Xe({},m);var _=this.packageMap;co(_,m,"prefix"),co(_,m,"uri"),Re(m.types,ne(function(x){this.registerType(x,m)},this)),_[m.uri]=_[m.prefix]=m,this.packages.push(m)},In.prototype.registerType=function(m,_){var x=Jn((m=Xe({},m,{superClass:(m.superClass||[]).slice(),extends:(m.extends||[]).slice(),properties:(m.properties||[]).slice(),meta:Xe(m.meta||{})})).name,_.prefix),S=x.name,P={};Re(m.properties,ne(function(O){var H=Jn(O.name,x.prefix),Y=H.name;Ji(O.type)||(O.type=Jn(O.type,H.prefix).name),Xe(O,{ns:H,name:Y}),P[Y]=O},this)),Xe(m,{ns:x,name:S,propertiesByName:P}),Re(m.extends,ne(function(O){var H=this.typeMap[O];H.traits=H.traits||[],H.traits.push(S)},this)),this.definePackage(m,_),this.typeMap[S]=m},In.prototype.mapTypes=function(m,_,x){var S=Ji(m.name)?{name:m.name}:this.typeMap[m.name],P=this;function O(Y){return H(Y,!0)}function H(Y,Q){var he=Jn(Y,Ji(Y)?"":m.prefix);P.mapTypes(he,_,Q)}if(!S)throw new Error("unknown type <"+m.name+">");Re(S.superClass,x?O:H),_(S,!x),Re(S.traits,O)},In.prototype.getEffectiveDescriptor=function(m){var _=Jn(m),x=new Hi(_);this.mapTypes(_,function(P,O){x.addTrait(P,O)});var S=x.build();return this.definePackage(S,S.allTypes[S.allTypes.length-1].$pkg),S},In.prototype.definePackage=function(m,_){this.properties.define(m,"$pkg",{value:_})},je.prototype.set=function(m,_,x){var S=this.model.getPropertyDescriptor(m,_),P=S&&S.name;void 0===x?S?delete m[P]:delete m.$attrs[_]:S?P in m?m[P]=x:Vt(m,S,x):m.$attrs[_]=x},je.prototype.get=function(m,_){var x=this.model.getPropertyDescriptor(m,_);if(!x)return m.$attrs[_];var S=x.name;return!m[S]&&x.isMany&&Vt(m,x,[]),m[S]},je.prototype.define=function(m,_,x){Object.defineProperty(m,_,x)},je.prototype.defineDescriptor=function(m,_){this.define(m,"$descriptor",{value:_})},je.prototype.defineModel=function(m,_){this.define(m,"$model",{value:_})},Xt.prototype.create=function(m,_){var x=this.getType(m);if(!x)throw new Error("unknown type <"+m+">");return new x(_)},Xt.prototype.getType=function(m){var _=this.typeCache,x=Ai(m)?m:m.ns.name,S=_[x];return S||(m=this.registry.getEffectiveDescriptor(x),S=_[x]=this.factory.createType(m)),S},Xt.prototype.createAny=function(m,_,x){var S=Jn(m),P={$type:m,$instanceOf:function(H){return H===this.$type}};return this.properties.defineDescriptor(P,{name:m,isGeneric:!0,ns:{prefix:S.prefix,localName:S.localName,uri:_}}),this.properties.defineModel(P,this),this.properties.define(P,"$parent",{enumerable:!1,writable:!0}),this.properties.define(P,"$instanceOf",{enumerable:!1,writable:!0}),Re(x,function(H,Y){vn(H)&&void 0!==H.value?P[H.name]=H.value:P[Y]=H}),P},Xt.prototype.getPackage=function(m){return this.registry.getPackage(m)},Xt.prototype.getPackages=function(){return this.registry.getPackages()},Xt.prototype.getElementDescriptor=function(m){return m.$descriptor},Xt.prototype.hasType=function(m,_){return void 0===_&&(_=m,m=this),_ in m.$model.getElementDescriptor(m).allTypesByName},Xt.prototype.getPropertyDescriptor=function(m,_){return this.getElementDescriptor(m).propertiesByName[_]},Xt.prototype.getTypeDescriptor=function(m){return this.registry.typeMap[m]};var Rr=String.fromCharCode,Ei=Object.prototype.hasOwnProperty,Pi=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ei={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function oi(m,_,x,S){return S?Ei.call(ei,S)?ei[S]:"&"+S+";":Rr(_||parseInt(x,16))}function Io(m){return m.length>3&&-1!==m.indexOf("&")?m.replace(Pi,oi):m}Object.keys(ei).forEach(function(m){ei[m.toUpperCase()]=ei[m]});var Pa="xsi:type",Tt="non-whitespace outside of root node";function Oo(m){return new Error(m)}function ra(m){return"missing namespace for prefix <"+m+">"}function Tc(m){return{get:m,enumerable:!0}}function Ia(m){var _,x={};for(_ in m)x[_]=m[_];return x}function $i(m){return m+"$uri"}function oa(){return{line:0,column:0}}function Oa(m){throw m}function Bn(m){if(!this)return new Bn(m);var _,x,S,P,O,H,Y,Q,he,Te=m&&m.proxy,lt=Oa,ot=oa,Ae=!1,$e=!1,Ye=null,De=!1;function we(ge){ge instanceof Error||(ge=Oo(ge)),Ye=ge,lt(ge,ot)}function ye(ge){O&&(ge instanceof Error||(ge=Oo(ge)),O(ge,ot))}this.on=function(ge,Pe){if("function"!=typeof Pe)throw Oo("required args <name, cb>");switch(ge){case"openTag":x=Pe;break;case"text":_=Pe;break;case"closeTag":S=Pe;break;case"error":lt=Pe;break;case"warn":O=Pe;break;case"cdata":P=Pe;break;case"attention":Q=Pe;break;case"question":Y=Pe;break;case"comment":H=Pe;break;default:throw Oo("unsupported event: "+ge)}return this},this.ns=function(ge){if(void 0===ge&&(ge={}),"object"!=typeof ge)throw Oo("required args <nsMap={}>");var Pe,Ue={};for(Pe in ge)Ue[Pe]=ge[Pe];return Ue["http://www.w3.org/2001/XMLSchema-instance"]="xsi",$e=!0,he=Ue,this},this.parse=function(ge){if("string"!=typeof ge)throw Oo("required args <xml=string>");return Ye=null,function(Pe){var Ue,Fe,V,Se,qe,Wn,ze,Ve,ve,q,N,re=$e?[]:null,le=$e?function(wi){var Ii,An,Ns={};for(Ii in wi)Ns[An=wi[Ii]]=An,Ns[$i(An)]=Ii;return Ns}(he):null,de=[],tt=0,mt=!1,It=!1,Bt=0,Nt=0,mr="",Ir=0;function ai(){if(null!==N)return N;var wi,Ii,An,Ns,_o,Tn,ir,an,gr,Mt,gn,gi=$e&&le.xmlns,la=$e&&Ae?[]:null,ci=Ir,Ur=mr,yr=Ur.length,La={},Uu={};e:for(;ci<yr;ci++)if(gr=!1,!(32===(Mt=Ur.charCodeAt(ci))||Mt<14&&Mt>8)){for((Mt<65||Mt>122||Mt>90&&Mt<97)&&95!==Mt&&58!==Mt&&(ye("illegal first char attribute name"),gr=!0),gn=ci+1;gn<yr;gn++)if(!((Mt=Ur.charCodeAt(gn))>96&&Mt<123||Mt>64&&Mt<91||Mt>47&&Mt<59||46===Mt||45===Mt||95===Mt)){if(32===Mt||Mt<14&&Mt>8){ye("missing attribute value"),ci=gn;continue e}if(61===Mt)break;ye("illegal attribute name char"),gr=!0}if("xmlns:xmlns"===(an=Ur.substring(ci,gn))&&(ye("illegal declaration of xmlns"),gr=!0),34===(Mt=Ur.charCodeAt(gn+1)))-1===(gn=Ur.indexOf('"',ci=gn+2))&&-1!==(gn=Ur.indexOf("'",ci))&&(ye("attribute value quote missmatch"),gr=!0);else if(39===Mt)-1===(gn=Ur.indexOf("'",ci=gn+2))&&-1!==(gn=Ur.indexOf('"',ci))&&(ye("attribute value quote missmatch"),gr=!0);else for(ye("missing attribute value quotes"),gr=!0,gn+=1;gn<yr&&!(32===(Mt=Ur.charCodeAt(gn+1))||Mt<14&&Mt>8);gn++);for(-1===gn&&(ye("missing closing quotes"),gn=yr,gr=!0),gr||(Tn=Ur.substring(ci,gn)),ci=gn;gn+1<yr&&!(32===(Mt=Ur.charCodeAt(gn+1))||Mt<14&&Mt>8);gn++)ci===gn&&(ye("illegal character after attribute end"),gr=!0);if(ci=gn+1,!gr)if(an in Uu)ye("attribute <"+an+"> already defined");else if(Uu[an]=!0,$e)if(Ae){if(null!==(_o="xmlns"===an?"xmlns":120===an.charCodeAt(0)&&"xmlns:"===an.substr(0,6)?an.substr(6):null)){if(wi=Io(Tn),Ii=$i(_o),!(ir=he[wi])){if("xmlns"===_o||Ii in le&&le[Ii]!==wi)do{ir="ns"+tt++}while(void 0!==le[ir]);else ir=_o;he[wi]=ir}le[_o]!==ir&&(Ns||(le=Ia(le),Ns=!0),le[_o]=ir,"xmlns"===_o&&(le[$i(ir)]=wi,gi=ir),le[Ii]=wi),La[an]=Tn;continue}la.push(an,Tn)}else-1!==(Mt=an.indexOf(":"))?(An=le[an.substring(0,Mt)])?((an=gi===An?an.substr(Mt+1):An+an.substr(Mt))===Pa&&(-1!==(Mt=Tn.indexOf(":"))?(An=Tn.substring(0,Mt),Tn=(An=le[An]||An)+Tn.substring(Mt)):Tn=gi+":"+Tn),La[an]=Tn):ye(ra(an.substring(0,Mt))):La[an]=Tn;else La[an]=Tn}if(Ae)for(ci=0,yr=la.length;ci<yr;ci++){if(an=la[ci++],Tn=la[ci],-1!==(Mt=an.indexOf(":"))){if(!(An=le[an.substring(0,Mt)])){ye(ra(an.substring(0,Mt)));continue}(an=gi===An?an.substr(Mt+1):An+an.substr(Mt))===Pa&&(-1!==(Mt=Tn.indexOf(":"))?(An=Tn.substring(0,Mt),Tn=(An=le[An]||An)+Tn.substring(Mt)):Tn=gi+":"+Tn)}La[an]=Tn}return N=La}for(ot=function(){for(var wi,Ii,An=/(\r\n|\r|\n)/g,Ns=0,_o=0,Tn=0,ir=Nt;Bt>=Tn&&(wi=An.exec(Pe))&&!((ir=wi[0].length+wi.index)>Bt);)Ns+=1,Tn=ir;return-1==Bt?(_o=ir,Ii=Pe.substring(Nt)):0===Nt?Ii=Pe.substring(Nt,Bt):(_o=Bt-Tn,Ii=-1==Nt?Pe.substring(Bt):Pe.substring(Bt,Nt+1)),{data:Ii,line:Ns,column:_o}},Te&&(q=Object.create({},{name:Tc(function(){return Ve}),originalName:Tc(function(){return ve}),attrs:Tc(ai),ns:Tc(function(){return le})}));-1!==Nt;){if(-1===(Bt=60===Pe.charCodeAt(Nt)?Nt:Pe.indexOf("<",Nt)))return de.length?we("unexpected end of file"):0===Nt?we("missing start tag"):void(Nt<Pe.length&&Pe.substring(Nt).trim()&&ye(Tt));if(Nt!==Bt)if(de.length){if(_&&(_(Pe.substring(Nt,Bt),Io,ot),De))return}else if(Pe.substring(Nt,Bt).trim()&&(ye(Tt),De))return;if(33===(qe=Pe.charCodeAt(Bt+1))){if(91===(Se=Pe.charCodeAt(Bt+2))&&"CDATA["===Pe.substr(Bt+3,6)){if(-1===(Nt=Pe.indexOf("]]>",Bt)))return we("unclosed cdata");if(P&&(P(Pe.substring(Bt+9,Nt),ot),De))return;Nt+=3;continue}if(45===Se&&45===Pe.charCodeAt(Bt+3)){if(-1===(Nt=Pe.indexOf("--\x3e",Bt)))return we("unclosed comment");if(H&&(H(Pe.substring(Bt+4,Nt),Io,ot),De))return;Nt+=3;continue}}if(63!==qe){for(Fe=Bt+1;;Fe++){if(Wn=Pe.charCodeAt(Fe),isNaN(Wn))return Nt=-1,we("unclosed tag");if(34===Wn)Fe=-1!==(Se=Pe.indexOf('"',Fe+1))?Se:Fe;else if(39===Wn)Fe=-1!==(Se=Pe.indexOf("'",Fe+1))?Se:Fe;else if(62===Wn){Nt=Fe;break}}if(33!==qe){if(N={},47===qe){if(mt=!1,It=!0,!de.length)return we("missing open tag");if(Fe=Ve=de.pop(),Pe.substring(Bt+2,Se=Bt+2+Fe.length)!==Fe)return we("closing tag mismatch");for(;Se<Nt;Se++)if(!(32===(qe=Pe.charCodeAt(Se))||qe>8&&qe<14))return we("close tag")}else{if(47===Pe.charCodeAt(Nt-1)?(Fe=Ve=Pe.substring(Bt+1,Nt-1),mt=!0,It=!0):(Fe=Ve=Pe.substring(Bt+1,Nt),mt=!0,It=!1),!(qe>96&&qe<123||qe>64&&qe<91||95===qe||58===qe))return we("illegal first char nodeName");for(Se=1,V=Fe.length;Se<V;Se++)if(!((qe=Fe.charCodeAt(Se))>96&&qe<123||qe>64&&qe<91||qe>47&&qe<59||45===qe||95===qe||46==qe)){if(32===qe||qe<14&&qe>8){Ve=Fe.substring(0,Se),N=null;break}return we("invalid nodeName")}It||de.push(Ve)}if($e){if(Ue=le,mt&&(It||re.push(Ue),null===N&&(Ae=-1!==Fe.indexOf("xmlns",Se))&&(Ir=Se,mr=Fe,ai(),Ae=!1)),ve=Ve,-1!==(qe=Ve.indexOf(":"))){if(!(ze=le[Ve.substring(0,qe)]))return we("missing namespace on <"+ve+">");Ve=Ve.substr(qe+1)}else ze=le.xmlns;ze&&(Ve=ze+":"+Ve)}if(mt&&(Ir=Se,mr=Fe,x&&(Te?x(q,Io,It,ot):x(Ve,ai,Io,It,ot),De)))return;if(It){if(S&&(S(Te?q:Ve,Io,mt,ot),De))return;$e&&(le=mt?Ue:re.pop())}Nt+=1}else{if(Q&&(Q(Pe.substring(Bt,Nt+1),Io,ot),De))return;Nt+=1}}else{if(-1===(Nt=Pe.indexOf("?>",Bt)))return we("unclosed question");if(Y&&(Y(Pe.substring(Bt,Nt+2),ot),De))return;Nt+=2}}}(ge),ot=oa,De=!1,Ye},this.stop=function(){De=!0}}function Qt(m){return m.xml&&"lowerCase"===m.xml.tagAlias}var sa={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},jl="xsi:type";function as(m){return m.xml&&m.xml.serialize}function Vl(m){return as(m)===jl}function er(m,_){return Qt(_)?m.prefix+":"+((x=m.localName).charAt(0).toUpperCase()+x.slice(1)):m.name;var x}function No(m){return new Error(m)}function kr(m){return m.$descriptor}function fr(m){Xe(this,m),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(_){this.references.push(_)},this.addElement=function(_){if(!_)throw No("expected element");var x,S=this.elementsById,P=kr(_).idProperty;if(P&&(x=_.get(P.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(x))throw new Error("illegal ID <"+x+">");if(S[x])throw No("duplicate ID <"+x+">");S[x]=_}},this.addWarning=function(_){this.warnings.push(_)}}function Is(){}function go(){}function si(){}function aa(m,_){this.property=m,this.context=_}function Na(m,_){this.element=_,this.propertyDesc=m}function yo(){}function On(m,_,x){this.model=m,this.type=m.getType(_),this.context=x}function Mc(m,_,x){On.call(this,m,_,x)}function Hl(m,_,x){this.model=m,this.context=x}function $l(m){m instanceof Xt&&(m={model:m}),Xe(this,{lax:!1},m)}Is.prototype.handleEnd=function(){},Is.prototype.handleText=function(){},Is.prototype.handleNode=function(){},(go.prototype=Object.create(Is.prototype)).handleNode=function(){return this},(si.prototype=Object.create(Is.prototype)).handleText=function(m){this.body=(this.body||"")+m},(aa.prototype=Object.create(si.prototype)).handleNode=function(m){if(this.element)throw No("expected no sub nodes");return this.element=this.createReference(m),this},aa.prototype.handleEnd=function(){this.element.id=this.body},aa.prototype.createReference=function(m){return{property:this.property.ns.name,id:""}},(Na.prototype=Object.create(si.prototype)).handleEnd=function(){var m=this.body||"",_=this.element,x=this.propertyDesc;m=Gt(x.type,m),x.isMany?_.get(x.name).push(m):_.set(x.name,m)},(yo.prototype=Object.create(si.prototype)).handleNode=function(m){var _=this,x=this.element;return x?_=this.handleChild(m):(x=this.element=this.createElement(m),this.context.addElement(x)),_},(On.prototype=Object.create(yo.prototype)).addReference=function(m){this.context.addReference(m)},On.prototype.handleText=function(m){if(!kr(this.element).bodyProperty)throw No("unexpected body text <"+m+">");si.prototype.handleText.call(this,m)},On.prototype.handleEnd=function(){var m=this.body,_=this.element,x=kr(_).bodyProperty;x&&void 0!==m&&(m=Gt(x.type,m),_.set(x.name,m))},On.prototype.createElement=function(m){var _,x=m.attributes,S=this.type,P=kr(S),O=this.context,H=new S({}),Y=this.model;return Re(x,function(Q,he){var Te=P.propertiesByName[he];Te&&Te.isReference?Te.isMany?Re(Q.split(" "),function(lt){O.addReference({element:H,property:Te.ns.name,id:lt})}):O.addReference({element:H,property:Te.ns.name,id:Q}):(Te?Q=Gt(Te.type,Q):"xmlns"!==he&&(_=Jn(he,P.ns.prefix),Y.getPackage(_.prefix)&&O.addWarning({message:"unknown attribute <"+he+">",element:H,property:he,value:Q})),H.set(he,Q))}),H},On.prototype.getPropertyForNode=function(m){var _,x,lt,Ae,$e,Ye,De,we,ot,S=Jn(m.name),O=this.model,H=kr(this.type),Q=H.propertiesByName[S.name];if(Q&&!Q.isAttr)return Vl(Q)&&(_=m.attributes[jl])?(lt=O,Ae=ot=Jn(_),$e=lt.getPackage(ot.prefix),Ye=Ae.name,De=Ae.localName,_=(we=$e.xml&&$e.xml.typePrefix)&&0===De.indexOf(we)?Ae.prefix+":"+De.slice(we.length):Ye,Xe({},Q,{effectiveType:kr(x=O.getType(_)).name})):Q;var he=O.getPackage(S.prefix);if(he){if(_=er(S,he),x=O.getType(_),Q=bt(H.properties,function(Te){return!Te.isVirtual&&!Te.isReference&&!Te.isAttribute&&x.hasType(Te.type)}))return Xe({},Q,{effectiveType:kr(x).name})}else if(Q=bt(H.properties,function(Te){return!Te.isReference&&!Te.isAttribute&&"Element"===Te.type}))return Q;throw No("unrecognized element <"+S.name+">")},On.prototype.toString=function(){return"ElementDescriptor["+kr(this.type).name+"]"},On.prototype.valueHandler=function(m,_){return new Na(m,_)},On.prototype.referenceHandler=function(m){return new aa(m,this.context)},On.prototype.handler=function(m){return"Element"===m?new Hl(this.model,m,this.context):new On(this.model,m,this.context)},On.prototype.handleChild=function(m){var _,x,S,P;if(_=this.getPropertyForNode(m),S=this.element,bi(x=_.effectiveType||_.type))return this.valueHandler(_,S);var O=(P=_.isReference?this.referenceHandler(_).handleNode(m):this.handler(x).handleNode(m)).element;return void 0!==O&&(_.isMany?S.get(_.name).push(O):S.set(_.name,O),_.isReference?(Xe(O,{element:S}),this.context.addReference(O)):O.$parent=S),P},(Mc.prototype=Object.create(On.prototype)).createElement=function(m){var _=m.name,x=Jn(_),P=this.type,O=this.model.getPackage(x.prefix),H=O&&er(x,O)||_;if(!P.hasType(H))throw No("unexpected element <"+m.originalName+">");return On.prototype.createElement.call(this,m)},(Hl.prototype=Object.create(yo.prototype)).createElement=function(m){var _=m.name,x=Jn(_).prefix;return this.model.createAny(_,m.ns[x+"$uri"],m.attributes)},Hl.prototype.handleChild=function(m){var _=new Hl(this.model,"Element",this.context).handleNode(m),x=this.element,S=_.element;return void 0!==S&&((x.$children=x.$children||[]).push(S),S.$parent=x),_},Hl.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},$l.prototype.fromXML=function(m,_,x){var S=_.rootHandler;_ instanceof On?(S=_,_={}):"string"==typeof _?(S=this.handler(_),_={}):"string"==typeof S&&(S=this.handler(S));var De,P=this.model,O=this.lax,H=new fr(Xe({},_,{rootHandler:S})),Y=new Bn({proxy:!0}),Q=(De=[],Object.defineProperty(De,"peek",{value:function(){return this[this.length-1]}}),De);function he(De,we,ye){var ge=we(),Pe=ge.line,Ue=ge.column,Fe=ge.data;"<"===Fe.charAt(0)&&-1!==Fe.indexOf(" ")&&(Fe=Fe.slice(0,Fe.indexOf(" "))+">");var V="unparsable content "+(Fe?Fe+" ":"")+"detected\n\tline: "+Pe+"\n\tcolumn: "+Ue+"\n\tnested error: "+De.message;if(ye)return H.addWarning({message:V,error:De}),!0;throw No(V)}function Te(De,we){return he(De,we,!0)}S.context=H,Q.push(S);var lt=/^<\?xml /i,ot=/ encoding="([^"]+)"/i,Ae=/^utf-8$/i;function $e(De,we){try{Q.peek().handleText(De)}catch(ye){Te(ye,we)}}var Ye=P.getPackages().reduce(function(De,we){return De[we.uri]=we.prefix,De},{"http://www.w3.org/XML/1998/namespace":"xml"});return Y.ns(Ye).on("openTag",function(De,we,ye,ge){var Pe=De.attrs||{},Ue=Object.keys(Pe).reduce(function(Fe,V){var Se=we(Pe[V]);return Fe[V]=Se,Fe},{});!function(Fe,V){var Se=Q.peek();try{Q.push(Se.handleNode(Fe))}catch(qe){he(qe,V,O)&&Q.push(new go)}}({name:De.name,originalName:De.originalName,attributes:Ue,ns:De.ns},ge)}).on("question",function(De){if(lt.test(De)){var we=ot.exec(De),ye=we&&we[1];ye&&!Ae.test(ye)&&H.addWarning({message:"unsupported document encoding <"+ye+">, falling back to UTF-8"})}}).on("closeTag",function(){Q.pop().handleEnd()}).on("cdata",$e).on("text",function(De,we,ye){var ge,Pe;Pe=ye,(ge=we(De)).trim()&&$e(ge,Pe)}).on("error",he).on("warn",Te),new Promise(function(De,we){var ye;try{Y.parse(m),function(){var V,Se,qe=H.elementsById,Wn=H.references;for(V=0;Se=Wn[V];V++){var ze=Se.element,Ve=qe[Se.id],ve=kr(ze).propertiesByName[Se.property];if(Ve||H.addWarning({message:"unresolved reference <"+Se.id+">",element:Se.element,property:Se.property,value:Se.id}),ve.isMany){var q=ze.get(ve.name),N=q.indexOf(Se);-1===N&&(N=q.length),Ve?q[N]=Ve:q.splice(N,1)}else ze.set(ve.name,Ve)}}()}catch(V){ye=V}var ge=S.element;ye||ge||(ye=No("failed to parse document as <"+S.type.$descriptor.name+">"));var Pe=H.warnings,Ue=H.references,Fe=H.elementsById;return ye?(ye.warnings=Pe,we(ye)):De({rootElement:ge,elementsById:Fe,references:Ue,warnings:Pe})})},$l.prototype.handler=function(m){return new Mc(this.model,m)};var ef=/<|>|'|"|&|\n\r|\n/g,kg=/<|>|&/g;function Pg(m){var _={},x={},S={},P=[],O=[];this.byUri=function(H){return x[H]||m&&m.byUri(H)},this.add=function(H,Y){x[H.uri]=H,Y?P.push(H):O.push(H),this.mapPrefix(H.prefix,H.uri)},this.uriByPrefix=function(H){return _[H||"xmlns"]},this.mapPrefix=function(H,Y){_[H||"xmlns"]=Y},this.getNSKey=function(H){return void 0!==H.prefix?H.uri+"|"+H.prefix:H.uri},this.logUsed=function(H){var Y=H.uri,Q=this.getNSKey(H);S[Q]=this.byUri(Y),m&&m.logUsed(H)},this.getUsed=function(H){var Y=this;return[].concat(P,O).filter(function(Q){var he=Y.getNSKey(Q);return S[he]})}}function Ig(m,_){return Qt(_)?(x=m).charAt(0).toLowerCase()+x.slice(1):m;var x}function Og(m,_){m.super_=_,m.prototype=Object.create(_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}function zu(m){return Ai(m)?m:(m.prefix?m.prefix+":":"")+m.localName}var Ng={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Fg={"<":"lt",">":"gt","&":"amp"};function tf(m,_,x){return(m=Ai(m)?m:""+m).replace(_,function(S){return"&"+x[S]+";"})}function Os(m){this.tagName=m}function $r(){}function nf(m){this.tagName=m}function Dn(m,_){this.body=[],this.attrs=[],this.parent=m,this.propertyDescriptor=_}function zl(m,_){Dn.call(this,m,_)}function Ul(){this.value="",this.write=function(m){this.value+=m}}function Rc(m,_){var x=[""];this.append=function(S){return m.write(S),this},this.appendNewLine=function(){return _&&m.write("\n"),this},this.appendIndent=function(){return _&&m.write(x.join("  ")),this},this.indent=function(){return x.push(""),this},this.unindent=function(){return x.pop(),this}}function Wl(m){return m=Xe({format:!1,preamble:!0},m||{}),{toXML:function(_,x){var S=x||new Ul,P=new Rc(S,m.format);if(m.preamble&&P.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new Dn).build(_).serializeTo(P),!x)return S.value}}}function kc(m,_){Xt.call(this,m,_)}Os.prototype.build=function(m){return this.element=m,this},Os.prototype.serializeTo=function(m){m.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},$r.prototype.serializeValue=$r.prototype.serializeTo=function(m){m.append(this.escape?tf(this.value,kg,Fg):this.value)},$r.prototype.build=function(m,_){return this.value=_,"String"===m.type&&-1!==_.search(kg)&&(this.escape=!0),this},Og(nf,$r),nf.prototype.serializeTo=function(m){m.appendIndent().append("<"+this.tagName+">"),this.serializeValue(m),m.append("</"+this.tagName+">").appendNewLine()},Dn.prototype.build=function(m){this.element=m;var _,x,H,S=m.$descriptor,P=this.propertyDescriptor,O=S.isGeneric;return _=O?this.parseGeneric(m):this.parseNsAttributes(m),this.ns=P?this.nsPropertyTagName(P):this.nsTagName(S),this.tagName=this.addTagName(this.ns),O||(x=Xn((H=m).$descriptor.properties,function(Y){var Q=Y.name;if(Y.isVirtual||!Ds(H,Q))return!1;var he=H[Q];return he!==Y.default&&null!==he&&(!Y.isMany||he.length)}),this.parseAttributes(Xn(x,function(H){return H.isAttr})),this.parseContainments(function(H){return Xn(H,function(Y){return!Y.isAttr})}(x))),this.parseGenericAttributes(m,_),this},Dn.prototype.nsTagName=function(m){return function(_,x){return Xe(x.isGeneric?{localName:x.ns.localName}:{localName:Ig(x.ns.localName,x.$pkg)},_)}(this.logNamespaceUsed(m.ns),m)},Dn.prototype.nsPropertyTagName=function(m){return function(_,x){return Xe({localName:x.ns.localName},_)}(this.logNamespaceUsed(m.ns),m)},Dn.prototype.isLocalNs=function(m){return m.uri===this.ns.uri},Dn.prototype.nsAttributeName=function(m){var _;if(_=Ai(m)?Jn(m):m.ns,m.inherited)return{localName:_.localName};var x=this.logNamespaceUsed(_);return this.getNamespaces().logUsed(x),this.isLocalNs(x)?{localName:_.localName}:Xe({localName:_.localName},x)},Dn.prototype.parseGeneric=function(m){var _=this,x=this.body,S=[];return Re(m,function(P,O){"$body"===O?x.push((new $r).build({type:"String"},P)):"$children"===O?Re(P,function(H){x.push(new Dn(_).build(H))}):0!==O.indexOf("$")&&_.parseNsAttribute(m,O,P)&&S.push({name:O,value:P})}),S},Dn.prototype.parseNsAttribute=function(m,_,x){var S,P=m.$model,O=Jn(_);if("xmlns"===O.prefix&&(S={prefix:O.localName,uri:x}),O.prefix||"xmlns"!==O.localName||(S={uri:x}),!S)return{name:_,value:x};if(P&&P.getPackage(x))this.logNamespace(S,!0,!0);else{var H=this.logNamespaceUsed(S,!0);this.getNamespaces().logUsed(H)}},Dn.prototype.parseNsAttributes=function(m,_){var x=this,P=[];return Re(m.$attrs,function(O,H){var Y=x.parseNsAttribute(m,H,O);Y&&P.push(Y)}),P},Dn.prototype.parseGenericAttributes=function(m,_){var x=this;Re(_,function(S){if(S.name!==jl)try{x.addAttribute(x.nsAttributeName(S.name),S.value)}catch(P){console.warn("missing namespace information for ",S.name,"=",S.value,"on",m,P)}})},Dn.prototype.parseContainments=function(m){var _=this,x=this.body,S=this.element;Re(m,function(P){var O=S.get(P.name),H=P.isReference;if(P.isMany||(O=[O]),P.isBody)x.push((new $r).build(P,O[0]));else if(bi(P.type))Re(O,function(he){x.push(new nf(_.addTagName(_.nsPropertyTagName(P))).build(P,he))});else if(H)Re(O,function(he){x.push(new Os(_.addTagName(_.nsPropertyTagName(P))).build(he))});else{var Y=Vl(P),Q="property"===as(P);Re(O,function(he){var Te;Te=Y?new zl(_,P):Q?new Dn(_,P):new Dn(_),x.push(Te.build(he))})}})},Dn.prototype.getNamespaces=function(m){var _,x=this.namespaces,S=this.parent;return x||(_=S&&S.getNamespaces(),m||!_?this.namespaces=x=new Pg(_):x=_),x},Dn.prototype.logNamespace=function(m,_,x){var S=this.getNamespaces(x),P=m.uri,O=m.prefix;return S.byUri(P)&&!x||S.add(m,_),S.mapPrefix(O,P),m},Dn.prototype.logNamespaceUsed=function(m,_){var x,S,P,O=this.element.$model,H=this.getNamespaces(_),Y=m.prefix,Q=m.uri;if(!Y&&!Q)return{localName:m.localName};if(P=sa[Y]||O&&(O.getPackage(Y)||{}).uri,!(Q=Q||P||H.uriByPrefix(Y)))throw new Error("no namespace uri given for prefix <"+Y+">");if(!(m=H.byUri(Q))){for(x=Y,S=1;H.uriByPrefix(x);)x=Y+"_"+S++;m=this.logNamespace({prefix:x,uri:Q},P===Q)}return Y&&H.mapPrefix(Y,Q),m},Dn.prototype.parseAttributes=function(m){var _=this,x=this.element;Re(m,function(S){var P=x.get(S.name);if(S.isReference)if(S.isMany){var O=[];Re(P,function(H){O.push(H.id)}),P=O.join(" ")}else P=P.id;_.addAttribute(_.nsAttributeName(S),P)})},Dn.prototype.addTagName=function(m){var _=this.logNamespaceUsed(m);return this.getNamespaces().logUsed(_),zu(m)},Dn.prototype.addAttribute=function(m,_){var x=this.attrs;Ai(_)&&(_=tf(_,ef,Ng)),x.push({name:m,value:_})},Dn.prototype.serializeAttributes=function(m){var S,_=this.attrs,x=this.namespaces;x&&(_=(S=x,S.getUsed().filter(function(P){return"xml"!==P.prefix}).map(function(P){return{name:"xmlns"+(P.prefix?":"+P.prefix:""),value:P.uri}})).concat(_)),Re(_,function(S){m.append(" ").append(zu(S.name)).append('="').append(S.value).append('"')})},Dn.prototype.serializeTo=function(m){var _=this.body[0],x=_&&_.constructor!==$r;m.appendIndent().append("<"+this.tagName),this.serializeAttributes(m),m.append(_?">":" />"),_&&(x&&m.appendNewLine().indent(),Re(this.body,function(S){S.serializeTo(m)}),x&&m.unindent().appendIndent(),m.append("</"+this.tagName+">")),m.appendNewLine()},Og(zl,Dn),zl.prototype.parseNsAttributes=function(m){var _=Dn.prototype.parseNsAttributes.call(this,m),x=m.$descriptor;if(x.name===this.propertyDescriptor.type)return _;var S=this.typeNs=this.nsTagName(x);this.getNamespaces().logUsed(this.typeNs);var P=m.$model.getPackage(S.uri),O=P.xml&&P.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(jl),(S.prefix?S.prefix+":":"")+O+x.ns.localName),_},zl.prototype.isLocalNs=function(m){return m.uri===(this.typeNs||this.ns).uri},(kc.prototype=Object.create(Xt.prototype)).fromXML=function(m,_,x){Ai(_)||(x=_,_="bpmn:Definitions");var S=new $l(Xe({model:this,lax:!0},x)),P=S.handler(_);return S.fromXML(m,P)},kc.prototype.toXML=function(m,_){var x=new Wl(_);return new Promise(function(S,P){try{return S({xml:x.toXML(m)})}catch(O){return P(O)}})};var Pr={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function rf(m,_){return new kc(Xe({},Pr,m),_)}var vo=new nn({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function tr(m,_){return m.$instanceOf(_)}function cs(m,_){var x={},S=[];function P(ze,Ve){return function(ve){ze(ve,Ve)}}function O(ze){x[ze.id]=ze}function H(ze,Ve){try{var ve=ze.di&&function(q,N){if(q.gfx)throw new Error(_("already rendered {element}",{element:vi(q)}));return m.element(q,N)}(ze,Ve);return O(ze),ve}catch(q){Y(q.message,{element:ze,error:q}),console.error(_("failed to import {element}",{element:vi(ze)})),console.error(q)}}function Y(ze,Ve){m.error(ze,Ve)}function Q(ze){var Ve=ze.bpmnElement;Ve?Ve.di?Y(_("multiple DI elements defined for {element}",{element:vi(Ve)}),{element:Ve}):(vo.bind(Ve,"di"),Ve.di=ze):Y(_("no bpmnElement referenced in {element}",{element:vi(ze)}),{element:ze})}function Te(ze){Q(ze)}function lt(){for(;S.length;)S.shift()()}function ot(ze,Ve){qe(ze,Ve),ge(ze.ioSpecification,Ve),ye(ze.artifacts,Ve),O(ze)}function Ae(ze,Ve){H(ze,Ve)}function $e(ze,Ve){H(ze,Ve)}function Ye(ze,Ve){H(ze,Ve)}function De(ze,Ve){H(ze,Ve)}function we(ze,Ve){H(ze,Ve)}function ye(ze,Ve){Re(ze,function(ve){tr(ve,"bpmn:Association")?S.push(function(){we(ve,Ve)}):we(ve,Ve)})}function ge(ze,Ve){ze&&(Re(ze.dataInputs,P(Ye,Ve)),Re(ze.dataOutputs,P(De,Ve)))}function Pe(ze,Ve){qe(ze,Ve),ye(ze.artifacts,Ve)}function Ue(ze,Ve){var ve=H(ze,Ve);tr(ze,"bpmn:SubProcess")&&Pe(ze,ve||Ve),tr(ze,"bpmn:Activity")&&ge(ze.ioSpecification,Ve),S.push(function(){Re(ze.dataInputAssociations,P($e,Ve)),Re(ze.dataOutputAssociations,P($e,Ve))})}function V(ze,Ve){S.push(function(){var q,ve=H(ze,Ve);ze.childLaneSet&&Se(ze.childLaneSet,ve||Ve),Re((q=ze).flowNodeRef,function(N){var re=N.get("lanes");re&&re.push(q)})})}function Se(ze,Ve){Re(ze.lanes,P(V,Ve))}function qe(ze,Ve){var q;q=Ve,Re(ze.flowElements,function(N){tr(N,"bpmn:SequenceFlow")?S.push(function(){H(N,q)}):tr(N,"bpmn:BoundaryEvent")?S.unshift(function(){Ue(N,q)}):tr(N,"bpmn:FlowNode")?Ue(N,q):tr(N,"bpmn:DataObject")||(tr(N,"bpmn:DataStoreReference")||tr(N,"bpmn:DataObjectReference")?function(ze,Ve){H(ze,Ve)}(N,q):Y(_("unrecognized flowElement {element} in context {context}",{element:vi(N),context:q?vi(q.businessObject):"null"}),{element:N,context:q}))}),ze.laneSets&&function(ve,q){Re(ve,P(Se,q))}(ze.laneSets,Ve)}function Wn(ze,Ve){var ve=H(ze,Ve),q=ze.processRef;q&&ot(q,ve||Ve)}return{handleDeferred:lt,handleDefinitions:function(ze,Ve){var ve=ze.diagrams;if(Ve&&-1===ve.indexOf(Ve))throw new Error(_("diagram not part of bpmn:Definitions"));if(!Ve&&ve&&ve.length&&(Ve=ve[0]),!Ve)throw new Error(_("no diagram to display"));!function(ze){var Ve;Q(Ve=ze.plane),Re(Ve.planeElement,Te)}(Ve);var q=Ve.plane;if(!q)throw new Error(_("no plane for {element}",{element:vi(Ve)}));var N=q.bpmnElement;if(!N){if(!(N=bt(ze.rootElements,function(tt){return tr(tt,"bpmn:Process")||tr(tt,"bpmn:Collaboration")})))throw new Error(_("no process or collaboration to display"));Y(_("correcting missing bpmnElement on {plane} to {rootElement}",{plane:vi(q),rootElement:vi(N)})),q.bpmnElement=N,Q(q)}var re,le=m.root(N,q);if(tr(N,"bpmn:Process"))ot(N,le);else{if(!tr(N,"bpmn:Collaboration"))throw new Error(_("unsupported bpmnElement for {plane}: {rootElement}",{plane:vi(q),rootElement:vi(N)}));Re((re=N).participants,P(Wn)),ye(re.artifacts),S.push(function(){Re(re.messageFlows,P(Ae,undefined))}),function(de,tt){Xn(de,function(mt){return!x[mt.id]&&tr(mt,"bpmn:Process")&&mt.laneSets}).forEach(P(ot,tt))}(ze.rootElements,le)}lt()},handleSubProcess:Pe,registerDi:Q}}function Gl(m){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var _=arguments.length;if(!(_>=1&&Ss(arguments[_-1])))return m.apply(this,arguments);var x=arguments[_-1];console.warn(new Error("Passing callbacks to "+m.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var S=Array.prototype.slice.call(arguments,0,-1);m.apply(this,S).then(function(P){var O=Object.keys(P)[0];return x(null,P[O])},function(P){return x(P,P.warnings)})}}var of='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21" style="vertical-align:middle"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>';function Pc(m){return m.join(";")}var Fa,sf=Pc(["color: #404040"]),ch='<div class="bjs-powered-by-lightbox" style="'+Pc(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Pc(["width: 100%","height: 100%","background: rgba(40,40,40,0.2)"])+'"></div><div class="notice" style="'+Pc(["position: absolute","left: 50%","top: 40%","transform: translate(-50%)","width: 260px","padding: 10px","background: white","box-shadow: 0 1px 4px rgba(0,0,0,0.3)","font-family: Helvetica, Arial, sans-serif","font-size: 14px","display: flex","line-height: 1.3"])+'"><a href="https://bpmn.io" target="_blank" rel="noopener" style="margin: 15px 20px 15px 10px; align-self: center;'+sf+'">'+of+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>';function ti(m){var _,x;m=Xe({},ca,m),this._moddle=this._createModdle(m),this._container=this._createContainer(m),_=this._container,x=Ts('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100; '+sf+'">'+of+"</a>"),_.appendChild(x),$t(x,"click",function(S){Fa||(Fa=Ts(ch),Pu_bind(Fa,".backdrop","click",function(P){document.body.removeChild(Fa)})),document.body.appendChild(Fa),S.preventDefault()}),this._init(this._container,this._moddle,m)}function nr(m,_){return m.warnings=_,m}kn(ti,ia),ti.prototype.importXML=Gl(function(m,_){var x=this;return new Promise(function(S,P){m=x._emit("import.parse.start",{xml:m})||m,x._moddle.fromXML(m,"bpmn:Definitions").then(function(O){var H,Y,Q=O.rootElement,Te=O.warnings;Q=x._emit("import.parse.complete",(H={error:null,definitions:Q,elementsById:O.elementsById,references:O.references,warnings:Te},Y=x.get("eventBus").createEvent(H),Object.defineProperty(Y,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:H.warnings,references:H.references,elementsById:H.elementsById}}}),Y))||Q,x.importDefinitions(Q,_).then(function(ot){var Ae=[].concat(Te,ot.warnings||[]);return x._emit("import.done",{error:null,warnings:Ae}),S({warnings:Ae})}).catch(function(ot){var Ae=[].concat(Te,ot.warnings||[]);return x._emit("import.done",{error:ot,warnings:Ae}),P(nr(ot,Ae))})}).catch(function(O){return x._emit("import.parse.complete",{error:O}),(Y=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec((H=O).message))&&(H.message="unparsable content <"+Y[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+Y[2]),x._emit("import.done",{error:O=H,warnings:O.warnings}),P(O);var H,Y})})}),ti.prototype.importDefinitions=Gl(function(m,_){var x=this;return new Promise(function(S,P){x._setDefinitions(m),x.open(_).then(function(O){return S({warnings:O.warnings})}).catch(function(O){return P(O)})})}),ti.prototype.open=Gl(function(m){var _=this._definitions,x=m,S=this;return new Promise(function(P,O){if(!_){var H=new Error("no XML imported");return O(nr(H,[]))}if("string"==typeof m&&!(x=(he=m)&&bt((Q=_).diagrams,function(Te){return Te.id===he})||null)){var Y=new Error("BPMNDiagram <"+m+"> not found");return O(nr(Y,[]))}var Q,he;try{S.clear()}catch(Q){return O(nr(Q,[]))}(function(m,_,x){var S,P,O,H=[];return new Promise(function(Y,Q){try{return S=m.get("bpmnImporter"),P=m.get("eventBus"),O=m.get("translate"),P.fire("import.render.start",{definitions:_}),he=_,Te=x,new cs({root:function(lt){return S.add(lt)},element:function(lt,ot){return S.add(lt,ot)},error:function(lt,ot){H.push({message:lt,context:ot})}},O).handleDefinitions(he,Te),P.fire("import.render.complete",{error:void 0,warnings:H}),Y({warnings:H})}catch(he){return he.warnings=H,Q(he)}var he,Te})})(S,_,x).then(function(Q){return P({warnings:Q.warnings})}).catch(function(Q){return O(Q)})})}),ti.prototype.saveXML=Gl(function(m){m=m||{};var _=this,x=this._definitions;return new Promise(function(S){if(!x)return S({error:new Error("no definitions loaded")});x=_._emit("saveXML.start",{definitions:x})||x,_._moddle.toXML(x,m).then(function(P){var O=P.xml;return O=_._emit("saveXML.serialized",{xml:O})||O,S({xml:O})})}).catch(function(S){return{error:S}}).then(function(S){_._emit("saveXML.done",S);var P=S.error;return P?Promise.reject(P):S})}),ti.prototype.saveSVG=Gl(function(m){var _=this;return new Promise(function(x,S){var P,O;_._emit("saveSVG.start");try{var H=_.get("canvas"),Y=H.getDefaultLayer(),Q=st("defs",H._svg),he=Up(Y),Te=Q?"<defs>"+Up(Q)+"</defs>":"",lt=Y.getBBox();P='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+lt.width+'" height="'+lt.height+'" viewBox="'+lt.x+" "+lt.y+" "+lt.width+" "+lt.height+'" version="1.1">'+Te+he+"</svg>"}catch(ot){O=ot}return _._emit("saveSVG.done",{error:O,svg:P}),O?S(O):x({svg:P})})}),ti.prototype._setDefinitions=function(m){this._definitions=m},ti.prototype.getModules=function(){return this._modules},ti.prototype.clear=function(){this.getDefinitions()&&(this.get("elementRegistry").forEach(function(m){var _=m.businessObject;_&&_.di&&delete _.di}),ia.prototype.clear.call(this))},ti.prototype.destroy=function(){ia.prototype.destroy.call(this),Vr(this._container)},ti.prototype.on=function(m,_,x,S){return this.get("eventBus").on(m,_,x,S)},ti.prototype.off=function(m,_){this.get("eventBus").off(m,_)},ti.prototype.attachTo=function(m){if(!m)throw new Error("parentNode required");this.detach(),m.get&&m.constructor.prototype.jquery&&(m=m.get(0)),"string"==typeof m&&(m=st(m)),m.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},ti.prototype.getDefinitions=function(){return this._definitions},ti.prototype.detach=function(){var m=this._container,_=m.parentNode;_&&(this._emit("detach",{}),_.removeChild(m))},ti.prototype._init=function(m,_,x){var S,P,O=x.modules||this.getModules(),Y=[].concat([{bpmnjs:["value",this],moddle:["value",_]}],O,x.additionalModules||[]),Q=Xe((S=["additionalModules"],P={},Re(Object(x),function(he,Te){-1===S.indexOf(Te)&&(P[Te]=he)}),P),{canvas:Xe({},x.canvas,{container:m}),modules:Y});ia.call(this,Q),x&&x.container&&this.attachTo(x.container)},ti.prototype._emit=function(m,_){return this.get("eventBus").fire(m,_)},ti.prototype._createContainer=function(m){var _=Ts('<div class="bjs-container"></div>');return Xe(_.style,{width:ql(m.width),height:ql(m.height),position:m.position}),_},ti.prototype._createModdle=function(m){return new rf(Xe({},this._moddleExtensions,m.moddleExtensions))},ti.prototype._modules=[];var ca={width:"100%",height:"100%",position:"relative"};function ql(m){return m+(El(m)?"px":"")}function En(m){ti.call(this,m)}return kn(En,ti),En.prototype._modules=[Rs,nh,pr,Bu],En.prototype._moddleExtensions={},En}()},941:(so,Di,kn)=>{"use strict";function Oe(n){return"function"==typeof n}function Wd(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const lr=Wd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ar(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class vn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const a of t)a.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Oe(i))try{i()}catch(a){e=a instanceof lr?a.errors:[a]}const{_teardowns:o}=this;if(o){this._teardowns=null;for(const a of o)try{Ai(a)}catch(u){e=null!=e?e:[],u instanceof lr?e=[...e,...u.errors]:e.push(u)}}if(e)throw new lr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ai(e);else{if(e instanceof vn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ar(t,e)}remove(e){const{_teardowns:t}=this;t&&Ar(t,e),e instanceof vn&&e._removeParent(this)}}vn.EMPTY=(()=>{const n=new vn;return n.closed=!0,n})();const El=vn.EMPTY;function Ss(n){return n instanceof vn||n&&"closed"in n&&Oe(n.remove)&&Oe(n.add)&&Oe(n.unsubscribe)}function Ai(n){Oe(n)?n():n.unsubscribe()}const Ds={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bt={setTimeout(...n){const{delegate:e}=bt;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=bt;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Xn(n){bt.setTimeout(()=>{const{onUnhandledError:e}=Ds;if(!e)throw n;e(n)})}function Re(){}const di=tn("C",void 0,void 0);function tn(n,e,t){return{kind:n,value:e,error:t}}let gt=null;function ne(n){if(Ds.useDeprecatedSynchronousErrorHandling){const e=!gt;if(e&&(gt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=gt;if(gt=null,t)throw i}}else n()}class Xe extends vn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ss(e)&&e.add(this)):this.destination=Xs}static create(e,t,i){return new ur(e,t,i)}next(e){this.isStopped?Ys(tn("N",e,void 0),this):this._next(e)}error(e){this.isStopped?Ys(tn("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ys(di,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class ur extends Xe{constructor(e,t,i){let o;if(super(),Oe(e))o=e;else if(e){let a;({next:o,error:t,complete:i}=e),this&&Ds.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=()=>this.unsubscribe()):a=e,o=null==o?void 0:o.bind(a),t=null==t?void 0:t.bind(a),i=null==i?void 0:i.bind(a)}this.destination={next:o?jt(o):Re,error:jt(null!=t?t:Qn),complete:i?jt(i):Re}}}function jt(n,e){return(...t)=>{try{n(...t)}catch(i){Ds.useDeprecatedSynchronousErrorHandling?function(n){Ds.useDeprecatedSynchronousErrorHandling&&gt&&(gt.errorThrown=!0,gt.error=n)}(i):Xn(i)}}}function Qn(n){throw n}function Ys(n,e){const{onStoppedNotification:t}=Ds;t&&bt.setTimeout(()=>t(n,e))}const Xs={closed:!0,next:Re,error:Qn,complete:Re},gc="function"==typeof Symbol&&Symbol.observable||"@@observable";function pn(n){return n}let Be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,o){const a=function(n){return n&&n instanceof Xe||function(n){return n&&Oe(n.next)&&Oe(n.error)&&Oe(n.complete)}(n)&&Ss(n)}(t)?t:new ur(t,i,o);return ne(()=>{const{operator:u,source:p}=this;a.add(u?u.call(a,p):p?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Br(i))((o,a)=>{let u;u=this.subscribe(p=>{try{t(p)}catch(y){a(y),null==u||u.unsubscribe()}},a,o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[gc](){return this}pipe(...t){return function(n){return 0===n.length?pn:1===n.length?n[0]:function(t){return n.reduce((i,o)=>o(i),t)}}(t)(this)}toPromise(t){return new(t=Br(t))((i,o)=>{let a;this.subscribe(u=>a=u,u=>o(u),()=>i(a))})}}return n.create=e=>new n(e),n})();function Br(n){var e;return null!==(e=null!=n?n:Ds.Promise)&&void 0!==e?e:Promise}const Yd=Wd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yt=(()=>{class n extends Be{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new es(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Yd}next(t){ne(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const o of i)o.next(t)}})}error(t){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:o,observers:a}=this;return i||o?El:(a.push(t),new vn(()=>Ar(a,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:o,isStopped:a}=this;i?t.error(o):a&&t.complete()}asObservable(){const t=new Be;return t.source=this,t}}return n.create=(e,t)=>new es(e,t),n})();class es extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:El}}function Ti(n){return Oe(null==n?void 0:n.lift)}function Ln(n){return e=>{if(Ti(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class oe extends Xe{constructor(e,t,i,o,a){super(e),this.onFinalize=a,this._next=t?function(u){try{t(u)}catch(p){e.error(p)}}:super._next,this._error=o?function(u){try{o(u)}catch(p){e.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function Pt(n,e){return Ln((t,i)=>{let o=0;t.subscribe(new oe(i,a=>{i.next(n.call(e,a,o++))}))})}function Ze(n){return this instanceof Ze?(this.v=n,this):new Ze(n)}function _c(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=t.apply(n,e||[]),a=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(L){i[L]&&(o[L]=function(U){return new Promise(function(G,ie){a.push([L,U,G,ie])>1||p(L,U)})})}function p(L,U){try{!function(L){L.value instanceof Ze?Promise.resolve(L.value.v).then(E,D):k(a[0][2],L)}(i[L](U))}catch(G){k(a[0][3],G)}}function E(L){p("next",L)}function D(L){p("throw",L)}function k(L,U){L(U),a.shift(),a.length&&p(a[0][0],a[0][1])}}function vt(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(p,y){!function(a,u,p,y){Promise.resolve(y).then(function(E){a({value:E,done:p})},u)}(p,y,(u=n[a](u)).done,u.value)})}}}const xl=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ut(n){return Oe(null==n?void 0:n.then)}function Ru(n){return Oe(n[gc])}function Qs(n){return Symbol.asyncIterator&&Oe(null==n?void 0:n[Symbol.asyncIterator])}function Ne(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Zd="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Gp(n){return Oe(null==n?void 0:n[Zd])}function Cl(n){return _c(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:o}=yield Ze(t.read());if(o)return yield Ze(void 0);yield yield Ze(i)}}finally{t.releaseLock()}})}function $t(n){return Oe(null==n?void 0:n.getReader)}function yi(n){if(n instanceof Be)return n;if(null!=n){if(Ru(n))return function(n){return new Be(e=>{const t=n[gc]();if(Oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(xl(n))return function(n){return new Be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ut(n))return function(n){return new Be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xn)})}(n);if(Qs(n))return Iu(n);if(Gp(n))return function(n){return new Be(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if($t(n))return function(n){return Iu(Cl(n))}(n)}throw Ne(n)}function Iu(n){return new Be(e=>{(function(n,e){var t,i,o,a;return function(n,e,t,i){return new(t||(t=Promise))(function(a,u){function p(D){try{E(i.next(D))}catch(k){u(k)}}function y(D){try{E(i.throw(D))}catch(k){u(k)}}function E(D){D.done?a(D.value):function(a){return a instanceof t?a:new t(function(u){u(a)})}(D.value).then(p,y)}E((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=vt(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(u){o={error:u}}finally{try{i&&!i.done&&(a=t.return)&&(yield a.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Vr(n,e,t,i=0,o=!1){const a=e.schedule(function(){t(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(a),!o)return a}function qn(n,e,t=1/0){return Oe(e)?qn((i,o)=>Pt((a,u)=>e(i,a,o,u))(yi(n(i,o))),t):("number"==typeof e&&(t=e),Ln((i,o)=>function(n,e,t,i,o,a,u,p){const y=[];let E=0,D=0,k=!1;const L=()=>{k&&!y.length&&!E&&e.complete()},U=ie=>E<i?G(ie):y.push(ie),G=ie=>{E++;let te=!1;yi(t(ie,D++)).subscribe(new oe(e,_e=>{e.next(_e)},()=>{te=!0},void 0,()=>{if(te)try{for(E--;y.length&&E<i;){const _e=y.shift();G(_e)}L()}catch(_e){e.error(_e)}}))};return n.subscribe(new oe(e,U,()=>{k=!0,L()})),()=>{}}(i,o,n,t)))}function Ec(n=1/0){return qn(pn,n)}const Qi=new Be(n=>n.complete());function Ms(n){return n&&Oe(n.schedule)}function eh(n){return n[n.length-1]}function th(n){return Oe(eh(n))?n.pop():void 0}function Dl(n){return Ms(eh(n))?n.pop():void 0}function qp(n,e=0){return Ln((t,i)=>{t.subscribe(new oe(i,o=>Vr(i,n,()=>i.next(o),e),()=>Vr(i,n,()=>i.complete(),e),o=>Vr(i,n,()=>i.error(o),e)))})}function Ra(n,e=0){return Ln((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function nh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Be(t=>{Vr(t,e,()=>{const i=n[Symbol.asyncIterator]();Vr(t,e,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Ri(n,e){return e?function(n,e){if(null!=n){if(Ru(n))return function(n,e){return yi(n).pipe(Ra(e),qp(e))}(n,e);if(xl(n))return function(n,e){return new Be(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ut(n))return function(n,e){return yi(n).pipe(Ra(e),qp(e))}(n,e);if(Qs(n))return nh(n,e);if(Gp(n))return function(n,e){return new Be(t=>{let i;return Vr(t,e,()=>{i=n[Zd](),Vr(t,e,()=>{let o,a;try{({value:o,done:a}=i.next())}catch(u){return void t.error(u)}a?t.complete():t.next(o)},0,!0)}),()=>Oe(null==i?void 0:i.return)&&i.return()})}(n,e);if($t(n))return function(n,e){return nh(Cl(n),e)}(n,e)}throw Ne(n)}(n,e):yi(n)}function Po(...n){const e=Dl(n),t=function(n,e){return"number"==typeof eh(n)?n.pop():1/0}(n),i=n;return i.length?1===i.length?yi(i[0]):Ec(t)(Ri(i,e)):Qi}function dr(n){return n<=0?()=>Qi:Ln((e,t)=>{let i=0;e.subscribe(new oe(t,o=>{++i<=n&&(t.next(o),n<=i&&t.complete())}))})}function vi(n={}){const{connector:e=(()=>new yt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=n;return a=>{let u=null,p=null,y=null,E=0,D=!1,k=!1;const L=()=>{null==p||p.unsubscribe(),p=null},U=()=>{L(),u=y=null,D=k=!1},G=()=>{const ie=u;U(),null==ie||ie.unsubscribe()};return Ln((ie,te)=>{E++,!k&&!D&&L();const _e=y=null!=y?y:e();te.add(()=>{E--,0===E&&!k&&!D&&(p=Js(G,o))}),_e.subscribe(te),u||(u=new ur({next:me=>_e.next(me),error:me=>{k=!0,L(),p=Js(U,t,me),_e.error(me)},complete:()=>{D=!0,L(),p=Js(U,i),_e.complete()}}),Ri(ie).subscribe(u))})(a)}}function Js(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(dr(1)).subscribe(()=>n())}function _n(n){for(let e in n)if(n[e]===_n)return e;throw Error("Could not find renamed property on target object.")}function Tl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ct(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ct).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Rs(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const wc=_n({__forward_ref__:_n});function pi(n){return n.__forward_ref__=pi,n.toString=function(){return Ct(this())},n}function dt(n){return function(n){return"function"==typeof n&&n.hasOwnProperty(wc)&&n.__forward_ref__===pi}(n)?n():n}class Zi extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function Je(n){return"string"==typeof n?n:null==n?"":String(n)}function Bi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Je(n)}function xc(n,e){const t=e?` in ${e}`:"";throw new Zi("201",`No provider for ${Bi(n)} found${t}`)}function ki(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Qe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vi(n){return is(n,Rl)||is(n,kl)}function is(n,e){return n.hasOwnProperty(e)?n[e]:null}function Cc(n){return n&&(n.hasOwnProperty(Sc)||n.hasOwnProperty(Vu))?n[Sc]:null}const Rl=_n({\u0275prov:_n}),Sc=_n({\u0275inj:_n}),kl=_n({ngInjectableDef:_n}),Vu=_n({ngInjectorDef:_n});var Le=(()=>((Le=Le||{})[Le.Default=0]="Default",Le[Le.Host=1]="Host",Le[Le.Self=2]="Self",Le[Le.SkipSelf=4]="SkipSelf",Le[Le.Optional=8]="Optional",Le))();let Pl;function mi(n){const e=Pl;return Pl=n,e}function Il(n,e,t){const i=Vi(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Le.Optional?null:void 0!==e?e:void xc(Ct(n),"Injector")}function Tr(n){return{toString:n}.toString()}var et=(()=>((et=et||{})[et.OnPush=0]="OnPush",et[et.Default=1]="Default",et))(),nn=(()=>{return(n=nn||(nn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",nn;var n})();const $u="undefined"!=typeof globalThis&&globalThis,Ol="undefined"!=typeof window&&window,oh="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sn=$u||"undefined"!=typeof global&&global||Ol||oh,St={},bn=[],rs=_n({\u0275cmp:_n}),Mr=_n({\u0275dir:_n}),os=_n({\u0275pipe:_n}),Ll=_n({\u0275mod:_n}),Zn=_n({\u0275fac:_n}),ss=_n({__NG_ELEMENT_ID__:_n});let _i=0;function Hr(n){return Tr(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===et.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||bn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||nn.Emulated,id:"c",styles:n.styles||bn,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.directives,a=n.features,u=n.pipes;return i.id+=_i++,i.inputs=ka(n.inputs,t),i.outputs=ka(n.outputs),a&&a.forEach(p=>p(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(sh):null,i.pipeDefs=u?()=>("function"==typeof u?u():u).map(ia):null,i})}function sh(n){return bi(n)||function(n){return n[Mr]||null}(n)}function ia(n){return function(n){return n[os]||null}(n)}const Bl={};function Sn(n){return Tr(()=>{const e={type:n.type,bootstrap:n.bootstrap||bn,declarations:n.declarations||bn,imports:n.imports||bn,exports:n.exports||bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Bl[n.id]=n.type),e})}function ka(n,e){if(null==n)return St;const t={};for(const i in n)if(n.hasOwnProperty(i)){let o=n[i],a=o;Array.isArray(o)&&(a=o[1],o=o[0]),t[o]=i,e&&(e[o]=a)}return t}const Gt=Hr;function bi(n){return n[rs]||null}function In(n,e){const t=n[Ll]||null;if(!t&&!0===e)throw new Error(`Type ${Ct(n)} does not have '\u0275mod' property.`);return t}function go(n){return Array.isArray(n)&&"object"==typeof n[1]}function si(n){return Array.isArray(n)&&!0===n[1]}function aa(n){return 0!=(8&n.flags)}function Na(n){return 2==(2&n.flags)}function yo(n){return 1==(1&n.flags)}function On(n){return null!==n.template}function Mc(n){return 0!=(512&n[2])}function vo(n,e){return n.hasOwnProperty(Zn)?n[Zn]:null}class tr{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function ah(n){return n.type.prototype.ngOnChanges&&(n.setInput=of),Gl}function Gl(){const n=Fa(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===St)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function of(n,e,t,i){const o=Fa(n)||function(n,e){return n[Pc]=e}(n,{previous:St,current:null}),a=o.current||(o.current={}),u=o.previous,p=this.declaredInputs[t],y=u[p];a[p]=new tr(y&&y.currentValue,e,u===St),n[i]=e}const Pc="__ngSimpleChanges__";function Fa(n){return n[Pc]||null}let En;function S(n){return!!n.listen}const P={createRenderer:(n,e)=>void 0!==En?En:"undefined"!=typeof document?document:void 0};function H(n){for(;Array.isArray(n);)n=n[0];return n}function he(n,e){return H(e[n])}function Te(n,e){return H(e[n.index])}function ot(n,e){return n.data[e]}function $e(n,e){const t=e[n];return go(t)?t:t[0]}function Ye(n){return 4==(4&n[2])}function De(n){return 128==(128&n[2])}function ye(n,e){return null==e?null:n[e]}function ge(n){n[18]=0}function Pe(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const Ue={lFrame:yr(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Wn(){return Ue.bindingsEnabled}function ve(){return Ue.lFrame.lView}function q(){return Ue.lFrame.tView}function re(){let n=le();for(;null!==n&&64===n.type;)n=n.parent;return n}function le(){return Ue.lFrame.currentTNode}function tt(n,e){const t=Ue.lFrame;t.currentTNode=n,t.isParent=e}function mt(){return Ue.lFrame.isParent}function It(){Ue.lFrame.isParent=!1}function mr(){return Ue.isInCheckNoChangesMode}function Ir(n){Ue.isInCheckNoChangesMode=n}function Ii(){return Ue.lFrame.bindingIndex++}function Tn(n,e){const t=Ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,an(e)}function an(n){Ue.lFrame.currentDirectiveIndex=n}function gr(n){const e=Ue.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Mt(){return Ue.lFrame.currentQueryIndex}function gn(n){Ue.lFrame.currentQueryIndex=n}function gi(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function la(n,e,t){if(t&Le.SkipSelf){let o=e,a=n;for(;!(o=o.parent,null!==o||t&Le.Host||(o=gi(a),null===o||(a=a[15],10&o.type))););if(null===o)return!1;e=o,n=a}const i=Ue.lFrame=Ur();return i.currentTNode=e,i.lView=n,!0}function ci(n){const e=Ur(),t=n[1];Ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ur(){const n=Ue.lFrame,e=null===n?null:n.child;return null===e?yr(n):e}function yr(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function La(){const n=Ue.lFrame;return Ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Uu=La;function Ba(){const n=La();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Wr(){return Ue.lFrame.selectedIndex}function lo(n){Ue.lFrame.selectedIndex=n}function Gn(){const n=Ue.lFrame;return ot(n.tView,n.selectedIndex)}function uh(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const a=n.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:p,ngAfterViewInit:y,ngAfterViewChecked:E,ngOnDestroy:D}=a;u&&(n.contentHooks||(n.contentHooks=[])).push(-t,u),p&&((n.contentHooks||(n.contentHooks=[])).push(t,p),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,p)),y&&(n.viewHooks||(n.viewHooks=[])).push(-t,y),E&&((n.viewHooks||(n.viewHooks=[])).push(t,E),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,E)),null!=D&&(n.destroyHooks||(n.destroyHooks=[])).push(t,D)}}function ja(n,e,t){Bg(n,e,3,t)}function dh(n,e,t,i){(3&n[2])===t&&Bg(n,e,t,i)}function lf(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Bg(n,e,t,i){const a=null!=i?i:-1,u=e.length-1;let p=0;for(let y=void 0!==i?65535&n[18]:0;y<u;y++)if("number"==typeof e[y+1]){if(p=e[y],null!=i&&p>=i)break}else e[y]<0&&(n[18]+=65536),(p<a||-1==a)&&(eb(n,t,e,y),n[18]=(4294901760&n[18])+y+2),y++}function eb(n,e,t,i){const o=t[i]<0,a=t[i+1],p=n[o?-t[i]:t[i]];if(o){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{a.call(p)}finally{}}}else try{a.call(p)}finally{}}class bo{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Gr(n,e,t){const i=S(n);let o=0;for(;o<t.length;){const a=t[o];if("number"==typeof a){if(0!==a)break;o++;const u=t[o++],p=t[o++],y=t[o++];i?n.setAttribute(e,p,y,u):e.setAttributeNS(u,p,y)}else{const u=a,p=t[++o];ph(u)?i&&n.setProperty(e,u,p):i?n.setAttribute(e,u,p):e.setAttribute(u,p),o++}}return o}function ls(n){return 3===n||4===n||6===n}function ph(n){return 64===n.charCodeAt(0)}function Yl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?t=o:0===t||ib(n,t,o,null,-1===t||2===t?e[++i]:null)}}return n}function ib(n,e,t,i,o){let a=0,u=n.length;if(-1===e)u=-1;else for(;a<n.length;){const p=n[a++];if("number"==typeof p){if(p===e){u=-1;break}if(p>e){u=a-1;break}}}for(;a<n.length;){const p=n[a];if("number"==typeof p)break;if(p===t){if(null===i)return void(null!==o&&(n[a+1]=o));if(i===n[a+1])return void(n[a+2]=o)}a++,null!==i&&a++,null!==o&&a++}-1!==u&&(n.splice(u,0,e),a=u+1),n.splice(a++,0,t),null!==i&&n.splice(a++,0,i),null!==o&&n.splice(a++,0,o)}function rr(n){return-1!==n}function Wu(n){return 32767&n}function Gu(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let df=!0;function Va(n){const e=df;return df=n,e}let sb=0;function Nc(n,e){const t=pf(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,hf(i.data,n),hf(e,null),hf(i.blueprint,null));const o=Fc(n,e),a=n.injectorIndex;if(rr(o)){const u=Wu(o),p=Gu(o,e),y=p[1].data;for(let E=0;E<8;E++)e[a+E]=p[u+E]|y[u+E]}return e[a+8]=o,a}function hf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Fc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,o=e;for(;null!==o;){const a=o[1],u=a.type;if(i=2===u?a.declTNode:1===u?o[6]:null,null===i)return-1;if(t++,o=o[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Fo(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(ss)&&(i=t[ss]),null==i&&(i=t[ss]=sb++);const o=255&i;e.data[n+(o>>5)]|=1<<o}(n,e,t)}function Hg(n,e,t){if(t&Le.Optional)return n;xc(e,"NodeInjector")}function ff(n,e,t,i){if(t&Le.Optional&&void 0===i&&(i=null),0==(t&(Le.Self|Le.Host))){const o=n[9],a=mi(void 0);try{return o?o.get(e,i,t&Le.Optional):Il(e,i,t&Le.Optional)}finally{mi(a)}}return Hg(i,e,t)}function $g(n,e,t,i=Le.Default,o){if(null!==n){const a=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ss)?n[ss]:void 0;return"number"==typeof e?e>=0?255&e:zg:e}(t);if("function"==typeof a){if(!la(e,n,i))return i&Le.Host?Hg(o,t,i):ff(e,t,i,o);try{const u=a(i);if(null!=u||i&Le.Optional)return u;xc(t)}finally{Uu()}}else if("number"==typeof a){let u=null,p=pf(n,e),y=-1,E=i&Le.Host?e[16][6]:null;for((-1===p||i&Le.SkipSelf)&&(y=-1===p?Fc(n,e):e[p+8],-1!==y&&Ug(i,!1)?(u=e[1],p=Wu(y),e=Gu(y,e)):p=-1);-1!==p;){const D=e[1];if(Lc(a,p,D.data)){const k=ua(p,e,t,u,i,E);if(k!==cb)return k}y=e[p+8],-1!==y&&Ug(i,e[1].data[p+8]===E)&&Lc(a,p,e)?(u=D,p=Wu(y),e=Gu(y,e)):p=-1}}}return ff(e,t,i,o)}const cb={};function zg(){return new $a(re(),ve())}function ua(n,e,t,i,o,a){const u=e[1],p=u.data[n+8],D=fh(p,u,t,null==i?Na(p)&&df:i!=u&&0!=(3&p.type),o&Le.Host&&a===p);return null!==D?Ha(e,u,D,p):cb}function fh(n,e,t,i,o){const a=n.providerIndexes,u=e.data,p=1048575&a,y=n.directiveStart,D=a>>20,L=o?p+D:n.directiveEnd;for(let U=i?p:p+D;U<L;U++){const G=u[U];if(U<y&&t===G||U>=y&&G.type===t)return U}if(o){const U=u[y];if(U&&On(U)&&U.type===t)return y}return null}function Ha(n,e,t,i){let o=n[t];const a=e.data;if(function(n){return n instanceof bo}(o)){const u=o;u.resolving&&function(n,e){throw new Zi("200",`Circular dependency in DI detected for ${n}`)}(Bi(a[t]));const p=Va(u.canSeeViewProviders);u.resolving=!0;const y=u.injectImpl?mi(u.injectImpl):null;la(n,i,Le.Default);try{o=n[t]=u.factory(void 0,a,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:a}=e.type.prototype;if(i){const u=ah(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,u),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,u)}o&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,o),a&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a))}(t,a[t],e)}finally{null!==y&&mi(y),Va(p),u.resolving=!1,Uu()}}return o}function Lc(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Ug(n,e){return!(n&Le.Self||n&Le.Host&&e)}class $a{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return $g(this._tNode,this._lView,e,i,t)}}function Xl(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let o=0;for(;o<i;){const a=t[o];if(ls(a))break;if(0===a)o+=2;else if("number"==typeof a)for(o++;o<i&&"string"==typeof t[o];)o++;else{if(a===e)return t[o+1];o+=2}}}return null}(re(),n)}const Ku="__parameters__";function Ql(n,e,t){return Tr(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const o in i)this[o]=i[o]}}}(e);function o(...a){if(this instanceof o)return i.apply(this,a),this;const u=new o(...a);return p.annotation=u,p;function p(y,E,D){const k=y.hasOwnProperty(Ku)?y[Ku]:Object.defineProperty(y,Ku,{value:[]})[Ku];for(;k.length<=D;)k.push(null);return(k[D]=k[D]||[]).push(u),y}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}class pt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Qe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const sx=new pt("AnalyzeForEntryComponents");function qr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),qr(i,e)):e!==n&&e.push(i)}return e}function Bo(n,e){n.forEach(t=>Array.isArray(t)?Bo(t,e):e(t))}function gf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $c(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function jo(n,e,t){let i=Uc(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let o=n.length;if(o==e)n.push(t,i);else if(1===o)n.push(i,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;)n[o]=n[o-2],o--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Kg(n,e){const t=Uc(n,e);if(t>=0)return n[1|t]}function Uc(n,e){return function(n,e,t){let i=0,o=n.length>>t;for(;o!==i;){const a=i+(o-i>>1),u=n[a<<t];if(e===u)return a<<t;u>e?o=a:i=a+1}return~(o<<t)}(n,e,1)}const Xu={},bh="__NG_DI_FLAG__",Qu="ngTempTokenPath",pb=/\n/gm,Ua="__source",Wa=_n({provide:String,useValue:_n});let Ga;function Wc(n){const e=Ga;return Ga=n,e}function yf(n,e=Le.Default){if(void 0===Ga)throw new Error("inject() must be called from an injection context");return null===Ga?Il(n,void 0,e):Ga.get(n,e&Le.Optional?null:void 0,e)}function ae(n,e=Le.Default){return(Pl||yf)(dt(n),e)}const Ju=ae;function Gc(n){const e=[];for(let t=0;t<n.length;t++){const i=dt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let o,a=Le.Default;for(let u=0;u<i.length;u++){const p=i[u],y=mb(p);"number"==typeof y?-1===y?o=p.token:a|=y:o=p}e.push(ae(o,a))}else e.push(ae(i))}return e}function ed(n,e){return n[bh]=e,n.prototype[bh]=e,n}function mb(n){return n[bh]}function Zg(n,e,t,i){const o=n[Qu];throw e[Ua]&&o.unshift(e[Ua]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let o=Ct(e);if(Array.isArray(e))o=e.map(Ct).join(" -> ");else if("object"==typeof e){let a=[];for(let u in e)if(e.hasOwnProperty(u)){let p=e[u];a.push(u+":"+("string"==typeof p?JSON.stringify(p):Ct(p)))}o=`{${a.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${n.replace(pb,"\n  ")}`}("\n"+n.message,o,t,i),n.ngTokenPath=o,n[Qu]=null,n}const nu=ed(Ql("Inject",n=>({token:n})),-1),vr=ed(Ql("Optional"),8),da=ed(Ql("SkipSelf"),4);let wh;function qc(n){var e;return(null==(e=function(){if(void 0===wh&&(wh=null,sn.trustedTypes))try{wh=sn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return wh}())?void 0:e.createHTML(n))||n}class Kc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wb extends Kc{getTypeName(){return"HTML"}}class hs extends Kc{getTypeName(){return"Style"}}class vx extends Kc{getTypeName(){return"Script"}}class _x extends Kc{getTypeName(){return"URL"}}class bx extends Kc{getTypeName(){return"ResourceURL"}}function sr(n){return n instanceof Kc?n.changingThisBreaksApplicationSecurity:n}function Eo(n,e){const t=xb(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function xb(n){return n instanceof Kc&&n.getTypeName()||null}class Sh{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(qc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Mb{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=qc(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=qc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let o=t.length-1;0<o;o--){const u=t.item(o).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&e.removeAttribute(u)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const _f=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kb=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ni(n){return(n=String(n)).match(_f)||n.match(kb)?n:"unsafe:"+n}function wo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Dh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const bf=wo("area,br,col,hr,img,wbr"),id=wo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ps=wo("rp,rt"),Ef=Dh(bf,Dh(id,wo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dh(ps,wo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dh(ps,id)),cy=wo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rd=wo("srcset"),Ib=Dh(cy,rd,wo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ah=wo("script,style,template");class ly{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=this.checkClobberedElement(t,t.nextSibling);if(o){t=o;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ef.hasOwnProperty(t))return this.sanitizedSomething=!0,!Ah.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let o=0;o<i.length;o++){const a=i.item(o),u=a.name,p=u.toLowerCase();if(!Ib.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let y=a.value;cy[p]&&(y=ni(y)),rd[p]&&(n=y,y=(n=String(n)).split(",").map(e=>ni(e.trim())).join(", ")),this.buf.push(" ",u,'="',wf(y),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ef.hasOwnProperty(t)&&!bf.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(wf(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Ob=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nb=/([^\#-~ |!])/g;function wf(n){return n.replace(/&/g,"&amp;").replace(Ob,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Nb,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xf;function Fb(n,e){let t=null;try{xf=xf||function(n){const e=new Mb(n);return function(){try{return!!(new window.DOMParser).parseFromString(qc(""),"text/html")}catch(n){return!1}}()?new Sh(e):e}(n);let i=e?String(e):"";t=xf.getInertBodyElement(i);let o=5,a=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=a,a=t.innerHTML,t=xf.getInertBodyElement(i)}while(i!==a);return qc((new ly).sanitizeChildren(Cf(t)||t))}finally{if(t){const i=Cf(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Cf(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var yn=(()=>((yn=yn||{})[yn.NONE=0]="NONE",yn[yn.HTML=1]="HTML",yn[yn.STYLE=2]="STYLE",yn[yn.SCRIPT=3]="SCRIPT",yn[yn.URL=4]="URL",yn[yn.RESOURCE_URL=5]="RESOURCE_URL",yn))();const Hb="__ngContext__";function Kr(n,e){n[Hb]=e}function hy(n){const e=function(n){return n[Hb]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Rf(n){return n.ngOriginalError}function Ya(n,...e){n.error(...e)}class Ls{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=this._findContext(e),o=(n=e)&&n.ngErrorLogger||Ya;var n;o(this._console,"ERROR",e),t&&o(this._console,"ORIGINAL ERROR",t),i&&o(this._console,"ERROR CONTEXT",i)}_findContext(e){return e?e.ngDebugContext||this._findContext(Rf(e)):null}_findOriginalError(e){let t=e&&Rf(e);for(;t&&Rf(t);)t=Rf(t);return t||null}}const Xa=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sn))();function Bs(n){return n instanceof Function?n():n}var Ho=(()=>((Ho=Ho||{})[Ho.Important=1]="Important",Ho[Ho.DashCase=2]="DashCase",Ho))();function iu(n,e){return undefined(n,e)}function Ph(n){const e=n[3];return si(e)?e[3]:e}function Of(n){return Yb(n[13])}function Nf(n){return Yb(n[4])}function Yb(n){for(;null!==n&&!si(n);)n=n[4];return n}function ru(n,e,t,i,o){if(null!=i){let a,u=!1;si(i)?a=i:go(i)&&(u=!0,i=i[0]);const p=H(i);0===n&&null!==t?null==o?Dy(e,t,p):Yc(e,t,p,o||null,!0):1===n&&null!==t?Yc(e,t,p,o||null,!0):2===n?function(n,e,t){const i=ad(n,e);i&&function(n,e,t,i){S(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,p,u):3===n&&e.destroyNode(p),null!=a&&function(n,e,t,i,o){const a=t[7];a!==H(t)&&ru(e,n,i,a,o);for(let p=10;p<t.length;p++){const y=t[p];su(y[1],y,n,e,i,a)}}(e,n,a,t,o)}}function ou(n,e,t){return S(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function n0(n,e){const t=n[9],i=t.indexOf(e),o=e[3];1024&e[2]&&(e[2]&=-1025,Pe(o,-1)),t.splice(i,1)}function xy(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const o=i[17];null!==o&&o!==n&&n0(o,i),e>0&&(n[t-1][4]=i[4]);const a=Hc(n,10+e);!function(n,e){su(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const u=a[19];null!==u&&u.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function Qa(n,e){if(!(256&e[2])){const t=e[11];S(t)&&t.destroyNode&&su(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Ff(n[1],n);for(;e;){let t=null;if(go(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)go(e)&&Ff(e[1],e),e=e[3];null===e&&(e=n),go(e)&&Ff(e[1],e),t=e&&e[4]}e=t}}(e)}}function Ff(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const o=e[t[i]];if(!(o instanceof bo)){const a=t[i+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){const p=o[a[u]],y=a[u+1];try{y.call(p)}finally{}}else try{a.call(o)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let o=-1;if(null!==t)for(let a=0;a<t.length-1;a+=2)if("string"==typeof t[a]){const u=t[a+1],p="function"==typeof u?u(e):H(e[u]),y=i[o=t[a+2]],E=t[a+3];"boolean"==typeof E?p.removeEventListener(t[a],y,E):E>=0?i[o=E]():i[o=-E].unsubscribe(),a+=2}else{const u=i[o=t[a+1]];t[a].call(u)}if(null!==i){for(let a=o+1;a<i.length;a++)i[a]();e[7]=null}}(n,e),1===e[1].type&&S(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&si(e[3])){t!==e[3]&&n0(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function Lf(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const o=n.data[i.directiveStart].encapsulation;if(o===nn.None||o===nn.Emulated)return null}return Te(i,t)}(n,e.parent,t)}function Yc(n,e,t,i,o){S(n)?n.insertBefore(e,t,i,o):e.insertBefore(t,i,o)}function Dy(n,e,t){S(n)?n.appendChild(e,t):e.appendChild(t)}function r0(n,e,t,i,o){null!==i?Yc(n,e,t,i,o):Dy(n,e,t)}function ad(n,e){return S(n)?n.parentNode(e):e.parentNode}function jf(n,e,t){return Vf(n,e,t)}let Vf=function(n,e,t){return 40&n.type?Te(n,t):null};function Fh(n,e,t,i){const o=Lf(n,i,e),a=e[11],p=jf(i.parent||e[6],i,e);if(null!=o)if(Array.isArray(t))for(let y=0;y<t.length;y++)r0(a,o,t[y],p,!1);else r0(a,o,t,p,!1)}function cd(n,e){if(null!==e){const t=e.type;if(3&t)return Te(e,n);if(4&t)return Lh(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return cd(n,i);{const o=n[e.index];return si(o)?Lh(-1,o):H(o)}}if(32&t)return iu(e,n)()||H(n[e.index]);{const i=Hf(n,e);return null!==i?Array.isArray(i)?i[0]:cd(Ph(n[16]),i):cd(n,e.next)}}return null}function Hf(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Lh(n,e){const t=10+n+1;if(t<e.length){const i=e[t],o=i[1].firstChild;if(null!==o)return cd(i,o)}return e[7]}function $f(n,e,t,i,o,a,u){for(;null!=t;){const p=i[t.index],y=t.type;if(u&&0===e&&(p&&Kr(H(p),i),t.flags|=4),64!=(64&t.flags))if(8&y)$f(n,e,t.child,i,o,a,!1),ru(e,n,o,p,a);else if(32&y){const E=iu(t,i);let D;for(;D=E();)ru(e,n,o,D,a);ru(e,n,o,p,a)}else 16&y?Ty(n,e,i,t,o,a):ru(e,n,o,p,a);t=u?t.projectionNext:t.next}}function su(n,e,t,i,o,a){$f(t,i,n.firstChild,e,o,a,!1)}function Ty(n,e,t,i,o,a){const u=t[16],y=u[6].projection[i.projection];if(Array.isArray(y))for(let E=0;E<y.length;E++)ru(e,n,o,y[E],a);else $f(n,e,y,u[3],o,a,!0)}function jh(n,e,t){S(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Uf(n,e,t){S(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Wf(n,e,t){let i=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const a=e.length;if(o+a===i||n.charCodeAt(o+a)<=32)return o}t=o+1}}const Vh="ng-template";function Ry(n,e,t){let i=0;for(;i<n.length;){let o=n[i++];if(t&&"class"===o){if(o=n[i],-1!==Wf(o.toLowerCase(),e,0))return!0}else if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}}return!1}function Gf(n){return 4===n.type&&n.value!==Vh}function qf(n,e,t){return e===(4!==n.type||t?n.value:Vh)}function s0(n,e,t){let i=4;const o=n.attrs||[],a=function(n){for(let e=0;e<n.length;e++)if(ls(n[e]))return e;return n.length}(o);let u=!1;for(let p=0;p<e.length;p++){const y=e[p];if("number"!=typeof y){if(!u)if(4&i){if(i=2|1&i,""!==y&&!qf(n,y,t)||""===y&&1===e.length){if($o(i))return!1;u=!0}}else{const E=8&i?y:e[++p];if(8&i&&null!==n.attrs){if(!Ry(n.attrs,E,t)){if($o(i))return!1;u=!0}continue}const k=a0(8&i?"class":y,o,Gf(n),t);if(-1===k){if($o(i))return!1;u=!0;continue}if(""!==E){let L;L=k>a?"":o[k+1].toLowerCase();const U=8&i?L:null;if(U&&-1!==Wf(U,E,0)||2&i&&E!==L){if($o(i))return!1;u=!0}}}}else{if(!u&&!$o(i)&&!$o(y))return!1;if(u&&$o(y))continue;u=!1,i=y|1&i}}return $o(i)||u}function $o(n){return 0==(1&n)}function a0(n,e,t,i){if(null===e)return-1;let o=0;if(i||!t){let a=!1;for(;o<e.length;){const u=e[o];if(u===n)return o;if(3===u||6===u)a=!0;else{if(1===u||2===u){let p=e[++o];for(;"string"==typeof p;)p=e[++o];continue}if(4===u)break;if(0===u){o+=4;continue}}o+=a?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function ky(n,e,t=!1){for(let i=0;i<e.length;i++)if(s0(n,e[i],t))return!0;return!1}function Ny(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let o=0;o<n.length;o++)if(n[o]!==i[o])continue e;return!0}}return!1}function Fy(n,e){return n?":not("+e.trim()+")":e}function c0(n){let e=n[0],t=1,i=2,o="",a=!1;for(;t<n.length;){let u=n[t];if("string"==typeof u)if(2&i){const p=n[++t];o+="["+u+(p.length>0?'="'+p+'"':"")+"]"}else 8&i?o+="."+u:4&i&&(o+=" "+u);else""!==o&&!$o(u)&&(e+=Fy(a,o),o=""),i=u,a=a||!$o(i);t++}return""!==o&&(e+=Fy(a,o)),e}const Ht={};function Or(n){u0(q(),ve(),Wr()+n,mr())}function u0(n,e,t,i){if(!i)if(3==(3&e[2])){const a=n.preOrderCheckHooks;null!==a&&ja(e,a,t)}else{const a=n.preOrderHooks;null!==a&&dh(e,a,0,t)}lo(t)}function $h(n,e){return n<<17|e<<2}function ys(n){return n>>17&32767}function Kf(n){return 2|n}function zo(n){return(131068&n)>>2}function By(n,e){return-131069&n|e<<2}function ld(n){return 1|n}function im(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i],a=t[i+1];if(-1!==a){const u=n.data[a];gn(o),u.contentQueries(2,e[a],a)}}}function Gh(n,e,t,i,o,a,u,p,y,E){const D=e.blueprint.slice();return D[0]=o,D[2]=140|i,ge(D),D[3]=D[15]=n,D[8]=t,D[10]=u||n&&n[10],D[11]=p||n&&n[11],D[12]=y||n&&n[12]||null,D[9]=E||n&&n[9]||null,D[6]=a,D[16]=2==e.type?n[16]:D,D}function Jc(n,e,t,i,o){let a=n.data[e];if(null===a)a=function(n,e,t,i,o){const a=le(),u=mt(),y=n.data[e]=function(n,e,t,i,o,a){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?a:a&&a.parent,t,e,i,o);return null===n.firstChild&&(n.firstChild=y),null!==a&&(u?null==a.child&&null!==y.parent&&(a.child=y):null===a.next&&(a.next=y)),y}(n,e,t,i,o),Ue.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=t,a.value=i,a.attrs=o;const u=function(){const n=Ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();a.injectorIndex=null===u?-1:u.injectorIndex}return tt(a,!0),a}function au(n,e,t,i){if(0===t)return-1;const o=e.length;for(let a=0;a<t;a++)e.push(i),n.blueprint.push(i),n.data.push(null);return o}function Oi(n,e,t){ci(e);try{const i=n.viewQuery;null!==i&&js(1,i,t);const o=n.template;null!==o&&rm(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&im(n,e),n.staticViewQueries&&js(2,n.viewQuery,t);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)rC(n,e[t])}(e,a)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Ba()}}function el(n,e,t,i){const o=e[2];if(256==(256&o))return;ci(e);const a=mr();try{ge(e),function(n){Ue.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&rm(n,e,t,2,i);const u=3==(3&o);if(!a)if(u){const E=n.preOrderCheckHooks;null!==E&&ja(e,E,null)}else{const E=n.preOrderHooks;null!==E&&dh(e,E,0,null),lf(e,0)}if(function(n){for(let e=Of(n);null!==e;e=Nf(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const o=t[i],a=o[3];0==(1024&o[2])&&Pe(a,1),o[2]|=1024}}}(e),function(n){for(let e=Of(n);null!==e;e=Nf(e))for(let t=10;t<e.length;t++){const i=e[t],o=i[1];De(i)&&el(o,i,o.template,i[8])}}(e),null!==n.contentQueries&&im(n,e),!a)if(u){const E=n.contentCheckHooks;null!==E&&ja(e,E)}else{const E=n.contentHooks;null!==E&&dh(e,E,1),lf(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)lo(~o);else{const a=o,u=t[++i],p=t[++i];Tn(u,a),p(2,e[a])}}}finally{lo(-1)}}(n,e);const p=n.components;null!==p&&function(n,e){for(let t=0;t<e.length;t++)cv(n,e[t])}(e,p);const y=n.viewQuery;if(null!==y&&js(2,y,i),!a)if(u){const E=n.viewCheckHooks;null!==E&&ja(e,E)}else{const E=n.viewHooks;null!==E&&dh(e,E,2),lf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),a||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Pe(e[3],-1))}finally{Ba()}}function b0(n,e,t,i){const o=e[10],a=!mr(),u=Ye(e);try{a&&!u&&o.begin&&o.begin(),u&&Oi(n,e,i),el(n,e,t,i)}finally{a&&!u&&o.end&&o.end()}}function rm(n,e,t,i,o){const a=Wr(),u=2&i;try{lo(-1),u&&e.length>20&&u0(n,e,20,mr()),t(i,o)}finally{lo(a)}}function qh(n,e,t){!Wn()||(function(n,e,t,i){const o=t.directiveStart,a=t.directiveEnd;n.firstCreatePass||Nc(t,e),Kr(i,e);const u=t.initialInputs;for(let p=o;p<a;p++){const y=n.data[p],E=On(y);E&&tC(e,t,y);const D=Ha(e,n,p,t);Kr(D,e),null!==u&&nC(0,p-o,D,y,0,u),E&&($e(t.index,e)[8]=D)}}(n,e,t,Te(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,o=t.directiveEnd,u=t.index,p=Ue.lFrame.currentDirectiveIndex;try{lo(u);for(let y=i;y<o;y++){const E=n.data[y],D=e[y];an(y),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&A0(E,D)}}finally{lo(-1),an(p)}}(n,e,t))}function tl(n,e,t=Te){const i=e.localNames;if(null!==i){let o=e.index+1;for(let a=0;a<i.length;a+=2){const u=i[a+1],p=-1===u?t(e,n):n[u];n[o++]=p}}}function tv(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Uo(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Uo(n,e,t,i,o,a,u,p,y,E){const D=20+i,k=D+o,L=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Ht);return t}(D,k),U="function"==typeof E?E():E;return L[1]={type:n,blueprint:L,template:t,queries:null,viewQuery:p,declTNode:e,data:L.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:y,consts:U,incompleteFirstPass:!1}}function Kh(n,e,t,i){const o=uv(e);null===t?o.push(i):(o.push(t),n.firstCreatePass&&ha(n).push(i,o.length-1))}function w0(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const o=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,o):t[i]=[e,o]}return t}function xo(n,e,t,i,o,a,u,p){const y=Te(e,t);let D,E=e.inputs;!p&&null!=E&&(D=E[i])?(pm(n,t,D,i,o),Na(e)&&function(n,e){const t=$e(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),o=null!=u?u(o,e.value||"",i):o,S(a)?a.setProperty(y,i,o):ph(i)||(y.setProperty?y.setProperty(i,o):y[i]=o))}function cm(n,e,t,i){let o=!1;if(Wn()){const a=function(n,e,t){const i=n.directiveRegistry;let o=null;if(i)for(let a=0;a<i.length;a++){const u=i[a];ky(t,u.selectors,!1)&&(o||(o=[]),Fo(Nc(t,e),n,u.type),On(u)?(M0(n,t),o.unshift(u)):o.push(u))}return o}(n,e,t),u=null===i?null:{"":-1};if(null!==a){o=!0,Xh(t,n.data.length,a.length);for(let D=0;D<a.length;D++){const k=a[D];k.providersResolver&&k.providersResolver(k)}let p=!1,y=!1,E=au(n,e,a.length,null);for(let D=0;D<a.length;D++){const k=a[D];t.mergedAttrs=Yl(t.mergedAttrs,k.hostAttrs),um(n,t,e,E,k),eC(E,k,u),null!==k.contentQueries&&(t.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(t.flags|=128);const L=k.type.prototype;!p&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),p=!0),!y&&(L.ngOnChanges||L.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),y=!0),E++}!function(n,e){const i=e.directiveEnd,o=n.data,a=e.attrs,u=[];let p=null,y=null;for(let E=e.directiveStart;E<i;E++){const D=o[E],k=D.inputs,L=null===a||Gf(e)?null:av(k,a);u.push(L),p=w0(k,E,p),y=w0(D.outputs,E,y)}null!==p&&(p.hasOwnProperty("class")&&(e.flags|=16),p.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=u,e.inputs=p,e.outputs=y}(n,t)}u&&function(n,e,t){if(e){const i=n.localNames=[];for(let o=0;o<e.length;o+=2){const a=t[e[o+1]];if(null==a)throw new Zi("301",`Export of name '${e[o+1]}' not found!`);i.push(e[o],a)}}}(t,i,u)}return t.mergedAttrs=Yl(t.mergedAttrs,t.attrs),o}function rv(n,e,t,i,o,a){const u=a.hostBindings;if(u){let p=n.hostBindingOpCodes;null===p&&(p=n.hostBindingOpCodes=[]);const y=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(p)!=y&&p.push(y),p.push(i,o,u)}}function A0(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function M0(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function eC(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;On(e)&&(t[""]=n)}}function Xh(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function um(n,e,t,i,o){n.data[i]=o;const a=o.factory||(o.factory=vo(o.type)),u=new bo(a,On(o),null);n.blueprint[i]=u,t[i]=u,rv(n,e,0,i,au(n,t,o.hostVars,Ht),o)}function tC(n,e,t){const i=Te(e,n),o=tv(t),a=n[10],u=fd(n,Gh(n,o,null,t.onPush?64:16,i,e,a,a.createRenderer(i,t),null,null));n[e.index]=u}function fn(n,e,t,i,o,a){const u=Te(n,e);!function(n,e,t,i,o,a,u){if(null==a)S(n)?n.removeAttribute(e,o,t):e.removeAttribute(o);else{const p=null==u?Je(a):u(a,i||"",o);S(n)?n.setAttribute(e,o,p,t):t?e.setAttributeNS(t,o,p):e.setAttribute(o,p)}}(e[11],u,a,n.value,t,i,o)}function nC(n,e,t,i,o,a){const u=a[e];if(null!==u){const p=i.setInput;for(let y=0;y<u.length;){const E=u[y++],D=u[y++],k=u[y++];null!==p?i.setInput(t,k,E,D):t[D]=k}}}function av(n,e){let t=null,i=0;for(;i<e.length;){const o=e[i];if(0!==o)if(5!==o){if("number"==typeof o)break;n.hasOwnProperty(o)&&(null===t&&(t=[]),t.push(o,n[o],e[i+1])),i+=2}else i+=2;else i+=4}return t}function Xr(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function cv(n,e){const t=$e(e,n);if(De(t)){const i=t[1];80&t[2]?el(i,t,i.template,t[8]):t[5]>0&&dm(t)}}function dm(n){for(let i=Of(n);null!==i;i=Nf(i))for(let o=10;o<i.length;o++){const a=i[o];if(1024&a[2]){const u=a[1];el(u,a,u.template,a[8])}else a[5]>0&&dm(a)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const o=$e(t[i],n);De(o)&&o[5]>0&&dm(o)}}function rC(n,e){const t=$e(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Oi(i,t,t[8])}function fd(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Qh(n){for(;n;){n[2]|=64;const e=Ph(n);if(Mc(n)&&!e)return n;n=e}return null}function md(n,e,t){const i=e[10];i.begin&&i.begin();try{el(n,e,n.template,t)}catch(o){throw hv(e,o),o}finally{i.end&&i.end()}}function gd(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=hy(t),o=i[1];b0(o,i,o.template,t)}}(n[8])}function js(n,e,t){gn(0),e(n,t)}const hm=(()=>Promise.resolve(null))();function uv(n){return n[7]||(n[7]=[])}function ha(n){return n.cleanup||(n.cleanup=[])}function dv(n,e,t){return(null===n||On(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function hv(n,e){const t=n[9],i=t?t.get(Ls,null):null;i&&i.handleError(e)}function pm(n,e,t,i,o){for(let a=0;a<t.length;){const u=t[a++],p=t[a++],y=e[u],E=n.data[u];null!==E.setInput?E.setInput(y,o,i,p):y[p]=o}}function Vs(n,e,t){const i=he(e,n);!function(n,e,t){S(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function Zh(n,e,t){let i=t?n.styles:null,o=t?n.classes:null,a=0;if(null!==e)for(let u=0;u<e.length;u++){const p=e[u];"number"==typeof p?a=p:1==a?o=Rs(o,p):2==a&&(i=Rs(i,p+": "+e[++u]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=o:n.classesWithoutHost=o}const cu=new pt("INJECTOR",-1);class mv{get(e,t=Xu){if(t===Xu){const i=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw i.name="NullInjectorError",i}return t}}const Qr=new pt("Set Injector scope."),_r={},vs={};let pa;function gv(){return void 0===pa&&(pa=new mv),pa}function Jh(n,e=null,t=null,i){return new mm(n,t,e||gv(),i)}class mm{constructor(e,t,i,o=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const a=[];t&&Bo(t,p=>this.processProvider(p,e,t)),Bo([e],p=>this.processInjectorType(p,[],a)),this.records.set(cu,Wo(void 0,this));const u=this.records.get(Qr);this.scope=null!=u?u.value:null,this.source=o||("object"==typeof e?null:Ct(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Xu,i=Le.Default){this.assertNotDestroyed();const o=Wc(this),a=mi(void 0);try{if(!(i&Le.SkipSelf)){let p=this.records.get(e);if(void 0===p){const y=("function"==typeof(n=e)||"object"==typeof n&&n instanceof pt)&&Vi(e);p=y&&this.injectableDefInScope(y)?Wo(yd(e),_r):null,this.records.set(e,p)}if(null!=p)return this.hydrate(e,p)}return(i&Le.Self?gv():this.parent).get(e,t=i&Le.Optional&&t===Xu?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[Qu]=u[Qu]||[]).unshift(Ct(e)),o)throw u;return Zg(u,e,"R3InjectorError",this.source)}throw u}finally{mi(a),Wc(o)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,o)=>e.push(Ct(o))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=dt(e)))return!1;let o=Cc(e);const a=null==o&&e.ngModule||void 0,u=void 0===a?e:a,p=-1!==i.indexOf(u);if(void 0!==a&&(o=Cc(a)),null==o)return!1;if(null!=o.imports&&!p){let D;i.push(u);try{Bo(o.imports,k=>{this.processInjectorType(k,t,i)&&(void 0===D&&(D=[]),D.push(k))})}finally{}if(void 0!==D)for(let k=0;k<D.length;k++){const{ngModule:L,providers:U}=D[k];Bo(U,G=>this.processProvider(G,L,U||bn))}}this.injectorDefTypes.add(u);const y=vo(u)||(()=>new u);this.records.set(u,Wo(y,_r));const E=o.providers;if(null!=E&&!p){const D=e;Bo(E,k=>this.processProvider(k,D,E))}return void 0!==a&&void 0!==e.providers}processProvider(e,t,i){let o=Ja(e=dt(e))?e:dt(e&&e.provide);const a=(n=e,vd(n)?Wo(void 0,n.useValue):Wo(function(n,e,t){let i;if(Ja(n)){const o=dt(n);return vo(o)||yd(o)}if(vd(n))i=()=>dt(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Gc(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>ae(dt(n.useExisting));else{const o=dt(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return vo(o)||yd(o);i=()=>new o(...Gc(n.deps))}return i}(n),_r));var n;if(Ja(e)||!0!==e.multi)this.records.get(o);else{let u=this.records.get(o);u||(u=Wo(void 0,_r,!0),u.factory=()=>Gc(u.multi),this.records.set(o,u)),o=e,u.multi.push(e)}this.records.set(o,a)}hydrate(e,t){return t.value===_r&&(t.value=vs,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=dt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function yd(n){const e=Vi(n),t=null!==e?e.factory:vo(n);if(null!==t)return t;if(n instanceof pt)throw new Error(`Token ${Ct(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=$c(e,"?");throw new Error(`Can't resolve all parameters for ${Ct(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[Rl]||n[kl]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function Wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vd(n){return null!==n&&"object"==typeof n&&Wa in n}function Ja(n){return"function"==typeof n}const ym=function(n,e,t){return function(n,e=null,t=null,i){const o=Jh(n,e,t,i);return o._resolveInjectorDefTypes(),o}({name:t},e,n,t)};let cn=(()=>{class n{static create(t,i){return Array.isArray(t)?ym(t,i,""):ym(t.providers,t.parent,t.name||"")}}return n.THROW_IF_NOT_FOUND=Xu,n.NULL=new mv,n.\u0275prov=Qe({token:n,providedIn:"any",factory:()=>ae(cu)}),n.__NG_ELEMENT_ID__=-1,n})();function pC(n,e){uh(hy(n)[1],re())}function Mn(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let o;if(On(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");o=e.\u0275dir}if(o){if(t){i.push(o);const u=n;u.inputs=Ed(n.inputs),u.declaredInputs=Ed(n.declaredInputs),u.outputs=Ed(n.outputs);const p=o.hostBindings;p&&$0(n,p);const y=o.viewQuery,E=o.contentQueries;if(y&&mC(n,y),E&&H0(n,E),Tl(n.inputs,o.inputs),Tl(n.declaredInputs,o.declaredInputs),Tl(n.outputs,o.outputs),On(o)&&o.data.animation){const D=n.data;D.animation=(D.animation||[]).concat(o.data.animation)}}const a=o.features;if(a)for(let u=0;u<a.length;u++){const p=a[u];p&&p.ngInherit&&p(n),p===Mn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const o=n[i];o.hostVars=e+=o.hostVars,o.hostAttrs=Yl(o.hostAttrs,t=Yl(t,o.hostAttrs))}}(i)}function Ed(n){return n===St?{}:n===bn?[]:n}function mC(n,e){const t=n.viewQuery;n.viewQuery=t?(i,o)=>{e(i,o),t(i,o)}:e}function H0(n,e){const t=n.contentQueries;n.contentQueries=t?(i,o,a)=>{e(i,o,a),t(i,o,a)}:e}function $0(n,e){const t=n.hostBindings;n.hostBindings=t?(i,o)=>{e(i,o),t(i,o)}:e}let sp=null;function il(){if(!sp){const n=sn.Symbol;if(n&&n.iterator)sp=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(sp=i)}}}return sp}function wd(n){return!!xd(n)&&(Array.isArray(n)||!(n instanceof Map)&&il()in n)}function xd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Zr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Co(n,e,t,i){const o=ve();return Zr(o,Ii(),e)&&(q(),fn(Gn(),o,n,e,t,i)),Co}function nc(n,e,t,i,o,a,u,p){const y=ve(),E=q(),D=n+20,k=E.firstCreatePass?function(n,e,t,i,o,a,u,p,y){const E=e.consts,D=Jc(e,n,4,u||null,ye(E,p));cm(e,t,D,ye(E,y)),uh(e,D);const k=D.tViews=Uo(2,D,i,o,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,E);return null!==e.queries&&(e.queries.template(e,D),k.queries=e.queries.embeddedTView(D)),D}(D,E,y,e,t,i,o,a,u):E.data[D];tt(k,!1);const L=y[11].createComment("");Fh(E,y,L,k),Kr(L,y),fd(y,y[D]=Xr(L,y,L,k)),yo(k)&&qh(E,y,k),null!=u&&tl(y,k,p)}function s(n,e=Le.Default){const t=ve();return null===t?ae(n,e):$g(re(),t,dt(n),e)}function c(){throw new Error("invalid")}function l(n,e,t){const i=ve();return Zr(i,Ii(),e)&&xo(q(),Gn(),i,n,e,i[11],t,!1),l}function d(n,e,t,i,o){const u=o?"class":"style";pm(n,t,e.inputs[u],u,i)}function f(n,e,t,i){const o=ve(),a=q(),u=20+n,p=o[11],y=o[u]=ou(p,e,Ue.lFrame.currentNamespace),E=a.firstCreatePass?function(n,e,t,i,o,a,u){const p=e.consts,E=Jc(e,n,2,o,ye(p,a));return cm(e,t,E,ye(p,u)),null!==E.attrs&&Zh(E,E.attrs,!1),null!==E.mergedAttrs&&Zh(E,E.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,E),E}(u,a,o,0,e,t,i):a.data[u];tt(E,!0);const D=E.mergedAttrs;null!==D&&Gr(p,y,D);const k=E.classes;null!==k&&Uf(p,y,k);const L=E.styles;null!==L&&jh(p,y,L),64!=(64&E.flags)&&Fh(a,o,y,E),0===Ue.lFrame.elementDepthCount&&Kr(y,o),Ue.lFrame.elementDepthCount++,yo(E)&&(qh(a,o,E),function(n,e,t){if(aa(e)){const o=e.directiveEnd;for(let a=e.directiveStart;a<o;a++){const u=n.data[a];u.contentQueries&&u.contentQueries(1,t[a],a)}}}(a,E,o)),null!==i&&tl(o,E)}function g(){let n=re();mt()?It():(n=n.parent,tt(n,!1));const e=n;Ue.lFrame.elementDepthCount--;const t=q();t.firstCreatePass&&(uh(t,n),aa(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&d(t,e,ve(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&d(t,e,ve(),e.stylesWithoutHost,!1)}function v(n,e,t,i){f(n,e,t,i),g()}function F(n){return!!n&&"function"==typeof n.then}const B=function(n){return!!n&&"function"==typeof n.subscribe};function z(n,e,t,i){const o=ve(),a=q(),u=re();return ce(a,o,o[11],u,n,e,!!t,i),z}function j(n,e){const t=re(),i=ve(),o=q();return ce(o,i,dv(gr(o.data),t,i),t,n,e,!1),j}function ce(n,e,t,i,o,a,u,p){const y=yo(i),D=n.firstCreatePass&&ha(n),k=e[8],L=uv(e);let U=!0;if(3&i.type||p){const te=Te(i,e),_e=p?p(te):te,me=L.length,We=p?Ke=>p(H(Ke[i.index])):i.index;if(S(t)){let Ke=null;if(!p&&y&&(Ke=function(n,e,t,i){const o=n.cleanup;if(null!=o)for(let a=0;a<o.length-1;a+=2){const u=o[a];if(u===t&&o[a+1]===i){const p=e[7],y=o[a+2];return p.length>y?p[y]:null}"string"==typeof u&&(a+=2)}return null}(n,e,o,i.index)),null!==Ke)(Ke.__ngLastListenerFn__||Ke).__ngNextListenerFn__=a,Ke.__ngLastListenerFn__=a,U=!1;else{a=be(i,e,k,a,!1);const Lt=t.listen(_e,o,a);L.push(a,Lt),D&&D.push(o,We,me,me+1)}}else a=be(i,e,k,a,!0),_e.addEventListener(o,a,u),L.push(a),D&&D.push(o,We,me,u)}else a=be(i,e,k,a,!1);const G=i.outputs;let ie;if(U&&null!==G&&(ie=G[o])){const te=ie.length;if(te)for(let _e=0;_e<te;_e+=2){const zn=e[ie[_e]][ie[_e+1]].subscribe(a),Yn=L.length;L.push(a,zn),D&&D.push(o,i.index,Yn,-(Yn+1))}}}function J(n,e,t,i){try{return!1!==t(i)}catch(o){return hv(n,o),!1}}function be(n,e,t,i,o){return function a(u){if(u===Function)return i;const p=2&n.flags?$e(n.index,e):e;0==(32&e[2])&&Qh(p);let y=J(e,0,i,u),E=a.__ngNextListenerFn__;for(;E;)y=J(e,0,E,u)&&y,E=E.__ngNextListenerFn__;return o&&!1===y&&(u.preventDefault(),u.returnValue=!1),y}}function pe(n=1){return function(n){return(Ue.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Ue.lFrame.contextLView))[8]}(n)}function Ee(n,e){let t=null;const i=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let o=0;o<e.length;o++){const a=e[o];if("*"!==a){if(null===i?ky(n,a,!0):Ny(i,a))return o}else t=o}return t}function it(n){const e=ve()[16][6];if(!e.projection){const i=e.projection=$c(n?n.length:1,null),o=i.slice();let a=e.child;for(;null!==a;){const u=n?Ee(a,n):0;null!==u&&(o[u]?o[u].projectionNext=a:i[u]=a,o[u]=a),a=a.next}}}function Ce(n,e=0,t){const i=ve(),o=q(),a=Jc(o,20+n,16,null,t||null);null===a.projection&&(a.projection=e),It(),64!=(64&a.flags)&&function(n,e,t){Ty(e[11],0,e,t,Lf(n,t,e),jf(t.parent||e[6],t,e))}(o,i,a)}function br(n,e,t,i,o){const a=n[t+1],u=null===e;let p=i?ys(a):zo(a),y=!1;for(;0!==p&&(!1===y||u);){const D=n[p+1];zi(n[p],e)&&(y=!0,n[p+1]=i?ld(D):Kf(D)),p=i?ys(D):zo(D)}y&&(n[t+1]=i?Kf(a):ld(a))}function zi(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Uc(n,e)>=0}function Gi(n,e){return function(n,e,t,i){const o=ve(),a=q(),u=function(n){const e=Ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);a.firstUpdatePass&&function(n,e,t,i){const o=n.data;if(null===o[t+1]){const a=o[Wr()],u=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(a,i)&&null===e&&!u&&(e=!1),e=function(n,e,t,i){const o=gr(n);let a=i?e.residualClasses:e.residualStyles;if(null===o)0===(i?e.classBindings:e.styleBindings)&&(t=Ad(t=Om(null,n,e,t,i),e.attrs,i),a=null);else{const u=e.directiveStylingLast;if(-1===u||n[u]!==o)if(t=Om(o,n,e,t,i),null===a){let y=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==zo(i))return n[ys(i)]}(n,e,i);void 0!==y&&Array.isArray(y)&&(y=Om(null,n,e,y[1],i),y=Ad(y,e.attrs,i),function(n,e,t,i){n[ys(t?e.classBindings:e.styleBindings)]=i}(n,e,i,y))}else a=function(n,e,t){let i;const o=e.directiveEnd;for(let a=1+e.directiveStylingLast;a<o;a++)i=Ad(i,n[a].hostAttrs,t);return Ad(i,e.attrs,t)}(n,e,i)}return void 0!==a&&(i?e.residualClasses=a:e.residualStyles=a),t}(o,a,e,i),function(n,e,t,i,o,a){let u=a?e.classBindings:e.styleBindings,p=ys(u),y=zo(u);n[i]=t;let D,E=!1;if(Array.isArray(t)){const k=t;D=k[1],(null===D||Uc(k,D)>0)&&(E=!0)}else D=t;if(o)if(0!==y){const L=ys(n[p+1]);n[i+1]=$h(L,p),0!==L&&(n[L+1]=By(n[L+1],i)),n[p+1]=function(n,e){return 131071&n|e<<17}(n[p+1],i)}else n[i+1]=$h(p,0),0!==p&&(n[p+1]=By(n[p+1],i)),p=i;else n[i+1]=$h(y,0),0===p?p=i:n[y+1]=By(n[y+1],i),y=i;E&&(n[i+1]=Kf(n[i+1])),br(n,D,i,!0),br(n,D,i,!1),function(n,e,t,i,o){const a=o?n.residualClasses:n.residualStyles;null!=a&&"string"==typeof e&&Uc(a,e)>=0&&(t[i+1]=ld(t[i+1]))}(e,D,n,i,a),u=$h(p,y),a?e.classBindings=u:e.styleBindings=u}(o,a,e,t,u,i)}}(a,n,u,i),e!==Ht&&Zr(o,u,e)&&function(n,e,t,i,o,a,u,p){if(!(3&e.type))return;const y=n.data,E=y[p+1];Td(function(n){return 1==(1&n)}(E)?fp(y,e,t,o,zo(E),u):void 0)||(Td(a)||function(n){return 2==(2&n)}(E)&&(a=fp(y,null,t,o,p,u)),function(n,e,t,i,o){const a=S(n);if(e)o?a?n.addClass(t,i):t.classList.add(i):a?n.removeClass(t,i):t.classList.remove(i);else{let u=-1===i.indexOf("-")?void 0:Ho.DashCase;if(null==o)a?n.removeStyle(t,i,u):t.style.removeProperty(i);else{const p="string"==typeof o&&o.endsWith("!important");p&&(o=o.slice(0,-10),u|=Ho.Important),a?n.setStyle(t,i,o,u):t.style.setProperty(i,o,p?"important":"")}}}(i,u,he(Wr(),t),o,a))}(a,a.data[Wr()],o,o[11],n,o[u+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ct(sr(n)))),n}(e,t),i,u)}(n,e,null,!0),Gi}function Om(n,e,t,i,o){let a=null;const u=t.directiveEnd;let p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<u&&(a=e[p],i=Ad(i,a.hostAttrs,o),a!==n);)p++;return null!==n&&(t.directiveStylingLast=p),i}function Ad(n,e,t){const i=t?1:2;let o=-1;if(null!==e)for(let a=0;a<e.length;a++){const u=e[a];"number"==typeof u?o=u:o===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),jo(n,u,!!t||e[++a]))}return void 0===n?null:n}function fp(n,e,t,i,o,a){const u=null===e;let p;for(;o>0;){const y=n[o],E=Array.isArray(y),D=E?y[1]:y,k=null===D;let L=t[o+1];L===Ht&&(L=k?bn:void 0);let U=k?Kg(L,i):D===i?L:void 0;if(E&&!Td(U)&&(U=Kg(y,i)),Td(U)&&(p=U,u))return p;const G=n[o+1];o=u?ys(G):zo(G)}if(null!==e){let y=a?e.residualClasses:e.residualStyles;null!=y&&(p=Kg(y,i))}return p}function Td(n){return void 0!==n}function xr(n,e=""){const t=ve(),i=q(),o=n+20,a=i.firstCreatePass?Jc(i,o,1,e,null):i.data[o],u=t[o]=function(n,e){return S(n)?n.createText(e):n.createTextNode(e)}(t[11],e);Fh(i,t,u,a),tt(a,!1)}function mp(n){return dl("",n,""),mp}function dl(n,e,t){const i=ve(),o=function(n,e,t,i){return Zr(n,Ii(),t)?e+Je(t)+i:Ht}(i,n,e,t);return o!==Ht&&Vs(i,Wr(),o),dl}function _a(n,e,t){const i=ve();if(Zr(i,Ii(),e)){const a=q(),u=Gn();xo(a,u,i,n,e,dv(gr(a.data),u,i),t,!0)}return _a}const fl=void 0;var uE=["en",[["a","p"],["AM","PM"],fl],[["AM","PM"],fl,fl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fl,"{1} 'at' {0}",fl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let $s={};function YD(n){return n in $s||($s[n]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[n]),$s[n]}var nt=(()=>((nt=nt||{})[nt.LocaleId=0]="LocaleId",nt[nt.DayPeriodsFormat=1]="DayPeriodsFormat",nt[nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",nt[nt.DaysFormat=3]="DaysFormat",nt[nt.DaysStandalone=4]="DaysStandalone",nt[nt.MonthsFormat=5]="MonthsFormat",nt[nt.MonthsStandalone=6]="MonthsStandalone",nt[nt.Eras=7]="Eras",nt[nt.FirstDayOfWeek=8]="FirstDayOfWeek",nt[nt.WeekendRange=9]="WeekendRange",nt[nt.DateFormat=10]="DateFormat",nt[nt.TimeFormat=11]="TimeFormat",nt[nt.DateTimeFormat=12]="DateTimeFormat",nt[nt.NumberSymbols=13]="NumberSymbols",nt[nt.NumberFormats=14]="NumberFormats",nt[nt.CurrencyCode=15]="CurrencyCode",nt[nt.CurrencySymbol=16]="CurrencySymbol",nt[nt.CurrencyName=17]="CurrencyName",nt[nt.Currencies=18]="Currencies",nt[nt.Directionality=19]="Directionality",nt[nt.PluralCase=20]="PluralCase",nt[nt.ExtraData=21]="ExtraData",nt))();const dE="en-US";let XD=dE;class EA{}const xA="ngComponent";class BO{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${Ct(n)}. Did you add it to @NgModule.entryComponents?`);return e[xA]=n,e}(e)}}let yu=(()=>{class n{}return n.NULL=new BO,n})();function gE(...n){}function Wm(n,e){return new Hn(Te(n,e))}const HO=function(){return Wm(re(),ve())};let Hn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=HO,n})();function CA(n){return n instanceof Hn?n.nativeElement:n}class kd{}let HC=(()=>{class n{}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:()=>null}),n})();class vp{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const SA=new vp("13.0.2"),Gm={};function vE(n,e,t,i,o=!1){for(;null!==t;){const a=e[t.index];if(null!==a&&i.push(H(a)),si(a))for(let p=10;p<a.length;p++){const y=a[p],E=y[1].firstChild;null!==E&&vE(y[1],y,E,i)}const u=t.type;if(8&u)vE(n,e,t.child,i);else if(32&u){const p=iu(t,e);let y;for(;y=p();)i.push(y)}else if(16&u){const p=Hf(e,t);if(Array.isArray(p))i.push(...p);else{const y=Ph(e[16]);vE(y[1],y,p,i,!0)}}t=o?t.projectionNext:t.next}return i}class e_{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return vE(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(si(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(xy(e,i),Hc(t,i))}this._attachedToViewContainer=!1}Qa(this._lView[1],this._lView)}onDestroy(e){Kh(this._lView[1],this._lView,null,e)}markForCheck(){Qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){md(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Ir(!0);try{md(n,e,t)}finally{Ir(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,su(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class GO extends e_{constructor(e){super(e),this._view=e}detectChanges(){gd(this._view)}checkNoChanges(){!function(n){Ir(!0);try{gd(n)}finally{Ir(!1)}}(this._view)}get context(){return null}}class DA extends yu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=bi(e);return new $C(t,this.ngModule)}}function AA(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const KO=new pt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xa});class $C extends EA{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(c0).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return AA(this.componentDef.inputs)}get outputs(){return AA(this.componentDef.outputs)}create(e,t,i,o){const a=(o=o||this.ngModule)?function(n,e){return{get:(t,i,o)=>{const a=n.get(t,Gm,o);return a!==Gm||i===Gm?a:e.get(t,i,o)}}}(e,o.injector):e,u=a.get(kd,P),p=a.get(HC,null),y=u.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",D=i?function(n,e,t){if(S(n))return n.selectRootElement(e,t===nn.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(y,i,this.componentDef.encapsulation):ou(u.createRenderer(null,this.componentDef),E,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(E)),k=this.componentDef.onPush?576:528,L=function(n,e){return{components:[],scheduler:n||Xa,clean:hm,playerHandler:e||null,flags:0}}(),U=Uo(0,null,null,1,0,null,null,null,null,null),G=Gh(null,U,L,k,null,null,u,y,p,a);let ie,te;ci(G);try{const _e=function(n,e,t,i,o,a){const u=t[1];t[20]=n;const y=Jc(u,20,2,"#host",null),E=y.mergedAttrs=e.hostAttrs;null!==E&&(Zh(y,E,!0),null!==n&&(Gr(o,n,E),null!==y.classes&&Uf(o,n,y.classes),null!==y.styles&&jh(o,n,y.styles)));const D=i.createRenderer(n,e),k=Gh(t,tv(e),null,e.onPush?64:16,t[20],y,i,D,a||null,null);return u.firstCreatePass&&(Fo(Nc(y,t),u,e.type),M0(u,y),Xh(y,t.length,1)),fd(t,k),t[20]=k}(D,this.componentDef,G,u,y);if(D)if(i)Gr(y,D,["ng-version",SA.full]);else{const{attrs:me,classes:We}=function(n){const e=[],t=[];let i=1,o=2;for(;i<n.length;){let a=n[i];if("string"==typeof a)2===o?""!==a&&e.push(a,n[++i]):8===o&&t.push(a);else{if(!$o(o))break;o=a}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);me&&Gr(y,D,me),We&&We.length>0&&Uf(y,D,We.join(" "))}if(te=ot(U,20),void 0!==t){const me=te.projection=[];for(let We=0;We<this.ngContentSelectors.length;We++){const Ke=t[We];me.push(null!=Ke?Array.from(Ke):null)}}ie=function(n,e,t,i,o){const a=t[1],u=function(n,e,t){const i=re();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),um(n,i,e,au(n,e,1,null),t));const o=Ha(e,n,i.directiveStart,i);Kr(o,e);const a=Te(i,e);return a&&Kr(a,e),o}(a,t,e);if(i.components.push(u),n[8]=u,o&&o.forEach(y=>y(u,e)),e.contentQueries){const y=re();e.contentQueries(1,u,y.directiveStart)}const p=re();return!a.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(lo(p.index),rv(t[1],p,0,p.directiveStart,p.directiveEnd,e),A0(e,u)),u}(_e,this.componentDef,G,L,[pC]),Oi(U,G,null)}finally{Ba()}return new QO(this.componentType,ie,Wm(te,G),G,te)}}class QO extends class{}{constructor(e,t,i,o,a){super(),this.location=i,this._rootLView=o,this._tNode=a,this.instance=t,this.hostView=this.changeDetectorRef=new GO(o),this.componentType=e}get injector(){return new $a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ml{}class TA{}const qm=new Map;class RA extends ml{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new DA(this);const i=In(e);this._bootstrapComponents=Bs(i.bootstrap),this._r3Injector=Jh(e,t,[{provide:ml,useValue:this},{provide:yu,useValue:this.componentFactoryResolver}],Ct(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=cn.THROW_IF_NOT_FOUND,i=Le.Default){return e===cn||e===ml||e===cu?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class UC extends TA{constructor(e){super(),this.moduleType=e,null!==In(e)&&function(n){const e=new Set;!function t(i){const o=In(i,!0),a=o.id;null!==a&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Ct(e)} vs ${Ct(e.name)}`)}(a,qm.get(a),i),qm.set(a,i));const u=Bs(o.imports);for(const p of u)e.has(p)||(e.add(p),t(p))}(n)}(e)}create(e){return new RA(this.moduleType,e)}}function WC(n){return e=>{setTimeout(n,void 0,e)}}const ii=class extends yt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var y,E,D;let o=e,a=t||(()=>null),u=i;if(e&&"object"==typeof e){const k=e;o=null==(y=k.next)?void 0:y.bind(k),a=null==(E=k.error)?void 0:E.bind(k),u=null==(D=k.complete)?void 0:D.bind(k)}this.__isAsync&&(a=WC(a),o&&(o=WC(o)),u&&(u=WC(u)));const p=super.subscribe({next:o,error:a,complete:u});return e instanceof vn&&e.add(p),p}};function vN(){return this._results[il()]()}class _E{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=il(),i=_E.prototype;i[t]||(i[t]=vN)}get changes(){return this._changes||(this._changes=new ii)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const o=qr(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let o=n[i],a=e[i];if(t&&(o=t(o),a=t(a)),a!==o)return!1}return!0}(i._results,o,t))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const bN=function(){return bE(re(),ve())};let zs=(()=>{class n{}return n.__NG_ELEMENT_ID__=bN,n})();const EN=zs,wN=class extends EN{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Gh(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(t)),Oi(t,i,e),new e_(i)}};function bE(n,e){return 4&n.type?new wN(e,n,Wm(n,e)):null}const SN=function(){return BA(re(),ve())};let Yo=(()=>{class n{}return n.__NG_ELEMENT_ID__=SN,n})();const AN=Yo,FA=class extends AN{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Wm(this._hostTNode,this._hostLView)}get injector(){return new $a(this._hostTNode,this._hostLView)}get parentInjector(){const e=Fc(this._hostTNode,this._hostLView);if(rr(e)){const t=Gu(e,this._hostLView),i=Wu(e);return new $a(t[1].data[i+8],t)}return new $a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=LA(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const o=e.createEmbeddedView(t||{});return this.insert(o,i),o}createComponent(e,t,i,o,a){const u=e&&!("function"==typeof e);let p;if(u)p=t;else{const k=t||{};p=k.index,i=k.injector,o=k.projectableNodes,a=k.ngModuleRef}const y=u?e:new $C(bi(e)),E=i||this.parentInjector;if(!a&&null==y.ngModule&&E){const k=E.get(ml,null);k&&(a=k)}const D=y.create(E,o,void 0,a);return this.insert(D.hostView,p),D}insert(e,t){const i=e._lView,o=i[1];if(si(i[3])){const D=this.indexOf(e);if(-1!==D)this.detach(D);else{const k=i[3],L=new FA(k,k[6],k[3]);L.detach(L.indexOf(e))}}const a=this._adjustIndex(t),u=this._lContainer;!function(n,e,t,i){const o=10+i,a=t.length;i>0&&(t[o-1][4]=e),i<a-10?(e[4]=t[o],gf(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const u=e[17];null!==u&&t!==u&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(u,e);const p=e[19];null!==p&&p.insertView(n),e[2]|=128}(o,i,u,a);const p=Lh(a,u),y=i[11],E=ad(y,u[7]);return null!==E&&function(n,e,t,i,o,a){i[0]=o,i[6]=e,su(n,i,t,1,o,a)}(o,u[6],y,i,E,p),e.attachToViewContainerRef(),gf(GC(u),a,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=LA(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=xy(this._lContainer,t);i&&(Hc(GC(this._lContainer),t),Qa(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=xy(this._lContainer,t);return i&&null!=Hc(GC(this._lContainer),t)?new e_(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function LA(n){return n[8]}function GC(n){return n[8]||(n[8]=[])}function BA(n,e){let t;const i=e[n.index];if(si(i))t=i;else{let o;if(8&n.type)o=H(i);else{const a=e[11];o=a.createComment("");const u=Te(n,e);Yc(a,ad(a,u),o,function(n,e){return S(n)?n.nextSibling(e):e.nextSibling}(a,u),!1)}e[n.index]=t=Xr(i,e,o,n),fd(e,t)}return new FA(t,n,e)}class qC{constructor(e){this.queryList=e,this.matches=null}clone(){return new qC(this.queryList)}setDirty(){this.queryList.setDirty()}}class KC{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,o=[];for(let a=0;a<i;a++){const u=t.getByIndex(a);o.push(this.queries[u.indexInDeclarationView].clone())}return new KC(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==zA(e,t).matches&&this.queries[t].setDirty()}}class jA{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class YC{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const o=null!==t?t.length:0,a=this.getByIndex(i).embeddedTView(e,o);a&&(a.indexInDeclarationView=i,null!==t?t.push(a):t=[a])}return null!==t?new YC(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class XC{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new XC(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const a=i[o];this.matchTNodeWithReadOption(e,t,RN(t,a)),this.matchTNodeWithReadOption(e,t,fh(t,e,a,!1,!1))}else i===zs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,fh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===Hn||o===Yo||o===zs&&4&t.type)this.addMatch(t.index,-2);else{const a=fh(t,e,o,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function RN(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function PN(n,e,t,i){return-1===t?function(n,e){return 11&n.type?Wm(n,e):4&n.type?bE(n,e):null}(e,n):-2===t?function(n,e,t){return t===Hn?Wm(e,n):t===zs?bE(e,n):t===Yo?BA(e,n):void 0}(n,e,i):Ha(n,n[1],t,e)}function VA(n,e,t,i){const o=e[19].queries[i];if(null===o.matches){const a=n.data,u=t.matches,p=[];for(let y=0;y<u.length;y+=2){const E=u[y];p.push(E<0?null:PN(e,a[E],u[y+1],t.metadata.read))}o.matches=p}return o.matches}function QC(n,e,t,i){const o=n.queries.getByIndex(t),a=o.matches;if(null!==a){const u=VA(n,e,o,t);for(let p=0;p<a.length;p+=2){const y=a[p];if(y>0)i.push(u[p/2]);else{const E=a[p+1],D=e[-y];for(let k=10;k<D.length;k++){const L=D[k];L[17]===L[3]&&QC(L[1],L,E,i)}if(null!==D[9]){const k=D[9];for(let L=0;L<k.length;L++){const U=k[L];QC(U[1],U,E,i)}}}}}return i}function Pd(n){const e=ve(),t=q(),i=Mt();gn(i+1);const o=zA(t,i);if(n.dirty&&Ye(e)===(2==(2&o.metadata.flags))){if(null===o.matches)n.reset([]);else{const a=o.crossesNgTemplate?QC(t,e,i,[]):VA(t,e,o,i);n.reset(a,CA),n.notifyOnChanges()}return!0}return!1}function Km(n,e,t){const i=q();i.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new YC),n.queries.track(new XC(e,t))}(i,new jA(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function(n,e,t){const i=new _E(4==(4&t));Kh(n,e,i,i.destroy),null===e[19]&&(e[19]=new KC),e[19].queries.push(new qC(i))}(i,ve(),e)}function Id(){return n=ve(),e=Mt(),n[19].queries[e].queryList;var n,e}function zA(n,e){return n.queries.getByIndex(e)}const r_=new pt("Application Initializer");let Xm=(()=>{class n{constructor(t){this.appInits=t,this.resolve=gE,this.reject=gE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const a=this.appInits[o]();if(F(a))t.push(a);else if(B(a)){const u=new Promise((p,y)=>{a.subscribe({complete:p,error:y})});t.push(u)}}Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(ae(r_,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const o_=new pt("AppId"),lF={provide:o_,useFactory:function(){return`${rS()}${rS()}${rS()}`},deps:[]};function rS(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aT=new pt("Platform Initializer"),s_=new pt("Platform ID"),cT=new pt("appBootstrapListener");let xE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const vu=new pt("LocaleId"),lT=new pt("DefaultCurrencyCode");class dF{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const oS=function(n){return new UC(n)},hF=oS,pF=function(n){return Promise.resolve(oS(n))},dT=function(n){const e=oS(n),i=Bs(In(n).declarations).reduce((o,a)=>{const u=bi(a);return u&&o.push(new $C(u)),o},[]);return new dF(e,i)},fF=dT,mF=function(n){return Promise.resolve(dT(n))};let CE=(()=>{class n{constructor(){this.compileModuleSync=hF,this.compileModuleAsync=pF,this.compileModuleAndAllComponentsSync=fF,this.compileModuleAndAllComponentsAsync=mF}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const vF=(()=>Promise.resolve(0))();function sS(n){"undefined"==typeof Zone?vF.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ut{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ii(!1),this.onMicrotaskEmpty=new ii(!1),this.onStable=new ii(!1),this.onError=new ii(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&t,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function(){let n=sn.requestAnimationFrame,e=sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(sn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,cS(n),n.isCheckStableRunning=!0,aS(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),cS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,o,a,u,p)=>{try{return hT(n),t.invokeTask(o,a,u,p)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||n.shouldCoalesceRunChangeDetection)&&e(),pT(n)}},onInvoke:(t,i,o,a,u,p,y)=>{try{return hT(n),t.invoke(o,a,u,p,y)}finally{n.shouldCoalesceRunChangeDetection&&e(),pT(n)}},onHasTask:(t,i,o,a)=>{t.hasTask(o,a),i===o&&("microTask"==a.change?(n._hasPendingMicrotasks=a.microTask,cS(n),aS(n)):"macroTask"==a.change&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(t,i,o,a)=>(t.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,o){const a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+o,e,bF,gE,gE);try{return a.runTask(u,t,i)}finally{a.cancelTask(u)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const bF={};function aS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function hT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pT(n){n._nesting--,aS(n)}class xF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ii,this.onMicrotaskEmpty=new ii,this.onStable=new ii,this.onError=new ii}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,o){return e.apply(t,i)}}let lS=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),sS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sS(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,o){let a=-1;i&&i>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==a),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:a,updateCb:o})}whenStable(t,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,o){return[]}}return n.\u0275fac=function(t){return new(t||n)(ae(Ut))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),fT=(()=>{class n{constructor(){this._applications=new Map,uS.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return uS.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class CF{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let uS=new CF,mT=!0,gT=!1;function dS(){return gT=!0,mT}let cc;const yT=new pt("AllowMultipleToken");class hS{constructor(e,t){this.name=e,this.token=t}}function vT(n,e,t=[]){const i=`Platform: ${e}`,o=new pt(i);return(a=[])=>{let u=_T();if(!u||u.injector.get(yT,!1))if(n)n(t.concat(a).concat({provide:o,useValue:!0}));else{const p=t.concat(a).concat({provide:o,useValue:!0},{provide:Qr,useValue:"platform"});!function(n){if(cc&&!cc.destroyed&&!cc.injector.get(yT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");cc=n.get(bT);const e=n.get(aT,null);e&&e.forEach(t=>t())}(cn.create({providers:p,name:i}))}return function(n){const e=_T();if(!e)throw new Error("No platform exists!");if(!e.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function _T(){return cc&&!cc.destroyed?cc:null}let bT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const p=function(n,e){let t;return t="noop"===n?new xF:("zone.js"===n?void 0:n)||new Ut({enableLongStackTrace:dS(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),y=[{provide:Ut,useValue:p}];return p.run(()=>{const E=cn.create({providers:y,parent:this.injector,name:t.moduleType.name}),D=t.create(E),k=D.injector.get(Ls,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const L=p.onError.subscribe({next:U=>{k.handleError(U)}});D.onDestroy(()=>{pS(this._modules,D),L.unsubscribe()})}),function(n,e,t){try{const i=t();return F(i)?i.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(k,p,()=>{const L=D.injector.get(Xm);return L.runInitializers(),L.donePromise.then(()=>(function(n){ki(n,"Expected localeId to be defined"),"string"==typeof n&&(XD=n.toLowerCase().replace(/_/g,"-"))}(D.injector.get(vu,dE)||dE),this._moduleDoBootstrap(D),D))})})}bootstrapModule(t,i=[]){const o=ET({},i);return function(n,e,t){const i=new UC(t);return Promise.resolve(i)}(0,0,t).then(a=>this.bootstrapModuleFactory(a,o))}_moduleDoBootstrap(t){const i=t.injector.get(_p);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Ct(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(ae(cn))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function ET(n,e){return Array.isArray(e)?e.reduce(ET,n):At(At({},n),e)}let _p=(()=>{class n{constructor(t,i,o,a,u){this._zone=t,this._injector=i,this._exceptionHandler=o,this._componentFactoryResolver=a,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new Be(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new Be(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),sS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),k.unsubscribe()}});this.isStable=Po(p,y.pipe(vi()))}bootstrap(t,i){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let o;o=t instanceof EA?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ml),p=o.create(cn.NULL,[],i||o.selector,a),y=p.location.nativeElement,E=p.injector.get(lS,null),D=E&&p.injector.get(fT);return E&&D&&D.registerApplication(y,E),p.onDestroy(()=>{this.detachView(p.hostView),pS(this.components,p),D&&D.unregisterApplication(y)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;pS(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cT,[]).concat(this._bootstrapListeners).forEach(o=>o(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(ae(Ut),ae(cn),ae(Ls),ae(yu),ae(Xm))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function pS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const jF=function(n){return function(n,e,t){if(Na(n)&&!t){const i=$e(n.index,e);return new e_(i,i)}return 47&n.type?new e_(e[16],e):null}(re(),ve(),16==(16&n))};let bp=(()=>{class n{}return n.__NG_ELEMENT_ID__=jF,n})();class TT{constructor(){}supports(e){return wd(e)}create(e){return new ZF(e)}}const QF=(n,e)=>e;class ZF{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QF}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,o=0,a=null;for(;t||i;){const u=!i||t&&t.currentIndex<RT(i,o,a)?t:i,p=RT(u,o,a),y=u.currentIndex;if(u===i)o--,i=i._nextRemoved;else if(t=t._next,null==u.previousIndex)o++;else{a||(a=[]);const E=p-o,D=y-o;if(E!=D){for(let L=0;L<E;L++){const U=L<a.length?a[L]:a[L]=0,G=U+L;D<=G&&G<E&&(a[L]=U+1)}a[u.previousIndex]=D-E}}p!==y&&e(u,p,y)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wd(e))throw new Error(`Error trying to diff '${Ct(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,a,u,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let p=0;p<this.length;p++)a=e[p],u=this._trackByFn(p,a),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,a,u,p)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,u,p),i=!0),t=t._next}else o=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[il()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,p=>{u=this._trackByFn(o,p),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,p,u,o)),Object.is(t.item,p)||this._addIdentityChange(t,p)):(t=this._mismatch(t,p,u,o),i=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,o){let a;return null===e?a=this._itTail:(a=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,a,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,a,o)):e=this._addAfter(new JF(t,i),a,o),e}_verifyReinsertion(e,t,i,o){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==a?e=this._reinsertAfter(a,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,a=e._nextRemoved;return null===o?this._removalsHead=a:o._nextRemoved=a,null===a?this._removalsTail=o:a._prevRemoved=o,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const o=null===t?this._itHead:t._next;return e._next=o,e._prev=t,null===o?this._itTail=e:o._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new MT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class JF{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e2{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class MT{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new e2,this.map.set(t,i)),i.add(e)}get(e,t){const o=this.map.get(e);return o?o.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RT(n,e,t){const i=n.previousIndex;if(null===i)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+e+o}class kT{constructor(){}supports(e){return e instanceof Map||xd(e)}create(){return new t2}}class t2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||xd(e)))throw new Error(`Error trying to diff '${Ct(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const a=this._getOrCreateRecordForKey(o,i);t=this._insertBeforeOrAppend(t,a)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,t);const a=o._prev,u=o._next;return a&&(a._next=u),u&&(u._prev=a),o._next=null,o._prev=null,o}const i=new n2(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class n2{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PT(){return new Qm([new TT])}let Qm=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const o=i.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||PT()),deps:[[n,new da,new vr]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:PT}),n})();function IT(){return new Zm([new kT])}let Zm=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const o=i.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||IT()),deps:[[n,new da,new vr]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:IT}),n})();const o2=[new kT],a2=new Qm([new TT]),c2=new Zm(o2),l2=vT(null,"core",[{provide:s_,useValue:"unknown"},{provide:bT,deps:[cn]},{provide:fT,deps:[]},{provide:xE,deps:[]}]),f2=[{provide:_p,useClass:_p,deps:[Ut,cn,Ls,yu,Xm]},{provide:KO,deps:[Ut],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xm,useClass:Xm,deps:[[new vr,r_]]},{provide:CE,useClass:CE,deps:[]},lF,{provide:Qm,useFactory:function(){return a2},deps:[]},{provide:Zm,useFactory:function(){return c2},deps:[]},{provide:vu,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||dE},deps:[[new nu(vu),new vr,new da]]},{provide:lT,useValue:"USD"}];let g2=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(ae(_p))},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({providers:f2}),n})(),BE=null;function Fd(){return BE}const xt=new pt("DocumentToken");let Sp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:function(){return ae(yM)},providedIn:"platform"}),n})();const uB=new pt("Location Initialized");let yM=(()=>{class n extends Sp{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fd().getBaseHref(this._doc)}onPopState(t){const i=Fd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Fd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,o){vM()?this._history.pushState(t,i,o):this.location.hash=o}replaceState(t,i,o){vM()?this._history.replaceState(t,i,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({token:n,factory:function(){return new yM(ae(xt))},providedIn:"platform"}),n})();function vM(){return!!window.history.pushState}function HS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _M(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function bu(n){return n&&"?"!==n[0]?"?"+n:n}let rg=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:function(){return function(n){const e=ae(xt).location;return new bM(ae(Sp),e&&e.origin||"")}()},providedIn:"root"}),n})();const $S=new pt("appBaseHref");let bM=(()=>{class n extends rg{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HS(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+bu(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,a){const u=this.prepareExternalUrl(o+bu(a));this._platformLocation.pushState(t,i,u)}replaceState(t,i,o,a){const u=this.prepareExternalUrl(o+bu(a));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,o;null==(o=(i=this._platformLocation).historyGo)||o.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Sp),ae($S,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),pB=(()=>{class n extends rg{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=HS(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,o,a){let u=this.prepareExternalUrl(o+bu(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,o,a){let u=this.prepareExternalUrl(o+bu(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,o;null==(o=(i=this._platformLocation).historyGo)||o.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Sp),ae($S,8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),jE=(()=>{class n{constructor(t,i){this._subject=new ii,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=_M(EM(o)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+bu(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,EM(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._platformStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bu(i)),o)}replaceState(t,i="",o=null){this._platformStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bu(i)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,o;null==(o=(i=this._platformStrategy).historyGo)||o.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i,complete:o})}}return n.normalizeQueryParams=bu,n.joinWithSlash=HS,n.stripTrailingSlash=_M,n.\u0275fac=function(t){return new(t||n)(ae(rg),ae(Sp))},n.\u0275prov=Qe({token:n,factory:function(){return new jE(ae(rg),ae(Sp))},providedIn:"root"}),n})();function EM(n){return n.replace(/\/index.html$/,"")}var Cr=(()=>((Cr=Cr||{})[Cr.Zero=0]="Zero",Cr[Cr.One=1]="One",Cr[Cr.Two=2]="Two",Cr[Cr.Few=3]="Few",Cr[Cr.Many=4]="Many",Cr[Cr.Other=5]="Other",Cr))();const wB=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=YD(e);if(t)return t;const i=e.split("-")[0];if(t=YD(i),t)return t;if("en"===i)return uE;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[nt.PluralCase]};class YE{}let QB=(()=>{class n extends YE{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(wB(i||this.locale)(t)){case Cr.Zero:return"zero";case Cr.One:return"one";case Cr.Two:return"two";case Cr.Few:return"few";case Cr.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(ae(vu))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),XE=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new r3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(s(Yo),s(zs))},n.\u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class r3{constructor(){this.$implicit=null,this.ngIf=null}}function kM(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ct(e)}'.`)}let t1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({providers:[{provide:YE,useClass:QB}]}),n})();const OM="browser";let N3=(()=>{class n{}return n.\u0275prov=Qe({token:n,providedIn:"root",factory:()=>new F3(ae(xt),window)}),n})();class F3{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const a=o.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}o=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],o-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=NM(this.window.history)||NM(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function NM(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class n1 extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new n1,BE||(BE=n)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(b_=b_||document.querySelector("base"),b_?b_.getAttribute("href"):null);return null==t?null:function(n){QE=QE||document.createElement("a"),QE.setAttribute("href",n);const e=QE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){b_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[o,a]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let QE,b_=null;const FM=new pt("TRANSITION_ID"),z3=[{provide:r_,useFactory:function(n,e,t){return()=>{t.get(Xm).donePromise.then(()=>{const i=Fd(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<o.length;a++)i.remove(o[a])})}},deps:[FM,xt,cn],multi:!0}];class r1{static init(){var n;n=new r1,uS=n}addToWindow(e){sn.getAngularTestability=(i,o=!0)=>{const a=e.findTestabilityInTree(i,o);if(null==a)throw new Error("Could not find testability for element.");return a},sn.getAllAngularTestabilities=()=>e.getAllTestabilities(),sn.getAllAngularRootElements=()=>e.getAllRootElements(),sn.frameworkStabilizers||(sn.frameworkStabilizers=[]),sn.frameworkStabilizers.push(i=>{const o=sn.getAllAngularTestabilities();let a=o.length,u=!1;const p=function(y){u=u||y,a--,0==a&&i(u)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:i?Fd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let U3=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const E_=new pt("EventManagerPlugins");let JE=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}addGlobalEventListener(t,i,o){return this._findPluginFor(i).addGlobalEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const o=this._plugins;for(let a=0;a<o.length;a++){const u=o[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(ae(E_),ae(Ut))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class o1{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const o=Fd().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,i)}}let BM=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),i.add(o))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),w_=(()=>{class n extends BM{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,o){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,o.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(jM),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,o)=>{this._addStylesToHost(t,o,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jM))}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function jM(n){Fd().remove(n)}const s1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},a1=/%COMP%/g;function ew(n,e,t){for(let i=0;i<e.length;i++){let o=e[i];Array.isArray(o)?ew(n,o,t):(o=o.replace(a1,n),t.push(o))}return t}function $M(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let tw=(()=>{class n{constructor(t,i,o){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new c1(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case nn.Emulated:{let o=this.rendererByCompId.get(i.id);return o||(o=new oj(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,o)),o.applyToHost(t),o}case 1:case nn.ShadowDom:return new sj(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const o=ew(i.id,i.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(ae(JE),ae(w_),ae(o_))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class c1{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(s1[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,o){if(o){t=o+":"+t;const a=s1[o];a?e.setAttributeNS(a,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const o=s1[i];o?e.removeAttributeNS(o,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,o){o&(Ho.DashCase|Ho.Important)?e.style.setProperty(t,i,o&Ho.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ho.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$M(i)):this.eventManager.addEventListener(e,t,$M(i))}}class oj extends c1{constructor(e,t,i,o){super(e),this.component=i;const a=ew(o+"-"+i.id,i.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(a1,o+"-"+i.id),this.hostAttr="_nghost-%COMP%".replace(a1,o+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class sj extends c1{constructor(e,t,i,o){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ew(o.id,o.styles,[]);for(let u=0;u<a.length;u++){const p=document.createElement("style");p.textContent=a[u],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let aj=(()=>{class n extends o1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const WM=["alt","control","meta","shift"],fj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GM={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gj=(()=>{class n extends o1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,o){const a=n.parseEventName(i),u=n.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fd().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const a=n._normalizeKey(i.pop());let u="";if(WM.forEach(y=>{const E=i.indexOf(y);E>-1&&(i.splice(E,1),u+=y+".")}),u+=a,0!=i.length||0===a.length)return null;const p={};return p.domEventName=o,p.fullKey=u,p}static getEventFullKey(t){let i="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&GM.hasOwnProperty(e)&&(e=GM[e]))}return fj[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),WM.forEach(a=>{a!=o&&mj[a](t)&&(i+=a+".")}),i+=o,i}static eventCallback(t,i,o){return a=>{n.getEventFullKey(a)===t&&o.runGuarded(()=>i(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),og=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:function(t){let i=null;return i=t?new(t||n):ae(u1),i},providedIn:"root"}),n})(),u1=(()=>{class n extends og{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case yn.NONE:return i;case yn.HTML:return Eo(i,"HTML")?sr(i):Fb(this._doc,String(i)).toString();case yn.STYLE:return Eo(i,"Style")?sr(i):i;case yn.SCRIPT:if(Eo(i,"Script"))return sr(i);throw new Error("unsafe value used in a script context");case yn.URL:return xb(i),Eo(i,"URL")?sr(i):ni(String(i));case yn.RESOURCE_URL:if(Eo(i,"ResourceURL"))return sr(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function(n){return new wb(n)}(t)}bypassSecurityTrustStyle(t){return function(n){return new hs(n)}(t)}bypassSecurityTrustScript(t){return function(n){return new vx(n)}(t)}bypassSecurityTrustUrl(t){return function(n){return new _x(n)}(t)}bypassSecurityTrustResourceUrl(t){return function(n){return new bx(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({token:n,factory:function(t){let i=null;return i=t?new t:function(n){return new u1(n.get(xt))}(ae(cn)),i},providedIn:"root"}),n})();const Cj=vT(l2,"browser",[{provide:s_,useValue:OM},{provide:aT,useValue:function(){n1.makeCurrent(),r1.init()},multi:!0},{provide:xt,useFactory:function(){return n=document,En=n,document;var n},deps:[]}]),Sj=[[],{provide:Qr,useValue:"root"},{provide:Ls,useFactory:function(){return new Ls},deps:[]},{provide:E_,useClass:aj,multi:!0,deps:[xt,Ut,s_]},{provide:E_,useClass:gj,multi:!0,deps:[xt]},[],{provide:tw,useClass:tw,deps:[JE,w_,o_]},{provide:kd,useExisting:tw},{provide:BM,useExisting:w_},{provide:w_,useClass:w_,deps:[xt]},{provide:lS,useClass:lS,deps:[Ut]},{provide:JE,useClass:JE,deps:[E_,Ut]},{provide:class{},useClass:U3,deps:[]},[]];let qM=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:o_,useValue:t.appId},{provide:FM,useExisting:o_},z3]}}}return n.\u0275fac=function(t){return new(t||n)(ae(n,12))},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({providers:Sj,imports:[t1,g2]}),n})();function kt(...n){return Ri(n,Dl(n))}"undefined"!=typeof window&&window;class Ca extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const{isArray:Ij}=Array,{getPrototypeOf:Oj,prototype:Nj,keys:Fj}=Object;function YM(n){if(1===n.length){const e=n[0];if(Ij(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Oj(n)===Nj}(e)){const t=Fj(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Bj}=Array;function h1(n){return Pt(e=>function(n,e){return Bj(e)?n(...e):n(e)}(n,e))}function XM(n,e){return n.reduce((t,i,o)=>(t[i]=e[o],t),{})}function QM(...n){const e=Dl(n),t=th(n),{args:i,keys:o}=YM(n);if(0===i.length)return Ri([],e);const a=new Be(function(n,e,t=pn){return i=>{ZM(e,()=>{const{length:o}=n,a=new Array(o);let u=o,p=o;for(let y=0;y<o;y++)ZM(e,()=>{const E=Ri(n[y],e);let D=!1;E.subscribe(new oe(i,k=>{a[y]=k,D||(D=!0,p--),p||i.next(t(a.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,e,o?u=>XM(o,u):pn));return t?a.pipe(h1(t)):a}function ZM(n,e,t){n?Vr(t,n,e):e()}const nw=Wd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function iw(...n){return Ec(1)(Ri(n,Dl(n)))}function JM(n){return new Be(e=>{yi(n()).subscribe(e)})}function eR(){return Ln((n,e)=>{let t=null;n._refCount++;const i=new oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,a=t;t=null,o&&(!a||o===a)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class $j extends Be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ti(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vn;const t=this.getSubject();e.add(this.source.subscribe(new oe(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vn.EMPTY)}return e}refCount(){return eR()(this)}}function Bd(n,e){return Ln((t,i)=>{let o=null,a=0,u=!1;const p=()=>u&&!o&&i.complete();t.subscribe(new oe(i,y=>{null==o||o.unsubscribe();let E=0;const D=a++;yi(n(y,D)).subscribe(o=new oe(i,k=>i.next(e?e(y,k,D,E++):k),()=>{o=null,p()}))},()=>{u=!0,p()}))})}function rw(...n){const e=Dl(n);return Ln((t,i)=>{(e?iw(n,t,e):iw(n,t)).subscribe(i)})}function zj(n,e,t,i,o){return(a,u)=>{let p=t,y=e,E=0;a.subscribe(new oe(u,D=>{const k=E++;y=p?n(y,D,k):(p=!0,D),i&&u.next(y)},o&&(()=>{p&&u.next(y),u.complete()})))}}function tR(n,e){return Ln(zj(n,e,arguments.length>=2,!0))}function wu(n,e){return Ln((t,i)=>{let o=0;t.subscribe(new oe(i,a=>n.call(e,a,o++)&&i.next(a)))})}function xu(n){return Ln((e,t)=>{let a,i=null,o=!1;i=e.subscribe(new oe(t,void 0,void 0,u=>{a=yi(n(u,xu(n)(e))),i?(i.unsubscribe(),i=null,a.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,a.subscribe(t))})}function sg(n,e){return Oe(e)?qn(n,e,1):qn(n,1)}function p1(n){return n<=0?()=>Qi:Ln((e,t)=>{let i=[];e.subscribe(new oe(t,o=>{i.push(o),n<i.length&&i.shift()},()=>{for(const o of i)t.next(o);t.complete()},void 0,()=>{i=null}))})}function nR(n=Uj){return Ln((e,t)=>{let i=!1;e.subscribe(new oe(t,o=>{i=!0,t.next(o)},()=>i?t.complete():t.error(n())))})}function Uj(){return new nw}function iR(n){return Ln((e,t)=>{let i=!1;e.subscribe(new oe(t,o=>{i=!0,t.next(o)},()=>{i||t.next(n),t.complete()}))})}function ag(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wu((o,a)=>n(o,a,i)):pn,dr(1),t?iR(e):nR(()=>new nw))}function To(n,e,t){const i=Oe(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ln((o,a)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let p=!0;o.subscribe(new oe(a,y=>{var E;null===(E=i.next)||void 0===E||E.call(i,y),a.next(y)},()=>{var y;p=!1,null===(y=i.complete)||void 0===y||y.call(i),a.complete()},y=>{var E;p=!1,null===(E=i.error)||void 0===E||E.call(i,y),a.error(y)},()=>{var y,E;p&&(null===(y=i.unsubscribe)||void 0===y||y.call(i)),null===(E=i.finalize)||void 0===E||E.call(i)}))}):pn}function rR(n){return Ln((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Cu{constructor(e,t){this.id=e,this.url=t}}class f1 extends Cu{constructor(e,t,i="imperative",o=null){super(e,t),this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class x_ extends Cu{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class oR extends Cu{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gj extends Cu{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qj extends Cu{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kj extends Cu{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yj extends Cu{constructor(e,t,i,o,a){super(e,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xj extends Cu{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qj extends Cu{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aR{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zj{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jj{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eV{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tV{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cR{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ln="primary";class nV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cg(n){return new nV(n)}const lR="ngNavigationCancelingError";function m1(n){const e=Error("NavigationCancelingError: "+n);return e[lR]=!0,e}function rV(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const o={};for(let a=0;a<i.length;a++){const u=i[a],p=n[a];if(u.startsWith(":"))o[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function gl(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let a=0;a<t.length;a++)if(o=t[a],!uR(n[o],e[o]))return!1;return!0}function uR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((o,a)=>i[a]===o)}return n===e}function dR(n){return Array.prototype.concat.apply([],n)}function hR(n){return n.length>0?n[n.length-1]:null}function fo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yl(n){return B(n)?n:F(n)?Ri(Promise.resolve(n)):kt(n)}const aV={exact:function mR(n,e,t){if(!Ap(n.segments,e.segments)||!ow(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!mR(n.children[i],e.children[i],t))return!1;return!0},subset:gR},pR={exact:function(n,e){return gl(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uR(n[t],e[t]))},ignored:()=>!0};function fR(n,e,t){return aV[t.paths](n.root,e.root,t.matrixParams)&&pR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gR(n,e,t){return yR(n,e,e.segments,t)}function yR(n,e,t,i){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ap(o,t)||e.hasChildren()||!ow(o,t,i))}if(n.segments.length===t.length){if(!Ap(n.segments,t)||!ow(n.segments,t,i))return!1;for(const o in e.children)if(!n.children[o]||!gR(n.children[o],e.children[o],i))return!1;return!0}{const o=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ap(n.segments,o)&&ow(n.segments,o,i)&&n.children[ln])&&yR(n.children[ln],e,a,i)}}function ow(n,e,t){return e.every((i,o)=>pR[t](n[o].parameters,i.parameters))}class Dp{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cg(this.queryParams)),this._queryParamMap}toString(){return hV.serialize(this)}}class mn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fo(t,(i,o)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sw(this)}}class C_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=cg(this.parameters)),this._parameterMap}toString(){return wR(this)}}function Ap(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class vR{}class _R{parse(e){const t=new EV(e);return new Dp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${S_(e.root,!0)}`,i=function(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(o=>`${aw(t)}=${aw(o)}`).join("&"):`${aw(t)}=${aw(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${i}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const hV=new _R;function sw(n){return n.segments.map(e=>wR(e)).join("/")}function S_(n,e){if(!n.hasChildren())return sw(n);if(e){const t=n.children[ln]?S_(n.children[ln],!1):"",i=[];return fo(n.children,(o,a)=>{a!==ln&&i.push(`${a}:${S_(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(n,e){let t=[];return fo(n.children,(i,o)=>{o===ln&&(t=t.concat(e(i,o)))}),fo(n.children,(i,o)=>{o!==ln&&(t=t.concat(e(i,o)))}),t}(n,(i,o)=>o===ln?[S_(n.children[ln],!1)]:[`${o}:${S_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${sw(n)}/${t[0]}`:`${sw(n)}/(${t.join("//")})`}}function bR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function aw(n){return bR(n).replace(/%3B/gi,";")}function g1(n){return bR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cw(n){return decodeURIComponent(n)}function ER(n){return cw(n.replace(/\+/g,"%20"))}function wR(n){return`${g1(n.path)}${function(n){return Object.keys(n).map(e=>`;${g1(e)}=${g1(n[e])}`).join("")}(n.parameters)}`}const gV=/^[^\/()?;=#]+/;function lw(n){const e=n.match(gV);return e?e[0]:""}const yV=/^[^=?&#]+/,_V=/^[^&#]+/;class EV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mn([],{}):new mn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ln]=new mn(e,t)),i}parseSegment(){const e=lw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new C_(cw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=lw(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=lw(this.remaining);o&&(i=o,this.capture(i))}e[cw(t)]=cw(i)}parseQueryParam(e){const t=function(n){const e=n.match(yV);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(_V);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const o=ER(t),a=ER(i);if(e.hasOwnProperty(o)){let u=e[o];Array.isArray(u)||(u=[u],e[o]=u),u.push(a)}else e[o]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=lw(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=ln);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[ln]:new mn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class xR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=y1(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=y1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=v1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return v1(e,this._root).map(t=>t.value)}}function y1(n,e){if(n===e.value)return e;for(const t of e.children){const i=y1(n,t);if(i)return i}return null}function v1(n,e){if(n===e.value)return[e];for(const t of e.children){const i=v1(n,t);if(i.length)return i.unshift(e),i}return[]}class Su{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class CR extends xR{constructor(e,t){super(e),this.snapshot=t,_1(this,e)}toString(){return this.snapshot.toString()}}function SR(n,e){const t=function(n,e){const u=new uw([],{},{},"",{},ln,e,null,n.root,-1,{});return new AR("",new Su(u,[]))}(n,e),i=new Ca([new C_("",{})]),o=new Ca({}),a=new Ca({}),u=new Ca({}),p=new Ca(""),y=new ug(i,o,u,p,a,ln,e,t.root);return y.snapshot=t.root,new CR(new Su(y,[]),t)}class ug{constructor(e,t,i,o,a,u,p,y){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=a,this.outlet=u,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pt(e=>cg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pt(e=>cg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DR(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const o=t[i],a=t[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(a.component)break;i--}}return function(n){return n.reduce((e,t)=>({params:At(At({},e.params),t.params),data:At(At({},e.data),t.data),resolve:At(At({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class uw{constructor(e,t,i,o,a,u,p,y,E,D,k){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=a,this.outlet=u,this.component=p,this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=D,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AR extends xR{constructor(e,t){super(t),this.url=e,_1(this,t)}toString(){return TR(this._root)}}function _1(n,e){e.value._routerState=n,e.children.forEach(t=>_1(n,t))}function TR(n){const e=n.children.length>0?` { ${n.children.map(TR).join(", ")} } `:"";return`${n.value}${e}`}function b1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gl(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function E1(n,e){const t=gl(n.params,e.params)&&function(n,e){return Ap(n,e)&&n.every((t,i)=>gl(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||E1(n.parent,e.parent))}function D_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(i=>{for(const o of t.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return D_(n,i,o);return D_(n,i)})}(n,e,t);return new Su(i,o)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(p=>D_(n,p)),u}}const i=function(n){return new ug(new Ca(n.url),new Ca(n.params),new Ca(n.queryParams),new Ca(n.fragment),new Ca(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(a=>D_(n,a));return new Su(i,o)}}function dw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function A_(n){return"object"==typeof n&&null!=n&&n.outlets}function w1(n,e,t,i,o){let a={};return i&&fo(i,(u,p)=>{a[p]=Array.isArray(u)?u.map(y=>`${y}`):`${u}`}),new Dp(t.root===n?e:MR(t.root,n,e),a,o)}function MR(n,e,t){const i={};return fo(n.children,(o,a)=>{i[a]=o===e?t:MR(o,e,t)}),new mn(n.segments,i)}class RR{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&dw(i[0]))throw new Error("Root segment cannot have matrix parameters");const o=i.find(A_);if(o&&o!==hR(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class x1{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function kR(n,e,t){if(n||(n=new mn([],{})),0===n.segments.length&&n.hasChildren())return hw(n,e,t);const i=function(n,e,t){let i=0,o=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=t.length)return a;const u=n.segments[o],p=t[i];if(A_(p))break;const y=`${p}`,E=i<t.length-1?t[i+1]:null;if(o>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!IR(y,E,u))return a;i+=2}else{if(!IR(y,{},u))return a;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(n,e,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const a=new mn(n.segments.slice(0,i.pathIndex),{});return a.children[ln]=new mn(n.segments.slice(i.pathIndex),n.children),hw(a,0,o)}return i.match&&0===o.length?new mn(n.segments,{}):i.match&&!n.hasChildren()?C1(n,e,t):i.match?hw(n,0,o):C1(n,e,t)}function hw(n,e,t){if(0===t.length)return new mn(n.segments,{});{const i=function(n){return A_(n[0])?n[0].outlets:{[ln]:n}}(t),o={};return fo(i,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(o[u]=kR(n.children[u],e,a))}),fo(n.children,(a,u)=>{void 0===i[u]&&(o[u]=a)}),new mn(n.segments,o)}}function C1(n,e,t){const i=n.segments.slice(0,e);let o=0;for(;o<t.length;){const a=t[o];if(A_(a)){const y=IV(a.outlets);return new mn(i,y)}if(0===o&&dw(t[0])){i.push(new C_(n.segments[e].path,PR(t[0]))),o++;continue}const u=A_(a)?a.outlets[ln]:`${a}`,p=o<t.length-1?t[o+1]:null;u&&p&&dw(p)?(i.push(new C_(u,PR(p))),o+=2):(i.push(new C_(u,{})),o++)}return new mn(i,{})}function IV(n){const e={};return fo(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=C1(new mn([],{}),0,t))}),e}function PR(n){const e={};return fo(n,(t,i)=>e[i]=`${t}`),e}function IR(n,e,t){return n==t.path&&gl(e,t.parameters)}class NV{constructor(e,t,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),b1(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const o=lg(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,o[u],i),delete o[u]}),fo(o,(a,u)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(e,t,i){const o=e.value,a=t?t.value:null;if(o===a)if(o.component){const u=i.getContext(o.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else a&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,a=lg(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],o);if(i&&i.outlet){const u=i.outlet.detach(),p=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,a=lg(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],o);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const o=lg(t);e.children.forEach(a=>{this.activateRoutes(a,o[a.value.outlet],i),this.forwardEvent(new tV(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Jj(e.value.snapshot))}activateRoutes(e,t,i){const o=e.value,a=t?t.value:null;if(b1(o),o===a)if(o.component){const u=i.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(o.component){const u=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),b1(p.route.value),this.activateChildRoutes(e,null,u.children)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;u.attachRef=null,u.route=o,u.resolver=y,u.outlet&&u.outlet.activateWith(o,y),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}class S1{constructor(e,t){this.routes=e,this.module=t}}function jd(n){return"function"==typeof n}function Tp(n){return n instanceof Dp}const T_=Symbol("INITIAL_VALUE");function M_(){return Bd(n=>QM(n.map(e=>e.pipe(dr(1),rw(T_)))).pipe(tR((e,t)=>{let i=!1;return t.reduce((o,a,u)=>o!==T_?o:(a===T_&&(i=!0),i||!1!==a&&u!==t.length-1&&!Tp(a)?o:a),e)},T_),wu(e=>e!==T_),Pt(e=>Tp(e)?e:!0===e),dr(1)))}class $V{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new R_,this.attachRef=null}}class R_{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new $V,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let OR=(()=>{class n{constructor(t,i,o,a,u){this.parentContexts=t,this.location=i,this.resolver=o,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new ii,this.deactivateEvents=new ii,this.attachEvents=new ii,this.detachEvents=new ii,this.name=a||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new zV(t,p,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(s(R_),s(Yo),s(yu),Xl("name"),s(bp))},n.\u0275dir=Gt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class zV{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ug?this.route:e===R_?this.childContexts:this.parent.get(e,t)}}let NR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Hr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&v(0,"router-outlet")},directives:[OR],encapsulation:2}),n})();function FR(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];UV(i,WV(e,i))}}function UV(n,e){n.children&&FR(n.children,e)}function WV(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function D1(n){const e=n.children&&n.children.map(D1),t=e?Cs(At({},n),{children:e}):At({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=NR),t}function Sa(n){return n.outlet||ln}function LR(n,e){const t=n.filter(i=>Sa(i)===e);return t.push(...n.filter(i=>Sa(i)!==e)),t}const BR={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function pw(n,e,t){var p;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?At({},BR):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||rV)(t,n,e);if(!o)return At({},BR);const a={};fo(o.posParams,(y,E)=>{a[E]=y.path});const u=o.consumed.length>0?At(At({},a),o.consumed[o.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:u,positionalParamSegments:null!=(p=o.posParams)?p:{}}}function fw(n,e,t,i,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(i=>mw(n,e,i)&&Sa(i)!==ln)}(n,t,i)){const u=new mn(e,function(n,e,t,i){const o={};o[ln]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Sa(a)!==ln){const u=new mn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,o[Sa(a)]=u}return o}(n,e,i,new mn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(i=>mw(n,e,i))}(n,t,i)){const u=new mn(n.segments,function(n,e,t,i,o,a){const u={};for(const p of i)if(mw(n,t,p)&&!o[Sa(p)]){const y=new mn([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[Sa(p)]=y}return At(At({},o),u)}(n,e,t,i,n.children,o));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new mn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function mw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jR(n,e,t,i){return!!(Sa(n)===i||i!==ln&&mw(e,t,n))&&("**"===n.path||pw(e,n,t).matched)}function VR(n,e,t){return 0===e.length&&!n.children[t]}class k_{constructor(e){this.segmentGroup=e||null}}class HR{constructor(e){this.urlTree=e}}function gw(n){return new Be(e=>e.error(new k_(n)))}function $R(n){return new Be(e=>e.error(new HR(n)))}function XV(n){return new Be(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class JV{constructor(e,t,i,o,a){this.configLoader=t,this.urlSerializer=i,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(ml)}apply(){const e=fw(this.urlTree.root,[],[],this.config).segmentGroup,t=new mn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ln).pipe(Pt(a=>this.createUrlTree(A1(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xu(a=>{if(a instanceof HR)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof k_?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ln).pipe(Pt(o=>this.createUrlTree(A1(o),e.queryParams,e.fragment))).pipe(xu(o=>{throw o instanceof k_?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const o=e.segments.length>0?new mn([],{[ln]:e}):e;return new Dp(o,t,i)}expandSegmentGroup(e,t,i,o){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Pt(a=>new mn([],a))):this.expandSegment(e,i,t,i.segments,o,!0)}expandChildren(e,t,i){const o=[];for(const a of Object.keys(i.children))"primary"===a?o.unshift(a):o.push(a);return Ri(o).pipe(sg(a=>{const u=i.children[a],p=LR(t,a);return this.expandSegmentGroup(e,p,u,a).pipe(Pt(y=>({segment:y,outlet:a})))}),tR((a,u)=>(a[u.outlet]=u.segment,a),{}),function(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wu((o,a)=>n(o,a,i)):pn,p1(1),t?iR(e):nR(()=>new nw))}())}expandSegment(e,t,i,o,a,u){return Ri(i).pipe(sg(p=>this.expandSegmentAgainstRoute(e,t,i,p,o,a,u).pipe(xu(E=>{if(E instanceof k_)return kt(null);throw E}))),ag(p=>!!p),xu((p,y)=>{if(p instanceof nw||"EmptyError"===p.name){if(VR(t,o,a))return kt(new mn([],{}));throw new k_(t)}throw p}))}expandSegmentAgainstRoute(e,t,i,o,a,u,p){return jR(o,t,a,u)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,a,u):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,o,a,u):gw(t):gw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,o,a,u){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,o,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,o,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,o){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$R(a):this.lineralizeSegments(i,a).pipe(qn(u=>{const p=new mn(u,{});return this.expandSegment(e,p,t,u,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,o,a,u){const{matched:p,consumedSegments:y,lastChild:E,positionalParamSegments:D}=pw(t,o,a);if(!p)return gw(t);const k=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?$R(k):this.lineralizeSegments(o,k).pipe(qn(L=>this.expandSegment(e,t,i,L.concat(a.slice(E)),u,!1)))}matchSegmentAgainstRoute(e,t,i,o,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?kt(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(Pt(L=>(i._loadedConfig=L,new mn(o,{})))):kt(new mn(o,{}));const{matched:u,consumedSegments:p,lastChild:y}=pw(t,i,o);if(!u)return gw(t);const E=o.slice(y);return this.getChildConfig(e,i,o).pipe(qn(k=>{const L=k.module,U=k.routes,{segmentGroup:G,slicedSegments:ie}=fw(t,p,E,U),te=new mn(G.segments,G.children);if(0===ie.length&&te.hasChildren())return this.expandChildren(L,U,te).pipe(Pt(Ke=>new mn(p,Ke)));if(0===U.length&&0===ie.length)return kt(new mn(p,{}));const _e=Sa(i)===a;return this.expandSegment(L,te,U,ie,_e?ln:a,!0).pipe(Pt(We=>new mn(p.concat(We.segments),We.children)))}))}getChildConfig(e,t,i){return t.children?kt(new S1(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?kt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(qn(o=>{return o?this.configLoader.load(e.injector,t).pipe(Pt(a=>(t._loadedConfig=a,a))):(n=t,new Be(e=>e.error(m1(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):kt(new S1([],e))}runCanLoadGuards(e,t,i){const o=t.canLoad;return o&&0!==o.length?kt(o.map(u=>{const p=e.get(u);let y;if((n=p)&&jd(n.canLoad))y=p.canLoad(t,i);else{if(!jd(p))throw new Error("Invalid CanLoad guard");y=p(t,i)}var n;return yl(y)})).pipe(M_(),To(u=>{if(!Tp(u))return;const p=m1(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw p.url=u,p}),Pt(u=>!0===u)):kt(!0)}lineralizeSegments(e,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return kt(i);if(o.numberOfChildren>1||!o.children[ln])return XV(e.redirectTo);o=o.children[ln]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,o){const a=this.createSegmentGroup(e,t.root,i,o);return new Dp(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return fo(e,(o,a)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);i[a]=t[p]}else i[a]=o}),i}createSegmentGroup(e,t,i,o){const a=this.createSegments(e,t.segments,i,o);let u={};return fo(t.children,(p,y)=>{u[y]=this.createSegmentGroup(e,p,i,o)}),new mn(a,u)}createSegments(e,t,i,o){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,o):this.findOrReturn(a,i))}findPosParam(e,t,i){const o=i[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let i=0;for(const o of t){if(o.path===e.path)return t.splice(i),o;i++}return e}}function A1(n){const e={};for(const i of Object.keys(n.children)){const a=A1(n.children[i]);(a.segments.length>0||a.hasChildren())&&(e[i]=a)}return function(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new mn(n.segments.concat(e.segments),e.children)}return n}(new mn(n.segments,e))}class zR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yw{constructor(e,t){this.component=e,this.route=t}}function n5(n,e,t){const i=n._root;return P_(i,e?e._root:null,t,[i.value])}function vw(n,e,t){const i=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function P_(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=lg(e);return n.children.forEach(u=>{(function(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ap(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ap(n.url,e.url)||!gl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!E1(n,e)||!gl(n.queryParams,e.queryParams);default:return!E1(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new zR(i)):(a.data=u.data,a._resolvedData=u._resolvedData),P_(n,e,a.component?p?p.children:null:t,i,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new yw(p.outlet.component,u))}else u&&I_(e,p,o),o.canActivateChecks.push(new zR(i)),P_(n,null,a.component?p?p.children:null:t,i,o)})(u,a[u.value.outlet],t,i.concat([u.value]),o),delete a[u.value.outlet]}),fo(a,(u,p)=>I_(u,t.getContext(p),o)),o}function I_(n,e,t){const i=lg(n),o=n.value;fo(i,(a,u)=>{I_(a,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new yw(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class m5{}function UR(n){return new Be(e=>e.error(n))}class y5{constructor(e,t,i,o,a,u){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=fw(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ln);if(null===t)return null;const i=new uw([],Object.freeze({}),Object.freeze(At({},this.urlTree.queryParams)),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Su(i,t),a=new AR(this.url,o);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,i=DR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const a of Object.keys(t.children)){const u=t.children[a],p=LR(e,a),y=this.processSegmentGroup(p,u,a);if(null===y)return null;i.push(...y)}const o=WR(i);return o.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,i,o){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,i,o);if(null!==u)return u}return VR(t,i,o)?[]:null}processSegmentAgainstRoute(e,t,i,o){if(e.redirectTo||!jR(e,t,i,o))return null;let a,u=[],p=[];if("**"===e.path){const U=i.length>0?hR(i).parameters:{};a=new uw(i,U,Object.freeze(At({},this.urlTree.queryParams)),this.urlTree.fragment,KR(e),Sa(e),e.component,e,GR(t),qR(t)+i.length,YR(e))}else{const U=pw(t,e,i);if(!U.matched)return null;u=U.consumedSegments,p=i.slice(U.lastChild),a=new uw(u,U.parameters,Object.freeze(At({},this.urlTree.queryParams)),this.urlTree.fragment,KR(e),Sa(e),e.component,e,GR(t),qR(t)+u.length,YR(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:E,slicedSegments:D}=fw(t,u,p,y.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&E.hasChildren()){const U=this.processChildren(y,E);return null===U?null:[new Su(a,U)]}if(0===y.length&&0===D.length)return[new Su(a,[])];const k=Sa(e)===o,L=this.processSegment(y,E,D,k?ln:o);return null===L?null:[new Su(a,L)]}}function b5(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function WR(n){const e=[],t=new Set;for(const i of n){if(!b5(i)){e.push(i);continue}const o=e.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==o?(o.children.push(...i.children),t.add(o)):e.push(i)}for(const i of t){const o=WR(i.children);e.push(new Su(i.value,o))}return e.filter(i=>!t.has(i))}function GR(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qR(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function KR(n){return n.data||{}}function YR(n){return n.resolve||{}}function T1(n){return Bd(e=>{const t=n(e);return t?Ri(t).pipe(Pt(()=>e)):kt(e)})}class T5 extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const M1=new pt("ROUTES");class XR{constructor(e,t,i,o){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe(Pt(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new S1(dR(u.injector.get(M1,void 0,Le.Self|Le.Optional)).map(D1),u)}),xu(a=>{throw t._loader$=void 0,a}));return t._loader$=new $j(o,()=>new yt).pipe(eR()),t._loader$}loadModuleFactory(e){return yl(e()).pipe(qn(t=>t instanceof TA?kt(t):Ri(this.compiler.compileModuleAsync(t))))}}class R5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function k5(n){throw n}function P5(n,e,t){return e.parse("/")}function QR(n,e){return kt(null)}const I5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},O5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Us=(()=>{class n{constructor(t,i,o,a,u,p,y){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=o,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt,this.errorHandler=k5,this.malformedUriErrorHandler=P5,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:QR,afterPreactivation:QR},this.urlHandlingStrategy=new R5,this.routeReuseStrategy=new T5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(ml),this.console=u.get(xE);const k=u.get(Ut);this.isNgZoneEnabled=k instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=new Dp(new mn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new XR(u,p,L=>this.triggerEvent(new sR(L)),L=>this.triggerEvent(new aR(L))),this.routerState=SR(this.currentUrlTree,this.rootComponentType),this.transitions=new Ca({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(wu(o=>0!==o.id),Pt(o=>Cs(At({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Bd(o=>{let a=!1,u=!1;return kt(o).pipe(To(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Cs(At({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bd(p=>{const y=this.browserUrlTree.toString(),E=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return _w(p.source)&&(this.browserUrlTree=p.extractedUrl),kt(p).pipe(Bd(k=>{const L=this.transitions.getValue();return i.next(new f1(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),L!==this.transitions.getValue()?Qi:Promise.resolve(k)}),function(n,e,t,i){return Bd(o=>function(n,e,t,i,o){return new JV(n,e,t,i,o).apply()}(n,e,t,o.extractedUrl,i).pipe(Pt(a=>Cs(At({},o),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),To(k=>{this.currentNavigation=Cs(At({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function(n,e,t,i,o){return qn(a=>function(n,e,t,i,o="emptyOnly",a="legacy"){try{const u=new y5(n,e,t,i,o,a).recognize();return null===u?UR(new m5):kt(u)}catch(u){return UR(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),i,o).pipe(Pt(u=>Cs(At({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),To(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(U,k)}this.browserUrlTree=k.urlAfterRedirects}const L=new qj(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);i.next(L)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:U,source:G,restoredState:ie,extras:te}=p,_e=new f1(L,this.serializeUrl(U),G,ie);i.next(_e);const me=SR(U,this.rootComponentType).snapshot;return kt(Cs(At({},p),{targetSnapshot:me,urlAfterRedirects:U,extras:Cs(At({},te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Qi}),T1(p=>{const{targetSnapshot:y,id:E,extractedUrl:D,rawUrl:k,extras:{skipLocationChange:L,replaceUrl:U}}=p;return this.hooks.beforePreactivation(y,{navigationId:E,appliedUrlTree:D,rawUrlTree:k,skipLocationChange:!!L,replaceUrl:!!U})}),To(p=>{const y=new Kj(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Pt(p=>Cs(At({},p),{guards:n5(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return qn(t=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?kt(Cs(At({},t),{guardsResult:!0})):function(n,e,t,i){return Ri(n).pipe(qn(o=>function(n,e,t,i,o){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?kt(a.map(p=>{const y=vw(p,e,o);let E;if(function(n){return n&&jd(n.canDeactivate)}(y))E=yl(y.canDeactivate(n,e,t,i));else{if(!jd(y))throw new Error("Invalid CanDeactivate guard");E=yl(y(n,e,t,i))}return E.pipe(ag())})).pipe(M_()):kt(!0)}(o.component,o.route,t,e,i)),ag(o=>!0!==o,!0))}(u,i,o,n).pipe(qn(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,i){return Ri(e).pipe(sg(o=>iw(function(n,e){return null!==n&&e&&e(new Zj(n)),kt(!0)}(o.route.parent,i),function(n,e){return null!==n&&e&&e(new eV(n)),kt(!0)}(o.route,i),function(n,e,t){const i=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>JM(()=>kt(u.guards.map(y=>{const E=vw(y,u.node,t);let D;if(function(n){return n&&jd(n.canActivateChild)}(E))D=yl(E.canActivateChild(i,n));else{if(!jd(E))throw new Error("Invalid CanActivateChild guard");D=yl(E(i,n))}return D.pipe(ag())})).pipe(M_())));return kt(a).pipe(M_())}(n,o.path,t),function(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return kt(!0);const o=i.map(a=>JM(()=>{const u=vw(a,e,t);let p;if(function(n){return n&&jd(n.canActivate)}(u))p=yl(u.canActivate(e,n));else{if(!jd(u))throw new Error("Invalid CanActivate guard");p=yl(u(e,n))}return p.pipe(ag())}));return kt(o).pipe(M_())}(n,o.route,t))),ag(o=>!0!==o,!0))}(i,a,n,e):kt(p)),Pt(p=>Cs(At({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),To(p=>{if(Tp(p.guardsResult)){const E=m1(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw E.url=p.guardsResult,E}const y=new Yj(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),wu(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),T1(p=>{if(p.guards.canActivateChecks.length)return kt(p).pipe(To(y=>{const E=new Xj(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),Bd(y=>{let E=!1;return kt(y).pipe(function(n,e){return qn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return kt(t);let a=0;return Ri(o).pipe(sg(u=>function(n,e,t,i){return function(n,e,t,i){const o=Object.keys(n);if(0===o.length)return kt({});const a={};return Ri(o).pipe(qn(u=>function(n,e,t,i){const o=vw(n,e,i);return yl(o.resolve?o.resolve(e,t):o(e,t))}(n[u],e,t,i).pipe(To(p=>{a[u]=p}))),p1(1),qn(()=>Object.keys(a).length===o.length?kt(a):Qi))}(n._resolve,n,e,i).pipe(Pt(a=>(n._resolvedData=a,n.data=At(At({},n.data),DR(n,t).resolve),null)))}(u.route,i,n,e)),To(()=>a++),p1(1),qn(u=>a===o.length?kt(t):Qi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),To({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),To(y=>{const E=new Qj(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),T1(p=>{const{targetSnapshot:y,id:E,extractedUrl:D,rawUrl:k,extras:{skipLocationChange:L,replaceUrl:U}}=p;return this.hooks.afterPreactivation(y,{navigationId:E,appliedUrlTree:D,rawUrlTree:k,skipLocationChange:!!L,replaceUrl:!!U})}),Pt(p=>{const y=function(n,e,t){const i=D_(n,e._root,t?t._root:void 0);return new CR(i,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Cs(At({},p),{targetRouterState:y})}),To(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>Pt(i=>(new NV(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),To({next(){a=!0},complete(){a=!0}}),rR(()=>{var p;a||u||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null==(p=this.currentNavigation)?void 0:p.id)===o.id&&(this.currentNavigation=null)}),xu(p=>{if(u=!0,function(n){return n&&n[lR]}(p)){const y=Tp(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const E=new oR(o.id,this.serializeUrl(o.extractedUrl),p.message);i.next(E),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_w(o.source)};this.scheduleNavigation(D,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new Gj(o.id,this.serializeUrl(o.extractedUrl),p);i.next(y);try{o.resolve(this.errorHandler(p))}catch(E){o.reject(E)}}return Qi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(At(At({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var p;const o={replaceUrl:!0},a=(null==(p=t.state)?void 0:p.navigationId)?t.state:null;if(a){const y=At({},a);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(o.state=y)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,i,a,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){FR(t),this.config=t.map(D1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:o,queryParams:a,fragment:u,queryParamsHandling:p,preserveFragment:y}=i,E=o||this.routerState.root,D=y?this.currentUrlTree.fragment:u;let k=null;switch(p){case"merge":k=At(At({},this.currentUrlTree.queryParams),a);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=a||null}return null!==k&&(k=this.removeEmptyProps(k)),function(n,e,t,i,o){if(0===t.length)return w1(e.root,e.root,e,i,o);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RR(!0,0,n);let e=0,t=!1;const i=n.reduce((o,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return fo(a.outlets,(y,E)=>{p[E]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(a.segmentPath)return[...o,a.segmentPath]}return"string"!=typeof a?[...o,a]:0===u?(a.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,a]},[]);return new RR(t,e,i)}(t);if(a.toRoot())return w1(e.root,new mn([],{}),e,i,o);const u=function(n,e,t){if(n.isAbsolute)return new x1(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new x1(a,a===e.root,0)}const i=dw(n.commands[0])?0:1;return function(n,e,t){let i=n,o=e,a=t;for(;a>o;){if(a-=o,i=i.parent,!i)throw new Error("Invalid number of '../'");o=i.segments.length}return new x1(i,!1,o-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(a,e,n),p=u.processChildren?hw(u.segmentGroup,u.index,a.commands):kR(u.segmentGroup,u.index,a.commands);return w1(u.segmentGroup,p,e,i,o)}(E,this.currentUrlTree,t,k,null!=D?D:null)}navigateByUrl(t,i={skipLocationChange:!1}){const o=Tp(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return i}isActive(t,i){let o;if(o=!0===i?At({},I5):!1===i?At({},O5):i,Tp(t))return fR(this.currentUrlTree,t,o);const a=this.parseUrl(t);return fR(this.currentUrlTree,a,o)}removeEmptyProps(t){return Object.keys(t).reduce((i,o)=>{const a=t[o];return null!=a&&(i[o]=a),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new x_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,o,a,u){var _e,me,We;if(this.disposed)return Promise.resolve(!1);const p=this.transitions.value,y=_w(i)&&p&&!_w(p.source),E=p.rawUrl.toString()===t.toString(),D=p.id===(null==(_e=this.currentNavigation)?void 0:_e.id);if(y&&E&&D)return Promise.resolve(!0);let L,U,G;u?(L=u.resolve,U=u.reject,G=u.promise):G=new Promise((Ke,Lt)=>{L=Ke,U=Lt});const ie=++this.navigationId;let te;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),te=o&&o.\u0275routerPageId?o.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!=(me=this.browserPageId)?me:0:(null!=(We=this.browserPageId)?We:0)+1):te=0,this.setTransition({id:ie,targetPageId:te,source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:L,reject:U,promise:G,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),G.catch(Ke=>Promise.reject(Ke))}setBrowserUrl(t,i){const o=this.urlSerializer.serialize(t),a=At(At({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl?this.location.replaceState(o,"",a):this.location.go(o,"",a)}restoreHistory(t,i=!1){var o,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(o=this.currentNavigation)?void 0:o.finalUrl)||0===u?this.currentUrlTree===(null==(a=this.currentNavigation)?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const o=new oR(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){c()},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function _w(n){return"imperative"!==n}class ZR{}class JR{preload(e,t){return kt(null)}}let ek=(()=>{class n{constructor(t,i,o,a){this.router=t,this.injector=o,this.preloadingStrategy=a,this.loader=new XR(o,i,y=>t.triggerEvent(new sR(y)),y=>t.triggerEvent(new aR(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(wu(t=>t instanceof x_),sg(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ml);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const o=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;o.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?o.push(this.preloadConfig(t,a)):a.children&&o.push(this.processRoutes(t,a.children));return Ri(o).pipe(Ec(),Pt(a=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?kt(i._loadedConfig):this.loader.load(t.injector,i)).pipe(qn(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(ae(Us),ae(CE),ae(cn),ae(ZR))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),P1=(()=>{class n{constructor(t,i,o={}){this.router=t,this.viewportScroller=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof f1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof x_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new cR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c()},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const Mp=new pt("ROUTER_CONFIGURATION"),tk=new pt("ROUTER_FORROOT_GUARD"),j5=[jE,{provide:vR,useClass:_R},{provide:Us,useFactory:function(n,e,t,i,o,a,u={},p,y){const E=new Us(null,n,e,t,i,o,dR(a));return p&&(E.urlHandlingStrategy=p),y&&(E.routeReuseStrategy=y),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,E),u.enableTracing&&E.events.subscribe(D=>{var k,L;null==(k=console.group)||k.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null==(L=console.groupEnd)||L.call(console)}),E},deps:[vR,R_,jE,cn,CE,M1,Mp,[class{},new vr],[class{},new vr]]},R_,{provide:ug,useFactory:function(n){return n.routerState.root},deps:[Us]},ek,JR,class{preload(e,t){return t().pipe(xu(()=>kt(null)))}},{provide:Mp,useValue:{enableTracing:!1}}];function V5(){return new hS("Router",Us)}let nk=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[j5,ik(t),{provide:tk,useFactory:z5,deps:[[Us,new vr,new da]]},{provide:Mp,useValue:i||{}},{provide:rg,useFactory:$5,deps:[Sp,[new nu($S),new vr],Mp]},{provide:P1,useFactory:H5,deps:[Us,N3,Mp]},{provide:ZR,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:JR},{provide:hS,multi:!0,useFactory:V5},[I1,{provide:r_,multi:!0,useFactory:q5,deps:[I1]},{provide:rk,useFactory:K5,deps:[I1]},{provide:cT,multi:!0,useExisting:rk}]]}}static forChild(t){return{ngModule:n,providers:[ik(t)]}}}return n.\u0275fac=function(t){return new(t||n)(ae(tk,8),ae(Us,8))},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({}),n})();function H5(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new P1(n,e,t)}function $5(n,e,t={}){return t.useHash?new pB(n,e):new bM(n,e)}function z5(n){return"guarded"}function ik(n){return[{provide:sx,multi:!0,useValue:n},{provide:M1,multi:!0,useValue:n}]}let I1=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new yt}appInitializer(){return this.injector.get(uB,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const o=new Promise(p=>i=p),a=this.injector.get(Us),u=this.injector.get(Mp);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?kt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),o})}bootstrapListener(t){const i=this.injector.get(Mp),o=this.injector.get(ek),a=this.injector.get(P1),u=this.injector.get(Us),p=this.injector.get(_p);t===p.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&u.initialNavigation(),o.setUpPreloading(),a.init(),u.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(ae(cn))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();function q5(n){return n.appInitializer.bind(n)}function K5(n){return n.bootstrapListener.bind(n)}const rk=new pt("Router Initializer"),X5=[];let Q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[nk.forRoot(X5)],nk]}),n})();function ok(n,e,t,i,o,a,u){try{var p=n[a](u),y=p.value}catch(E){return void t(E)}p.done?e(y):Promise.resolve(y).then(i,o)}function O_(n){return function(){var e=this,t=arguments;return new Promise(function(i,o){var a=n.apply(e,t);function u(y){ok(a,i,o,u,p,"next",y)}function p(y){ok(a,i,o,u,p,"throw",y)}u(void 0)})}}let sk=(()=>{class n{constructor(){}}return n.NEW_DIAGRAM_XML='\n  <?xml version="1.0" encoding="UTF-8"?>\n  <bpmn2:definitions xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n   <bpmn2:process id="Process_1" isExecutable="false">\n      <bpmn2:startEvent id="StartEvent_1" />\n   </bpmn2:process>\n   <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n      <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\n         <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\n            <dc:Bounds height="36.0" width="36.0" x="412.0" y="240.0" />\n         </bpmndi:BPMNShape>\n      </bpmndi:BPMNPlane>\n   </bpmndi:BPMNDiagram>\n  </bpmn2:definitions>;',n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z5=kn(167),J5=kn(330);let e4=(()=>{class n{constructor(t){this._rendererFactory=t,this._renderer=null,this.eventOutput=new yt,this._bpmnModeler=new Z5({keyboard:{bindTo:document}}),this._bpmnViewer=new J5({keyboard:{bindTo:document}}),this._renderer=t.createRenderer(null,null)}createNewDiagram(t,i,o=!0){var a=this;return O_(function*(){const u=t||sk.NEW_DIAGRAM_XML;yield a.openDiagram(u,i,o)})()}openDiagram(t,i,o=!0){var a=this;return O_(function*(){try{a._bpmnInstance=o?a._bpmnModeler:a._bpmnViewer,yield a._bpmnInstance.importXML(t),a._bpmnInstance.get("canvas").zoom("fit-viewport","auto"),a._renderer.addClass(i.nativeElement,"with-diagram"),a._renderer.removeClass(i.nativeElement,"with-error"),a._bpmnInstance.get("eventBus").on("element.dblclick",p=>{a.eventOutput.next(p.element.id)})}catch(p){a._renderer.removeClass(i.nativeElement,"with-diagram"),a._renderer.addClass(i.nativeElement,"with-error")}})()}attachModelerToCanvas(t){this._bpmnInstance.attachTo(t.nativeElement)}closeDiagram(){this._bpmnInstance.destroy()}exportDiagram(){var t=this;return O_(function*(){const i=yield t._bpmnInstance.saveXML(),{xml:o}=i;return o})()}zoomController(t,i=!1){i?this._bpmnInstance.get("canvas").zoom("fit-viewport","auto"):this._bpmnInstance.get("zoomScroll").stepZoom(t)}toggleFullScreenView(t){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():t.nativeElement.requestFullscreen()}}return n.\u0275fac=function(t){return new(t||n)(ae(kd))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ws(n){return null!=n&&"false"!=`${n}`}function bw(n){return Array.isArray(n)?n:[n]}function Dr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Rp(n){return n instanceof Hn?n.nativeElement:n}const n4=["addListener","removeListener"],i4=["addEventListener","removeEventListener"],r4=["on","off"];function Ew(n,e,t,i){if(Oe(t)&&(i=t,t=void 0),i)return Ew(n,e,t).pipe(h1(i));const[o,a]=function(n){return Oe(n.addEventListener)&&Oe(n.removeEventListener)}(n)?i4.map(u=>p=>n[u](e,p,t)):function(n){return Oe(n.addListener)&&Oe(n.removeListener)}(n)?n4.map(ak(n,e)):function(n){return Oe(n.on)&&Oe(n.off)}(n)?r4.map(ak(n,e)):[];if(!o&&xl(n))return qn(u=>Ew(u,e,t))(yi(n));if(!o)throw new TypeError("Invalid event target");return new Be(u=>{const p=(...y)=>u.next(1<y.length?y:y[0]);return o(p),()=>a(p)})}function ak(n,e){return t=>i=>n[t](e,i)}class c4 extends vn{constructor(e,t){super()}schedule(e,t=0){return this}}const ww={setInterval(...n){const{delegate:e}=ww;return((null==e?void 0:e.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:e}=ww;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class O1 extends c4{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return ww.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;ww.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,i=!1;try{this.work(e)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ar(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const F_={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=F_;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const o=e(a=>{t=void 0,n(a)});return new vn(()=>null==t?void 0:t(o))},requestAnimationFrame(...n){const{delegate:e}=F_;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=F_;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},N1={now:()=>(N1.delegate||Date).now(),delegate:void 0};class L_{constructor(e,t=L_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}L_.now=N1.now;class F1 extends L_{constructor(e,t=L_.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class extends F1{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let i,o=-1;e=e||t.shift();const a=t.length;do{if(i=e.execute(e.state,e.delay))break}while(++o<a&&(e=t.shift()));if(this._active=!1,i){for(;++o<a&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends O1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=F_.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(F_.cancelAnimationFrame(t),e._scheduled=void 0)}});let L1,h4=1;const xw={};function ck(n){return n in xw&&(delete xw[n],!0)}const p4={setImmediate(n){const e=h4++;return xw[e]=!0,L1||(L1=Promise.resolve()),L1.then(()=>ck(e)&&n()),e},clearImmediate(n){ck(n)}},{setImmediate:f4,clearImmediate:m4}=p4,Cw={setImmediate(...n){const{delegate:e}=Cw;return((null==e?void 0:e.setImmediate)||f4)(...n)},clearImmediate(n){const{delegate:e}=Cw;return((null==e?void 0:e.clearImmediate)||m4)(n)},delegate:void 0};new class extends F1{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let i,o=-1;e=e||t.shift();const a=t.length;do{if(i=e.execute(e.state,e.delay))break}while(++o<a&&(e=t.shift()));if(this._active=!1,i){for(;++o<a&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends O1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Cw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(Cw.clearImmediate(t),e._scheduled=void 0)}});function _4(n,e){return n===e}const dk=new F1(O1),hk=dk;function B1(n,e=hk){return function(n){return Ln((e,t)=>{let i=!1,o=null,a=null,u=!1;const p=()=>{if(null==a||a.unsubscribe(),a=null,i){i=!1;const E=o;o=null,t.next(E)}u&&t.complete()},y=()=>{a=null,u&&t.complete()};e.subscribe(new oe(t,E=>{i=!0,o=E,a||yi(n()).subscribe(a=new oe(t,p,y))},()=>{u=!0,(!i||!a||a.closed)&&t.complete()}))})}(()=>function(n=0,e,t=hk){let i=-1;return null!=e&&(Ms(e)?t=e:i=e),new Be(o=>{let a=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){o.closed||(o.next(u++),0<=i?this.schedule(void 0,i):o.complete())},a)})}(n,e))}function kp(n){return Ln((e,t)=>{yi(n).subscribe(new oe(t,()=>t.complete(),Re)),!t.closed&&e.subscribe(t)})}let j1;try{j1="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){j1=!1}let B_,Pp,H1,Li=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(n){return n===OM}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!j1)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(ae(s_))},n.\u0275prov=Qe({factory:function(){return new n(ae(s_))},token:n,providedIn:"root"}),n})(),Sw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({}),n})();function V1(n){return function(){if(null==B_&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>B_=!0}))}finally{B_=B_||!1}return B_}()?n:!!n.capture}function fk(){if(null==Pp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Pp=!1,Pp;if("scrollBehavior"in document.documentElement.style)Pp=!0;else{const n=Element.prototype.scrollTo;Pp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Pp}function Ip(n){return n.composedPath?n.composedPath()[0]:n.target}function $1(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const mk=new pt("cdk-dir-doc",{providedIn:"root",factory:function(){return Ju(xt)}});let V_=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ii,t){const o=t.documentElement?t.documentElement.dir:null,a=(t.body?t.body.dir:null)||o;this.value="ltr"===a||"rtl"===a?a:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(ae(mk,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(mk,8))},token:n,providedIn:"root"}),n})(),H_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({}),n})(),Aw=(()=>{class n{constructor(t,i,o){this._ngZone=t,this._platform=i,this._scrolled=new yt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Be(i=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe(B1(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):kt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const o=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(wu(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,t)&&i.push(a)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let o=Rp(i),a=t.getElementRef().nativeElement;do{if(o==a)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ew(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(ae(Ut),ae(Li),ae(xt,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(Ut),ae(Li),ae(xt,8))},token:n,providedIn:"root"}),n})(),$_=(()=>{class n{constructor(t,i,o){this._platform=t,this._change=new yt,this._changeListener=a=>{this._change.next(a)},this._document=o,i.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),o=t.documentElement,a=o.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||i.scrollY||o.scrollTop||0,left:-a.left||t.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(B1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(ae(Li),ae(Ut),ae(xt,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(Li),ae(Ut),ae(xt,8))},token:n,providedIn:"root"}),n})(),bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[H_,Sw,bk],H_,bk]}),n})();class z1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class U1 extends z1{constructor(e,t,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=o}}class Tw extends z1{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class U4 extends z1{constructor(e){super(),this.element=e instanceof Hn?e.nativeElement:e}}class W1{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof U1?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Tw?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof U4?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class W4 extends W1{constructor(e,t,i,o,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=o,this.attachDomPortal=u=>{const p=u.element,y=this._document.createComment("dom-portal");p.parentNode.insertBefore(y,p),this.outletElement.appendChild(p),this._attachedPortal=u,super.setDisposeFn(()=>{y.parentNode&&y.parentNode.replaceChild(p,y)})},this._document=a}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let o;return e.viewContainerRef?(o=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=i.create(e.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=e,o}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=t.indexOf(i);-1!==o&&t.remove(o)}),this._attachedPortal=e,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Mw=(()=>{class n extends W1{constructor(t,i,o){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ii,this.attachDomPortal=a=>{const u=a.element,p=this._document.createComment("dom-portal");a.setAttachedHost(this),u.parentNode.insertBefore(p,u),this._getRootNode().appendChild(u),this._attachedPortal=a,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(u,p)})},this._document=o}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=i.createComponent(a,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(s(yu),s(Yo),s(xt))},n.\u0275dir=Gt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mn]}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({}),n})();const Sk=fk();class t8{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Dr(-this._previousScrollPosition.left),e.style.top=Dr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,o=this._document.body.style,a=i.scrollBehavior||"",u=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Sk&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Sk&&(i.scrollBehavior=a,o.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class n8{constructor(e,t,i,o){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Dk{enable(){}disable(){}attach(){}}function G1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Ak(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class i8{constructor(e,t,i,o){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=o,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();G1(t,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let r8=(()=>{class n{constructor(t,i,o,a){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=o,this.noop=()=>new Dk,this.close=u=>new n8(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new t8(this._viewportRuler,this._document),this.reposition=u=>new i8(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(ae(Aw),ae($_),ae(Ut),ae(xt))},n.\u0275prov=Qe({factory:function(){return new n(ae(Aw),ae($_),ae(Ut),ae(xt))},token:n,providedIn:"root"}),n})();class q1{constructor(e){if(this.scrollStrategy=new Dk,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class o8{constructor(e,t,i,o,a){this.offsetX=i,this.offsetY=o,this.panelClass=a,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class s8{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Tk=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({factory:function(){return new n(ae(xt))},token:n,providedIn:"root"}),n})(),a8=(()=>{class n extends Tk{constructor(t){super(t),this._keydownListener=i=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){o[a]._keydownEvents.next(i);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(ae(xt))},n.\u0275prov=Qe({factory:function(){return new n(ae(xt))},token:n,providedIn:"root"}),n})(),c8=(()=>{class n extends Tk{constructor(t,i){super(t),this._platform=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ip(o)},this._clickListener=o=>{const a=Ip(o),u="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(!(E._outsidePointerEvents.observers.length<1)&&E.hasAttached()){if(E.overlayElement.contains(a)||E.overlayElement.contains(u))break;E._outsidePointerEvents.next(o)}}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(ae(xt),ae(Li))},n.\u0275prov=Qe({factory:function(){return new n(ae(xt),ae(Li))},token:n,providedIn:"root"}),n})(),K1=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||$1()){const o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].parentNode.removeChild(o[a])}const i=this._document.createElement("div");i.classList.add(t),$1()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(ae(xt),ae(Li))},n.\u0275prov=Qe({factory:function(){return new n(ae(xt),ae(Li))},token:n,providedIn:"root"}),n})();class l8{constructor(e,t,i,o,a,u,p,y,E){this._portalOutlet=e,this._host=t,this._pane=i,this._config=o,this._ngZone=a,this._keyboardDispatcher=u,this._document=p,this._location=y,this._outsideClickDispatcher=E,this._backdropElement=null,this._backdropClick=new yt,this._attachments=new yt,this._detachments=new yt,this._locationChanges=vn.EMPTY,this._backdropClickHandler=D=>this._backdropClick.next(D),this._keydownEvents=new yt,this._outsidePointerEvents=new yt,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(dr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Dr(this._config.width),e.height=Dr(this._config.height),e.minWidth=Dr(this._config.minWidth),e.minHeight=Dr(this._config.minHeight),e.maxWidth=Dr(this._config.maxWidth),e.maxHeight=Dr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const i=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",i),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",i)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(e,t,i){const o=e.classList;bw(t).forEach(a=>{a&&(i?o.add(a):o.remove(a))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(kp(Po(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const Mk="cdk-overlay-connected-position-bounding-box",u8=/([A-Za-z%]+)$/;class Rk{constructor(e,t,i,o,a){this._viewportRuler=t,this._document=i,this._platform=o,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new yt,this._resizeSubscription=vn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Mk),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,o=[];let a;for(let u of this._preferredPositions){let p=this._getOriginPoint(e,u),y=this._getOverlayPoint(p,t,u),E=this._getOverlayFit(y,t,i,u);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,p);this._canFitWithFlexibleDimensions(E,y,i)?o.push({position:u,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,u)}):(!a||a.overlayFit.visibleArea<E.visibleArea)&&(a={overlayFit:E,overlayPoint:y,originPoint:p,position:u,overlayRect:t})}if(o.length){let u=null,p=-1;for(const y of o){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,u=y)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Op(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Mk),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let i,o;if("center"==t.originX)i=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;i="start"==t.originX?a:u}return o="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:i,y:o}}_getOverlayPoint(e,t,i){let o,a;return o="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+o,y:e.y+a}}_getOverlayFit(e,t,i,o){const a=Pk(t);let{x:u,y:p}=e,y=this._getOffset(o,"x"),E=this._getOffset(o,"y");y&&(u+=y),E&&(p+=E);let L=0-p,U=p+a.height-i.height,G=this._subtractOverflows(a.width,0-u,u+a.width-i.width),ie=this._subtractOverflows(a.height,L,U),te=G*ie;return{visibleArea:te,isCompletelyWithinViewport:a.width*a.height===te,fitsInViewportVertically:ie===a.height,fitsInViewportHorizontally:G==a.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const o=i.bottom-t.y,a=i.right-t.x,u=kk(this._overlayRef.getConfig().minHeight),p=kk(this._overlayRef.getConfig().minWidth),E=e.fitsInViewportHorizontally||null!=p&&p<=a;return(e.fitsInViewportVertically||null!=u&&u<=o)&&E}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const o=Pk(t),a=this._viewportRect,u=Math.max(e.x+o.width-a.width,0),p=Math.max(e.y+o.height-a.height,0),y=Math.max(a.top-i.top-e.y,0),E=Math.max(a.left-i.left-e.x,0);let D=0,k=0;return D=o.width<=a.width?E||-u:e.x<this._viewportMargin?a.left-i.left-e.x:0,k=o.height<=a.height?y||-p:e.y<this._viewportMargin?a.top-i.top-e.y:0,this._previousPushAmount={x:D,y:k},{x:e.x+D,y:e.y+k}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),o=new s8(e,i);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,o=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,o=this._isRtl();let a,u,p,D,k,L;if("top"===t.overlayY)u=e.y,a=i.height-u+this._viewportMargin;else if("bottom"===t.overlayY)p=i.height-e.y+2*this._viewportMargin,a=i.height-p+this._viewportMargin;else{const U=Math.min(i.bottom-e.y+i.top,e.y),G=this._lastBoundingBoxSize.height;a=2*U,u=e.y-U,a>G&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-G/2)}if("end"===t.overlayX&&!o||"start"===t.overlayX&&o)L=i.width-e.x+this._viewportMargin,D=e.x-this._viewportMargin;else if("start"===t.overlayX&&!o||"end"===t.overlayX&&o)k=e.x,D=i.right-e.x;else{const U=Math.min(i.right-e.x+i.left,e.x),G=this._lastBoundingBoxSize.width;D=2*U,k=e.x-U,D>G&&!this._isInitialRender&&!this._growAfterOpen&&(k=e.x-G/2)}return{top:u,left:k,bottom:p,right:L,width:D,height:a}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;o.height=Dr(i.height),o.top=Dr(i.top),o.bottom=Dr(i.bottom),o.width=Dr(i.width),o.left=Dr(i.left),o.right=Dr(i.right),o.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",o.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(o.maxHeight=Dr(a)),u&&(o.maxWidth=Dr(u))}this._lastBoundingBoxSize=i,Op(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Op(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Op(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},o=this._hasExactPosition(),a=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(o){const D=this._viewportRuler.getViewportScrollPosition();Op(i,this._getExactOverlayY(t,e,D)),Op(i,this._getExactOverlayX(t,e,D))}else i.position="static";let p="",y=this._getOffset(t,"x"),E=this._getOffset(t,"y");y&&(p+=`translateX(${y}px) `),E&&(p+=`translateY(${E}px)`),i.transform=p.trim(),u.maxHeight&&(o?i.maxHeight=Dr(u.maxHeight):a&&(i.maxHeight="")),u.maxWidth&&(o?i.maxWidth=Dr(u.maxWidth):a&&(i.maxWidth="")),Op(this._pane.style,i)}_getExactOverlayY(e,t,i){let o={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i));let u=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=u,"bottom"===e.overlayY?o.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":o.top=Dr(a.y),o}_getExactOverlayX(e,t,i){let u,o={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,i)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?o.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":o.left=Dr(a.x),o}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ak(e,i),isOriginOutsideView:G1(e,i),isOverlayClipped:Ak(t,i),isOverlayOutsideView:G1(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,o)=>i-Math.max(o,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&bw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Hn)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Op(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function kk(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(u8);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Pk(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class d8{constructor(e,t,i,o,a,u,p){this._preferredPositions=[],this._positionStrategy=new Rk(i,o,a,u,p).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,i,o){const a=new o8(e,t,i,o);return this._preferredPositions.push(a),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const Ik="cdk-global-overlay-wrapper";class h8{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Ik),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:a,maxWidth:u,maxHeight:p}=i,y=!("100%"!==o&&"100vw"!==o||u&&"100%"!==u&&"100vw"!==u),E=!("100%"!==a&&"100vh"!==a||p&&"100%"!==p&&"100vh"!==p);e.position=this._cssPosition,e.marginLeft=y?"0":this._leftOffset,e.marginTop=E?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,y?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=E?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Ik),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let p8=(()=>{class n{constructor(t,i,o,a){this._viewportRuler=t,this._document=i,this._platform=o,this._overlayContainer=a}global(){return new h8}connectedTo(t,i,o){return new d8(i,o,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new Rk(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(ae($_),ae(xt),ae(Li),ae(K1))},n.\u0275prov=Qe({factory:function(){return new n(ae($_),ae(xt),ae(Li),ae(K1))},token:n,providedIn:"root"}),n})(),f8=0,z_=(()=>{class n{constructor(t,i,o,a,u,p,y,E,D,k,L){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=u,this._injector=p,this._ngZone=y,this._document=E,this._directionality=D,this._location=k,this._outsideClickDispatcher=L}create(t){const i=this._createHostElement(),o=this._createPaneElement(i),a=this._createPortalOutlet(o),u=new q1(t);return u.direction=u.direction||this._directionality.value,new l8(a,i,o,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+f8++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(_p)),new W4(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(ae(r8),ae(K1),ae(yu),ae(p8),ae(a8),ae(cn),ae(Ut),ae(xt),ae(V_),ae(jE),ae(c8))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const y8={provide:new pt("cdk-connected-overlay-scroll-strategy"),deps:[z_],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let v8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({providers:[z_,y8],imports:[[H_,xk,Ek],Ek]}),n})();function Nk(n){return wu((e,t)=>n<=t)}function zk(n){return 0===n.offsetX&&0===n.offsetY}function Uk(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const Wk=new pt("cdk-input-modality-detector-options"),B8={ignoreKeys:[18,17,224,91,16]},pg=V1({passive:!0,capture:!0});let qk=(()=>{class n{constructor(t,i,o,a){this._platform=t,this._mostRecentTarget=null,this._modality=new Ca(null),this._lastTouchMs=0,this._onKeydown=u=>{var p,y;(null===(y=null===(p=this._options)||void 0===p?void 0:p.ignoreKeys)||void 0===y?void 0:y.some(E=>E===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Ip(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zk(u)?"keyboard":"mouse"),this._mostRecentTarget=Ip(u))},this._onTouchstart=u=>{Uk(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ip(u))},this._options=Object.assign(Object.assign({},B8),a),this.modalityDetected=this._modality.pipe(Nk(1)),this.modalityChanged=this.modalityDetected.pipe(function(n,e=pn){return n=null!=n?n:_4,Ln((t,i)=>{let o,a=!0;t.subscribe(new oe(i,u=>{const p=e(u);(a||!n(o,p))&&(a=!1,o=p,i.next(u))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,pg),o.addEventListener("mousedown",this._onMousedown,pg),o.addEventListener("touchstart",this._onTouchstart,pg)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,pg),document.removeEventListener("mousedown",this._onMousedown,pg),document.removeEventListener("touchstart",this._onTouchstart,pg))}}return n.\u0275fac=function(t){return new(t||n)(ae(Li),ae(Ut),ae(xt),ae(Wk,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(Li),ae(Ut),ae(xt),ae(Wk,8))},token:n,providedIn:"root"}),n})();const Kk=new pt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Yk=new pt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let X1=(()=>{class n{constructor(t,i,o,a){this._ngZone=i,this._defaultOptions=a,this._document=o,this._liveElement=t||this._createLiveElement()}announce(t,...i){const o=this._defaultOptions;let a,u;return 1===i.length&&"number"==typeof i[0]?u=i[0]:[a,u]=i,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),null==u&&o&&(u=o.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>new Promise(p=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,p(),"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),o=this._document.createElement("div");for(let a=0;a<i.length;a++)i[a].parentNode.removeChild(i[a]);return o.classList.add(t),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),this._document.body.appendChild(o),o}}return n.\u0275fac=function(t){return new(t||n)(ae(Kk,8),ae(Ut),ae(xt),ae(Yk,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(Kk,8),ae(Ut),ae(xt),ae(Yk,8))},token:n,providedIn:"root"}),n})();const Xk=new pt("cdk-focus-monitor-default-options"),Rw=V1({passive:!0,capture:!0});let Q1=(()=>{class n{constructor(t,i,o,a,u){this._ngZone=t,this._platform=i,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new yt,this._rootNodeFocusAndBlurListener=p=>{const y=Ip(p),E="focus"===p.type?this._onFocus:this._onBlur;for(let D=y;D;D=D.parentElement)E.call(this,p,D)},this._document=a,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,i=!1){const o=Rp(t);if(!this._platform.isBrowser||1!==o.nodeType)return kt(null);const a=function(n){if(function(){if(null==H1){const n="undefined"!=typeof document?document.head:null;H1=!(!n||!n.createShadowRoot&&!n.attachShadow)}return H1}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(o)||this._getDocument(),u=this._elementInfo.get(o);if(u)return i&&(u.checkChildren=!0),u.subject;const p={checkChildren:i,subject:new yt,rootNode:a};return this._elementInfo.set(o,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const i=Rp(t),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(t,i,o){const a=Rp(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([p,y])=>this._originChanged(p,i,y)):(this._setOrigin(i),"function"==typeof a.focus&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,i,o){o?t.classList.add(i):t.classList.remove(i)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){this._toggleClass(t,"cdk-focused",!!i),this._toggleClass(t,"cdk-touch-focused","touch"===i),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(t,"cdk-mouse-focused","mouse"===i),this._toggleClass(t,"cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const o=this._elementInfo.get(i),a=Ip(t);!o||!o.checkChildren&&i!==a||this._originChanged(i,this._getFocusOrigin(a),o)}_onBlur(t,i){const o=this._elementInfo.get(i);!o||o.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(o.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Rw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Rw)}),this._rootNodeFocusListenerCount.set(i,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(kp(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Rw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Rw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,o){this._setClasses(t,i),this._emitOrigin(o.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((o,a)=>{(a===t||o.checkChildren&&a.contains(t))&&i.push([a,o])}),i}}return n.\u0275fac=function(t){return new(t||n)(ae(Ut),ae(Li),ae(qk),ae(xt,8),ae(Xk,8))},n.\u0275prov=Qe({factory:function(){return new n(ae(Ut),ae(Li),ae(qk),ae(xt,8),ae(Xk,8))},token:n,providedIn:"root"}),n})();const Qk="cdk-high-contrast-black-on-white",Zk="cdk-high-contrast-white-on-black",Z1="cdk-high-contrast-active";let Jk=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(t):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Z1),t.remove(Qk),t.remove(Zk),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(Z1),t.add(Qk)):2===i&&(t.add(Z1),t.add(Zk))}}}return n.\u0275fac=function(t){return new(t||n)(ae(Li),ae(xt))},n.\u0275prov=Qe({factory:function(){return new n(ae(Li),ae(xt))},token:n,providedIn:"root"}),n})();const eP=new vp("12.2.13");class tP{}const Du="*";function H8(n,e){return{type:7,name:n,definitions:e,options:{}}}function nP(n,e=null){return{type:4,styles:e,timings:n}}function iP(n,e=null){return{type:2,steps:n,options:e}}function U_(n){return{type:6,styles:n,offset:null}}function rP(n,e,t){return{type:0,name:n,styles:e,options:t}}function oP(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function sP(n){Promise.resolve(null).then(n)}class fg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){sP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class aP{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,o=0;const a=this.players.length;0==a?sP(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++i==a&&this._onDestroy()}),u.onStart(()=>{++o==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,p)=>Math.max(u,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const o=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(o)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function cP(){return"undefined"!=typeof window&&void 0!==window.document}function eD(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Vd(n){switch(n.length){case 0:return new fg;case 1:return n[0];default:return new aP(n)}}function lP(n,e,t,i,o={},a={}){const u=[],p=[];let y=-1,E=null;if(i.forEach(D=>{const k=D.offset,L=k==y,U=L&&E||{};Object.keys(D).forEach(G=>{let ie=G,te=D[G];if("offset"!==G)switch(ie=e.normalizePropertyName(ie,u),te){case"!":te=o[G];break;case Du:te=a[G];break;default:te=e.normalizeStyleValue(G,ie,te,u)}U[ie]=te}),L||p.push(U),E=U,y=k}),u.length){const D="\n - ";throw new Error(`Unable to animate due to the following errors:${D}${u.join(D)}`)}return p}function tD(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&nD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&nD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&nD(t,"destroy",n)))}}function nD(n,e,t){const i=t.totalTime,a=iD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function iD(n,e,t,i,o="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:o,totalTime:a,disabled:!!u}}function Gs(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function uP(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let rD=(n,e)=>!1,oD=(n,e)=>!1,dP=(n,e,t)=>[];const hP=eD();(hP||"undefined"!=typeof Element)&&(rD=cP()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),oD=(()=>{if(hP||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):oD}})(),dP=(n,e,t)=>{let i=[];if(t){const o=n.querySelectorAll(e);for(let a=0;a<o.length;a++)i.push(o[a])}else{const o=n.querySelector(e);o&&i.push(o)}return i});let Np=null,pP=!1;function sD(n){Np||(Np=("undefined"!=typeof document?document.body:null)||{},pP=!!Np.style&&"WebkitAppearance"in Np.style);let e=!0;return Np.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Np.style,!e&&pP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Np.style)),e}const aD=oD,cD=rD,lD=dP;function fP(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let mP=(()=>{class n{validateStyleProperty(t){return sD(t)}matchesElement(t,i){return aD(t,i)}containsElement(t,i){return cD(t,i)}query(t,i,o){return lD(t,i,o)}computeStyle(t,i,o){return o||""}animate(t,i,o,a,u,p=[],y){return new fg(o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})(),uD=(()=>{class n{}return n.NOOP=new mP,n})();const dD="ng-enter",kw="ng-leave",Pw="ng-trigger",Iw=".ng-trigger",yP="ng-animating",hD=".ng-animating";function Fp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pD(parseFloat(e[1]),e[2])}function pD(n,e){return"s"===e?1e3*n:n}function Ow(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let o,a=0,u="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};o=pD(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(a=pD(parseFloat(y),p[4]));const E=p[5];E&&(u=E)}else o=n;if(!t){let p=!1,y=e.length;o<0&&(e.push("Duration values below 0 are not allowed for this animation step."),p=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&e.splice(y,0,`The provided timing value "${n}" is invalid.`)}return{duration:o,delay:a,easing:u}}(n,e,t)}function mg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Hd(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else mg(n,t);return t}function _P(n,e,t){return t?e+":"+t+";":""}function bP(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=_P(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_P(0,Y8(t),n.style[t]));n.setAttribute("style",e)}function vl(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const o=mD(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[o]),n.style[o]=e[i]}),eD()&&bP(n))}function Lp(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=mD(t);n.style[i]=""}),eD()&&bP(n))}function W_(n){return Array.isArray(n)?1==n.length?n[0]:iP(n):n}const fD=new RegExp("{{\\s*(.+?)\\s*}}","g");function EP(n){let e=[];if("string"==typeof n){let t;for(;t=fD.exec(n);)e.push(t[1]);fD.lastIndex=0}return e}function Nw(n,e,t){const i=n.toString(),o=i.replace(fD,(a,u)=>{let p=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),p=""),p.toString()});return o==i?n:o}function Fw(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const K8=/-+([a-z0-9])/g;function mD(n){return n.replace(K8,(...e)=>e[1].toUpperCase())}function Y8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function wP(n,e){return 0===n||0===e}function xP(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let a=e[0],u=[];if(i.forEach(p=>{a.hasOwnProperty(p)||u.push(p),a[p]=t[p]}),u.length)for(var o=1;o<e.length;o++){let p=e[o];u.forEach(function(y){p[y]=gD(n,y)})}}return e}function qs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function gD(n,e){return window.getComputedStyle(n)[e]}function X8(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,e,t){if(":"==n[0]){const y=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const o=i[1],a=i[2],u=i[3];e.push(CP(o,u));"<"==a[0]&&!("*"==o&&"*"==u)&&e.push(CP(u,o))}(i,t,e)):t.push(n),t}const Bw=new Set(["true","1"]),jw=new Set(["false","0"]);function CP(n,e){const t=Bw.has(n)||jw.has(n),i=Bw.has(e)||jw.has(e);return(o,a)=>{let u="*"==n||n==o,p="*"==e||e==a;return!u&&t&&"boolean"==typeof o&&(u=o?Bw.has(n):jw.has(n)),!p&&i&&"boolean"==typeof a&&(p=a?Bw.has(e):jw.has(e)),u&&p}}const J8=new RegExp("s*:selfs*,?","g");function yD(n,e,t){return new eH(n).build(e,t)}class eH{constructor(e){this._driver=e}build(e,t){const i=new iH(t);return this._resetContextStyleTimingState(i),qs(this,W_(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,o=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,E=y.name;E.toString().split(/\s*,\s*/).forEach(D=>{y.name=D,a.push(this.visitState(y,t))}),y.name=E}else if(1==p.type){const y=this.visitTransition(p,t);i+=y.queryCount,o+=y.depCount,u.push(y)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:u,queryCount:i,depCount:o,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(i.containsDynamicStyles){const a=new Set,u=o||{};if(i.styles.forEach(p=>{if(Vw(p)){const y=p;Object.keys(y).forEach(E=>{EP(y[E]).forEach(D=>{u.hasOwnProperty(D)||a.add(D)})})}}),a.size){const p=Fw(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:e.name,style:i,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=qs(this,W_(e.animation),t);return{type:1,matchers:X8(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Bp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>qs(this,i,t)),options:Bp(e.options)}}visitGroup(e,t){const i=t.currentTime;let o=0;const a=e.steps.map(u=>{t.currentTime=i;const p=qs(this,u,t);return o=Math.max(o,t.currentTime),p});return t.currentTime=o,{type:3,steps:a,options:Bp(e.options)}}visitAnimate(e,t){const i=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return vD(Ow(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=vD(0,0,"");return a.dynamic=!0,a.strValue=i,a}return t=t||Ow(i,e),vD(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let o,a=e.styles?e.styles:U_({});if(5==a.type)o=this.visitKeyframes(a,t);else{let u=e.styles,p=!1;if(!u){p=!0;const E={};i.easing&&(E.easing=i.easing),u=U_(E)}t.currentTime+=i.duration+i.delay;const y=this.visitStyle(u,t);y.isEmptyStep=p,o=y}return t.currentAnimateTimings=null,{type:4,timings:i,style:o,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Du?i.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):i.push(u)}):i.push(e.styles);let o=!1,a=null;return i.forEach(u=>{if(Vw(u)){const p=u,y=p.easing;if(y&&(a=y,delete p.easing),!o)for(let E in p)if(p[E].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:i,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let o=t.currentTime,a=t.currentTime;i&&a>0&&(a-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void t.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const y=t.collectedStyles[t.currentQuerySelector],E=y[p];let D=!0;E&&(a!=o&&a>=E.startTime&&o<=E.endTime&&(t.errors.push(`The CSS property "${p}" that exists between the times of "${E.startTime}ms" and "${E.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${o}ms"`),D=!1),a=E.startTime),D&&(y[p]={startTime:a,endTime:o}),t.options&&function(n,e,t){const i=e.params||{},o=EP(n);o.length&&o.forEach(a=>{i.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(u[p],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let a=0;const u=[];let p=!1,y=!1,E=0;const D=e.steps.map(_e=>{const me=this._makeStyleAst(_e,t);let We=null!=me.offset?me.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Vw(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(Vw(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(me.styles),Ke=0;return null!=We&&(a++,Ke=me.offset=We),y=y||Ke<0||Ke>1,p=p||Ke<E,E=Ke,u.push(Ke),me});y&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&t.errors.push("Please ensure that all keyframe offsets are in order");const k=e.steps.length;let L=0;a>0&&a<k?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(L=1/(k-1));const U=k-1,G=t.currentTime,ie=t.currentAnimateTimings,te=ie.duration;return D.forEach((_e,me)=>{const We=L>0?me==U?1:L*me:u[me],Ke=We*te;t.currentTime=G+ie.delay+Ke,ie.duration=Ke,this._validateStyleAst(_e,t),_e.offset=We,i.styles.push(_e)}),i}visitReference(e,t){return{type:8,animation:qs(this,W_(e.animation),t),options:Bp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Bp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Bp(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(J8,"")),n=n.replace(/@\*/g,Iw).replace(/@\w+/g,t=>Iw+"-"+t.substr(1)).replace(/:animating/g,hD),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+a:a,Gs(t.collectedStyles,t.currentQuerySelector,{});const p=qs(this,W_(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:a,limit:o.limit||0,optional:!!o.optional,includeSelf:u,animation:p,originalSelector:e.selector,options:Bp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ow(e.timings,t.errors,!0);return{type:12,animation:qs(this,W_(e.animation),t),timings:i,options:null}}}class iH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vw(n){return!Array.isArray(n)&&"object"==typeof n}function Bp(n){return n?(n=mg(n)).params&&(n.params=function(n){return n?mg(n):null}(n.params)):n={},n}function vD(n,e,t){return{duration:n,delay:e,easing:t}}function _D(n,e,t,i,o,a,u=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:o,delay:a,totalTime:o+a,easing:u,subTimeline:p}}class Hw{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cH=new RegExp(":enter","g"),uH=new RegExp(":leave","g");function bD(n,e,t,i,o,a={},u={},p,y,E=[]){return(new dH).buildKeyframes(n,e,t,i,o,a,u,p,y,E)}class dH{buildKeyframes(e,t,i,o,a,u,p,y,E,D=[]){E=E||new Hw;const k=new ED(e,t,E,o,a,D,[]);k.options=y,k.currentTimeline.setStyles([u],null,k.errors,y),qs(this,i,k);const L=k.timelines.filter(U=>U.containsAnimation());if(L.length&&Object.keys(p).length){const U=L[L.length-1];U.allowOnlyTimelineStyles()||U.setStyles([p],null,k.errors,y)}return L.length?L.map(U=>U.buildKeyframes()):[_D(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const o=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,o,o.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let a=t.currentTimeline.currentTime;const u=null!=i.duration?Fp(i.duration):null,p=null!=i.delay?Fp(i.delay):null;return 0!==u&&e.forEach(y=>{const E=t.appendInstructionToTimeline(y,u,p);a=Math.max(a,E.duration+E.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),qs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let o=t;const a=e.options;if(a&&(a.params||a.delay)&&(o=t.createSubContext(a),o.transformIntoNewTimeline(),null!=a.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=$w);const u=Fp(a.delay);o.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>qs(this,u,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let o=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Fp(e.options.delay):0;e.steps.forEach(u=>{const p=t.createSubContext(e.options);a&&p.delayNextStep(a),qs(this,u,p),o=Math.max(o,p.currentTimeline.currentTime),i.push(p.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Ow(t.params?Nw(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),o.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(i.duration),this.visitStyle(a,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,o=t.currentAnimateTimings;!o&&i.getCurrentStyleProperties().length&&i.forwardFrame();const a=o&&o.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(a):i.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,o=t.currentTimeline.duration,a=i.duration,p=t.createSubContext().currentTimeline;p.easing=i.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*a),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(o+a),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,o=e.options||{},a=o.delay?Fp(o.delay):0;a&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=$w);let u=i;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((E,D)=>{t.currentQueryIndex=D;const k=t.createSubContext(e.options,E);a&&k.delayNextStep(a),E===t.element&&(y=k.currentTimeline),qs(this,e.animation,k),k.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,k.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,o=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),p=u*(t.currentQueryTotal-1);let y=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=p-y;break;case"full":y=i.currentStaggerTime}const D=t.currentTimeline;y&&D.delayNextStep(y);const k=D.currentTime;qs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=o.currentTime-k+(o.startTime-i.currentTimeline.startTime)}}const $w={};class ED{constructor(e,t,i,o,a,u,p,y){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=a,this.errors=u,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$w,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new zw(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let o=this.options;null!=i.duration&&(o.duration=Fp(i.duration)),null!=i.delay&&(o.delay=Fp(i.delay));const a=i.params;if(a){let u=o.params;u||(u=this.options.params={}),Object.keys(a).forEach(p=>{(!t||!u.hasOwnProperty(p))&&(u[p]=Nw(a[p],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(o=>{i[o]=t[o]})}}return e}createSubContext(e=null,t,i){const o=t||this.element,a=new ED(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=$w,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},a=new hH(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(a),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,o,a,u){let p=[];if(o&&p.push(this.element),e.length>0){e=(e=e.replace(cH,"."+this._enterClassName)).replace(uH,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=i);0!==i&&(E=i<0?E.slice(E.length+i,E.length):E.slice(0,i)),p.push(...E)}return!a&&0==p.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),p}}class zw{constructor(e,t,i,o){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new zw(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Du,this._currentKeyframe[t]=Du}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,o){t&&(this._previousKeyframe.easing=t);const a=o&&o.params||{},u=function(n,e){const t={};let i;return n.forEach(o=>{"*"===o?(i=i||Object.keys(e),i.forEach(a=>{t[a]=Du})):Hd(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(p=>{const y=Nw(u[p],a,i);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Du),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],o=e._styleSummary[t];(!i||o.time>i.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((p,y)=>{const E=Hd(p,!0);Object.keys(E).forEach(D=>{const k=E[D];"!"==k?e.add(D):k==Du&&t.add(D)}),i||(E.offset=y/this.duration),o.push(E)});const a=e.size?Fw(e.values()):[],u=t.size?Fw(t.values()):[];if(i){const p=o[0],y=mg(p);p.offset=0,y.offset=1,o=[p,y]}return _D(this.element,o,a,u,this.duration,this.startTime,this.easing,!1)}}class hH extends zw{constructor(e,t,i,o,a,u,p=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=a,this._stretchStartingKeyframe=p,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=i+t,p=t/u,y=Hd(e[0],!1);y.offset=0,a.push(y);const E=Hd(e[0],!1);E.offset=AP(p),a.push(E);const D=e.length-1;for(let k=1;k<=D;k++){let L=Hd(e[k],!1);L.offset=AP((t+L.offset*i)/u),a.push(L)}i=u,t=0,o="",e=a}return _D(this.element,e,this.preStyleProps,this.postStyleProps,i,t,o,!0)}}function AP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wD{}class fH extends wD{normalizePropertyName(e,t){return mD(e)}normalizeStyleValue(e,t,i,o){let a="";const u=i.toString().trim();if(mH[t]&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const p=i.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&o.push(`Please provide a CSS unit value for ${e}:${i}`)}return u+a}}const mH=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function TP(n,e,t,i,o,a,u,p,y,E,D,k,L){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:a,toState:i,toStyles:u,timelines:p,queriedElements:y,preStyleProps:E,postStyleProps:D,totalTime:k,errors:L}}const xD={};class MP{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,o){return function(n,e,t,i,o){return n.some(a=>a(e,t,i,o))}(this.ast.matchers,e,t,i,o)}buildStyles(e,t,i){const o=this._stateStyles["*"],a=this._stateStyles[e],u=o?o.buildStyles(t,i):{};return a?a.buildStyles(t,i):u}build(e,t,i,o,a,u,p,y,E,D){const k=[],L=this.ast.options&&this.ast.options.params||xD,G=this.buildStyles(i,p&&p.params||xD,k),ie=y&&y.params||xD,te=this.buildStyles(o,ie,k),_e=new Set,me=new Map,We=new Map,Ke="void"===o,Lt={params:At(At({},L),ie)},zn=D?[]:bD(e,t,this.ast.animation,a,u,G,te,Lt,E,k);let Yn=0;if(zn.forEach(Mo=>{Yn=Math.max(Mo.duration+Mo.delay,Yn)}),k.length)return TP(t,this._triggerName,i,o,Ke,G,te,[],[],me,We,Yn,k);zn.forEach(Mo=>{const Ro=Mo.element,Au=Gs(me,Ro,{});Mo.preStyleProps.forEach(mc=>Au[mc]=!0);const Tu=Gs(We,Ro,{});Mo.postStyleProps.forEach(mc=>Tu[mc]=!0),Ro!==t&&_e.add(Ro)});const Zo=Fw(_e.values());return TP(t,this._triggerName,i,o,Ke,G,te,zn,Zo,me,We,Yn)}}class vH{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},o=mg(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(o[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(p=>{let y=u[p];y.length>1&&(y=Nw(y,o,t));const E=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,E,y,t),i[E]=y})}}),i}}class bH{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new vH(o.style,o.options&&o.options.params||{},i)}),RP(this.states,"true","1"),RP(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new MP(e,o,this.states))}),this.fallbackTransition=function(n,e,t){return new MP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,o){return this.transitionFactories.find(u=>u.match(e,t,i,o))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function RP(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const wH=new Hw;class xH{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],o=yD(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=o}_buildPlayer(e,t,i){const o=e.element,a=lP(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(o,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const o=[],a=this._animations[e];let u;const p=new Map;if(a?(u=bD(this._driver,t,a,dD,kw,{},{},i,wH,o),u.forEach(D=>{const k=Gs(p,D.element,{});D.postStyleProps.forEach(L=>k[L]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),u=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);p.forEach((D,k)=>{Object.keys(D).forEach(L=>{D[L]=this._driver.computeStyle(k,L,Du)})});const E=Vd(u.map(D=>{const k=p.get(D.element);return this._buildPlayer(D,{},k)}));return this._playersById[e]=E,E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,o){const a=iD(t,"","","");return tD(this._getPlayer(e),i,a,o),()=>{}}command(e,t,i,o){if("register"==i)return void this.register(e,o[0]);if("create"==i)return void this.create(e,t,o[0]||{});const a=this._getPlayer(e);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const kP="ng-animate-queued",PP="ng-animate-disabled",IP=".ng-animate-disabled",AH=[],OP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},TH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Da="__ng_removed";class CD{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=null!=(n=i?e.value:e)?n:null,i){const a=mg(e);delete a.value,this.options=a}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(o=>{null==i[o]&&(i[o]=t[o])})}}}const G_="void",SD=new CD(G_);class MH{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Aa(t,this._hostClassName)}listen(e,t,i,o){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=i)&&"done"!=n)throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);var n;const a=Gs(this._elementListeners,e,[]),u={name:t,phase:i,callback:o};a.push(u);const p=Gs(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Aa(e,Pw),Aa(e,Pw+"-"+t),p[t]=SD),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(u);y>=0&&a.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,o=!0){const a=this._getTrigger(t),u=new DD(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Aa(e,Pw),Aa(e,Pw+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const E=new CD(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&y&&E.absorbOptions(y.options),p[t]=E,y||(y=SD),E.value!==G_&&y.value===E.value){if(!function(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let o=0;o<t.length;o++){const a=t[o];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,E.params)){const ie=[],te=a.matchStyles(y.value,y.params,ie),_e=a.matchStyles(E.value,E.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{Lp(e,te),vl(e,_e)})}return}const L=Gs(this._engine.playersByElement,e,[]);L.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let U=a.matchTransition(y.value,E.value,e,E.params),G=!1;if(!U){if(!o)return;U=a.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:y,toState:E,player:u,isFallbackTransition:G}),G||(Aa(e,kP),u.onStart(()=>{gg(e,kP)})),u.onDone(()=>{let ie=this.players.indexOf(u);ie>=0&&this.players.splice(ie,1);const te=this._engine.playersByElement.get(e);if(te){let _e=te.indexOf(u);_e>=0&&te.splice(_e,1)}}),this.players.push(u),L.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Iw,!0);i.forEach(o=>{if(o[Da])return;const a=this._engine.fetchNamespacesByElement(o);a.size?a.forEach(u=>u.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,i,o){const a=this._engine.statesByElement.get(e);if(a){const u=[];if(Object.keys(a).forEach(p=>{if(this._triggers[p]){const y=this.trigger(e,p,G_,o);y&&u.push(y)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&Vd(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const o=new Set;t.forEach(a=>{const u=a.name;if(o.has(u))return;o.add(u);const y=this._triggers[u].fallbackTransition,E=i[u]||SD,D=new CD(G_),k=new DD(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:y,fromState:E,toState:D,player:k,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(e):[];if(a&&a.length)o=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)i.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Da];(!a||a===OP)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Aa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const o=i.player;if(o.destroyed)return;const a=i.element,u=this._elementListeners.get(a);u&&u.forEach(p=>{if(p.name==i.triggerName){const y=iD(a,i.triggerName,i.fromState.value,i.toState.value);y._data=e,tD(i.player,p.phase,y,p.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(i)}),this._queue=[],t.sort((i,o)=>{const a=i.transition.ast.depCount,u=o.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class RH{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new MH(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let o=!1;for(let a=i;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),o=!0;break}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let o=this._namespaceLookup[e];o&&o.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const o=Object.keys(i);for(let a=0;a<o.length;a++){const u=i[o[a]].namespaceId;if(u){const p=this._fetchNamespace(u);p&&t.add(p)}}}return t}trigger(e,t,i,o){if(Uw(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,i,o),!0}return!1}insertNode(e,t,i,o){if(!Uw(t))return;const a=t[Da];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Aa(e,PP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),gg(e,PP))}removeNode(e,t,i,o){if(Uw(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),i){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,i,o){this.collectedLeaveElements.push(t),t[Da]={namespaceId:e,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,o,a){return Uw(t)?this._fetchNamespace(e).listen(t,i,o,a):()=>{}}_buildInstruction(e,t,i,o,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,o,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,Iw,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,hD,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Da];if(t&&t.setForRemoval){if(e[Da]=OP,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,IP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,IP,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Aa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Vd(t).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new Hw,o=[],a=new Map,u=[],p=new Map,y=new Map,E=new Map,D=new Set;this.disabledNodes.forEach(ct=>{D.add(ct);const Dt=this.driver.query(ct,".ng-animate-queued",!0);for(let Yt=0;Yt<Dt.length;Yt++)D.add(Dt[Yt])});const k=this.bodyNode,L=Array.from(this.statesByElement.keys()),U=LP(L,this.collectedEnterElements),G=new Map;let ie=0;U.forEach((ct,Dt)=>{const Yt=dD+ie++;G.set(Dt,Yt),ct.forEach(Cn=>Aa(Cn,Yt))});const te=[],_e=new Set,me=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Dt=this.collectedLeaveElements[ct],Yt=Dt[Da];Yt&&Yt.setForRemoval&&(te.push(Dt),_e.add(Dt),Yt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(Cn=>_e.add(Cn)):me.add(Dt))}const We=new Map,Ke=LP(L,Array.from(_e));Ke.forEach((ct,Dt)=>{const Yt=kw+ie++;We.set(Dt,Yt),ct.forEach(Cn=>Aa(Cn,Yt))}),e.push(()=>{U.forEach((ct,Dt)=>{const Yt=G.get(Dt);ct.forEach(Cn=>gg(Cn,Yt))}),Ke.forEach((ct,Dt)=>{const Yt=We.get(Dt);ct.forEach(Cn=>gg(Cn,Yt))}),te.forEach(ct=>{this.processLeaveNode(ct)})});const Lt=[],zn=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Yt=>{const Cn=Yt.player,oo=Yt.element;if(Lt.push(Cn),this.collectedEnterElements.length){const bl=oo[Da];if(bl&&bl.setForMove)return void Cn.destroy()}const _l=!k||!this.driver.containsElement(k,oo),Ks=We.get(oo),Ud=G.get(oo),Ki=this._buildInstruction(Yt,i,Ud,Ks,_l);if(Ki.errors&&Ki.errors.length)zn.push(Ki);else{if(_l)return Cn.onStart(()=>Lp(oo,Ki.fromStyles)),Cn.onDestroy(()=>vl(oo,Ki.toStyles)),void o.push(Cn);if(Yt.isFallbackTransition)return Cn.onStart(()=>Lp(oo,Ki.fromStyles)),Cn.onDestroy(()=>vl(oo,Ki.toStyles)),void o.push(Cn);Ki.timelines.forEach(bl=>bl.stretchStartingKeyframe=!0),i.append(oo,Ki.timelines),u.push({instruction:Ki,player:Cn,element:oo}),Ki.queriedElements.forEach(bl=>Gs(p,bl,[]).push(Cn)),Ki.preStyleProps.forEach((bl,Y_)=>{const ex=Object.keys(bl);if(ex.length){let Hp=y.get(Y_);Hp||y.set(Y_,Hp=new Set),ex.forEach(FD=>Hp.add(FD))}}),Ki.postStyleProps.forEach((bl,Y_)=>{const ex=Object.keys(bl);let Hp=E.get(Y_);Hp||E.set(Y_,Hp=new Set),ex.forEach(FD=>Hp.add(FD))})}});if(zn.length){const ct=[];zn.forEach(Dt=>{ct.push(`@${Dt.triggerName} has failed due to:\n`),Dt.errors.forEach(Yt=>ct.push(`- ${Yt}\n`))}),Lt.forEach(Dt=>Dt.destroy()),this.reportError(ct)}const Yn=new Map,Zo=new Map;u.forEach(ct=>{const Dt=ct.element;i.has(Dt)&&(Zo.set(Dt,Dt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,Yn))}),o.forEach(ct=>{const Dt=ct.element;this._getPreviousPlayers(Dt,!1,ct.namespaceId,ct.triggerName,null).forEach(Cn=>{Gs(Yn,Dt,[]).push(Cn),Cn.destroy()})});const Mo=te.filter(ct=>jP(ct,y,E)),Ro=new Map;FP(Ro,this.driver,me,E,Du).forEach(ct=>{jP(ct,y,E)&&Mo.push(ct)});const Tu=new Map;U.forEach((ct,Dt)=>{FP(Tu,this.driver,new Set(ct),y,"!")}),Mo.forEach(ct=>{const Dt=Ro.get(ct),Yt=Tu.get(ct);Ro.set(ct,At(At({},Dt),Yt))});const mc=[],_g=[],bg={};u.forEach(ct=>{const{element:Dt,player:Yt,instruction:Cn}=ct;if(i.has(Dt)){if(D.has(Dt))return Yt.onDestroy(()=>vl(Dt,Cn.toStyles)),Yt.disabled=!0,Yt.overrideTotalTime(Cn.totalTime),void o.push(Yt);let oo=bg;if(Zo.size>1){let Ks=Dt;const Ud=[];for(;Ks=Ks.parentNode;){const Ki=Zo.get(Ks);if(Ki){oo=Ki;break}Ud.push(Ks)}Ud.forEach(Ki=>Zo.set(Ki,oo))}const _l=this._buildAnimation(Yt.namespaceId,Cn,Yn,a,Tu,Ro);if(Yt.setRealPlayer(_l),oo===bg)mc.push(Yt);else{const Ks=this.playersByElement.get(oo);Ks&&Ks.length&&(Yt.parentPlayer=Vd(Ks)),o.push(Yt)}}else Lp(Dt,Cn.fromStyles),Yt.onDestroy(()=>vl(Dt,Cn.toStyles)),_g.push(Yt),D.has(Dt)&&o.push(Yt)}),_g.forEach(ct=>{const Dt=a.get(ct.element);if(Dt&&Dt.length){const Yt=Vd(Dt);ct.setRealPlayer(Yt)}}),o.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<te.length;ct++){const Dt=te[ct],Yt=Dt[Da];if(gg(Dt,kw),Yt&&Yt.hasAnimation)continue;let Cn=[];if(p.size){let _l=p.get(Dt);_l&&_l.length&&Cn.push(..._l);let Ks=this.driver.query(Dt,hD,!0);for(let Ud=0;Ud<Ks.length;Ud++){let Ki=p.get(Ks[Ud]);Ki&&Ki.length&&Cn.push(...Ki)}}const oo=Cn.filter(_l=>!_l.destroyed);oo.length?OH(this,Dt,oo):this.processLeaveNode(Dt)}return te.length=0,mc.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Dt=this.players.indexOf(ct);this.players.splice(Dt,1)}),ct.play()}),mc}elementContainsData(e,t){let i=!1;const o=t[Da];return o&&o.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,o,a){let u=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(u=p)}else{const p=this.playersByElement.get(e);if(p){const y=!a||a==G_;p.forEach(E=>{E.queued||!y&&E.triggerName!=o||u.push(E)})}}return(i||o)&&(u=u.filter(p=>!(i&&i!=p.namespaceId||o&&o!=p.triggerName))),u}_beforeAnimationBuild(e,t,i){const a=t.element,u=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const E=y.element,D=E!==a,k=Gs(i,E,[]);this._getPreviousPlayers(E,D,u,p,t.toState).forEach(U=>{const G=U.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),U.destroy(),k.push(U)})}Lp(a,t.fromStyles)}_buildAnimation(e,t,i,o,a,u){const p=t.triggerName,y=t.element,E=[],D=new Set,k=new Set,L=t.timelines.map(G=>{const ie=G.element;D.add(ie);const te=ie[Da];if(te&&te.removedBeforeQueried)return new fg(G.duration,G.delay);const _e=ie!==y,me=function(n){const e=[];return BP(n,e),e}((i.get(ie)||AH).map(Yn=>Yn.getRealPlayer())).filter(Yn=>!!Yn.element&&Yn.element===ie),We=a.get(ie),Ke=u.get(ie),Lt=lP(0,this._normalizer,0,G.keyframes,We,Ke),zn=this._buildPlayer(G,Lt,me);if(G.subTimeline&&o&&k.add(ie),_e){const Yn=new DD(e,p,ie);Yn.setRealPlayer(zn),E.push(Yn)}return zn});E.forEach(G=>{Gs(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const o=i.indexOf(t);i.splice(o,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const o=i.indexOf(t);i.splice(o,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,G.element,G))}),D.forEach(G=>Aa(G,yP));const U=Vd(L);return U.onDestroy(()=>{D.forEach(G=>gg(G,yP)),vl(y,t.toStyles)}),k.forEach(G=>{Gs(o,G,[]).push(U)}),U}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new fg(e.duration,e.delay)}}class DD{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new fg,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>tD(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Gs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Uw(n){return n&&1===n.nodeType}function NP(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function FP(n,e,t,i,o){const a=[];t.forEach(y=>a.push(NP(y)));const u=[];i.forEach((y,E)=>{const D={};y.forEach(k=>{const L=D[k]=e.computeStyle(E,k,o);(!L||0==L.length)&&(E[Da]=TH,u.push(E))}),n.set(E,D)});let p=0;return t.forEach(y=>NP(y,a[p++])),u}function LP(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const o=new Set(e),a=new Map;function u(p){if(!p)return 1;let y=a.get(p);if(y)return y;const E=p.parentNode;return y=t.has(E)?E:o.has(E)?1:u(E),a.set(p,y),y}return e.forEach(p=>{const y=u(p);1!==y&&t.get(y).push(p)}),t}const Ww="$$classes";function Aa(n,e){if(n.classList)n.classList.add(e);else{let t=n[Ww];t||(t=n[Ww]={}),t[e]=!0}}function gg(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Ww];t&&delete t[e]}}function OH(n,e,t){Vd(t).onDone(()=>n.processLeaveNode(e))}function BP(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof aP?BP(i.players,e):e.push(i)}}function jP(n,e,t){const i=t.get(n);if(!i)return!1;let o=e.get(n);return o?i.forEach(a=>o.add(a)):e.set(n,i),t.delete(n),!0}class Gw{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,a)=>{},this._transitionEngine=new RH(e,t,i),this._timelineEngine=new xH(e,t,i),this._transitionEngine.onRemovalComplete=(o,a)=>this.onRemovalComplete(o,a)}registerTrigger(e,t,i,o,a){const u=e+"-"+o;let p=this._triggerCache[u];if(!p){const y=[],E=yD(this._driver,a,y);if(y.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${y.join("\n - ")}`);p=function(n,e,t){return new bH(n,e,t)}(o,E,this._normalizer),this._triggerCache[u]=p}this._transitionEngine.registerTrigger(t,o,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,o){this._transitionEngine.insertNode(e,t,i,o)}onRemove(e,t,i,o){this._transitionEngine.removeNode(e,t,o||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,o){if("@"==i.charAt(0)){const[a,u]=uP(i);this._timelineEngine.command(a,t,u,o)}else this._transitionEngine.trigger(e,t,i,o)}listen(e,t,i,o,a){if("@"==i.charAt(0)){const[u,p]=uP(i);return this._timelineEngine.listen(u,t,p,a)}return this._transitionEngine.listen(e,t,i,o,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function VP(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=AD(e[0]),e.length>1&&(i=AD(e[e.length-1]))):e&&(t=AD(e)),t||i?new LH(n,t,i):null}let LH=(()=>{class n{constructor(t,i,o){this._element=t,this._startStyles=i,this._endStyles=o,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&vl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vl(this._element,this._initialStyles),this._endStyles&&(vl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lp(this._element,this._endStyles),this._endStyles=null),vl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function AD(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const o=t[i];BH(o)&&(e=e||{},e[o]=n[o])}return e}function BH(n){return"display"===n||"position"===n}const HP="animation",$P="animationend";class HH{constructor(e,t,i,o,a,u,p){this._element=e,this._name=t,this._duration=i,this._delay=o,this._easing=a,this._fillMode=u,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=y=>this._handleCallback(y)}apply(){(function(n,e){const t=MD(n,"").trim();let i=0;t.length&&(function(n,e){let t=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&t++;return t}(t)+1,e=`${t}, ${e}`),qw(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),WP(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){zP(this._element,this._name,"paused")}resume(){zP(this._element,this._name,"running")}setPosition(e){const t=UP(this._element,this._name);this._position=e*this._duration,qw(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),WP(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const i=MD(n,"").split(","),o=TD(i,e);o>=0&&(i.splice(o,1),qw(n,"",i.join(",")))}(this._element,this._name))}}function zP(n,e,t){qw(n,"PlayState",t,UP(n,e))}function UP(n,e){const t=MD(n,"");return t.indexOf(",")>0?TD(t.split(","),e):TD([t],e)}function TD(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function WP(n,e,t){t?n.removeEventListener($P,e):n.addEventListener($P,e)}function qw(n,e,t,i){const o=HP+e;if(null!=i){const a=n.style[o];if(a.length){const u=a.split(",");u[i]=t,t=u.join(",")}}n.style[o]=t}function MD(n,e){return n.style[HP+e]||""}class GP{constructor(e,t,i,o,a,u,p,y){this.element=e,this.keyframes=t,this.animationName=i,this._duration=o,this._delay=a,this._finalStyles=p,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=o+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new HH(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:gD(this.element,i))})}this.currentSnapshot=e}}class qH extends fg{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=fP(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class KP{constructor(){this._count=0}validateStyleProperty(e){return sD(e)}matchesElement(e,t){return aD(e,t)}containsElement(e,t){return cD(e,t)}query(e,t,i){return lD(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(p=>fP(p));let o=`@keyframes ${t} {\n`,a="";i.forEach(p=>{a=" ";const y=parseFloat(p.offset);o+=`${a}${100*y}% {\n`,a+=" ",Object.keys(p).forEach(E=>{const D=p[E];switch(E){case"offset":return;case"easing":return void(D&&(o+=`${a}animation-timing-function: ${D};\n`));default:return void(o+=`${a}${E}: ${D};\n`)}}),o+=`${a}}\n`}),o+="}\n";const u=document.createElement("style");return u.textContent=o,u}animate(e,t,i,o,a,u=[],p){const y=u.filter(te=>te instanceof GP),E={};wP(i,o)&&y.forEach(te=>{let _e=te.currentSnapshot;Object.keys(_e).forEach(me=>E[me]=_e[me])});const D=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(o=>{"offset"==o||"easing"==o||(e[o]=i[o])})}),e}(t=xP(e,t,E));if(0==i)return new qH(e,D);const k="gen_css_kf_"+this._count++,L=this.buildKeyframeElement(e,k,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(L);const G=VP(e,t),ie=new GP(e,t,k,i,o,a,D,G);return ie.onDestroy(()=>{var n;(n=L).parentNode.removeChild(n)}),ie}}class XP{constructor(e,t,i,o){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:gD(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ZH{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(QP().toString()),this._cssKeyframesDriver=new KP}validateStyleProperty(e){return sD(e)}matchesElement(e,t){return aD(e,t)}containsElement(e,t){return cD(e,t)}query(e,t,i){return lD(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,o,a,u=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,o,a,u);const D={duration:i,delay:o,fill:0==o?"both":"forwards"};a&&(D.easing=a);const k={},L=u.filter(G=>G instanceof XP);wP(i,o)&&L.forEach(G=>{let ie=G.currentSnapshot;Object.keys(ie).forEach(te=>k[te]=ie[te])});const U=VP(e,t=xP(e,t=t.map(G=>Hd(G,!1)),k));return new XP(e,t,D,U)}}function QP(){return cP()&&Element.prototype.animate||{}}let e6=(()=>{class n extends tP{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:nn.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?iP(t):t;return ZP(this._renderer,null,i,"register",[o]),new t6(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(ae(kd),ae(xt))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class t6 extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new n6(this._id,e,t||{},this._renderer)}}class n6{constructor(e,t,i,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ZP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function ZP(n,e,t,i,o){return n.setProperty(e,`@@${t}:${i}`,o)}const JP="@.disabled";let i6=(()=>{class n{constructor(t,i,o){this.delegate=t,this.engine=i,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(a,u)=>{const p=null==u?void 0:u.parentNode(a);p&&u.removeChild(p,a)}}createRenderer(t,i){const a=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let D=this._rendererCache.get(a);return D||(D=new eI("",a,this.engine),this._rendererCache.set(a,D)),D}const u=i.id,p=i.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=D=>{Array.isArray(D)?D.forEach(y):this.engine.registerTrigger(u,p,t,D.name,D)};return i.data.animation.forEach(y),new r6(this,p,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,o){t>=0&&t<this._microtaskId?this._zone.run(()=>i(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,p]=a;u(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(ae(kd),ae(Gw),ae(Ut))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();class eI{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,o=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,o){this.delegate.setAttribute(e,t,i,o)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,o){this.delegate.setStyle(e,t,i,o)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==JP?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class r6 extends eI{constructor(e,t,i,o){super(t,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==JP?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const o=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,o,a,u,p=>{this.factory.scheduleListenerCallback(p._data||-1,i,p)})}return this.delegate.listen(e,t,i)}}let a6=(()=>{class n extends Gw{constructor(t,i,o){super(t.body,i,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(ae(xt),ae(uD),ae(wD))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const yg=new pt("AnimationModuleType"),tI=[{provide:tP,useClass:e6},{provide:wD,useFactory:function(){return new fH}},{provide:Gw,useClass:a6},{provide:kd,useFactory:function(n,e,t){return new i6(n,e,t)},deps:[tw,Gw,Ut]}],nI=[{provide:uD,useFactory:function(){return"function"==typeof QP()?new ZH:new KP}},{provide:yg,useValue:"BrowserAnimations"},...tI],d6=[{provide:uD,useClass:mP},{provide:yg,useValue:"NoopAnimations"},...tI];let h6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?d6:nI}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({providers:nI,imports:[qM]}),n})();const iI=new vp("12.2.13"),_6=new pt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let jp,Ta=(()=>{class n{constructor(t,i,o){this._hasDoneGlobalChecks=!1,this._document=o,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!dS()||$1())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const i=getComputedStyle(t);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&iI.full!==eP.full&&console.warn("The Angular Material version ("+iI.full+") does not match the Angular CDK version ("+eP.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(ae(Jk),ae(_6,8),ae(xt))},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[H_],H_]}),n})();function rI(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Ws(e)}}}function oI(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function b6(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ws(e)}}}try{jp="undefined"!=typeof Intl}catch(n){jp=!1}class P6{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const aI={enterDuration:225,exitDuration:150},RD=V1({passive:!0}),cI=["mousedown","touchstart"],lI=["mouseup","mouseleave","touchend","touchcancel"];class O6{constructor(e,t,i,o){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Rp(i))}fadeInRipple(e,t,i={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},aI),i.animation);i.centered&&(e=o.left+o.width/2,t=o.top+o.height/2);const u=i.radius||function(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),o=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+o*o)}(e,t,o),p=e-o.left,y=t-o.top,E=a.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=p-u+"px",D.style.top=y-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=i.color&&(D.style.backgroundColor=i.color),D.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(D),window.getComputedStyle(D).getPropertyValue("opacity"),D.style.transform="scale(1)";const k=new P6(this,D,i);return k.state=0,this._activeRipples.add(k),i.persistent||(this._mostRecentTransientRipple=k),this._runTimeoutOutsideZone(()=>{const L=k===this._mostRecentTransientRipple;k.state=1,!i.persistent&&(!L||!this._isPointerDown)&&k.fadeOut()},E),k}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,o=Object.assign(Object.assign({},aI),e.config.animation);i.style.transitionDuration=`${o.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.parentNode.removeChild(i)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Rp(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(cI))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(lI),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=zk(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Uk(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,RD)})})}_removeTriggerEvents(){this._triggerElement&&(cI.forEach(e=>{this._triggerElement.removeEventListener(e,this,RD)}),this._pointerUpEventsRegistered&&lI.forEach(e=>{this._triggerElement.removeEventListener(e,this,RD)}))}}const L6=new pt("mat-ripple-global-options");let Xw=(()=>{class n{constructor(t,i,o,a,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new O6(this,i,t,o)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,o){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(s(Hn),s(Ut),s(Li),s(L6,8),s(yg,8))},n.\u0275dir=Gt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Gi("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),uI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[Ta,Sw],Ta]}),n})();const fI=["mat-button",""],mI=["*"],G6=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],q6=oI(rI(b6(class{constructor(n){this._elementRef=n}})));let kD=(()=>{class n extends q6{constructor(t,i,o){super(t),this._focusMonitor=i,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of G6)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(s(Hn),s(Q1),s(yg,8))},n.\u0275cmp=Hr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&Km(Xw,5),2&t){let o;Pd(o=Id())&&(i.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(Co("disabled",i.disabled||null),Gi("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Mn],attrs:fI,ngContentSelectors:mI,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(it(),f(0,"span",0),Ce(1),g(),v(2,"span",1),v(3,"span",2)),2&t&&(Or(2),Gi("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Xw],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),yI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[uI,Ta],Ta]}),n})();const vI=new Set;let vg,_I=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Y6}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function(n){if(!vI.has(n))try{vg||(vg=document.createElement("style"),vg.setAttribute("type","text/css"),document.head.appendChild(vg)),vg.sheet&&(vg.sheet.insertRule(`@media ${n} {body{ }}`,0),vI.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(ae(Li))},n.\u0275prov=Qe({factory:function(){return new n(ae(Li))},token:n,providedIn:"root"}),n})();function Y6(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let bI=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new yt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return EI(bw(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let a=QM(EI(bw(t)).map(u=>this._registerQuery(u).observable));return a=iw(a.pipe(dr(1)),a.pipe(Nk(1),function(n,e=dk){return Ln((t,i)=>{let o=null,a=null,u=null;const p=()=>{if(o){o.unsubscribe(),o=null;const E=a;a=null,i.next(E)}};function y(){const E=u+n,D=e.now();if(D<E)return o=this.schedule(void 0,E-D),void i.add(o);p()}t.subscribe(new oe(i,E=>{a=E,u=e.now(),o||(o=e.schedule(y,n),i.add(o))},()=>{p(),i.complete()},void 0,()=>{a=o=null}))})}(0))),a.pipe(Pt(u=>{const p={matches:!1,breakpoints:{}};return u.forEach(({matches:y,query:E})=>{p.matches=p.matches||y,p.breakpoints[E]=y}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),a={observable:new Be(u=>{const p=y=>this._zone.run(()=>u.next(y));return i.addListener(p),()=>{i.removeListener(p)}}).pipe(rw(i),Pt(({matches:u})=>({query:t,matches:u})),kp(this._destroySubject)),mql:i};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(ae(_I),ae(Ut))},n.\u0275prov=Qe({factory:function(){return new n(ae(_I),ae(Ut))},token:n,providedIn:"root"}),n})();function EI(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Q6(n,e){if(1&n){const t=ve();f(0,"div",1),f(1,"button",2),z("click",function(){return function(n){Ue.lFrame.contextLView=n}(t),pe().action()}),xr(2),g(),g()}if(2&n){const t=pe();Or(2),mp(t.data.action)}}function Z6(n,e){}const wI=new pt("MatSnackBarData");class Qw{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const J6=Math.pow(2,31)-1;class PD{constructor(e,t){this._overlayRef=t,this._afterDismissed=new yt,this._afterOpened=new yt,this._onAction=new yt,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,J6))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let e9=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(s(PD),s(wI))},n.\u0275cmp=Hr({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,i){1&t&&(f(0,"span"),xr(1),g(),nc(2,Q6,3,1,"div",0)),2&t&&(Or(1),mp(i.data.message),Or(1),l("ngIf",i.hasAction))},directives:[XE,kD],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),n})();const t9={snackBarState:H8("state",[rP("void, hidden",U_({transform:"scale(0.8)",opacity:0})),rP("visible",U_({transform:"scale(1)",opacity:1})),oP("* => visible",nP("150ms cubic-bezier(0, 0, 0.2, 1)")),oP("* => void, * => hidden",nP("75ms cubic-bezier(0.4, 0.0, 1, 1)",U_({opacity:0})))])};let n9=(()=>{class n extends W1{constructor(t,i,o,a,u){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=u,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new yt,this._onExit=new yt,this._onEnter=new yt,this._animationState="void",this.attachDomPortal=p=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(p)),this._live="assertive"!==u.politeness||u.announcementMessage?"off"===u.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:i,toState:o}=t;if(("void"===o&&"void"!==i||"hidden"===o)&&this._completeExit(),"visible"===o){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(dr(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>t.classList.add(o)):t.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(o=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),null==o||o.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(s(Ut),s(Hn),s(bp),s(Li),s(Qw))},n.\u0275cmp=Hr({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,i){if(1&t&&Km(Mw,7),2&t){let o;Pd(o=Id())&&(i._portalOutlet=o.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,i){1&t&&j("@state.done",function(a){return i.onAnimationEnd(a)}),2&t&&_a("@state",i._animationState)},features:[Mn],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(f(0,"div",0),nc(1,Z6,0,0,"ng-template",1),g(),v(2,"div")),2&t&&(Or(2),Co("aria-live",i._live)("role",i._role))},directives:[Mw],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[t9.snackBarState]}}),n})(),xI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[v8,xk,t1,yI,Ta],Ta]}),n})();const CI=new pt("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Qw}});let r9=(()=>{class n{constructor(t,i,o,a,u,p){this._overlay=t,this._live=i,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=u,this._defaultConfig=p,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=e9,this.snackBarContainerComponent=n9,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",o){const a=Object.assign(Object.assign({},this._defaultConfig),o);return a.data={message:t,action:i},a.announcementMessage===t&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const a=cn.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:Qw,useValue:i}]}),u=new U1(this.snackBarContainerComponent,i.viewContainerRef,a),p=t.attach(u);return p.instance.snackBarConfig=i,p.instance}_attach(t,i){const o=Object.assign(Object.assign(Object.assign({},new Qw),this._defaultConfig),i),a=this._createOverlay(o),u=this._attachSnackBarContainer(a,o),p=new PD(u,a);if(t instanceof zs){const y=new Tw(t,null,{$implicit:o.data,snackBarRef:p});p.instance=u.attachTemplatePortal(y)}else{const y=this._createInjector(o,p),E=new U1(t,void 0,y),D=u.attachComponentPortal(E);p.instance=D.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(kp(a.detachments())).subscribe(y=>{const E=a.overlayElement.classList;y.matches?E.add(this.handsetCssClass):E.remove(this.handsetCssClass)}),o.announcementMessage&&u._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(p,o),this._openedSnackBarRef=p,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new q1;i.direction=t.direction;let o=this._overlay.position().global();const a="rtl"===t.direction,u="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!a||"end"===t.horizontalPosition&&a,p=!u&&"center"!==t.horizontalPosition;return u?o.left("0"):p?o.right("0"):o.centerHorizontally(),"top"===t.verticalPosition?o.top("0"):o.bottom("0"),i.positionStrategy=o,this._overlay.create(i)}_createInjector(t,i){return cn.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:PD,useValue:i},{provide:wI,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(ae(z_),ae(X1),ae(cn),ae(bI),ae(n,12),ae(CI))},n.\u0275prov=Qe({factory:function(){return new n(ae(z_),ae(X1),ae(cu),ae(bI),ae(n,12),ae(CI))},token:n,providedIn:xI}),n})();class a9{}class $d{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const o=t.slice(0,i),a=o.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(o,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const o=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof $d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new $d;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof $d?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(p=>-1===a.indexOf(p)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class c9{encodeKey(e){return SI(e)}encodeValue(e){return SI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const u9=/%(\d[a-f0-9])/gi,d9={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function SI(n){return encodeURIComponent(n).replace(u9,(e,t)=>{var i;return null!=(i=d9[t])?i:e})}function DI(n){return`${n}`}class zd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new c9,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const a=o.indexOf("="),[u,p]=-1==a?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,a)),e.decodeValue(o.slice(a+1))],y=t.get(u)||[];y.push(p),t.set(u,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const o=e[i];Array.isArray(o)?o.forEach(a=>{t.push({param:i,value:a,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new zd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(DI(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const o=i.indexOf(DI(e.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class h9{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function AI(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function TI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function MI(n){return"undefined"!=typeof FormData&&n instanceof FormData}class K_{constructor(e,t,i,o){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,a=o):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new $d),this.context||(this.context=new h9),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+u}}else this.params=new zd,this.urlWithParams=t}serializeBody(){return null===this.body?null:AI(this.body)||TI(this.body)||MI(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof zd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MI(this.body)?null:TI(this.body)?this.body.type||null:AI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var k;const t=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,E=e.params||this.params;const D=null!=(k=e.context)?k:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((L,U)=>L.set(U,e.setHeaders[U]),y)),e.setParams&&(E=Object.keys(e.setParams).reduce((L,U)=>L.set(U,e.setParams[U]),E)),new K_(t,i,a,{params:E,headers:y,context:D,reportProgress:p,responseType:o,withCredentials:u})}}var mo=(()=>((mo=mo||{})[mo.Sent=0]="Sent",mo[mo.UploadProgress=1]="UploadProgress",mo[mo.ResponseHeader=2]="ResponseHeader",mo[mo.DownloadProgress=3]="DownloadProgress",mo[mo.Response=4]="Response",mo[mo.User=5]="User",mo))();class ID extends class{constructor(e,t=200,i="OK"){this.headers=e.headers||new $d,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=mo.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ID({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function OD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ND=(()=>{class n{constructor(t){this.handler=t}request(t,i,o={}){let a;if(t instanceof K_)a=t;else{let y,E;y=o.headers instanceof $d?o.headers:new $d(o.headers),o.params&&(E=o.params instanceof zd?o.params:new zd({fromObject:o.params})),a=new K_(t,i,void 0!==o.body?o.body:null,{headers:y,context:o.context,params:E,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const u=kt(a).pipe(sg(y=>this.handler.handle(y)));if(t instanceof K_||"events"===o.observe)return u;const p=u.pipe(wu(y=>y instanceof ID));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe(Pt(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe(Pt(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe(Pt(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return p.pipe(Pt(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new zd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,OD(o,i))}post(t,i,o={}){return this.request("POST",t,OD(o,i))}put(t,i,o={}){return this.request("PUT",t,OD(o,i))}}return n.\u0275fac=function(t){return new(t||n)(ae(a9))},n.\u0275prov=Qe({token:n,factory:n.\u0275fac}),n})();const y9=["*"];function kI(n){return Error(`Unable to find icon with the name "${n}"`)}function PI(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function II(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Vp{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Zw=(()=>{class n{constructor(t,i,o,a){this._httpClient=t,this._sanitizer=i,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=o}addSvgIcon(t,i,o){return this.addSvgIconInNamespace("",t,i,o)}addSvgIconLiteral(t,i,o){return this.addSvgIconLiteralInNamespace("",t,i,o)}addSvgIconInNamespace(t,i,o,a){return this._addSvgIconConfig(t,i,new Vp(o,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,o,a){const u=this._sanitizer.sanitize(yn.HTML,o);if(!u)throw II(o);return this._addSvgIconConfig(t,i,new Vp("",u,a))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,o){return this._addSvgIconSetConfig(t,new Vp(i,null,o))}addSvgIconSetLiteralInNamespace(t,i,o){const a=this._sanitizer.sanitize(yn.HTML,i);if(!a)throw II(i);return this._addSvgIconSetConfig(t,new Vp("",a,o))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(yn.RESOURCE_URL,t);if(!i)throw PI(t);const o=this._cachedIconsByUrl.get(i);return o?kt(Jw(o)):this._loadSvgIconFromConfig(new Vp(t,null)).pipe(To(a=>this._cachedIconsByUrl.set(i,a)),Pt(a=>Jw(a)))}getNamedSvgIcon(t,i=""){const o=OI(i,t);let a=this._svgIconConfigs.get(o);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(i,t),a)return this._svgIconConfigs.set(o,a),this._getSvgFromConfig(a);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(t,u):function(n,e){const t=Oe(n)?n:()=>n,i=o=>o.error(t());return new Be(i)}(kI(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?kt(Jw(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Pt(i=>Jw(i)))}_getSvgFromIconSetConfigs(t,i){const o=this._extractIconWithNameFromAnySet(t,i);return o?kt(o):function(...n){const e=th(n),{args:t,keys:i}=YM(n),o=new Be(a=>{const{length:u}=t;if(!u)return void a.complete();const p=new Array(u);let y=u,E=u;for(let D=0;D<u;D++){let k=!1;yi(t[D]).subscribe(new oe(a,L=>{k||(k=!0,E--),p[D]=L},()=>y--,void 0,()=>{(!y||!k)&&(E||a.next(i?XM(i,p):p),a.complete())}))}});return e?o.pipe(h1(e)):o}(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(xu(p=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(yn.RESOURCE_URL,u.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(E)),kt(null)})))).pipe(Pt(()=>{const u=this._extractIconWithNameFromAnySet(t,i);if(!u)throw kI(t);return u}))}_extractIconWithNameFromAnySet(t,i){for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.svgText&&a.svgText.indexOf(t)>-1){const u=this._svgElementFromConfig(a),p=this._extractSvgIconFromSet(u,t,a.options);if(p)return p}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(To(i=>t.svgText=i),Pt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?kt(null):this._fetchIcon(t).pipe(To(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,o){const a=t.querySelector(`[id="${i}"]`);if(!a)return null;const u=a.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,o);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),o);const p=this._svgElementFromString("<svg></svg>");return p.appendChild(u),this._setSvgAttributes(p,o)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){const i=this._svgElementFromString("<svg></svg>"),o=t.attributes;for(let a=0;a<o.length;a++){const{name:u,value:p}=o[a];"id"!==u&&i.setAttribute(u,p)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[a].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:o,options:a}=t,u=null!==(i=null==a?void 0:a.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const p=this._sanitizer.sanitize(yn.RESOURCE_URL,o);if(!p)throw PI(o);const y=this._inProgressUrlFetches.get(p);if(y)return y;const E=this._httpClient.get(p,{responseType:"text",withCredentials:u}).pipe(rR(()=>this._inProgressUrlFetches.delete(p)),vi());return this._inProgressUrlFetches.set(p,E),E}_addSvgIconConfig(t,i,o){return this._svgIconConfigs.set(OI(t,i),o),this}_addSvgIconSetConfig(t,i){const o=this._iconSetConfigs.get(t);return o?o.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let o=0;o<this._resolvers.length;o++){const a=this._resolvers[o](i,t);if(a)return b9(a)?new Vp(a.url,null,a.options):new Vp(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(ae(ND,8),ae(og),ae(xt,8),ae(Ls))},n.\u0275prov=Qe({factory:function(){return new n(ae(ND,8),ae(og),ae(xt,8),ae(Ls))},token:n,providedIn:"root"}),n})();function Jw(n){return n.cloneNode(!0)}function OI(n,e){return n+":"+e}function b9(n){return!(!n.url||!n.options)}const E9=oI(class{constructor(n){this._elementRef=n}}),w9=new pt("mat-icon-location",{providedIn:"root",factory:function(){const n=Ju(xt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),NI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],S9=NI.map(n=>`[${n}]`).join(", "),D9=/^url\(['"]?#(.*?)['"]?\)$/;let A9=(()=>{class n extends E9{constructor(t,i,o,a,u){super(t),this._iconRegistry=i,this._location=a,this._errorHandler=u,this._inline=!1,this._currentIconFetch=vn.EMPTY,o||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Ws(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=t.querySelectorAll("style");for(let a=0;a<i.length;a++)i[a].textContent+=" ";const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const o=t.childNodes[i];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&t.removeChild(o)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((o,a)=>{o.forEach(u=>{a.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(S9),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<i.length;a++)NI.forEach(u=>{const p=i[a],y=p.getAttribute(u),E=y?y.match(D9):null;if(E){let D=o.get(p);D||(D=[],o.set(p,D)),D.push({name:u,value:E[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,o]=this._splitIconName(t);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(dr(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${o}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(s(Hn),s(Zw),Xl("aria-hidden"),s(w9),s(Ls))},n.\u0275cmp=Hr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(Co("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),Gi("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Mn],ngContentSelectors:y9,decls:1,vars:0,template:function(t,i){1&t&&(it(),Ce(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),T9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n}),n.\u0275inj=wn({imports:[[Ta],Ta]}),n})();const M9=["jsDropZone"],R9=["canvas"];function k9(n,e){1&n&&(f(0,"mat-icon"),xr(1,"zoom_out_map"),g())}function P9(n,e){1&n&&(f(0,"mat-icon"),xr(1,"zoom_in_map"),g())}function I9(n,e){1&n&&(f(0,"span"),xr(1,"Toggle to Viewer Mode"),g())}function O9(n,e){1&n&&(f(0,"span"),xr(1,"Toggle to Editor Mode"),g())}let N9=(()=>{class n{constructor(t,i){this.bpmnService=t,this._snackbar=i,this.canvasMode=localStorage.getItem("mode")||"editor",this.isFullScreenViewActive=!1}create(){this.bpmnService.createNewDiagram(sk.NEW_DIAGRAM_XML,this.el)}showSnackBar(t){this._snackbar.open(t,"Ok",{duration:2e3})}ngOnInit(){var t=this;return O_(function*(){var i,o;const a=localStorage.getItem("diagram");yield t.bpmnService.createNewDiagram(a,t.el,"editor"==t.canvasMode),null===(o=null===(i=t.bpmnService)||void 0===i?void 0:i.eventOutput)||void 0===o||o.subscribe(u=>{t.showSnackBar(`Clicked element \u{1f449} ${u}`)})})()}ngAfterContentInit(){this.bpmnService.attachModelerToCanvas(this.canvas)}save(){var t=this;return O_(function*(){const i=yield t.bpmnService.exportDiagram();localStorage.setItem("diagram",i),t.showSnackBar("Saved into local storage!! \u{1f680}")})()}zoomIn(){this.bpmnService.zoomController(1)}zoomOut(){this.bpmnService.zoomController(-1)}resetZoom(){this.bpmnService.zoomController(0,!0)}fullScreen(){this.isFullScreenViewActive=!this.isFullScreenViewActive,this.bpmnService.toggleFullScreenView(this.el)}toggleView(){this.canvasMode="editor"==this.canvasMode?"viewer":"editor",localStorage.setItem("mode",this.canvasMode),window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(s(e4),s(r9))},n.\u0275cmp=Hr({type:n,selectors:[["app-root"]],viewQuery:function(t,i){if(1&t&&(Km(M9,7),Km(R9,7)),2&t){let o;Pd(o=Id())&&(i.el=o.first),Pd(o=Id())&&(i.canvas=o.first)}},decls:38,vars:4,consts:[[1,"content"],["jsDropZone",""],[1,"message","intro"],[1,"note"],[3,"click"],[1,"message","error"],[1,"canvas"],["canvas",""],[1,"io-zoom-control"],[1,"io-control-list"],["mat-icon-button","",3,"click"],[4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","gap","10px"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"]],template:function(t,i){1&t&&(f(0,"div",0,1),f(2,"div",2),f(3,"div",3),xr(4," Drop BPMN diagram from your desktop or "),f(5,"span",4),z("click",function(){return i.create()}),xr(6,"create a new diagram"),g(),xr(7," to get started. "),g(),g(),f(8,"div",5),f(9,"div",3),f(10,"p"),xr(11,"Ooops, we could not display the BPMN 2.0 diagram."),g(),g(),g(),v(12,"div",6,7),f(14,"div",8),f(15,"ul",9),f(16,"li"),f(17,"button",10),z("click",function(){return i.zoomIn()}),f(18,"mat-icon"),xr(19,"zoom_in"),g(),g(),g(),f(20,"li"),f(21,"button",10),z("click",function(){return i.zoomOut()}),f(22,"mat-icon"),xr(23,"zoom_out"),g(),g(),g(),f(24,"li"),f(25,"button",10),z("click",function(){return i.resetZoom()}),f(26,"mat-icon"),xr(27,"crop_free"),g(),g(),g(),f(28,"li"),f(29,"button",10),z("click",function(){return i.fullScreen()}),nc(30,k9,2,0,"mat-icon",11),nc(31,P9,2,0,"mat-icon",11),g(),g(),g(),g(),g(),f(32,"div",12),f(33,"button",13),z("click",function(){return i.save()}),xr(34,"Save to Browser"),g(),f(35,"button",14),z("click",function(){return i.toggleView()}),nc(36,I9,2,0,"span",11),nc(37,O9,2,0,"span",11),g(),g()),2&t&&(Or(30),l("ngIf",!i.isFullScreenViewActive),Or(1),l("ngIf",i.isFullScreenViewActive),Or(5),l("ngIf","editor"==i.canvasMode),Or(1),l("ngIf","viewer"==i.canvasMode))},directives:[kD,A9,XE],styles:[".io-zoom-control[_ngcontent-%COMP%]{width:auto;position:absolute;right:5px;bottom:10px}.io-control-list[_ngcontent-%COMP%]{list-style:none;padding:5px;margin:0}"]}),n})(),F9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Sn({type:n,bootstrap:[N9]}),n.\u0275inj=wn({providers:[],imports:[[qM,Q5,h6,yI,xI,T9]]}),n})();(function(){if(gT)throw new Error("Cannot enable prod mode after platform setup.");mT=!1})(),Cj().bootstrapModule(F9).catch(n=>console.error(n))}},so=>{so(so.s=941)}]);